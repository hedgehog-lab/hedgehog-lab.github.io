/*! For license information please see c5e9bee817a687f42a11.worker.js.LICENSE.txt */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=36)}([,function(e,t,n){var r;!function(n){"use strict";var i=function(e){return.5*(Math.exp(e)+Math.exp(-e))},a=function(e){return.5*(Math.exp(e)-Math.exp(-e))},s=function(){throw SyntaxError("Invalid Param")};function o(e,t){var n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function u(e,t){if(!(this instanceof u))return new u(e,t);var n=function(e,t){var n={re:0,im:0};if(void 0===e||null===e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return u.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return u.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):s();break;case"string":n.im=n.re=0;var r=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,a=0;null===r&&s();for(var o=0;o<r.length;o++){var c=r[o];" "===c||"\t"===c||"\n"===c||("+"===c?i++:"-"===c?a++:"i"===c||"I"===c?(i+a===0&&s()," "===r[o+1]||isNaN(r[o+1])?n.im+=parseFloat((a%2?"-":"")+"1"):(n.im+=parseFloat((a%2?"-":"")+r[o+1]),o++),i=a=0):((i+a===0||isNaN(c))&&s(),"i"===r[o+1]||"I"===r[o+1]?(n.im+=parseFloat((a%2?"-":"")+c),o++):n.re+=parseFloat((a%2?"-":"")+c),i=a=0))}i+a>0&&s();break;case"number":n.im=0,n.re=e;break;default:s()}return isNaN(n.re)||isNaN(n.im),n}(e,t);this.re=n.re,this.im=n.im}u.prototype={re:0,im:0,sign:function(){var e=this.abs();return new u(this.re/e,this.im/e)},add:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re+n.re,this.im+n.im)},sub:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:new u(this.re-n.re,this.im-n.im)},mul:function(e,t){var n=new u(e,t);return this.isInfinite()&&n.isZero()||this.isZero()&&n.isInfinite()?u.NAN:this.isInfinite()||n.isInfinite()?u.INFINITY:0===n.im&&0===this.im?new u(this.re*n.re,0):new u(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){var n=new u(e,t);if(this.isZero()&&n.isZero()||this.isInfinite()&&n.isInfinite())return u.NAN;if(this.isInfinite()||n.isZero())return u.INFINITY;if(this.isZero()||n.isInfinite())return u.ZERO;e=this.re,t=this.im;var r,i,a=n.re,s=n.im;return 0===s?new u(e/a,t/a):Math.abs(a)<Math.abs(s)?new u((e*(i=a/s)+t)/(r=a*i+s),(t*i-e)/r):new u((e+t*(i=s/a))/(r=s*i+a),(t-e*i)/r)},pow:function(e,t){var n=new u(e,t);if(e=this.re,t=this.im,n.isZero())return u.ONE;if(0===n.im){if(0===t&&e>=0)return new u(Math.pow(e,n.re),0);if(0===e)switch((n.re%4+4)%4){case 0:return new u(Math.pow(t,n.re),0);case 1:return new u(0,Math.pow(t,n.re));case 2:return new u(-Math.pow(t,n.re),0);case 3:return new u(0,-Math.pow(t,n.re))}}if(0===e&&0===t&&n.re>0&&n.im>=0)return u.ZERO;var r=Math.atan2(t,e),i=o(e,t);return e=Math.exp(n.re*i-n.im*r),t=n.im*i+n.re*r,new u(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,n=this.re,r=this.im,i=this.abs();if(n>=0){if(0===r)return new u(Math.sqrt(n),0);e=.5*Math.sqrt(2*(i+n))}else e=Math.abs(r)/Math.sqrt(2*(i-n));return t=n<=0?.5*Math.sqrt(2*(i-n)):Math.abs(r)/Math.sqrt(2*(i+n)),new u(e,r<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new u(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new u(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(e<-t||e>t)return Math.cos(e)-1;var n=e*e;return n*(n*(1/24+n*(-1/720+n*(1/40320+n*(-1/3628800+n*(1/4790014600+n*(-1/87178291200+n*(1/20922789888e3)))))))-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new u(o(e,t),Math.atan2(t,e))},abs:function(){return function(e,t){var n=Math.abs(e),r=Math.abs(t);return n<3e3&&r<3e3?Math.sqrt(n*n+r*r):(n<r?(n=r,r=e/t):r=t/e,n*Math.sqrt(1+r*r))}(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new u(Math.sin(e)*i(t),Math.cos(e)*a(t))},cos:function(){var e=this.re,t=this.im;return new u(Math.cos(e)*i(t),-Math.sin(e)*a(t))},tan:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)+i(t);return new u(Math.sin(e)/n,a(t)/n)},cot:function(){var e=2*this.re,t=2*this.im,n=Math.cos(e)-i(t);return new u(-Math.sin(e)/n,a(t)/n)},sec:function(){var e=this.re,t=this.im,n=.5*i(2*t)+.5*Math.cos(2*e);return new u(Math.cos(e)*i(t)/n,Math.sin(e)*a(t)/n)},csc:function(){var e=this.re,t=this.im,n=.5*i(2*t)-.5*Math.cos(2*e);return new u(Math.sin(e)*i(t)/n,-Math.cos(e)*a(t)/n)},asin:function(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(r.im,-r.re)},acos:function(){var e=this.re,t=this.im,n=new u(t*t-e*e+1,-2*e*t).sqrt(),r=new u(n.re-t,n.im+e).log();return new u(Math.PI/2-r.im,r.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new u(0,1/0);if(-1===t)return new u(0,-1/0)}var n=e*e+(1-t)*(1-t),r=new u((1-t*t-e*e)/n,-2*e/n).log();return new u(-.5*r.im,.5*r.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new u(Math.atan2(1,e),0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atan():new u(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acos():new u(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(Math.PI/2,1/0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asin():new u(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new u(a(e)*Math.cos(t),i(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new u(i(e)*Math.cos(t),a(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,n=i(e)+Math.cos(t);return new u(a(e)/n,Math.sin(t)/n)},coth:function(){var e=2*this.re,t=2*this.im,n=i(e)-Math.cos(t);return new u(a(e)/n,-Math.sin(t)/n)},csch:function(){var e=this.re,t=this.im,n=Math.cos(2*t)-i(2*e);return new u(-2*a(e)*Math.cos(t)/n,2*i(e)*Math.sin(t)/n)},sech:function(){var e=this.re,t=this.im,n=Math.cos(2*t)+i(2*e);return new u(2*i(e)*Math.cos(t)/n,-2*a(e)*Math.sin(t)/n)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else{t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,a=r*r+t*t,s=0!==a?new u((i*r-t*t)/a,(t*r+i*t)/a):new u(-1!==e?e/0:0,0!==t?t/0:0),c=s.re;return s.re=o(s.re,s.im)/2,s.im=Math.atan2(s.im,c)/2,n&&(s.im=-s.im),s},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new u(0,Math.PI/2);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).atanh():new u(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new u(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).asinh():new u(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return u.INFINITY;var n=e*e+t*t;return 0!==n?new u(e/n,-t/n).acosh():new u(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var e=this.re,t=this.im,n=e*e+t*t;return new u(e/n,-t/n)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new u(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new u(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new u(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var n=new u(e,t);return Math.abs(n.re-this.re)<=u.EPSILON&&Math.abs(n.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isZero()?"0":this.isInfinite()?"Infinity":(0!==e&&(n+=e),0!==t&&(0!==e?n+=t<0?" - ":" + ":t<0&&(n+="-"),1!==(t=Math.abs(t))&&(n+=t),n+="i"),n||"0")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.re)||isNaN(this.im)})),isZero:function(){return(0===this.re||-0===this.re)&&(0===this.im||-0===this.im)},isFinite:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.re)&&isFinite(this.im)})),isInfinite:function(){return!(this.isNaN()||this.isFinite())}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-16,void 0===(r=function(){return u}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){(function(e){var n,r=function(e){"use strict";var t=new Fe,n=e.bigInt,i=e.bigDec;i.set({precision:250});var a={},s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083],o={},u={callPeekers:!1,init_primes:1e3,exclude:[],suppress_errors:!1,PARSE2NUMBER:!1,SAFE:!1,IMAGINARY:"i",FUNCTION_MODULES:[Math],ALLOW_CHARS:["\u03c0"],USE_MULTICHARACTER_VARS:!0,POWER_OPERATOR:"^",VALIDATION_REGEX:/^[a-z_\u03b1A\u03b2B\u03b3\u0393\u03b4\u0394\u03f5E\u03b6Z\u03b7H\u03b8\u0398\u03b9I\u03baK\u03bb\u039b\u03bcM\u03bdN\u03be\u039eoO\u03c0\u03a0\u03c1P\u03c3\u03a3\u03c4T\u03c5\u03d2\u03d5\u03a6\u03c7X\u03c8\u03a8\u03c9\u03a9\u221e][0-9a-z_\u03b1A\u03b2B\u03b3\u0393\u03b4\u0394\u03f5E\u03b6Z\u03b7H\u03b8\u0398\u03b9I\u03baK\u03bb\u039b\u03bcM\u03bdN\u03be\u039eoO\u03c0\u03a0\u03c1P\u03c3\u03a3\u03c4T\u03c5\u03d2\u03d5\u03a6\u03c7X\u03c8\u03a8\u03c9\u03a9]*$/i,ALIASES:{"\u03c0":"pi","\u221e":"Infinity"},POSITIVE_MULTIPLIERS:!1,CACHE:{},SILENCE_WARNINGS:!1,PRECISION:80,VECTOR:"vector",PARENTHESIS:"parens",SQRT:"sqrt",ABS:"abs",FACTORIAL:"factorial",DOUBLEFACTORIAL:"dfactorial",LONG_PI:"3.14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706798214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196",LONG_E:"2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901",PI:Math.PI,E:Math.E,LOG:"log",LOG10:"log10",LOG10_LATEX:"log_{10}",MAX_EXP:2e5,SCIENTIFIC_MAX_DECIMAL_PLACES:14,SCIENTIFIC_IGNORE_ZERO_EXPONENTS:!0};!function(){u.CACHE.roots={};for(var e=2;e<=40;e++)for(var t=2;t<=40;t++){var r=n(e).pow(t);u.CACHE.roots[r+"-"+t]=e}}();var c=a.N=1,l=a.P=2,h=a.S=3,p=a.EX=4,f=a.FN=5,m=a.PL=6,d=a.CB=7,g=a.CP=8,v=u.CONST_HASH="#",y=u.PARENTHESIS,x=u.SQRT,b=u.ABS,w=u.FACTORIAL,S=u.DOUBLEFACTORIAL,T=[],_={},A=[],E=[],k=function(e,t){if(!u.suppress_errors)throw t?new t(e):new Error(e)},M=function(e){var t=function(t){this.name=e,this.message=void 0!==t?t:"";var n=new Error(this.message);n.name=this.name,this.stack=n.stack};return t.prototype=Object.create(Error.prototype),t},N=function(e){return-1!==A.indexOf(e)},I=function(e){for(var t=e[0],n=1,r=e.length;n<r;n++)if(!e[n].equals(t))return!1;return!0},C=function(e){E.push(e),u.SHOW_WARNINGS&&console&&console.warn&&console.warn(e)},D=function(e,t){if((t=t||"variable",-1===u.ALLOW_CHARS.indexOf(e))&&!u.VALIDATION_REGEX.test(e))throw new _e(e+" is not a valid "+t+" name")},L=function(e){var t=Math.sign(e);if(e=Math.abs(e),/\d+\.?\d*e[\+\-]*\d+/i.test(e)){var n=String(e).toLowerCase().split("e"),r=n.pop(),i=Math.abs(r),a=r/i,s=n[0].split(".");if(-1===a)e=(i-=s[0].length)<0?s[0].slice(0,i)+"."+s[0].slice(i)+(2===s.length?s[1]:""):"0."+new Array(i+1).join("0")+s.join("");else{var o=s[1];o&&(i-=o.length),e=i<0?s[0]+o.slice(0,i)+"."+o.slice(i):s.join("")+new Array(i+1).join("0")}}return t<0?"-"+e:e},R=function(e){for(var t=Math.floor(Math.sqrt(e)),n=2;n<=t;n++)if(e%n===0)return!1;return!0},O=function(e){return/^\d+\.?\d*$/.test(e)},F=function(e){return P(e)?F(e.multiplier.toDecimal()):e%1!==0},P=function(e){return e instanceof Oe},U=function(e){return e instanceof De},z=function(e,t,n){if(n=n||{c:[],add:function(e){-1===this.c.indexOf(e)&&isNaN(e)&&this.c.push(e)}},P(e)){var r=e.group,i=e.previousGroup;if(r===p&&z(e.power,t,n),r===g||r===d||i===g||i===d)for(var a in e.symbols)z(e.symbols[a],t,n);else if(r===h||i===h)"e"!==e.value&&"pi"!==e.value&&e.value!==u.IMAGINARY&&n.add(e.value);else if(r===m||i===m)z(J(e.symbols),t,n);else if(r===p)isNaN(e.value)||n.add(e.value),z(e.power,t,n);else if(r===f&&!t)for(var s=0;s<e.args.length;s++)z(e.args[s],t,n)}return n.c.sort()},V=function(e){return e instanceof ze},q=function(e){return e instanceof Ve},G=function(e){return e instanceof qe},B=function(e){return e.group===c||e.group===l},K=function(e){return Array.isArray(e)},j=function(e){return/^[-+]?\d+e?\+?\d*$/gim.test(e.toString())},H=function(e){return P(e)&&(e=e.multiplier),e.lessThan(0)},W=function(e){return e?String(e):e},X=function(e){return"("+e+")"},Z=function(){var e=[].slice.call(arguments),t=e.shift(),n=t.replace(/{(\d+)}/g,(function(t,n){var r=e[n];return"function"===typeof r?r():r}));return n},Y=Object.keys,J=function(e,t,n){for(var r in e)break;return t?r:n?{key:r,obj:e[r]}:e[r]},Q=function(e,n,r){return D(e),N(e)?null:(n=n||z(t.parse(r)),t.functions[e]=[t.mapped_function,n.length,{name:e,params:n,body:r}],r)},$=function(e){return Math.min.apply(void 0,e)},ee=function(e,n,r){var i,a,s,o;if(n=String(n),e.group===g){var u=t.expand(e.clone()).stripVar(n);i=t.subtract(e.clone(),u.clone()),o=u}else i=e.clone();return a=i.stripVar(n),s=t.divide(i.clone(),a.clone()),o=o||new Oe(0),r?{a:a,x:s,ax:i,b:o}:[a,s,i,o]},te=function(e,t){return j(e)?e>=Number.MAX_VALUE?e.toString():Number(e):(t="undefined"===typeof t?14:t,Math.round(e*Math.pow(10,t))/Math.pow(10,t))},ne=function(e,t){if(K(e))for(var n=e.length,r=0;r<n;r++)t.call(e,r);else for(var i in e)e.hasOwnProperty(i)&&t.call(e,i)},re=function(e){return e%2===0},ie=function(e){return 1/(e%1)%2===0},ae=function(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];-1===n.indexOf(i)&&n.push(i)}return n},se=function(e,t){var n=typeof t;"function"===n&&"undefined"!==n||(t=function(e,t){return e===t});for(var r=[];e.length;){var i=e[0];if(1===e.length){r.push(i);break}var a=[];r.push(i);for(var s=1;s<e.length;s++){var o=e[s];t(i,o)||a.push(o)}e=a}return r},oe=function(e){var t=function(e){-1===A.indexOf(e)&&A.push(e)};"string"===typeof e?t(e):ne(e,(function(e){t(e)}))},ue=function(e,t){var n;return K(e)?n=e.splice(t,1)[0]:(n=e[t],delete e[t]),n},ce=function(e,t,n,r){var i=u[e];u[e]=void 0===n||!!n;var a=t.call(r);return u[e]=i,a},le=function(e){return[].slice.call(e)},he=function(e,n){return ce("PARSE2NUMBER",(function(){return t.parse(e,n)}),!0)},pe=function(e){for(var t=s[s.length-1]||2;t<e;t++)R(t)&&s.push(t)},fe=function(e){for(var t=0;t<e.length;t++)if(e[t].group!==c)return!1;return!0},me=function(e){for(var t=0;t<e.length;t++)if(!e[t].isPi()&&!e[t].isE()&&!e[t].isConstant(!0))return!1;return!0},de=M("DivisionByZero"),ge=M("ParseError"),ve=M("UndefinedError"),ye=M("MaximumIterationsReached"),xe=M("NerdamerTypeError"),be=M("ParityError"),we=M("OperatorError"),Se=M("OutOfRangeError"),Te=M("DimensionError"),_e=M("InvalidVariableNameError"),Ae=M("ValueLimitExceededError"),Ee=M("NerdamerValueError"),ke=M("SolveError"),Me={DivisionByZero:de,ParseError:ge,UndefinedError:ve,MaximumIterationsReached:ye,NerdamerTypeError:xe,ParityError:be,OperatorError:we,OutOfRangeError:Se,DimensionError:Te,InvalidVariableNameError:_e,ValueLimitExceededError:Ae,NerdamerValueError:Ee,SolveError:ke},Ne={cos:function(e){return new Oe(i.cos(e.multiplier.toDecimal()))},sin:function(e){return new Oe(i.sin(e.multiplier.toDecimal()))}},Ie={csc:function(e){return 1/Math.sin(e)},sec:function(e){return 1/Math.cos(e)},cot:function(e){return 1/Math.tan(e)},acsc:function(e){return Math.asin(1/e)},asec:function(e){return Math.acos(1/e)},acot:function(e){return Math.PI/2-Math.atan(e)},erf:function(e){var t=1/(1+.5*Math.abs(e)),n=1-t*Math.exp(-e*e-1.26551223+t*(1.00002368+t*(.37409196+t*(.09678418+t*(t*(.27886807+t*(t*(1.48851587+t*(.17087277*t-.82215223))-1.13520398))-.18628806)))));return e>=0?n:-n},diff:function(e){var t=.001;return function(n){return(e(n+t)-e(n-t))/(2*t)}},median:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.sort((function(e,t){return e-t}));var r=Math.floor(t.length/2);return t.length%2?t[r]:(t[r-1]+t[r])/2},fromContinued:function(e){for(var t=e.fractions.slice(),n=1/t.pop(),r=0,i=t.length;r<i;r++)n=1/(t.pop()+n);return e.sign*(e.whole+n)},continuedFraction:function(e,t){t=t||20;for(var n,r,i=Math.sign(e),a=Math.abs(e),s=Math.floor(a),o=a-s,u=0,c=!1,l={whole:s,sign:i,fractions:[]};!c&&0!==o;){if(n=1/o,(r=Math.floor(n))>1e7)if(Ie.fromContinued(l)-e<=Number.EPSILON)break;l.fractions.push(r),((o=n-r)<=1e-14||u>=t-1)&&(c=!0),u++}var h=l.fractions.length-1;return 1===l.fractions[h]&&(l.fractions.pop(),l.fractions[--h]++),l},bigpow:function(e,t){e instanceof Re||(e=Re.create(e)),t instanceof Re||(t=Re.create(t));var n=new Re(0);if(t.isInteger())n.num=e.num.pow(t.toString()),n.den=e.den.pow(t.toString());else{var r=Re.create(Math.pow(e.num,t.num)),i=Re.create(Math.pow(e.den,t.num));n.num=Ie.nthroot(r,t.den.toString()),n.den=Ie.nthroot(i,t.den)}return n},gamma:function(e){var t=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Ie.gamma(1-e));e-=1;for(var n=t[0],r=1;r<9;r++)n+=t[r]/(e+r);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n},bigfactorial:function(e){for(var t=new n(1),r=2;r<=e;r++)t=t.times(r);return new Re(t)},bigLog:function(e){var t=["-253631954333118718762629409109262279926288908775918712466601196032/39970093576053625963957478139049824030906352922262642968060706375","0","24553090145869607172412918483124184864289170814122579923404694986469653261608528681589949629750677407356463601998534945057511664951799678336/35422621391945757431676178435630229283255250779216421054188228659061954317501699707236864189383591478024245495110561124597124995986978302375","369017335340917140706044240090243368728616279239227943871048759140274862131699550043150713059889196223917527172547/335894053932612728969975338549993764554481173661218585876475837409922537622385232776657791604345125227005476864000","24606853025626737903121303930100462245506322607985779603220820323211395607931699126390918477501325805513849611930008427268176602460462988972957593458726734897129954728102144/17750092415977639787139561330326170936321452137635322313122938207611787444311735251389066106937796085669460151963285086542745859461943369606018450213014148175716400146484375","399073568781976806715759409052286641738926636328983929439450824555613704676637191564699164303012247386095942144825603522401740680808466858044/247958349743620302021733249049411604982786755454514947379317600613433680222511897950658049325685140346169718465773927872179874971908848116625","1468102989495846944084741146947295378041808701256909016224309866143294556551407470861354311593351276612463858816796714569499021375899793849136855085849133702029337910502448189055357182595424959360/819363879309286303497217527375463120404739098260200279520788950777458900438307356738082930586032462601215802636320993648007907724899611296693997216938989854861043298494990214825163523387600982777","5896704855274661767824574093605344871722790278354431422729640950821239030785642943033153793245906863203822369276271050164634206965056233097479117980782641839669/3030306850569309344013726745100070601277982132543905537366562638553198167007159067544789592089960911065181606283478843359856123992707598685058297067179343872000","76631772943534985713873427262830314617912556928476573358548256872141516989538374761909611879922349479420014771499018155447198112155515453671128814488139633810493264352294560043912066253026059140653027326566801398784/36852092933388988649396042883218509607503204211148493545892849595498822817623842579026942621098851631842754395231561679671400197056377380063233740202370686144673585955581403046886083948450136247134308381940165804875","3159076083816399509754948610929467278257473888282947311280653574634802580912280940686954763313882823327077171624015737719617373932318151594325834524000275847475866299387913048/1437757485694188822758304467756419845842037623148461107362957994816554782989250555362514354661961482939226272309026092009962414616417412938087494467254146002233028411865234375","22266067259907364984531611601870291368272674573653403965630628996687370994139884833897773468149149664829922302484782423514167405397665098388400450149078982462318781750661005833037235183394221496186539779712428265837926417581952/9670030144664428565128962309657100138096047028794689249320859276197340398920725569428532293373676415359965773460364494998334259893079003125373872108770534788283842907318071170285038777091588292539102269617376180390982915567375","14604654564989239958569331443385369522850975185358647132770022716433280072271007767111036877803328768910274400515590151934676819262085211828028638417329558229123989556376108454497813055/6090614019162516693013973409650613208227889078878781039105047015752493519149314227721984436973374032279421344818329285207124280297611253861173835238379831004010748379874393292231671808","1901241885407696031217292877862925220917660047127261026827869027159993239567933534052663335498281439239753018507182016153657409777749792228538380379703411298411623469292891476969894084838876001545818141543890273256985768690847587711270930688/765116019778838839812655402103512685695769161212360553099732689795578904762091216998790589926057819838537805856579109910198553330075924857419395160755642371550113347465300208422126945265887065434116781678702741657275181694851670325469434625","139459806786604751793737926146840623607010208216289543036026206208962059593900745886202214788747453279179283344350478734275973878932538430194363355795823581315329311220701640235653288975569812161436/54371368534412517053056101353618694718215711767266376573138772968257303578467926450212293233332401067673270853953399269852376592855992724934941173346260129257754416412476202526978443681584633116375","1045669091124493070709683241190022970908640501171378776604126771144008324358233819560649021940145166254659028524319517244711645162132513416238958170819347361185944945680269442845829390112062101255500836072082817820950448463314034677353723256969344/396228259004446234921310936915931611736815598535963504660076315228798989932959459406702091180060429080345146735173591749448509810270759531977278642135591672189002006272326131885315743181289970885337574780897529347356567086535505950450897216796875","9912919238915437302006264477931031611447467070103973106567538528951878797932559935860738745374437522819124347510590800370471910492338584284092534264608801221235029062881964101996762011296996851893455828946521/3660537472668264151218961634689665210933936249986285290553357254224360417386515311493310199319523687171757653216994741150377508234317025158302057758196429623723072084157928224798322861732880034847243894784000","9263710175433181746575186369318246002919895649622127410824041370079225200282403368319370743363303164313395723904510539050157032684710468364067204876434546848634842333436957245275217583248805993142227630297924119330553308466662488683624783307023014909360640/3341177182697517248552428837661919299725031035849865632511882688786226888137634168024976033652753689210700218163621739078534353578510364301481093730054725078138658805025014615651043313990684347632166030359086885561104034510990826655289288319840595753002771","5116082230713622171832327542439052727465114322479570603905499496221224653983960598946033081212909066917137546065542953865612718836914393275681318667667521726785633638189373998191090501201427906618075889744489190209584/1805752553736060443820406101277706970767657006346276183748749630179442318063568286372320188433843729960294965366346522303898609655762491623098453269916163621089005711823488749297418113474056676109581110715068124438875","246569125619713282434448566970352231845414317018379160824176638351574938993535464763890962336882760882398479702237564384291290459961036068916857265499633061660562532011248501476114401629839742058389195725393702000011860799793778295606988057303225493814005789533570432/85307063020836305797178273029353623060860009152114361453434032434699636078115114412588719432277441055049132559782203988387794711585368296817222565434951256788867244687081233632650953850383220864394261763844194948389861147622944651546912394593164406926489862036343375","133672026303452911046163998480860917119290576658330909785707604886881155606725822685088929236266583416708668502760907677019598002175122453170574729028452721476464728566191464897928696630979863154661704374206171469014225143/45398130975270785045482567762871405072140548998125471025451666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","6041693953360002800224091673336562508913199995987479264605216252220579740134601435770085920869376641180763419907442721705887169884230643795126568815123647603047739799302562095542459344811429882053086550900803768964612193941424128649976704727183797495759082741166938351872/2016766992122395667828553277997478570503475626107286343497917705446132017125079612756035254750822860815515899557855166824523851779156336235294914777307802256439645525835223691751931866188957324792276149549076500784191791380803500156776088683900346065830066370370083309875","705868391597244582764749229356331441978820024796066870551110486625729826111158236686696326058778874201639006234449557592353247542995871491078308187261304930042019640830629526023972693107193897009168955674240659026247094657679060/231848642748474339277532000336338632910990823562381469441716922006107433404523316252618490265927265734670539384485699132080062215196462178933963957679882342083893417545858074378754089719547920901917516016346211301054206383643383","101832160604157943093944673541651013907278188571533075311673249923948856034633446617630054761681006062910980371900782781226979391765818325065031889334563981235894369036439929651260587335544056975715076598739977065390678221999918899003881778449092038750712969437519295878491018112/32944277910571666002449086492515464541550138004002141571670657643770713783329063548790202120805341989608877739811787937782240802963962520261844114327432160788193314874913687387269408387417806176202979244637915812905426565263196954203487934225589622864145960079736633434831996625","10655703119271468913597640479490594180964700448340778168715956712130636958373270202484276402718566314881119559090842449610957974112230306343486091910217340665146602598568991520563987490686996746558858366002301982443029430290679385551/3398412687366638541233365137084722368200311117891192348532156645374786104142009695796409107380345795998400850838706661851176885183144928701608654514812261697598380070746520197171576610572921007069104300695592751543563472456384512000","1903039332876763837419920240543738799531131775028971323439870868730321221615515008394327723508670975623498588291298064320786970626232668956372004004897872810230178526101184611242511193415796638694370503100219710864543168952682617801833318493436174387568067811938490953495819438108686336/598806534367503338307287246320963280558134937382149405305466709787179429317914803617527827862441615350396864359976273212272586892074799651088317544101755361439294687323233086696182687664637422796995789967075271448560870681210580691574924544896656175563265378514188341796398162841796875","525573915563826130963525826191411949262846916750432019596028344808298471293378917508549164993368392834023782480702893643486699787870059946429810070222126260200026332874480239090370088123833491499400991181659445914352500247596757005142623368/163278727324937389095822405034435687776345799835442022795533783889356344755225815267819508608559076191292900367982490827396869405536484846115955581043091229202052407483776587687967125885665493681707461345895999542381476164157058393971431375","9263815657177858787273494705338516861045771674838057329170239610953039987023429736752079544014780707408666628475997291124805562998227296677616204140605356257712022384368492575381355563976330347792504605666631512343447560301417325154003481040250148561839861837778597346623630046623751094400/2843321709948499955095590862256744532227698001408929142548057792217790532624003190447363578048562448168721539177458065482170148482375585867230123873178100117094533143052886527452665480614620123764036974180917207421482431983407742154634391264619615289225747664532332469783301704643254076601","407959339726114455622180187758753007349209016396248763075759257357925636039752474207685682218422721827857994768023399625060206708378433960993946156803948655098667156937949174400873748557248801874735834957795040139401560494087476967548060208243867/123780218751812156744401121690996305978134694678934447237402511116731459214498784497436358160964198336874043702652746834763131444030185151143987331404604087778514863973633941401826334750268416015224906056576641018962863645043976537664227639296000","2547676391598917379516698439971914695230548782904479778605691338364453606537643088857116141939170899135026552016969320061900926954008522781162186995856580955090548471448276736878300717869625651893741316530109438876067419826217901657017506157997588944233677467357220316084583383623602865379325184/764562034757392298786420374672266498815021229519853724850874576419885380830752931701831256959159800764672605004880389358601658343203513177084389490286723240185146570925957286083025676875197029662038213216541352875570101363668917766225709569356861275434470568767077844675593176178611021135573625","186545352286463730559933346565311535598243666022232037054735807289501173444103692309735768703898330430135399033529355360391658728987379385732098960609744313878477967971557204207043802935782878745271859468248704012618254203101767841517569443555143252/55399179641621656233589820996143825959365789093262978988289445625153099592463372579496245442338653053662134699646413817866770218574795378644415019944304868289119443774932782235638737888469746745621382139263856603239588594078668393194675445556640625","664884440164786473344854955309049113269357314957985265728106924238588705533437169796551912202931185746193155801905841712503407258166135075966280435780812714252670362202091663287095423712596462690753468682634261029392794173636943978404002804413009590005984736612421172979101972556772005594499779860608/195485517776407145286424460448995460754674039560651791192647586550615878988380153730602665795647187884543361218962125172808792176382956599256188706636727418572541254480798303566840010217729386905041217793614214518363859058348249961790104618910877813067510758225302884815410347238200133693756493703875","2614957283934314904315471338485451166053664494383241929385424599389309215073267052860464009981063483440201193771607520572077231889699858482582363845275452280606276949653970992719332472370351170732899676316967244504534154616036371979031399425846100527685/761493664432749089312665480773496290658029971027686543404885407644062485746072719559288231362060149626237939029641098328278650939665665969011529293869562636656650999759724704272743235210867676873525147820749560155294022488994426729939894753293900972032","124843380518493746761140367283007507854364503961156704095198010255465940085534099747297600085903814014415830785663764373057896014399822131175202342399536439284123918855893825207202244831315575594886675813256448846863723093240955901916229136393454605455444105444987028391748121054399538064686074523506176/36022228212051654395480210378626648518430280334458144892889271272122662467638331091863215146548048144675657239846337165813938424387499358852301016926312083940212100001220180762189978024821166744964908871443681332664798940660421469519997746775275873085770018269706847741064037876137315001228315806659875","827992369063043155578730871896750570951766628472810506926098505028264552046829097082095665194000002802661600196840639204300804225352337632259980703832713031790922485730615305441309917696044954289187837653933158950774246017223571461858939407386087081525130831392/236805932823686534991153393869288530368011574665859226704279685567723830696754821658770176385138917722808377962346690757191122309876922069867472518117628639913077442806147910884267694879089753138429767401700283014143248445966474839193628309668702223994071394625","17347276886878323736540051321582548724378497839789943634071026331001588645519865992773157565595886250230140452154269197770615097377486013097979087647774513500701793885978192218455687078883766086309728287172567466406449372659680040183273634701092561727514713494914793425407149186041796935055187281744386432/4919325621804683623339606849970832094714371903709195539440424738973575902329797546592497378000858196173718145883783709223158260700365224756081275272021856393735663399552166737690038832550853145831185979094979556715294990257315369124065787473707136464772247917156232366320267601622617803514003753662109375","137984231830526866236186357461458917020538108058615632801298091031540729111527734872044790487396302545910108285921421417358113055522725197998483383380192391312304647004240060970929072498293210057120617332323445379424867965764749534125081131327565507524502163460761/38810445792642817561168950890315210470940006613819790543653745327778579787694809782601777514116858514049585074667085399925278459138508514838268321349069481334967221455722811414399738756151414906092225265355449011152267068726417045644222323488445626292574879744000","746567120547823334914136339633766098626636643449144032626270358619125402826113269699709721071135471625588981126637674402048519990010499180844665151971356149292818375448504122545400227696621572263621729512461528550588108384619064912224884465737417596190735966915167530332762203074440688676123756162572829692160/208334337057923929636884170505570363171441147899816815785150954417598643614152856767186132467069365605496210036171429712485182162940460120834349006784956522600679357307849981862006710239311750261522832996877712350330290831638640913932265004107623954913155144975252743257846945609734368518424172846119306643431","64649371728330695076928013661001819989330953381731372450140483779536126948957993261299287753791770622512248630224724990234903928056275080682537641377393210728546364176267034339221558641084730052304770498929958838997239635790469536857863963589118888238069738647239076/17903951498200212327802847425913723358452100686246224008745414214690047078122925247086521362329833307849817944645647750649290248110509395628305970523384831671737569872597295947593410067364379687588919135621621162007748635920864926867870502568935739725312687094047375","2454918942158003099688922026016393688092399295166304634317616773083386087532869193458590448918958337530406410803840837646465522656670050113548208618655070231274778592766244282964463702354872753657766121825196898916725498553882689210280080206627916046484942827487726300822318764058084323314109595329304407466188383616/674880185931325925966586583820010578979699141814417326552629206140252348822939845006845669570885271576698771404162512001549922909048916000017837898649100825976232784446638776021483802989797501705685620612986771521390439936066527738682396560462899753657942715306792783283782238662155922082005591512296007820682995125","74018558041066162916454010680594042518462756234254788158141115244349044958441521749277686851928706433556285971088455226217644009628399441967508838553345152310730562224910795446341601049647392069373970101491741830623078126344928804029524181578945586663110848142571149861/20204153620006780689923328634586091101021423979622170579036140596085566172775051595588438592742563923428900864000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","2127032036758045513335690185608563023954009095206088224487365541995326714285119384743928987635752931664240752323937321097955456543854943206092931247498833001499955456190701695430459583885125382086777607021670447795321669948733328973350279846928613949120929250312666393359442423066212311060931469017737106028339882830848/576612418511902928757340062840968526862381326698309578771238715462180282212422302261044980131594522407066369222998903808960617461164985318633518680304995784614308979881735537678182134128319596636920719106506829571072447362052319438091347699720147003209417806230149598345068078717948025207635448205253184540936478445125","35289653975561083576641954928762116897061274899517309102784750384002335187117263273488751066569234386120759866204372398611196356888479036949053282301027789530999737306501029700128744408015642211359442183943916106790666114870974212159410284751571905275610921784716184508440/9503006066880728386808143045924119024212377150217533250562188228062174064693375135306438120385877320162710918716613546077156389583384656340709638430674364232343609717735574035535102953482366914421205216675248471695111720986346092738728929878538430662191272737183832556131","102633551023964794485575491065909467125458972250222581133681080524371507544152979467328048718122409841060527545925136196267751819689935599599321090571687632103850847605493223603751038996548520557330016046032671961857623066292962260173840972332108111505971231021442896036760967107060309991355545554631003681544611731245475968/27459658121882266328752886605529964804078316737648012166874496015808620265471203512606463219297059547428855195782384236337998738233668399173746663289852416697917397644234441300570212555870401420579737973722145663287124151049692290432756231390864184491891697469874600345958989433125942336757049639797225309327019275689074625","10034393558388390065766795008210457368713365491566387292163814915435906649268119060550511145023450790393353937124495488860451123302412204483570913557762460385297770427946219119911920640306914453207097103853766023934602534502476962159682750262143380527529536498215384467975023/2667919902603322771586358077760621955455470781865624844984169443739075976572061827709528710108877015489050369589117491611045518221354793418884447632063538994046714401229510497599783726376490260140723032102883617341970952663947646017489439179953454964374887388652792446976000","248528145263843375390386172800048509380966183384567983242213959113927668429802237067505890436957693495616107089384741585283620097982859345081736730899912519273262934785992235852866637878831878448348444611412764161078458068549719800733237024285525816723480868704742804077255242682077291713092790250511567621735004237450946304/65676865669148624809340872151906045781446981664561196686217551358486802274698228825404698950974939545099727242259547145392352658637333562345477931951890984276718673618736565926663528625796412420753961231404680876558659735251469326707567479071881966875336951133475135427640218972722939427821842173216282390058040618896484375","7805448718805635696495809414501206964843262114470109146341305656318015059743127114324245035489577134938579856003956861881125856595981500593426840968087618241785931128978516340812066502964561231235073012672356530509663384739132686548934288703179479011016719045530855033205271548/2050525178024039744126592505352202216905491833360272553169520915020715464206141942151086176509423406413311520838568324134077402841030113427309725873344806030836314500267104070131451720947531994814710189000076651895520222646974590481497382830325485174899169093049299764813276375","3355325071293197839434119105039673324264765809771192815982246040415580387729382404624613875653005261578877047405365032178619450963731719777167015959920645055600439987161800547901539269321100559393048973255388860193948274255340335876890491746900991668165565729269698196233805991206691196045182214641935483083662356666996922240/876402579119117579582569839757462461050855174353108858954282915644790659429341853404829661899850841645529640454766173209897510988090318303454542547519850473808789222552969933222203420847859171250332350076509996295844203965564448154484566493395403967626596213792922784509892086361572955175655987334882030766001799867659814117","218871061991045868372866381545267589365410350294028138778572466235486397478028823720846191998825628156716190463263492304639890659254282445466806224943413446008645087186307985343574807361972238230520975439736199291019544576443791916302825193643774360055545186783819367378492631806297/56849560726416896431557940314760680962653658127458002233782028041537121216487790008085876994020812492987733987414743604239935223783349870516284048368761617736127892160849065895223288023531930411718807065209903593668117085505482007061969339237404945180379460053180570404846043136000","5008685108365226931582937964451700746853986170633433728409171904803795018146152804690759530990140552460596075588463394200510044617816085275660078502126507209302951286606953039953843685800941558212440519542602092919776366067720586295390886070120828199562643208637974347390938772070049344991272621102622931576339988103674070876518912/1293888539680354282541277646947380627241979967611883341823378331667976045287311988103163380651334828012840330710760757271860219584371109472132211215957402251594055009937397184768184517621978947384029376766290498101728971145633139541827544539988344772578184316843734267915665730981857376872622787627370859411909330227080697966353375","15388340113525711660227566446101909585796746979396093776960989868457211684028149502578116456785221720682202816140911944661051001675127262774824593420825587319436537346311831003212424497488485098543512314062112948777572038731823948224734505930748371522309451168088057190162878224801232/3954220582960831691377435160890656173654063611768428458807273708040518769541211737927975894584024448193835165167801976423275767590502552964407494549049777006346189436817215329891530811451811864579644894987864267389290848598289794977382504890216219362031324635609053075313568115234375","5099039333987561374222193551155323470675617979816941646196895589439391685938046865391119484510329634015275893520725135141878751153360264368353595348921951280561029028912953500944814771064409611917475818956659775131751121312316084465321917769679881052144364834485866477379437705913911371481828140817759401117780199246301705600020671104/1303503600297679371136943454060319958680553228879031326679449263682048703103464872914972900105569835004878963701599765030590097739639045890060548760692125546754294514068052902543220382104483822438283040090444827980927544440984823535260277595466339403795403200720622852069244768910603820007632395190204569927612348189089161551951106625","4902837141334073026145827027361937996261324349722726869116185158777439337041263482852376194988371853413467559557923410949898048139830183335197992754748294810838187068126867611615800383834975563313220497573778480109264178673389149671194149749735833378557143135481387904961537942569904075/1247045310545991266291285730016853118981099516935251861146038369985109288084420528171217942065832292739130145780833406014673689119563698528225048800794718789218267628507713621235056538202070171596177775095071513194885568843375526804796016261173388452184505503341132236719484809714335744","38114743522716832107917466438257616720476488812538316101658139632867788464381862291240727309611460187159930652186486096300862388591521625093237019662273764387591494074792574929490381910446287947994150655077877204446864004067956087975012773988833339521775463977233068498404144221045837190392670308437391686081418318624745039402145439223552/9647001083383999453668111809775451078976046488746916070976218645431946648087171586252172936600115032316383427265217993193444199863138429602138841976586190525451324093772097241349417938578878934577091671046050326087898259692917931230974174799815198493279413438192301437068820185757869608523761456160341754512329264442115351926967120404125","573695055225225727008803730767518906490704995929177617646275646884555707960986625481944101622708415415988844740028718027554452662358957933526173824325955904005404113684003841990198157072540659184995738719040024647370869010473254071681533880576462368600901824622431045529064651675640055917092/144509482511118816399089096021290587489594541280398871255876563615464628718527634679330291741479135415168539765887291789615790513527330600394937614433502341116068305347468133950204152174094704092402978083370792135432486240914953928188835819767755172666693219213868545854371103120604946200875","23876960329653589647925126180903391687666378233201794403339630995420215267415575142266707357255726330536094448314199602616026935251126469221925945960901748679919435908556550271504767784553484434363646489174587463466333864577705745452492395785557425904735048180164697040313528831173448025400634629163795223739061661461986923675833880378496/5986312408594306954013526197465608559068621248896320652512228238115589875514604632230098997609482248000888567135685167138762172475788060284232459813998201719590208742091697294562538265829954186149162974972471533202880368317237508987477069872431064075005305838801862900501819963793062041081601844759452202282545840716920793056488037109375","58168289917567723171226992383559866214094157894992327555495441698028867727845766488121900626912848698952863438654895252811583144479300382761129433911280049009362667380001406579175563745824368613319103673817094498117944856004415812877213722455299491145649879676787079744410765053845551958756701/14517067289347903655500020160671113450349743650636953726251191692074385521975132268313263723831804150872238173602847065423463131917373356798750100313145228608894881457107689499956903046984443545789053438946050974567665049237414588435796381674590098629779384355275820782532479708807512981504000","728621890568281859295409481422447012528302594365693410763821707074444799793690738137592101239862736313347273167450056625929591960610208335290882047413011571781161008296084630072829079783328937418641417642857196346026366370059522990813537731394823630207433267854616768658990289454635793326766697884798538576055949457122067828153655416688640/181030730759516991863708593747964787874073354051675597050399087612142539517308720603687322924426591889179726492403913356461908748733972707460063017057809060190437917851790767968877215795679844983288935075688219234885360839984681619084834228226744165610073685719017596630302462070188937998558312507638434329299017584329479516410907786681093","86855946923438322218622470067224691860808273886184997065663554841573982963995340977083049132518812923329423480393306918856650577072525633920456721265953575424233701929892019410099166322511413146891121248381648145391642571638857576890568882512129960291171866772665863159474602604647289052079991768/21485753507365901947528588896402264670781310878547726104482740647554738151100954835784115119035980523529677083504495839730499664052882400915208251594384038810917282207449860876251558307288700200910747338758723324686939379138206117634546981163355060740270734146780942696291669461182599512320099625","2158989152301022938148680102142188531448821359505188055264665167313418619665693092337665573150374231484840948447637297247277576415460889296724813940128955070240137590073233263168835678714131062764247434144994737610229909964847568491446606012581370840699582055341626266533733744293929658949697805855362114229666626620766245630122333733703618176/531794915405164005613733454597931482878479882704956110685223892325074211694837836221759995948610212818642789132749082430059593652854659130217225506942675608692701447738732031302987802196501895840510235161825501235133794449421919927396142470196961877376701957829921152848178076410141813926924749057304222282687697297216661687583257901415465125","139432548574396829074586704387656697097760057897628994548358619815052936481650396157428747411173567801047221928593253479330480454469358220685854351236980383914223693722868233819483137401339800304943891968050399345430243790898955416907228948287367356990263740207046902209563417267686591994743547621/34201151688775214071963206765436083445901621442002061707492082843232231754829227303539041286301398668437202547003300396162741375435703188500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","11008517174872833286150985180322584448162884832099344969609291070844193524816852920942383850580217443209402836100467940651581092350600329145627967515818684442171571156446321228596914355704205623857871497315955269266498229823278800717909321269179839084452384509142712677235552103459737790674103994445173074670347080506698168482564009465276165824768/2689223396936080856855299215659204161946704205931885125148201643087176556822542895325191478283706585400237901215485150928036895428721912118467760766508162631903585126377676412573187912443878232521444786090510891599171741773242011017926658231638022943018461086517502584854390836347781674626615709751386455292026775663545470794167629144456268750125","16108638074211260588800537540680707641986073914251424878121255234668558067988171568946079848860335948991834525552515669040163026131919804987340113244760738846884911038097907756220945883750502673899084880578229601870882631165510396775126850307838505063922101682333806284668762825609556049426829531780/3919363961344261777100658318137884299575193089462944554282218278496298610828757650104922583359642384253066896538203596057302203635134833545580869871333892935330950583664400555463557735723364497947986885146043017010159347046389604172186788902608216894094289769850517098027486468084407618748895626853","34420755849180279597302103726180110022640946692592540634353734157479505420320000324260530767186132260970572450489530034440214259559325114511265075416512316229177952140217732655405289808326341696986755141965043719344169685611217958619102774617224847284122901023774956887687026904767714958090256282893003000752947427857703259704682455375442735857024/8342030311716679826889917494957593165464748884572298173556257652389845294530325764837124998293398445804458613956489096007564811101361266196542129764287084823604897187311540561857741285793447174119667215803837719660675298308873496219385226998078648428368061868944322478384684509466965129972030932418920415308276430355882329457342937549162000252625","345888075261020004071220843714060353763382280664960929903544964118831237876694384053904571498830068831026644303797377762345709976595360421502594656308937649239978525713471393570536680412814805076323426256584504251728507416368609420882442293831684681071553766603478479006495757222912500012444787804577811/83505703731469734628961395063481893801938371516752417759131774530720075262459158384433785006689548434701904106312038822969658455364219435022841597243178757423598248565463985786213156556523685666430799283870548238467817226915680747412191245046634279766450629886904716776719219698922088211154187845632000","1061717830619177527082296723099890392273896386613997004874669053445943252046748251883532634529759169500795452576392700472771365240996842610207274128102329096619028487369622001737128463631016494371635687841733644339636164570819431573829173533941056258744442930643735587780907310433371453992062647737259587563398111688659657406089003293576961475848704/255359631537215747979895955806995352799574790340218399351168178555478073997876110889483456972687438702262017800167048243754141722496276537685853311434069991222324039005160057724073156957530106623908696241268268096879569794431919729620178375212905203484165745866913773304319069321426245521467122472046370356725530914587807274074293673038482666015625","274122944106300296738399632684955400761495830361663966466225652918683099779465438024846903286816813856490888796372134557295699980528187779624865098445756013563535339056233912394908544185885547842235097677765325396255649207317018754967666450708249125316192200151505568416495274671679500594656671785202496/65687592621976546250581560102201535533608158256953087745856906437400149205693427285162333502528793675585022025602144243543064185647792948495372442630333800126269123531636800213405254045262127593759539706750242430153456891792533267948231185296091297979933562727112487057234422009426868531651634706262125","7842680480716516803148821198697967237136721860017131244266974996267074742248599085253569637183007740566941125452215834642683053334607896723447140851344501084122965014242091312411884985569341166545074688756440728922408743841592658677792796881188604773469108807869960161395759837407978596679911066586626885830991556090978327508459276025943279064965688960/1872528612245648675720382138045071131304652050696842872529163720558126655075937845539792108048310219395746259570506175902206215101518698490144716531697689534559827422735649881381597761684154409796315455445459537515308174919488497154409643876490472215352056502193150125644288086294418253309947229151074464928874881827227706992859640236086417889990541889","5300824422251242070074569186825929119848111723012841627275830216301188228660779008353049603527567784119877706984722171178137272986345560485784907345500893648715341273841147320288851034078863843374665850852481747000237834238703248634174397792745914847774297223176674917912406659831206869442510948965571661/1261140476013707338477604677428573831791396352814802149994640617701773078174882455512668089072441176857892331468691160991310474734143842336092636848492066592397892638052212250229129355009939118431643425836944282456647571558383755315238500832868535816144280088644939696339160092963629012001958205063168000","2220223718762215584659309059880106334425515875615107369399767892051551634000614327272260081056973863669004224981561870246078120862256383581012183852291444462730018546753183156982897386563561418424093883164027305254176874653780425452987066512563140531367766900610414277825262239199580925879453806414860409441845631158680721091621460775043562065815179617536/526383206607841251253861841374779803798480623722760367843070466043030228662340154304405180907941079883976168609082254331465595267209149963786388600028701073430773581228212441424400748220833542964971495005714483235359479470452593264280645360131482713147116366500300066771223383007216182988263355451923333319170174755334598973202740108032097242475554128875","521891797109626296684891455959263713257353500867652268541535940159815152120871142196535233326890353914761242025931373491906127275561002910157909306979093246574207104081108188995072105948138299097848175016082947174156278439986705241571619793059501724269644447572323501261424770743329858038040685313621446524/123310256826873923765604825413207481739886340225713108649758575106598510022338480189649787216845041382860899099250547657534972156328080736149239332330143771138115695598493059325064119176038137294863053148618656356436332991079150723235214278848602671333076219529535123842212129829931654967367649078369140625","66086044538329677372986118727999622900471937619891337714357792768200341519193500393739322894033303245376225584865369486696276607060432449792893028061817203932068085863800494054274423512956136695211796751845295921015953538329385253280866669403169919614982155350899648626481405781514434761541281229159396787287553493046927448595964103589100429722948913403008/15562137339474350565671240515273666798063901504051979980452491653975250630723677279081058884163396938548780856293034775459223871281049026140999055923743471466471830572672766633086347312178711643724485955576579988182546105048041649947277672869613992334541438784737993706482731696809943027528882927942967419447250586964258807454003775693567366165507144866375","335377615394100148751647837967017467711612297170079949298328061159559939969228226474615711044891085626519877634842694983669611974807129333052471799687426665556738316626171408219730853872410792831871526174987402129691897433888027072807302411474690613948951673562473758814664346259109886876538510453475290967835/78715592752271462306588358880337347638000605031000575876214116610339827495261512281635361568951675037834544811575026718101166562072917855004822606752296233435017284127594847656529606648345533195437635894948829857913798336356647286032372695130461573940500785137424365840081503133157308796505622439791698116608","20090879701618729602554170716780970848925039917987945471322994867171660307998603515745066411687983450400412739285577269751603921163835619296822801840348319742203974023505186187060251544248644338412667631232247108675504629538319425769464277309915502144443973397371136256151336255138506001292355330875114245901820438821732843540725116728866301271466614762497024/4700223519410528857298732096729483544820841497820611795617923063440946097326817340637303431283005509904481323205480729806879570430868897342398783028649633951362398196137429076844504529051072393709154483678349272930361110568616112723747726853614661953537957117231900032044221535502745676310313569997665352252492568100075191900969170979460298189170486601502625","2904778979985524171206573028445379872240558084236464200857594814631031581387804621371822074061289363372523364167184697785570324832815972970658633551879143187709707164796663015180877412717910872234647704536817108676736661804878068078543241390828229923424191204586313620612539678930999769543756218765870513049986792/677408099044823641581658869221044375312077929976719183424865834811543737800956896926637625166844372424044003929341361734886232742770909683021563822987505236295727478159938135467975522336774471915167606673489722102077041330652185811196423400701795791669780695158730756241178262962515917389382302757366325768069625","31270155809329751863885224732454397292230969002004953832354065319735530624996254695453061851449600345977646455072512400760539747054003851289540339425848681804190284451253462663731135337775088379954403740058084949675460445909826322297817535400604180338201322667139062500269285493417563095365899631360901732684124930296643108551710704785906431324876072470231424/7269578038000504017073007978844992319987411732848567116655821196644382777088703228960020894756722675887473977480537577509061256138261063926845643360849217556370868752909531088361229374467207196928745673402380473721018157327193509586295879051411183657185176812738231456253321187419224704301236205478184115996135940848503487199394612616742961108684539794921875","432538822079707760382094121020421735679118830363764570640789368235407853152380328891350816400541189148550353337874309885334920995713154225799660601389784410911658967499100610376065640785585342035058364676314084595283850213942576431310823836792440218271879354669291052589804956435743500204185107215929849054782893113/100246574739326291035824954677502591279343311051719151327066341370995390423713403739043396503785261917771859220535505691760472395306543276314938287868734009582906895763073519374099272340577921671298878837400921045252035507925021904954445172372479744465666760762909731237634082051855588025732494461939980856983552000","1914333673689206389116942789116917579088664511118582610293383428712902211612554212779880638065888518488492298586641997844141510832940409501694726851666478650414191249534733087933879981733561565249818572204932715347752949087800778646065986244657260832234479202201129845117955957242616947361016603702640821256099895469088229339240402478576285854783063612307200/442333801076281757298117784528962837115323835962460661601905131618341609371649347131724700192551574625400701487125984359494804828935577124602622582550626336986871791407398609915208114339012374456785705161994343348351473385887949809051796407340988735853810174589261300681030826392672282630613354461927208579993042968520650313621522933214063366558703422757071","5704691626402072213006354545292364761246893919997531024861408248746241619817955824682639582830486790618668221530365426203424888737658778881721063941495350237419723855000515747725926735319471480027293210991869255971365522170749568996651406002311020883635577590045650037569906001924971041810547543163363976464780729932/1314240362076792592671773873754757443276256223533339004339330559325754574023619698171225777585408160438834449576526997055649849875516310105297894855264038450585295422343454458568152668980131977005808840141079502436391909349182185596381509091427752151860204235071122788499996991078935216686010888734471173124487937875","451219364084386208718456142329444023337343409261545444643031014769484085278440612677813682892926852469540118625738238137458321112005189595703619178533263706811689687213128887082197330137502064260105387500552856851972124172206996205919556553246133218441769325133725631665593372188755090094541462474970525820334385058333756591222492801647110594428922046641945259392/103648250172203340865458115839764297558925693061798169434516001775068769911768281084188883278842546791612199025413573394167639925287068809631958006622842716869211374513136766899877504136929177267362862319748507372147243911522667591375015611312165464514308451222180272935398828092646393830572838772085366567154646425598388620105539619174837489536378605144891769625","1591076564577634575701791393842535460875733974464805197283632670013516183281542903377750304419996681222758401497321278555686661981435637461350320471258386388843198706277657208526372100698700615835733712519332548607115875288787602084336341594576426630670911478276101702119972195558314357975365863803265163991961173/364433108410193393847203348728981296285742202617988970384277162225847256295865554341611171460436362780497179090329831885853324392923449579538286804729856000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","5307507148709435807261229345132535134848030343901300324623409721698217134932866488937772986386501538026693956121121771089740095760486362654754229904633476234090792827930433598453200536551779789049352131005222659995845427680686677324963223653949277037520711609343166926627713758990384011274777087968799793410506391884872456420041494598273703914689586637995139580794368/1212244290381524115082005575105703496583315188540177702780216570265159923654197746388568151706509243638302707511238539845531608313334248788980188054651601536067740709977678222790481348003085034888244447626347312094586389347535167903408519024105748523384932942441843118813819781347089702286481924493361058339731949844620763272778960860509570622673048786968660129650125","3046577098843580578619955603029073328361298436129791931304665777036152915858575282362742008136721284817899542475666054101957899858138590963789072530710775790433466847100422875906866496318804986202089528198912098377828580031852152997907433335176267300286466072997014023120087988748396598176622765923059385876855303940720/693911859077752895978833241338902695755528613729508555938416419864772385336777924892434701804078893822446727762077537955240605927550548046309823051841326355655848406646248595628715185413852040295631448250459076043816328082561248420925930431777502622148019371383254316636979070731427737764160145097293260938978413488819","155310926743873343426312607182060072939030765297630534544899230213054714482456829198485999782086944271490229412707980997432528653509945301574794242118433868747172279224118534460563400440670015323324602117517342201640016853927923976796453577048995243600967202462466681112804476672348206491490513419336308575442086511015101999847896197546900512764233674747415844045184/35278162986589659300679088538176070649273991865663041616088851923111175518405117391134863644540911005782372831496121355954470744169969774540892096320978686548284501139861783292226140413769665461494668479430833892857992401391262903582109993838728281915806394747833588629467613308837196269424421131934859079260185052081536487462257809987002198437182539441349474426375","46729591025621874782758519074451728476386657576036360734358719976400940301493939192083339293779149127132651616972817165172116269307276487158069293114860391502484125554406945249728802484128756924044633825692779783425628292959170597009935305429239702926898931975023598456207165067568919757902764815108751735753431153581849/10585868084079030838651390738371141142245086465033459640458366146849314274285871375459898014414833295804139979016362796357043372316321872357817727821559232353993714062535883074661734509440994664726425399880995133711038483607773782532430879196405793694658185175583691180757783597895616920432527125993118171361116684288000","3736372348124144720852190769710129461145889011598636925228657393934132828633132357232883470466940330848177425542748100211498184494252714616379450272611850068867816250209867530921278645286769418080018709947826876461419654782341309127709703626401211996255743831998918894661053669189312375159058718767082163156988766821194002596331826150321864927832618126580509732359424/844176851007504003627016945212023239308348428094023437269532743221937069345682900884618378849283002998220513307273333096775669556093005637615012750733216460458689282791632437851364674879152695438589692227159038555722539345972833161146108367329370564838671791241431125003401861887477969954740544092178721327724620450947646209914621007186497081420384347438812255859375","1258774755828991281578968023382624723772927642002016270484090409043454336040857926581316994594109169123354553321469500848146015719851609220423736153365139804086413284787598253618361769125996755159571523632747129480387254164008968993734442164892486441152227433281625391753702577143985047832519062595123255569172968685060844/283659859661671181526547833415653453506477950678651675193210969173130116121017723360258249430884213011988678011357458727603413521688184521573094783291496368005697481333739504490647194454695504722542014845706216224432373442438242355188461951883454664693262684873988061018976711201351382163527093784753398257094429403691625","84932063355292829988908961192574710493098897148701473172754949846455626381329456661808566365329266898990829247446356970454502007127269708487563279536825277374133681167235811080298134899629580318813382668399644553111080625918213250223197440426147821225593304993621451053135332451997633132772608233430131400186571793929377129211228689703376067763625568623535588709576320/19089978133324852910950469658566458037096027722326716800113107848115231563787455584278193954518442601810776347091253561956877155673550458955562102935555510392954425196165785410319126098393353878286400877305164869548380670204577544630353859009177051698096136470072137579698473017257397949994722015089768745013713383769765609613514021200888647472804720456494757423299627","802638881530832431828249604040579750916118423833791608589560402449036920165704012070349537114920882938466635598602387718300074733476150548724726460209016834416094317724261857969955414000155807312852092720310159572547644569797512233899495300028159721348599816083166712365215075728968005941610056018023633235372936903015771583/179951197386119079732438617407921535065140503043429174394605652913879982486051627760652197484142547447000508189455126493868229565647284332735552462525598465192073558793335913005459266977086104359621022691931002488052727597513413492393525660272900161375677499228252863529934576881596384036401784035248649026076581302370304000","25208742399375362881099811032135575360109715964024747212026245529087599633280142314962581193303683759605084995818253124445773115574470717199218828756449187055537877478033129862600982068782249943150019637186466260707552416433010545437321814115233841687700051830170191107127799355485920046505591193770164750886037885397478191534797655616745528343172318318678405576430544896/5637713398995569614196397857525646325234056219513202928587580534159596897880731043336790273040813044077153051260989730372846713618900145444802234629922717464041261370803598799826604841654608724727320798324006129524610666235998113655193642594744544226880944882342204407750193512869672849910003246504052298022468012594459974209940607450480609190841893267203392880360823875","732332637178584560220688900268566130246820235956768724845747830959547501950765063982943061181526237061809052444110437930100210105274824607344902764184151030827266142225894655531497849161692760385938786736436977268616029862577293984376170905024712952813234949508186306774257035535805330366742322777611063402455261391021097128/163377988152179636922409938163005948596822656868040662831003991395905185823836089887990201522673196719628247106777881741843786365701135555917263285268753605514812568258179391272113405920369587922702002732667842511108732068683407168090725712401954314293193572654347237716691784386690948494003094992876867763698101043701171875","22391374854299462107923583267570593886002658786775211597896252879708753450794332301142909715845151746786016535157797023153041007263258732991465037648536702217273897876864351559736449481285518249846264600935543582562018874574655740660800634883403597181876364712521253650744197321080655028374602772696770227741610874399454362583980465225235674816785988164157351243193265401728/4983275997188967758382167867656806681565521964135131710678447245984239733544941881418957694612909599261843693554043504855207170782744518943778096768859337980470219783210191765678908537645270392500777411134164918803949155037581108678968701961544979451081836872425574123683574475790997414488641534074873248802450108535183413970057319247033379016606809226547805269752123746375","21252344995592269775107236774689012760750850598567799560343535731251766780016530978663079386453430272698006977668063208502408607227544322945446079708000304179073184745623740466334127867464883762843346619853325415963062181018736410570113171387891518398846617197097407612852037905687899800932343156979591740310928257766081697645/4718515378484509142377558412184183991357747235892194234377932213613746008373918923611236346330189287336493794499188640380975364991548794341177060325509698404571318037298112293926833877103554546466055612498927474225619680186119313129604319096374924037870803554153458104225741255753314955115645304948564151765516183663634546688","76703085666560609319365659209445044957052359500745196718269665234646121134787807938680787341023203786904308047981099228357850016602203539979246579454229078497537148799349353250167621935384193502383187510928609818011142642954550330069991570983902841318203794113898871515702445720207144863877026526025447819537396146822201819435536435835285098485990260677737192230985069824/16989892821104122916312992616665764943723222199277412857053896319814438961475117951904867066845412639236790762432996309717924037467863024360211163971190006272168845197000304328480920483651558672879967350982199768255256753110375467976246339260326422891913564151453729285191351273342206198366624882195135056176502724912849575385576554208844814085228696838834665339811027625","40153831166521391225489894857551838468150576827129133168972859441122728710165233865309084872159583787083130713473702296122465319276461991457173085312407612757280915853584698420083436946976844240063731333638150599017886937783470942007376523947840104246927580254612991191040951001539641947153847776050138532219595746056076776809812/8873576113581065493273519627544307418139908640325227196912114520903505426722086265723900326735989771660987609604507503750212298754414472822477243293638486047313990878348820573874809636084574108909615044524663712495422565151340037564156235745628465172219286664653343193162657374410926171153516871765680561505768223660055617934625","200736374277835272485186523480177159453030082779872429648449412313247640312479214261681899286513818912991945046297334418102711629933437654377760028476767482162031641781499114859553677502002901248124750539270235098492377826240319766677856465093871367817683734079621359186477306173620331748496369122143019303740252461824523590096923561928354020960176605008889579578495073283712/44259440065125442964014453739391594153290923937737136823355312892557975399035370631521014554980129291582486968083228888083079118116286312583989433037097397252506140224404130371160608365777625538148303917306340620019882928744151294738308047800711028158277500317134537540772759486365658024194428796846364486187105343266398338060080611643110071184992193593643605709075927734375","488459049325494693259159444507437983381645757291858092983371672334043029615965882574409808932509285079401239403272414271652617474184321852388397021836909585659327974611273820676128650810907598106588433939541654215766888212287311943387232664417347883717203611092450971786083806323404432266197250919880225892099146722474124874256523/107455855466267410923480140898552598306699341366032095904938430084768624148829473848763761936703072253841751966906142283640379336131083461646777390874405323298406517250231389493084918065243079819898691146841695350589992171102939046740169198394671965069747042621265775948217054519855346617967866614303497258042439052681849864192000","8430374068596413768975326329313648683222744787097373111477788794692418932056901235174019333392845529821722488982447683794746518712070635063397464904489452840169472596494433874412726723065560358405027764015273789053064830528919091414531400589850704395887250756457780868677553068164933299802944396576360356896758745030955907258232257358056931680617626606715393885378887657377280/1850480358582748412767893656294669486390769246349349706200869446679212812264400876685764762211659843658541567071977813110496329850010288179702589501255367345935389050373021591572539260951149696801665953123597521983257852207280970577287472932167362521740230973547070264273850381896786822127290397075758780174083415923482640313277341120938690594859118603017930500014640169211239","58273615882491925540881784328370957720539797010816130007322211512070634295154626813477498607761260613353633996451797686143131893884559909668805628269959901044961666535533876340116728982072626875010391195372759135469446048394835148654407846242721443845351855234347422256700864370273092971804207514736924787577569355949601385705517152/12763172138328432984573837529764902730448666594097466544652830703737195804747682450548488162227364538052585484418491914323658215406327363805353540266048943197822838925184942600367647278764952826664684839953902567694832690683467635727409976388280092262839126779730168889686628630302519063225007497707028600865624133968363921915016625","2685278694947152969468407055109959900160804835228466214479525891103128459065131221736713585038130737099067040196326815283171857977706979990467444622550497565521863441617001097354649972660183038850033950647594754644997436624623325003537308428828750008305464174443210079059253920383411910911594636045517662796811001285984447671371943267419151220518726940455756833040934506414133888/586864816044968996825907488721678304211296267371936463272955488077666796280028127333229453342355554450708284934221461946991556216095213627059047984199091625921432110913096253352065238765240063555347292393427726758010888546427415276046238297382474708612526770055488323003698641493939145624184943388159614111350839555141202024991876221874110644879676602924730506882384603409121625","27700345710264347957758638741952394530538598225904772664391173119594616680996031886665218221392453628824570256438960349220263575741495285780845399187013582169907518462437966962923592601721119258663490655013419675469864809004562272799012227293974254329929404036071055528766397079743200179924243479370594973626764330855493789112414191/6040997839051213541001279276287478343874107660287651711609067205111574718442229224212245187655300348484144001298428958025052162253854676210451657425437588244676589965820312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","80160269787574270953020489212619791839643207793889009503234879683494928396231769167082355143564723274576166638869430572977442020236299319718643894871736539109822173538266278165276591962215927816541165548699380129014840956895931285215480350321259054359835472320394089646764361802445068798451796525897304221529850133401768027469126408090577121172238802281079916258951770135485696/17444957084936455555074876721808241311651668802091828589911310253709517226715880722948267977560381436307152342821304525073651379763144281678911047276389231713860392794975453518107055568765009486973017341479560154792340888780337029481646046233967923289468141293699236815196553819373828280398488966665994092877680860643266914861837639322607761804740256920429518434353839878280875","2352816897072623416220002134476921108405735955266703519252095150412419264317091785317803024028565851487861978477208755211589867803009700996828082850796103789009194767813611798769297617674631277847910238088040257037678126316866517601388289837575778165301828137259948173292658462765645645868094197736382683775415645307647043205988394700/510973411316690313485681833991645423802776865720580280058344111363363091616558230182669376841383375321912553771027107891991318313938505988903735114191313214327683449514676737796942389784957658395806951715454372568523597420866050825822028817422805046287798054682484158011143949412956697442991898914560191411624040490122951328364833797","6403295584873165688372907494046202150046769667837790834896334486679541887567517050446119511695248926941383207478170182650927368177009669717288184903306689332746127845953193587519575304974203099873732502605739219028995266139383163062837007982999189114810534856227848568800302527760100163350814120545587074865568436789021082619398126713943637898657861949091545516403987546145915409024/1387794272010111535893205703999712437783041553900341112488641528986385462810448493444968969845352401058333929711237978223214186693177251566069419805757440174840170213159651962686467523533938145629444468366235554597245713128812532716616087753947246800626006504878203666972651384731498770435755225220796872155249202960801768048854869001310722927230237083418017482134588865244642658875","82993247683514419570466529457059660634483860665557779709153549045427987672829778520201315148149878525274005978368939092115193636113741972236218502664881450367443614971109677363668874484696543982239492409231870942414193419634675024621942196087473557914167832058111113476295926250739099284241826553737074679953551191767148712684157318697/17950946423927357725787689855263532224005643859095168852729513034456208872420513601894508438640531171097082516559962755244698695622824386001219435651555513795509616906355363573638916895074349491513539093024980575852693293474288638209680085037286354050958859425647536735341886663074581909148323105020337857959651624760873736590065664000","584891611376763781852144397260140844977346305541197362434227194779766612939978629636198589818106137319267243431810481928639442343946346034433828599323416877248326356345631611148749005937144684862502198147087702668524450709118588741606955966569427636630159793409544653944608958808602551061186799401212712216156799273254257486955348236914237644151956226336750212957092204830385441792/126256710861549838395499078249922986417488985866522660521294610280820007499099176190820291214370699289977888813109514854178180265382471972583921477022411657285850911270389720508719377071949050253246021921916685716353393018411683757067093259101151481189635423399611625009617884983318141463140199839724797412514785751549277231259345923662499623640886881048572831787168979644775390625","4743054867460856425399742072925732465660626340183690464743217147109403130730445842673866624947360862438925194786600531200056131309608642363389833474026007798643235346104937733349791667694862514383520689594596660275306247615314272223660862212527346572811422915223417783887717426641317921972456913534338708745549252254865615725859881457906376/1021840037832289788284691535543138164288462770384961802287250236519983887262771944174557087207566030730743075334169628971336358708580124427857321953981475719503574867471090607795242192417162791762511940848493176847925838738242153177311649130718886794249673254183907621449520415060660496225939963471753122766421338241291756892571824984344625","3784664074155769467702999785016514468281913375341134899878893061325465790589101335015569840325786070795267055386681356241209412947116340524588831510768864231937929260236754881829005065056310226407358204278658699999612596866156294195316867934035877283950841910726224355461522065773816109849107487214275801829843762482082803559183694631856772777313673086715631547326400170962722842240/813783281473223559981291694175087508812520505931454895884442580280342455516154674683217348039336712901850738745276445107477919518905155156380620466135946654952837573797479076027688866326359448543065305071605591497778941561986579230698384305536224430794233462949056326864499827444363206162251104552740175503996670997705423888382328014210171324376593090187604268086334796245552762333","1946671258536842642381655747294621776070051525209940130115769153666368932042152311477746728678182920842238801763565726086459485050237860693394471644023999467670017470376746609892484192072297938254898880354014176373253875722410186683852253828299669530022166361304397631667133689128358365296701757782382475692465977794960109690362462330857/417774039698408581013003883929127512062321623871486379101498968145670269174833505080260389860863417408848209525427705249526516766731427603641806256289098209429110794311660844125377702016056984573671024035213045475132134896835814746425864304907974005950155657789157496389234919107772201305672421982198984613601511388413381215220924416000","328578487723377153600821813410631465225159589727320893988991729306688663770697528156625398176929288628930496338036815910669579019719633124832162035588583242320537435554101841406566009219059042888412893352417446437227440076869427577701706713564212185163005644118869496869980925214424591264870388237079776503547314587137721633918824664946974571838634860386893404364499977966899068777016064/70382695927096628347637455030970644630942872888311870124896575877585692281624151103204551947776906510366521972834357031777287506848887607457751667816514216907338309372900327919413372044625602555866294337672022362865161523684052940126509854895320132828009551012639156341878073682501185688461720664801829933689280752623773789373199210473995823367199793407048741191786377993390965297664875","2617201476921368517857942326432090876874414269689140439151907982631768946799200744678055980827789859579196832718849393046147656447672531861353456343821196812881882023188898815179947651274131166835133965629115749368441605680383605331300030886676081418867305170012032824011912531673468215561506423833911621270680104083533917562622600478548/559567121085534865189976875600841717161617153776904752351231210970240323460800785728739412474960421770806162360125774000625035522428160837855944215417821324758873127567654244465281354654299068546570789547691342609793050301258532586131013585959164719533123826201937801986942606844854123769532447570107525081084531848318874835968017578125","636225736038986537559880265988431731529837451289737542395494683393492040808565905376235074534207026537145408562785279823547657299565440309510931336394031904920056464959974743525662459433889398003683078967642651812081450227654478095420306880762753401111260630654049389197602389949892636943971690212484981672010398108426002137114819838399222096538921225458913266993881960732663394566024064/135776510176793971074115131648637508758953050390591773574951317807919051619690313331192027871176160424663811116849856489187562728496099757910540362703888937768555824513740118941387831822900198029266206334350448626733139136083404404120210893986654422850183837974770675600952078956326317698998103770833069712616832650406225828969036781514645731022616236082175582937900731419575337473384125","266695771933124633677367149389643417608461366874310588884377151539325854547826373711099517873721616543570605935954334944030816383858485296542260152894035979141266909050267414072982042090341712035518685997484257326212454742816979806460287972757626105526907510197321350895873473656215941034605746494172316089636216915825022339855304925515685/56811706665210352283362623728191218698295056176625217939528332247537278605113496147630185544004654583441448319260578659922931798845493756189402805173037491645434052737405379674607517658118427614090338938517963215812444779184193933749520313676564187507594274551791388039139409235056119788261689087831209441779870873305232021728002651979776","3511806683161697708497547617957719390189982761002154386881580160856792742952365159764830433511949678304281539875366378131195670004345568047690216126001067194904446295336734931691743477531830892015690816210752795806120303198745685394015161323982229908105397857791180342330098240702332072396030780386362735967021055250450666535422528637737695053315137238368787607412459874094164027214953984/746741569878639983491390741637813989978804202898438708743258000150996080386381281307609038830698579358879333079215327202911977568726258527646560497079622703052765164031089590965199628534477381843079892123440214378949632707668935001371616475282883095939750704292616758568964786737752325652839226013335092148777788733453702438432279149298482004122593243860829060557386699231448957232420125","499543951252504651717279461487337168721376180441322735807713499521878076780205427598086756686061009718016175215146305489885835839673419698751530207404115002383180054704927695269921072232395828258826213554806570423602966743337801741633869267620843626804016742412046844770601322513184123515405692795346790813502805238635003099976693786012816/106032986203682550514602969462803214831559442358811656484036951559991322084935692953211120289352600484987931812632505499612220494311324679562152078883141464406938524087376964935494245010636163705698220308243980789514815579319533341929989455211613890905485981353837321342730307819060825125980500975023479813757024395422041501208805339176375","8540849722242122835873311629952985285477986765819584558233324868363310302206006773828897816547299245727087876984857726652932481899766510637403577175623031467933486823994040576431755172220921921877192006685053572215922347418846423419683723609799729359551828522978186208983138345476801247634773975311405913274552616037005854836040162212761099347518242200807692224460514057530656658616850816/1809694575992816440924165741094996511361288430727981159314194000585536832192004274726651828760263522962868944612215633976203596150606503849595633388319338251977160257979846235995654357082321611719654136058257458753105122024859078420173515189641515736029725847315662215778251370398007468665986604529263071981040014321717598469319370651877296085250322599247141397427185438573360443115234375","51377057693118720457387330519321684810411289582445982078756989158447711080414032055843805733348558621949380554029375294451303430269197115810494758213980833379214402452992657502777067850631862453239349835215260705131864911194740832694498014048717871429797341104227759557199716944554347879767916801106279081864127192611546757627038037780244683/10867246748205139797826516105458406878398263495890048637741584969144406206902037615496936724683237700974333817527350121106320991054058406504571347680049945745432432384570515723033245430148177097144850158758462968940525568041926860856763884474605057056550146491001458649244094211354153171337463406192651150028767064600270112838159624568832000","2517199821548153657910904242290029026229621935918771922146425373057248090467388430999870036608278542449661971830076845113363443421757278612394167195431759807908413353743377586893872930828548256216510734912027450642648789925142482023713336937258932978503310551945630359646777080073329099268529064437120002567758664419443374110941824106727218341795100740316967386497091058915066147604481280/531524260324016969370728057738851340792702640911631807178654723224511108065633433027773388768889035083734041289308124943130099580765995149865288328550751289346866467755881013217287175392101334538392596956248952430438673292186779006015549928829953979591250274457658042926539541422697852390294886719770034058916886894408015624288115732154492554105512936468520265305162358665491880968652687","937159485027553069020805864547349554547661693803137696125140510201297417077233061462068930061915381468160677500445535971818609631674361074587732183297775728389124966713749450996643183965795829780345678634356741756033039293590264355732129789110416943789326482663579413229893878422643110852069225671783017610387570935863228248464396615988222968188/197552642195166614912991396771845374656891854357948006221100585931656016640982345159207601253599235265353060942313995345483862152489766993442419668492877390774016299878943454249209917002169480134131612530977452579520564400124908392339263545911443803619972765231094502745980083350567509014991735227390978850048088378721210219321877150756855372125","5119346675109082499980756672052066247676641510661024682574296075659671743397880591881419516307292610449161239233139088348510165442597278965718490070997173182184417648987611422446347235659085092530927312760229499083348217392125906851921500360553758600756698605047197529446594606336369425040236883171542367713951500007600355406492128741649090501989105696576697387613035366083536629358444229248/1077349190930018641197987339365056771667455373500846354778079878558146320193384166982231171317419356136237346389570422332278447217033773023556383420372685049620361481309067017697564760747047839930422553324681218253359586320952896352245366885171583221864112040038531116947187482413031483309534553461613717398523132176948321964066833901215878133594739833910960843185464241840039390204295097875","58469980853327028628854378052548435225264353747414624620847476036979290604604988637469977624105451959796142112200285366199247075503424204044884512269071061176877225315884188402954249683107639777479663275428465242905314418930053869461904934138752031124685541853599407727446896558064252696813370692668496452783003306386669962110734257851955001481/12284458784412533668960387046583440199646081362484321078872891438551639470826582933879934711861551014258493898870867541349962531447724393381011633785884743889445407749238183080941846528000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","632694338036291086868292541736272151517212971647680989553388199374739841494700315711180961760384484042159533979873604395621016272772109619401112452105475906812313548587880899058905419220497456502543971131226430775692744506047039958551641270070996110661036371362526401525207493270590999387476275629412687473362310414634469788979236895300129227082421021999210841384596617452097273320509348159488/132710874087075221626157136110978536488168313127228703025408943153782802265472978945703742152954881438058373686972477195846162708986982742647038014147903817539418442869011995988024638278746664230046452545499722614320284478925059527086663455478374200352375121910000967044366831275681254530914306064535110528723482282501358749001657608122307686482720926189537227492041135055090784059994118192625","2022422468242151190347511883185841333968390991430363660248687284021524206079162212007263606819387821055183192871951076644707111802972354128011904720586729919826758651167984507804867954970064938022106484656560866447290934136610214175516487579122328055482392137619829739560923807880779865442016530712986750711199998190148885726144596663143651240/423528009127070458603837580844559347493775236970253513203186912091140251858605354218715508091394564000304400858761758838182654201653901408046974668599216804223721114331085507752600832390227068985693006017591304916519540245902645712532993889000048992026931475754508248265356181099817467608863068068953756055334213584649136541490530849577363647","150542201776735231618709653388506394887777837646651406023174643241783006776019388336318216053045300417086929061565868663031237502137150880313922488106751241006715449458736723129545400133450376339156062387859536289694727635468338235084533552501618659272047966040838509286942825414463511175531001410923014751124732748099355476332649458471135027773371541572374016038525336728276024676601778299264/31475618522527975728853391146702172347290819252268551219771201846701658848754300838383637247014705706066050673096278897933831272607774110183488615338021656923433335661890414740664480671162459271850877855521869741833030384682549648626038314686632195158507693321505500888988183270276134667071014075017317692121986144742473139078857816578133693776368882596780120407949076129685719314703426278875","162664351499283182546788129866259011542529017155637405328005084357078048074065548349602626724265307733005745244338982661090506394708170105916177679714664432754153795772811389612700051002336719842784098507498286260450939289109123759859710248621544296008356071415713931721102824434964336667980062728653562369697289761913925215639430496443820411811651/33956433298509232632327667206936379248172049619640091186698677954874297837764235300806836350019565970550533206216590639008637925266405524715041372407701947953283803854153876844320283735281209725651036513491246238622967031979233265136280687995181375582844780830517825595245506321879177965868747546127685256867456319112247572348416655367667187712000","27228583713734183629451808889147559240254570554044667607519238865891084165382075658707675405673276615039702916443152954157535195508033284355580742761569101934821088036084480297442018005972653124248838420021440899368869744141698556359295489470499243402799483082406238128875386939389123336303631993557844565927960009744780823166462314116039469622216263221278402673028225214534859076857413557466368/5675134787340359276387085910732530678163604187009567576895331134521132071092293139167824957253050637085885426100206370974479279292804959049999647539684766632278449357893560561608633329561385765035738071726214510832066885156767060324427330401967034889966727638276371320401053302413136551142103678412692111973028587922399670456670380189570979581674699102934733563330382821732200682163238525390625","1340937726818688387636018677960518622106989311577445614347061615417831160296369500704524022869612973331444242000788110133157689786976834913297544087249593601420972111789552905846168933014570399562460789075871112224533723259660967481288525220689577290386781169316008987012566216235876842757183233207943071523447855623001920854571597886491163165150556/279054368814522483241446594911968519760869180429079780837994812436395792594449929617293503975169489945136244602350941695478861584261665582123038340824700224583170270427163469762789603657025958695551448477050958557681299495041994050951692916032501884523150972841782658389836059236040091605838583126400660344344601879969354053137568588338096589095875","8910951660339249479517731530773509037034977353457185453617569046885132434552771722727442649095007828468878374139001808825741829728375370140505088133244952288239619141544661695065318568074863317054989982620944602245967155400712702259180443238473885690297281525960618905625084639870407113029712510345262279507055197024677292523214467306898573956604928730377318210588837126450942086527893437954864000/1851573255256476362977604759655284263358595254392797078730401113550522214182030016660458780180636930591149034499142464357511158868625309442843792189394292787657774627425816694628839987456477799348874853555586931850788645677998004186437300173080088839930384424797706381282430208961565555953254145002318893188197561315855286173276564036402546798318351229978103276843822345004757661005876638005274037","84997663352987536417038496128111159210386455419431137931308301989414462311135708114322046234708053448098538629166672456703651524480738219822858469100454933583774404032968304328859365484249897913676382909050450855222567147661842184538302991526635974158862033287154321908483007506326807469239745851379559259262425675035790574846229470041596801343087041/17634687575122715507915388096857069366146981156897230620371714518707518105157483283253374797127075689236298114335734874553183291806268149747826050838089931351158483980735336772879045027213982661634865556129548356487722537193914986994283729746578044621115589195066212043187229606921062007047940293972381121200723292297716621231320254309060321476608000","1648849257486312935416274009474520589799750757877252390543329851029437452988499485179026845292068377957697884739052491455807688429630524210823560524122596610276957537756142278585091315141096146341773982302888007751632401090642472506538817998043326415693840862261701364114923327286462650797963969289743571514890723145251583881752876340628073395708716735192690808352188867334842743895738955762067968/341580411902962140529547622267381834425264893226447658723654120920549166416114849731588552578626041597847002946105459812230979900480135423787717825697955152193526724029890829615845314765605770060975538542976523177976182401820926854406945392167140347444433885786340415437006775075196031433365827874254477351374236932624514469241634422312990555534789607377023339236417434574755566856489013828206625","4899626659231633406569362199187192352933567344960498139854460545644210119722856870634652562532083546344965166340063297647520613455037240144734014575196764021102614748218834054157165781057405100578668000290493431869797883155764963238760612333048336953434663867580862692267574574465371615023999531030446250351305046572267686566999209229202587258144318592/1013522377571209303732207048597964555261512342860326827024786500686692475697570284120359840724596444209277948648863014479460188496587721578075151793081823795161404110811480269106846359964436993190293615381593756076515012514100289406862487971220020752628653845345780766244842386136740768474703009091552043945843632199999007070800871588289737701416015625","362903847358088423032098939589019598036593525722040887883164115981767777873860799955715587436566233010543937498922435963385091400670303956612881974450548904906949032005878241638546734597308786514086678561900713741746905742866635779432216761799371793260025549698865319760786921444505323758235164807966277024031605673481480590193724980659448692487108892154809490199414370023696404259691299614147712/74959603173756091922435708504751461448318819548943586676159545028063979695880930926805574951275602951047845904770828900645717477098988124553474616764040938121171776556999069351772286262529729056288451037717198273521810585868307402693261479298923209587143468206907278220909447483738730657438961435587752873879244136801168836767273934997417156543866722171766794171623224855358640156858606843576125","8521348154958613550574095745596657249924328336262127244827955886474742319277424381360677655239017583606851483318951440691757875270001283229585075137091617073509041644097526047127618954293881264113694362598157456878784814696577083997902588926421675843291157049153701100218784481406086810264243143337016042301806376864424632290226377881206765051896745/1757584673254145109614914862134217345456065873908262753169404848658913774363650863904627183104777337461445063704655164325930891269843669860409763569362863600932267319335889540453302785099532688264425988677082044905948179153286276609910158854349711054144968131934713419772852663860893241364433872853338630216232313607969790083448433666334742108176384","1802461420562646993856730082999823508145602238125054717836501201545920604020389361370931345491160549787411668288359013059160331370751496329806488246135100776263777863399096485894306306621852596694700845918608199329091852956315870664531614358379176680326508877329862713333336188556181470928613423972314983964578645688876556351433429494008513812136152576866650152623510296911708111085518974142728903424/371238439252064016214448115231139360835481920731625321084601566992497057371416121407293286027832357816257507287295719261141426130159269433199862002841433235955835172774430690352481806933860390015899973299268361513643524088242973968537595085600335021120523852420135081643310663869327371821064862449426404044951571585406092523478861879148545678639697679215289523234342337347529225543852787599016265125","88795280670112240977945082069219541902481768504536167808816453021962616596410396813316064685579412429940019071114917828928080181638058444302439626425155946562362550070187433083541414569447612195370911498321149367969974762244140788494955146280201020345849385865084095189982291190135293114489407801749533448443222584092575861096946605418438181411489276/18262596223069549313969288693970246663726147886364354584825624311486557881239003216971630599389642752648815377795018130449384513824927138566203714891090017787258920529990523519479383032564209629983810866231367438270859421572641494420831435563580050954867101292568399107965982704216434467243223964964535464624988344342084084237484262612100980519602625","752911409358158070688133336918078236438086521781731735123294741731669530734909563155732092406099003582749182967246236657021875488130304108082404134004381196925042617909108654109138702993903561036987511410396567636331465803949049946947888490287210013788802287247422993384874670368649616782837096233384279817294778916419067404863458318451722971117669642134894906235066332205740872938406767767019265664/154635332883086377656813458754577288834216641577439356891585125701020579768315520324293435008561626926046988056302745604248220408154454267643222328696606367409715369481567213640103076112146615938180089303294709009813772509602954514391675152597458428326644988225555987883250642389550531163153338541870029415077982539614784206119074702022117790679351778993541426110436276530890609137713909149169921875","15286089077439918584953144558775765002061832952090847117286473868694909713791678395221438112006475047633028543501632631679316850512797978594476229228325228403849089079675681042224057234415951253954044235099139983386056610384489202589484570852048157272551098909455253037561994944665563291526597323199530997923272894119350512727802414680772513760081360291/3135161418037836259442831302977219750614726139657718770206960776514822107155928800694375522572523712277389679035632531727155957120566617736817225541673148354829212969778664144907503411589126111888917929495106029890532891919001138770210977012708107496187227751496980000137223047079127096028939624830654227758737339725345681745847598157538483308068864000","17723482381737693269787076798246423310802126092500438681864673375704464394105734049099094818738115345706100191580982712146882034618103161268453808819471603805345990162762722549964406042295355916458624836894291267553138041035528315839108252422478610879301656207772491548742981990469454529537049123948604931661837539943536878260665617524824604291547373872716194154198824107266275716083848262625068958720/3630091565725887087605600771358216927099748013831912080380983545872077197366172619225751217619097657405660172801849926220948413919823038425519006413005998509677472226729295278652284861834178791332630676772284971762683579047508016687969040658592436230062049051143001484384767836353233324570686249824980508520186643477313941054900197268584495128610811273834192099099592687485176400539748616360799518357","39160514032490258389003214587901781721548011632821053230881239001436341012396166857515197251499460842954863342641015306304854226194551189224721257664420778416733889030680295206179109679627522113592373938602737416822981698362363553492610842201005420727750505681358595340127099855823746410663750133019743170700888375554918213182862789028531284364877435896/8009919337434786244380818390213546866794958389603666737562053423775386173149395943310276429895991903753441584557917565343673605019989336264748588735390182130334278887642569515202100870042209261561001627386525182096090194076839370589780431326097965428311786635366819094633651297179987340498215947144870164066409654464551017761658775207392803825996394875","18188388167811476762477659006849121912679763597132233588170406666718758511478154418948855160838212151370453213943784067796172102916618102024199200086478021533171984254799008541948973652219533819511807681148179806051835318645591102296256347927018942348574774821478499092054497390790734798143983945096982240517058861467440217558586822663985584775920517755909444876443211404222400335500608733284461685888/3715278241795087610941547133490827711133909145414878217965273061493740719983191775105550559905283733134189195190321643965858771461560130864714477448011225816210219450040558581571206711791272284197614810026220745160693898421068168630870850392739817340370146186703867097982858560347971281142766235850971837330222970900661653800041795020382847588362774677568059355238174402415384788280852059532958121625","46353430636874284402376008361176880938798775506236714098123916668545331718677407145199311191108199195405139575147933283523305343027297808443653460575141799729554209181454676876263582758919969948546918471128299522715691694855904535448703118221685887195383025133924852224568922999317583667985459047407473419196367812949579858081181660610155317911318937349/9455890179897829052705408931064120820559254220394152447502395298827357144081378513080398823188243663943177539817982481713456798757563952162598464929784370305696420245648035222083207596797327498500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","13607414211126412689435920170832779523235279308039712294681570127241403406455725064605210473923965685858012114332021572088551127762628892611459785625407107300355287623761046438724706918300976102581928643740596336865698485838431972050267114940079353996100620311097561405192365496385584164725035842307146351211183443267583872067352881387294766804298681841402861626441205037637282007810811602289501477350144/2772205947240095684743358245950494400934136973845543049938212403703005150954425087866758842625041409060217562878157900197951382737615822655863548356735553650755342108183641353142157728364469706919993519071329069805875834057743793434164720370026073143626055293058601124362130539040404491770346043977106988100969901297669523170508321703496903672333781306743488573086901583022550356345156457496396749797875","23264350093315690507131500726914401771633259602904894387312742275462601574788485574913195967854009886824436237740789910851843045306673524324611130536719802717912615609109285261163220007241492964833933975789257681755002054890453747803418465119567389315754801791950553304034666399677630030683759466627797123971742061866928213780452325847848901682792886840980/4733430508316851445525799359992627142007028326865116523033957869609125212251136452396410236930025876982265915963089597825393317909648054808274488356887197933393799241941120691826916741647173843634076299630884655997401370400734954098249519111198509015387869462198674657171808841005212058822254513429836457539629035675822719720295352508916898476137111981397","538960934807826161927564251064896730663918579817797131801326848839524373936888402762331254883505157846659830555799909822861853145306547699817986010353774500545305596630924815657016569444824389893996399550343022444937690798126189162954188680257730893424775303801562327757655350002001080811866451425665301674688928515041429654624970707803336800125648742168380676815769457467038849213225206824671025803392/109517448833211208909213522579666376007937648875042608355810687327424621469323788799169718267715808580775296460944943658428295481347915131091297305260674731651980547668762317138753250458639043477453950774629862540017034566407286963562574188172753764978963685535201028286359818524519980885827473904574840285411260037264057197155527809916623487144493019982419606308144576939532055057697567269576800542875","24451481554350251656598350124163983489544445991992661049829014268366250968046589127810466483349378560701491445658725080497078590986743512397927747885285095846398852574219367580068049729894667374214861939897557930527646930793431512683750733092448862551580494245486308114129295467976874843852138144539250235632985676953662288536669286915983261820949386845806781/4962240683851186225340479316959605207278948397833849899236383273145853045488131674290332609876751222112917095096150531825255611911377071887145019702433883343849119017643117746273523770961304609989779231048095665388209125939879595509516490230961558353074751312876252070889983946768175488341370453053495319823381943793679003096504200440997908071027962806272000","166591964685609920525429719961758335887941461052357297159523350448241484106515158310298216150030768812873781356326923214637847449893575074813991141092681107583183275003570804134461187213143832123628701876041315736048451374824101256980832991214945762266748755723551899001458245164317581617731332466039757786839492869211248064662857987111284518155462148044812626055842061283907063784492325693994911811072/33765943466859756347231737285768516240749714264564410814839966011490233598006227246396923594069488496368994857718734549787000213944990695920130591750377483911116845697231074543526982580529937081378303555262933800375576494067959129682770065443667091668104132884375840812635624862495548888467575848428463895756394050252457592540570490061561616914443009224917652440212112452400106121785938739776611328125","142464729519206642943985715465196065680101634264787375740459792619754842396453535646509170066091478069799080172299369994438836484938378991283020978342879057271045033903518255546705211647900945143546293360496661466657600494787228476009216508124736254967761901224547269496682078470378676865981855568197705507111970901389105723589666709580851611656838285777566736/28839643075889294346635430272525349651555039807615358795334663734940126053968249608601725991946342449660829847322517564370606746964714098508298705743689729306507554363954348780144675937510900983622836770223945538844314468550644543502501484521561567788992156632892028591678742014134130878101553633195551605796158103033794695984958987367799607407626319024034625","380457154857422076784416625436182734840012277442496600178664323821064977485271288502806124740204295811759917468598315932331219906040253463960961995849761235911145436552991677050565022181516596464968316292789048809559129516930574340710998611088996508613850407294743457197519091160170604426002924022923388338999324182261954685794522778833029950214443271526469607532589775916381786492089432407550224137344640/76922142291839859196033215395526448408989799722090330866256930898223012427332209054699494033511478050536463051459450844520020426942553107946282832072826069342120835351421637970462054707566481086202287686453371483126873188020538661871147778312986131920021929455276187425940666580158173676284545586944833678819622895550345083175685846944633982680908505900099388037050135210936852210263717185637166725605577","79999800708369666670693340813609265988600461251844239982904928629083975986385235816587497657678297663151298709076884516168798694292862559083730259839524968813932151813233366175091317046758260934357096757322369138747731224414176608247605314668045838769433811781490030635374856042786947109101585097035794969502111354126773165391577217071956928171336060247633607/16154850265413610119312596299635391433380319311682208755390341659152160578366244774029302281068833963848811596545791104919556346810193385001196395489740571188884873246131813864782581356887110499639544662322008824704830818136660544673293865921754569356583698951612797219776290835161780326945625621758204931298948625885081325268123344406261740843197232316416000","26517014004241498798848003208133111307300592620947908933072661812816683085261359696887064436611747292468717739609776825664344064024535028242737616786238200200498291226984541942836459188328346609549239724653950302145388877472274074665166631509490297630344351573245265440164082334092997307729007429218385933622623935704482371360985836659823269511115937443161532987660855490906546130131716829909388620539153152/5348257529530073524280989257577050878033239486885664777340947102417077875628238501791711336803418503616042922880218860266611595594400020206192599559925169589023339295256084579966533260861249529670141854632965231468533448709363477120437277477668173149958267956654411822360053335695956270719680086524322530514249891157439878407417971839744392044064720476417844056346174795601710447583861127956455406902139625","71197348290771978405602732839537012310626009318133570890482364371056186523989330157966045289127980687764218363064941391483781008265266963537623770685390148810455244349859354857421474277963009857011653865476081389968122418691934354122230780300833008753686234433642072919923583176333668289998661499146617277981691372057042930131717336250309680764289256080895092/14342680993892886303954853579883363225921109635079605392320944523109187641283117181461662846411912306480691901515655220490850586434947504504317080144378185989596578890875561336496479576651516902048606328604696610314441229321219627021610788398730173161473456954861916116391687748151443335513249810808309201830214153565966339609616397865465842187404632568359375","342401018754023891059352629509715357053454506037284788725127073168445189422181540408896452651232759821766616850264122591225331120588918865882061344322996688880669665450231982002597398732201789017495427566260651180470635467002453249479483900268320570004293679361696197905823690145326531180324429318916092471863347575533714871355651558610515931373080997536792242278529575700808878786732127630024064418468916608/68894647682461956089382461406499759613691148650738957016015844830333168307020284281532026442272618372290646283794122772122665531108484704223311663270836645399554940741928358317884620420886609705267248656765357348477857852684140561714900614303731786621656041881975328169543884661780531057279582784036689401206706069028229798913082362331334839997133771880514515972024899408556517159759907883793675672065360125","190286571838805495686895463752492174798162827967490343625540320679760700551286395956241059969689020885714190883323266375067607282890063444652926151862650426323339187596278760962390404656342309737428214493422028545912504503974763216230927196187743439226243880933947417760147785405444976177822143722569696182520826218120595298059020305548681823408268556482981325/38242608291912408815838081993045123864617058390583394828737640036167893859507494091864963383596867701436244007905770284939991912884465101575490548813894148831966132970730263562113961685364216989999844961688441914455435934703797359360780356482629495214859917249465567846934284121032247250332634283689409883499295469118485912489058982596725212975311140618764288","15345379701153714436938289567639102307887273898834051456693981514956329731572600026866162286097662958712922836383881840211072389867463987895894067288699955858337488812343674818565432780224654423872618380928462939482247900055572079914753652915184313685270722583926261499687728814560680092231526501970431280783177357735398580700300402036873780385926225005561766822479878280891130232036389707452005183370152749056/3080426623087819678602049171756961824196425548529619576972793653585089380165862889092832375934535464160425580449193072125955685099151500755278763306599307218302635233595329082702148677300945556130106197481236122437978375963261172524503625593066102601042060541617791008722569799735202779005407381267021641545644264334109052258081225159748043792288699674153722046659880085850980843460715080965607434114275256125","36443601662144279337033484452272105547257065463167427418525882851507989449375452076227652634440476502702584889057376829320548464677623038648843251719168810701744338735202853412651160681259533015293997501525430222870696235141468274274064390273214484922080219643095978640300874086585386991338440415203863901714217818222666715642467237183267303214471854472286478344/7307237990148312451155090506264642657872224684879860008436735430879314349554023096366846856470375025555139219961666754780864835035902856314981482268319886395881809659368275720375576152008289949085453326722156553603358879420820012964006978808113307340321824660484441618487292138631579616351777191144073820686595597986548374588839763719082323114663844043046087375","1575294930860663922843149113097927168024893739962464327016763741314068438447271326302129681931564068796631337571133444163024224071270063174829664848259482066723104251718808936762938249028582992557822551950212098797718627418782376027133576209718376784834456568694813577764300716139817031545408608110880973380162736536313173329973171844528083756524804574267826691156368696436273087171467254161930265910972517504/315498546654512047637461608750018349421492986465373840347519942494904200733840189483934245529561231604050629653992944140351106887747105945984325466452136415067807666316202346895657914393512001212656936450425268507235863153258769360296536050028695266363553141327896064944506216017933135251875087069031098099192325817395958019524956320840925176589616439477134480262100237057953933117460110224783420562744140625","7692057599553133417225997786980128299372439542315125030077404519679450372805989755158000864378924877036225189784045171045139667691524763609840822628706422918926410377185494048355128046783294954373197082851501927410350313585640237550107070936498164597231431242858771457898152684298047446530220873884022213114819556822050178579707210264243087257050468000092842761/1538814487241112760739561704846381585063002784795057066438330325566843108114787083741788078680861495340026117682606689156065008672344707615420501964123121620401073675430690541617930520947170306763541251152854304975131871537939618684186766168376514664494488691311397307418298556185724993104760692216619178358268934740746932420562664234738576394742559349407744000","15190836470550557926140012263310230378455340797095100474720776113765300081463960235506950799869073894127884189857505951314428810423734978025409205413789025720642609035117121385453856877706229778165533034683130064865256448444765902482146676668197546098809055341050873494446231793312407516463576380102073171090898973046611572020564659042146465345334273595086941562425006763960197801018796906114925005810069684480/3035556598829526968124942916297025416522606357010637652635799096498208643970273828496655227572100159414352020909846298817521082538898702393916708804775798552206401718323929157863173504795127180177622667376867235806208021329981136637175570409791442328468473111768140746895005561471574356889047981458002257872092408771959478275534098789982899056118498417649167444480913552548249005268380838457505944462494874581","2923754549090941424546974281011770689534961442264350984393235983189168024079617848190236639328676436485460311093391982825027512234467853098757486086492333410753919927528867817406389678461354257841007722472106464785557179844602277350411593959136520732862935740433163383885526249897183805981219416420390137516812715245569037561966929572448247077578419534651990827044/583599691615378545100950777601104007812792435102945248411439102112424251478512952087517463400054567832353967731887062349496616445419782499817548928078665212077449420216892583997505908858360011413290038645573504472422610780073975450391707084016931661068694024023083417126286468909117254531307085545768412513447197205482285022417611018126886491416133665625891075125","441922815213568908489589193556560586318864326425397702047965372289295962228254658331201274291697626694859414786292266008476137667843874780506886929181835469302142365772763129838217316953835831059616268288399119642314758261677639945004547833810080700127847214666763863338091523753898362699222880772298183760217731228628442782431573977490761665091005756534420789258276075174436091798475838370152192077494553263232/88113527373573049332749294663402406454524640221866407165839162576979477138694653404281889227416977618913249275712917582743426231744980461918772793673202077716234026090308791893409200158969108910565467273725064769890443408324386897017825489615600787634985397885230455168591240328585041836771921929567914891379235573982442311269392541694564675053636078990836491104116280492254795616055818375774141667319774630875","91197133767962483852278456285591810579974783077874307589555559715577599604626819245000672929518645004771085106770784762994476973842713035791487204122653245797126906189270204029735872508462106527240320932458036231707311992868347221176460407003487373754014365881209649632547685657666691589606571865740595829983849941049450471212387808617247938941417000965198123059467/18163679611214677813643455199979098261849405189805364986036911945012016248297645596270602508015864371788974684317239728239847888960155365342460843559658233069613218442910226128113196984801126248862273503232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","733396724434554481470656964167233690851279923085197144879644750437402627936723531635898542414136943003236478432848965516925891956615111678444586384493883113385335463639674699443808084827715994137410743992130712903997815471369201406683862985677774155704267039224546352414417632475628136460919900347977754644214725932476856018335195927604771408949980634142255497812566866795799230501026066145434755838336990365184/145912495644159810313026420025053989609942265686388630266226856650796088768164358961644113076809511566125145395699271530802891523741636707532676065833327082092521989958971154798465784847092870457944857590623097781956884297103961713362268264159015928554707158239398721416218953003215109202771651993622244788505649098445109438104466256408060944298437033058380804126574878377874459371251056800895394904459469832875","167606423853658713615749101123336326908381619586838606922565378505211386185130407423587264776519589295420758009764678759213587906216543160801059029133457062067529468464636376639307690657945597847080706144898920305379653754920571797771178341550808041652360635584401789901525709166172283390177673009483341826911179861584213314395893323035527116283758445038413646757280/33310364848744488727470761889861069993071965180756187311178124887286133554324042422503263994717993129539448310743598138364172889305532401505890384806078790034557049074169245078416704866867380089103064821732673967120808611636618526737138435792818828990403374766228037003927569643972203993263329403469747342204808360947840103843317533210523853631711601450617095736473","22466735478643771803624909352181817912387732117378538284107485621001246177152644141853604633676939694208131243081227668237716194316732125445041260568403752325416203858329469477774720998849334961751541191761521224644520742691981372782009394826739249604257098248751626957528543558542443122470657230835176462612530464044652140581367666271771882198747182114685116336512604038833327707163107207664705120728068987996560512/4460342260599110071819142535903990817893424192972341872394014748315090430999224107274777695306032783105944721337053156074851240201179902835353097683269298594190456286888326067932777720561181760369783486872666974623910515795208353605697065447942804414120030678603538761538385793829787734830129764152263691296719726909633580318897787729004972323599773548689272008712427926734258913271101899780538635213826239542884125","1972862002066252798837977155272535342727415329632252213508267781390870646909686724955861608046325765650407340102472833428905279473185818898693854344138403744757857928883601637909604082588338869612221777263582365745419719805587946558326048087138197694016224613118304623864709183681172362693106460535117459192992832969130895829916210933710820035479169562970982784580861/391262854245936198649509275719624152305206807261382621390946060636032376057385723427601113233050260359684153963520782285097664628279596618521963444574543409076428660874564026651742234728997339844161514273669735686516761239076529088145208958938384732800586298943281728435207452253170935715239392534815683367114290676180839217919539381651841151674859715992309727232000","25408691426286653276004556426513401767718328640048945917745783225459709487487356095164164652218100925888847689099153320777389381851598236046402124684511968385325107497047025485302333503075085562533472482645023963717347867696861885363417595298751490212495932766872748125111115039311507374363000062513977436921772096443948159289707996749061007112458126301618769295162649600673247799961118662602756889448152517364992/5033870770817104909025512331238419776407331281944565644457345507262881100618908405924951559853352841154730802006750688581603270849880756026262217651685813584900300357685874044482329601894134443542753690048962260914642678445058891387041919581376195543193199307524572671344323361282633828144708683536721118910549933336800461248338059209853766305058943888965279863852107507075916981165164543199352920055389404296875","616565940481577765011174617619124841631603944267256178093555235591208387588894068005162766513720546626399308168923904625210748051788652328072241494243040185611373035059619136712559505023703153194815611268503291295059648269772663939137446253437248541496631852986499688052678961495116210133458596866684413931188348798244969797973846568160999564540652111599082181871436/122025682149627484528651507368051367620578469392233875493556828623437869650284356703295836998178256875766319508797903923638967073687991229708051285605187358616531926112736402511567721889845693991963610192161413692928378708223712791930113386840109729368772998347036090902364801014045328348830748307179590755723160142468563977011700764517880467116766150322736003147125","979882056834583241477188686550561625289337025747787132773853690143359657519481397575561812727394470125172272246774578404543257210124412718725081536309818383310896102958167337333430555168671327992395916735022711297435263157670501117734412587691271084981140167017421900852550822579410636184333142944411060788723653596377015359036101170054828623669169047118551010102258802465554033173968468183492058271365801755986560/193732066620504775981759812703028757608600125742477178751189607602983198559778039141192492589734277739017909889924488699372940787977794555519474807920198944109549023547259912324279741006975129518191081373554817584214941629021088206977532599055014150433581544599721903881284581257812850697423350805715586436114842183295730680490110793225514602133304729484547181740290534056445482186430729398701311563285494964645419","1138059441890428903336718712159907364975959482163004276901676063186939296217569849990951930955270849692775077813359573394435924934540269310629731801376134549169322946310756738187834128956671195358413024062230774111935109203207768898525882417078119314003162592087920755572050993355843681931139257303484526223461840939880759908449181135029327442039666513325916729112853/224777393704985303260433439401503507705148576727364388720387174977154204629336985298082893443205223017966145098064861566754244624732671470935725326043491911142467178027013112527668183783450932992534517827863293825061296257420183669383719043873666284378647952385401303733274771042385666436214517205678674213118374889121542369996042313879258622144464565403138392064000","614262617634904509410555695398092190166323289787703954329113412647342230855826568873946233136303566178604275296873234926652080462259552775254755109931312516616838091852915397846984381183732773411263828600108443070778861986849272794442105107285234729077818614332155890946804257724112143631642663084660012362691100872465148864413343598067567142977134846266425075195546265101720326272502009234689388355365794889444257557504/121200854655310345878069155190734381476914416893031941761756379148622591310152793328910334357724762079139509813381997287954319983165971628429295803162563856219211627796200599196263868781937234015821367575512548522790158101892507996780675863234181700253545912643548466256938936835469646114659598727592390628209362096738343417775009361678599075671154405137663077798419897932404104579113056038271753988669813988076515476125","106893445531995430131837569895703697604978445859412739331042151546083234373443601923983714252801103551874986033841637079479794895452077803182698291822629713500021995241940133037200268381793282318691568234728329378829301282121562652452936297422136961147432559766896143081059518238234777055931999714973999553456547746825617168005650221542417216291412324174772893635832/21070287546583154895102927029203125577385528350171457634203261197137238923923245382493868134869009844094435068284335909266152042903157700510534904847257436666980671067329084409346149729385625108233234542133838924281113454526471855573271066865534480974484196644173270141056470857666632902827625475719738076524047736123182255306429677688129231682978570461273193359375","1112742798776748551928744983308584493817112400536084744850969025063360679785378789764875076529575583792571198510306186417773101346425704969671256564494135750783642910394213727189639661184379341961737135764570942961692159177189753139209638929302928699705042832922774012622017270172331722295881412111812933593370743210214549038212395941675257558442878012136484052827439007483777859391215222647499741572327725689840850048/219121905514652575155579185322367175400669386131891843382447432851122462422992147756333729893028362013318264155489537138133372703295804002840920402482110260590055749843170064921843460498824128274420925357547023876488939786863662801268798987685503391058250902634999352652063668663245829496836853509616873246554292796823779397317819134891873583857621623143253788854530146303641400986028503534408870194989478421253057625","983995170259637497940121707857673268620603982844439610076334749792119502557380361624096960070148627663305171311646851566811683351232268240169848810658089698606409195744471343416197434926513684882439596141368794175162315633192028977211909698595778839497844847281262559899914504080092844816319298286511436690429175757804604673752838786852277255064434365401871903307643705/193579499709739777577893639665643417521924510242119561765932078835121983190401762561436208758210519231103767232899529457440602166918701550386152070813526760823513884391055054076485295945972185402977095815609448651316824455250005505410192101148149284756928250258632031981439345164037318129987999546683113483700660879431801728391911161900686707231543216283304182063038464","30691013076836380319652884848585431917439358375118437035944950498156836885409110087616602043242747413728866747975631727566613593257623099549583001362246649928075859944695060947434885707102684568632559339383409378997568182445019183928058902445738702610436187907199482604867148445903921474846103586253320950728989228898324829144701782792767763794895137313050381112872972806712570559942583906619373159053654481250809168128/6031936190594376585238407905469035598668211679521553144958053099463931217856780171872253258738635531385711702176347575597387389685526098889278278029314982721284691198967204664771178761416891317672705719303088746953644978471289001577698554025410820041497108311270431130911021653860874238212040640737171103823631718483572464361276703378587106311153455557896527384426327053165214814954154328483257657424873929502112904625","33633002641218571027682690377239300567277297301791434890431645909447040830457253186262970747405514897340315490970846553666201190386457221846694126637998462873786334837901001833771510353365825087187582807843940479192544772559118293851131234910638705258664901225494129023244916125545283621607920983287799648992632814461828998517949449887522866259724675318233522060729654796/6603800575190864815125307817934327053530311915572323544225173935830559756077637251538096164499112411672913910767032482188570876526606118068929913515497400397562722669603861813453418621246538114872330536044519242663538662076583511078523573320035084744399535581216815034837553165853576616422592790103728141443697362408727056813977234078214386771115586436985105038873998875","9090550743395453237608373761422705922989356346696677314277463900103283296889488490217663400349361962695279888433677856471792856853109469433355422802663947305503479561493033851081993247556828544308258821557994512133708656174864544457143793106703578476914924328960109390350040954158797845288786321215010324565010420734044059968931558099077932776525974187717655105951506223649947806568984848883258144616897526257038550656/1783219994432430133950472014582130883873515063182143523712063859964133099770763874744121895885645346884371273930727450069430704145915261127061538288702855011220545530326588799412076879985026006593893648911637986337776174555198865379578424838210466703683642106934154603710587408512357351455891557594977191641529451749437270208258072920514602243985184744955476557012910446023911358037761232253615162335336208343505859375","396226087129511787616470716244996965529391571019620342657409150252952330537366537352182763477820160355931003174946109480036915624974500187179367618457008802667089004678925595775249725629495848146669773574395699032785024522882892752987825063933573399691764866816284097232869198405981830106568826923407996367321353003569052419999880089180418759265274331299787468134974811/77651132902382550540201641628906752945078964002822585000619340261128555048628863996784740469908853602590877726845475670110127527874088625214912598995012971630852593597027649154487264595100300180591016581254965295280089902497540043916128232871685159131211213497239568483141031137909208031392464815187505714066235868748950184065923236670418822911614780061752905170944000","1288523130900767412477856952035690867153496584747510253984686336382980221603917538996138294311274357713893956725672062832264871415025750136690143411884111580335458539824573239771267043414225271729141508235839982033182605445173050590151912297720800168687369852280323356691345317649445843078291369394324862039143247087442309135074453265658730028145500871559458519282433012494054724678302957276371418936282902434203225600/252284450515080370603949213084529993395050575951188044032908270470514999880554862449223347761507020354321422785760279154913310488296485989979706208254206974075438570521939826124860483842758137231373182496438568202110337751291106165654945352183167578675508602832478752400011567482434301614269579368882858973850914513870297071866544875650189106576672289734326492492059816669288907018095832842249738081022227281715919357","559506782175368748187145067236900803925823792088293851453005882621173124590368101213652371965740365119375069053747415415684193092607523211636912074219215053809881814859129515591479780669511533619258835199715146655774919418434080807837587396115955105126806762961292429904380132116986984435528307613054828929294602185927322238461491059740342387266084431988727321711184308176/109446188216864405154936682374609448082436347600301765944233278303643744736544109262794383069197271409398615846380701459882784547857821831816863216080069944818453908760476475874319791512782445408136169878207358663250499628002971644430164185578966399908622640732411885568638054229180673755690889471388585521113862492432946110902070139679164884208988489955874131206343597375","365842109776085256207829452385781129402656684569922320812625438296958174120084800064669048017227033185969596458778213306152397766619692644694641677223213185977626940193107608138827771259334379895020377700759789774994800008933137569543592829220611543060189849601828342989023692876182148818363689293009174358168826340010491728715549904988196347316703985894355217235339548078187164176255405596310602921647203428200269666176/71497266937783826306774367225149833789788300609530680399994804704196212252148324552193149332755057982662844988588678159610516634667597707204818296457616315484973288944637139939912166034691155272078609876888919170894915224022982785138928008133003473320018151370486895637936102520353951511525996197267572355782608352075229547764732602557133494648237258900273354364050662921889937355682486287799239363976556848320046933875","59378684894605773397070783936113244261297966863668546282887298999811950599772732377979382620766180662159460666220894896896564357533604962977968843474062092083279165837424210591042655271577974272394203253875965589611493384384257117088518521598379301169916060951350650621757237206805037261878212424267780312614942173870651684587166691539909068452932891649554575072205080763/11593916877920131260484148322810317629326850763057953025674154928920977965095141485536566217873796019006709247938019404840440511433467040918770165456925609124166970862430104329357419669175323763143377917913760028500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","440706629842402075137926797732405268015915199334341565218443748798479563505125605478061664327658137598204192554352688830679475840386882350034150077506804799859586772904929402683276898098601814091430598259347980573084686932949502809068565420937301632494387691284902026088950093888426872222813857928092871267130505744095697172494119689779474840037266295586359244899477781345249657455186847452249040895151288114085352974933708544/85971876318334010542313048056773419567285701852816309711738644074302467763075671531248793080425349570584102078764464196653843973936119037322000695949209283327606280423406302517302874806092835694196353778161663338667091195199032831587897410329509487165187753418615356836636352319310103639079123698118997500068644500893282438137614420288839230827096109835206605385673197123994357393257304049093683934224826006704198171592304125","13220371178312284248107863849287558696210741535280184003301555188086761767176560823174196915070378763091889333203635784037294769747641959860810039816533609140662043493962707445564057197150603226797446933532133956054671103942520142568674339411250001585991743608723150284270101326419464088290151483823061613403673956918458456165552482913079283537536214967294211244361353060/2576683013797055224377707713704899315377379548630511095136568220145808780162671473907260623503552385384482723173913562423316997528913651044277418227616447815609873991028073011738113927961824632868956802271260292075825561646156680740323686126811928372672670917332613490241615850953660246271541592056143611581223295045062157404996958100136358649109693659623847024011265147","1538372578072246705266078247950089219881197139399081643650271348770110178217959856819170325400476655944115553238940541695152110949081675985299189913515975242840473616169775880272489805123124548256666658584129873597192213080038937409046114908719298170078476325423466734429870048697383304265342125425087105698152643145531760853127801123272389134514333752173173161562273487752064850461823726948588221913540799816489566883798912/299566102446745552813544808169323270315327122249327394279467999308669285416179486075255023523726449428151807672528368606071047812907935426406886253284580296349349558797128593446316786243666290649442956134448480598303527795996222703837663605600624271807461605295956674925277658331760000117761013381199880905748188151556184620779667670278558839116983636972680749836497346863752662521197700717702790359162307617024566689271625","281696937222363685333688097915539146272117417024070728031063821781398985795813333650547982965341298894634762289669256129805545549280355643122501181852136332529515756074502902204877664395456278205770206019663082511098956468724829475220996427130295010430751942126263620206886404244432409164651524408198286831329682605959881993845189585640874220032515465014097345759490750307207/54806274927935495596891312029173862473687610099325998583092091915101265393157631244775387832621032230434007486602816972765210205596482942091518459849775458089575743699797096697542306049628939919466378189656065461708686421130956996965004776108499273871055615413566043083634090083096967567965373203683231171594922347812966905149873265654962896456451681332216735396249206784000","228506238533410805238253122961471637501498406104430046727793420497895852412513560203475440156216063574654372726194215013407325207763369075250819386897086702757125418327084312933061738392406321003231853349865003322697360659712771167066453430309997639548320673279964210730701373707765051246595806673865646607841876463608039111252607452843372970797479959213447237540830563469297144446069689149549515457318899981763489792/44418759813188470246596822974281932219088697005123285598909329328419879212164564561558656547678211265529803086702843380128457744445765859393426675396393053094588240457569380155526179040891009717323059641035189017918495485630657360525410506453554255734005459614858972904374739673834145083512160883402151636664208253116362089211658645312778404886460203600762546810897889629330022309705583438699250109493732452392578125","2396110297187570506257836426251930521245117960980667897194680897478996322590925380310917400763581787981992131769075961259393685331523600287377841990678117113566991100720996059187144934569703045966210306282348527729533806882408323961336166190162075154579344185244957673138372347997134388801085788353482276257401005734929059700346687783400772331280644647089520646562669857652648/465370154262863030800729180763091967573522779260407615567563274096037297593764955820626213827962697601334935773802201919483657310282236100250543992334865461800976838791035335861420892967699843608855185710753433852279737724446294443337363478679601049432404435672469098850676302728116369979460222148206944323730586138087862719386327396334468302608499235112520318322763857676375","1188272888075247520453568790651819187486389546755745961952033150576243575862120569399808467067800830890874391487822723879717525264875722720416173276963170672622214121308038530968291758445510982186014289745026439477197148445087614813262170975056866881909056450023324743409114115141145340480846088869807540798073417035168139476153897066325127540609756310068558610112731607522096096821938163134080426356894899245575410494080/230586762395914863625709048789913840511134004337945700368117795195769576856434588144361459740833007125516905017415184787078710001969815416281381427387949263792200577791644278234661952852149216540491852757174842146376788280677956350901082838474705227642420261641783722891948710833898248566893322144435457967452449965772543077421407816225704952270697016152452032506898311260979594550143344971416786595888053149375287120733","1072184299258468249004114536023934869518152618369895613271618698908405514630154819453979477077738526673716264830106745031385951736108376866253955319711026042389282009348594845497252059906901748860111986811345742998968284077119165082435598381810306691078037018432766116865792677955520465319184311529667642995217214507658693259694586107847099911341219913576038605872218680562047/207882129535607118520818565811162643811811563516006836924341123976848022970024793004700710992938987476728640943834012473687892481059618823520721737479364352887178017866425027953255856440099446112508663603319745066750522936408781591578321031173620445865113295407603090322283539974563690157418931060565698315406021569491751612761888641141446406531645379264720684248398299136000","158094023904374464057702010126993231151433474361820266584020400101533651587072432728050776506672527718975042616651177034635188178967462982926261516748842073587981953038445977514446838733557926696939591069712397947055261777416704028506441173540338327591514650398349069348381309688677335132100441905603664282735310299686268721634369502296867409514777359935022301425165750780988231639828675424239931533849896744198012747670272/30626384366513923671063955469537776291182594080083494737341604579575446319190916924682809546024369330706012653799783122328775875399363759308193432327358837772825609356553955350401725689682838701996446404559005896479618311357573203081153855961484398360670837599853294627153740224543175497655414585918231215639906924313779933211774291565425360415684556655021031131349317390382320286092667852173815259422737956767922154798375","12216278924286401897470540169822542417611356797676160128176706721343511598951866107858729405615631246003458062949723290192242594609994613705183460814797527214549142043573863947658832694800184691222426521703728394203722420336773310908687071670107794543022567943478843065246011544888390757810534211554666736239506503613750756246364621509359804902243487113673014588325806249988332/2364584127734680580481708368927921125934330000162935118371174269642831409084634375654239735054363928748162229294829526339927907778510530444646754603322373712788147193691037688552857183116332292048731726305451516954679277320777955342295564000586923227775208580772868590742136150431152495718132142742153643081187691849828217592954519485869135930755646768375299870967864990234375","578939195017447864385837341975558679292903716580114421030538728778491606282153588930983966100514147976321305616196463174070345884292672842497715966933722088536619333912687108737657068701352918582656105418491672377271304970407730786932913490869797471081081431072836814581099271832696990064828717287258860166842791984158634684078346453202928137987930328826212011774670396356151265781053547412633310327737900786639842674288716416/111966291649651600701875186827360807558960817589719096407887999108024557254221008849510152469119211567152616745769256123968832250104006560061907741567034087109512483357851919402017950812795426393415409198268246337542639470834168040295134130657073201020340432236723824670803498949071870597039309004562024033656488150406105175401372709011082725359382691270659245312133919518760328422827067578306005644825927050994860723405473375","8041514821545833865350873212853873042112343327573364523948780030849543753072688526717886590013028227714585965095216381829914996539132359247488639692828639170075726301411777307168737667077730792892326979446426349813642680537699905651125068091362135055902152994216233622733424128982011248923051410141033146604688083721413402395290842738021365861670415833356403364696759583009635/1553937833499559104910551811592138833189892464446761247731330672284191313590708439680460540329836344767557599746234213006493842842879398684745864919973051635127080738612248150108793397855113122368507483429209127035263504194847798809612278864438287815470711036548695032421148125849669175729331459149833945183228413961985381338162155596008680906676498435954178226973272371625984","12059659399309169167301353842123191409306995788633965680414620302285606896146667751472818541537183787935352700725982053536032930866708413010971856856768384974849695774437178790890015242323873769697407411558706626105140596160049735605389301414460825674631122462760014451298494875244754354054447697502521388381253293175367558014453865905104467382184997528879171136492277222127399012368677604910497789360212571238146627048080568400384/2328494054002703067219004484782931471919751585969487160602269605916676223315055450845942763690581877771159615428854802721943114463834992106300185328876910271612375509166975628540839858771078495267566008071532876816826751069408153323840515037497664871689085370699991860738368371510578076683395101062439493831773194498579620513073693022191702398601471237166387045790480861932005012807234071429628725981935147069738988682858417182625","683009426705008850682549700382901603742691705123356866338951397347368059105140826655486518416578697931244347554322654428162554903861783227680935341690740579867651545205562690172425016836559678937794312287639193745517811234257062356826622207475918293015140472942579713388671782202262396642735640315948612572908444501108579457520714632371056288874351015666995549139003946314085696/131769214246522869780429817236150406548549044658474416909806179734873399109656411633488099249198882165279745627038984487365589625562901914030850178330133080409420340227179447548044572594184601425691821617928130423410997853384425373999967759499571890326740433081063424903098252502791477854302204200941376983295622430177445507316706609802292121282957519571162158620971952084486375","1418116259749091420309271913909337143756589314597557128553117870573928055109322864794169592355058370891251425125187770724828108988587888087023982451205475980371440423992838481547236638456717520835668859093413956339261802305597694403381021863258753441889536361061407579332570493634254542013337999844407181346815549594836374497512447969751514466481466717590255369810506813543577735080228718660747940956248427356785784199073569408/273368882980516556922532339653303822104510203916024760371844491705599093435133738774975538364241630079468712981056336655766117378160822393876348755370711942273876284944422610974149712212944211513462921649872232656449940987552227525504529710373144228818606127541937831103642415534318303187393593236209298242574677293352798419428712873685798636474667204083938875672934235816396371477146089168375198141802684403955936431884765625","546411077581845999248238069684194831621691193366466972898628141511422317954477211865167402284211971296286346492698354214043840080181702652132835681239302798339667835439189275457116051279366194551632712819028177402221815140045210690908631767786711675029194359998826252332434573121740830827417293557234891406021102083555472155479148332697839972702631641910213821827820374586459319/105246945889799140338072754365901705544530661781295362563214285953881890233987516230568663143342952799036341701952267011236663118111226623815975847494372076420199418712941018288738590264475520229651370015377608638075866459684692488079223686296541020897904588347083045723167762682959422858996673894180805702299907478685374065593161226849447131100462022089783265346597553176576000","2398330640958841474772606439916070050977544535580605737383995160447105736276950196885906408317628083110923322157113892928963237845914017845444295040924101784423382681801754191301860383927129006953354739240926643562987838836997453985855576402628166875869041032631651591871962852884189548538272285387092843044669499688035134181859376665409767886188304314888753894905317929877238322615838524354191263502347881033855441181420399360/461588070868590122892265681879734295007029130965626060552783760068897000195207878227714842617470320231527222074701444349530952699708435668339712860464533455345665068841333232359698449088497137068713309811942968433868609329301082001752617420002377892756821532220676085014874112083615054550278903960627185675459015343606391094523511117705747842645927349130302549554534056269331809016770715819934970200483161548527932617036185253","6041015879424725383006424536130409209607854044642113747266098198777011981328765528361630516108680392500990580908509403483891763219659726090675140672989657743882183951954294745396417829943469201306594018454995862321821016087416840247422350906412007336103086620396467456181771583200365740253389107968122850063607085957109965406634738740996318415514360956028575560979203447735121436/1161752799109428422288020947061281540989708937450568100764830251908850596717606701047413407636907934320789870175907792017513896999208892282137299070761467096211814586909598705615312819596495636017728313513520193786266452836805291464826226833593878504804389728477191170027729963773716267868284479768397603444919008915279522376004326398403851684761808785381609370767169521034383625","13240077436443988749179508462267267187169441948722358165090554769250505713747934643200804819418670147225695324432684266924694524337920816452346599774452681831320005286326986675907899608537972384924882996757503264622991355949039882526389342174307168805166215838138277557052303430492669193939212362638263582899713198716541723383138016564027766560215944409353427176135895982596327685665844815618402881202645610620284792793420780517248/2544223084468158291883698813309541801455311468982232546872485444308211415529998472787377800559884210837213042932180479090277285630234238711851480232520137856848809986631784843528381778520727465146661792797924458540957133423665746229799675650290296217658444899605236550972043549278128087645211909479009099766619355677984218929672461506691980442071860591767266913041147587815452007726513853820116629482732060593116624596368806566625","1953999166296955830935495158735359200362904181792947794529339487489730042568305997099959302322956898299616194932283060554261566410988618045107398092345476532371402134206635235570281738377188438407703089325315446371127042537576093536896282955524842632708645655481028161471313608974238110718242273935956977555610147714316158486553633871312187084618154014921190595222799283957140353/375191165084882521037046014569185165885459082629136124177286500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"];if(t[e])return Re.quick.apply(null,t[e].split("/"));e=new Re(e);for(var n=new Re(0),r=e.subtract(new Re(1)),i=e.add(new Re(1)),a=0;a<80;a++){var s=new Re(2*a+1),o=Ie.bigpow(r.divide(i),s),u=s.clone().invert().multiply(o);n=n.add(u)}return n.multiply(new Re(2))},factorial:function(e){var t=e%1===0;if(t&&e<0)return NaN;if(!t)return Ie.gamma(e+1);for(var n=1,r=2;r<=e;r++)n*=r;return n},dfactorial:function(e){if(j(e)){var t=e%2===0,n=t?e/2:(e+1)/2,r=new Re(1);if(t)for(var i=1;i<=n;i++)r=r.multiply(new Re(2).multiply(new Re(i)));else for(i=1;i<=n;i++)r=r.multiply(new Re(2).multiply(new Re(i)).subtract(new Re(1)))}else r=Math.pow(2,(1+2*e-Math.cos(Math.PI*e))/4)*Math.pow(Math.PI,(Math.cos(Math.PI*e)-1)/4)*Ie.gamma(1+e/2);return r},GCD:function(){for(var e=ae([].slice.call(arguments).map((function(e){return Math.abs(e)}))).sort(),t=Math.abs(e.shift()),n=e.length;n-- >0;)for(var r=Math.abs(e.shift());;){if(0===(t%=r)){t=r;break}if(0===(r%=t))break}return t},QGCD:function(){for(var e=[].slice.call(arguments),t=e[0],n=1;n<e.length;n++){var r=e[n],i=t.isNegative()&&r.isNegative()?-1:1;t=r.gcd(t),i<0&&t.negate()}return t},LCM:function(e,t){return e*t/Ie.GCD(e,t)},pow:function(e,t){return e<0&&Math.abs(t)<1?1/t%2===0?NaN:-Math.pow(Math.abs(e),t):Math.pow(e,t)},factor:function(e){e=Number(e);var t=Math.sign(e);e=Math.abs(e);var n=Ie.ifactor(e),r=new Oe;for(var i in r.symbols={},r.group=d,n){var a=new Oe(1);a.group=l,a.value=i,a.power=new Oe(n[i]),r.symbols[i]=a}return r.updateHash(),1===e&&(r=new Oe(e)),t<0&&r.negate(),r},sfactor:function(e,t){t=t||{};var n=Math.floor(Math.sqrt(e));n>s[s.length-1]&&e<1e6&&pe(n);for(var r=s.length,i=0;i<r;i++)for(var a=s[i];e%a===0;)e/=a,t[a]=(t[a]||0)+1;return e>1&&(t[e]=1),t},ifactor:function(e){if("0"===(e=String(e)))return{0:1};var t=(e=new n(e)).sign?-1:1;e=e.abs();var r={};if(e.lt("65536"))r=Ie.sfactor(e,r);else{var i=function(e){e.isPrime()?r[e]=(r[e]||0)+1:r=Ie.sfactor(e,r)};try{for(var a=0;!e.abs().equals(1);){if(e.isPrime()){i(e);break}var s;s=function t(r){for(var i=new n(r),s=2,o=new n(r),u=new n(1);u.equals(1);){for(var c=0;c<=s&&u.equals(1);c++){if(a++>1e3)throw new Error("stopping");o=o.pow(2).add(1).mod(e),u=n.gcd(o.minus(i).abs(),e)}s*=2,i=o}return u.equals(e)?t(r+1):u}(2),i(s),e=e.divide(s)}}catch(u){r={},i(e)}}if(-1===t){var o=$(Y(r));r["-"+o]=r[o],delete r[o]}return r},boxfactor:function(e,t){t=t||200;for(var n,r,i=Math.floor(5/12*e),a=0,s=!1;n=Math.floor(e/i),0!==(r=e%i);){if(s)return[e,1];i=Math.max(r,i-r),s=++a>t}return[n,i,a]},fib:function(e){var t=Math.sign(e);e=Math.abs(e),t=re(e)?t:Math.abs(t);for(var n=0,r=1,i=1,a=2;a<=e;a++)i=n+r,n=r,r=i;return i*t},mod:function(e,t){return e%t},integer_part:function(e){return Math.sign(e)*Math.floor(Math.abs(e))},simpson:function(e,t,n,r){var i=function(e,t,n){var r=e(t);return isNaN(r)&&(r=e(1===n?t+1e-12:t-1e-12)),r};r=r||1e-4;var a=Math.abs(Math.floor((n-t)/r));a%2!==0&&a++;for(var s=(n-t)/a,o=i(e,t,1),u=!1,c=t+s,l=1;l<a;l++)o+=(u?2:4)*i(e,c,1),u=!u,c+=s;return(o+i(e,c,2))*(s/3)},num_integrate:function(e,t,n,r,i){if(i<0)throw new Error("max depth cannot be negative");var a;try{a=function(e,t,n,r,i){var a={maxDepthCount:0,nanEncountered:!1};void 0===r&&(r=1e-9),void 0===i&&(i=45);var s=e(t),o=e(.5*(t+n)),u=e(n),c=function e(t,n,r,i,a,s,o,u,c,l,h){if(h.nanEncountered)return NaN;var p,f,m,d,g,v,y,x,b,w;if(f=t(n+.25*(p=r-n)),m=t(r-.25*p),isNaN(f))h.nanEncountered=!0;else if(isNaN(m))h.nanEncountered=!0;else if(w=((v=(d=p*(i+4*f+a)/12)+(g=p*(a+4*m+s)/12))-o)/15,!(h.maxDepthCount>1e3*c))return l>c?(h.maxDepthCount++,v+w):Math.abs(w)<u?v+w:(x=e(t,n,y=n+.5*p,i,f,a,d,.5*u,c,l+1,h),isNaN(x)?(h.nanEncountered=!0,NaN):(b=e(t,y,r,a,m,s,g,.5*u,c,l+1,h),isNaN(b)?(h.nanEncountered=!0,NaN):x+b))}(e,t,n,s,o,u,(s+4*o+u)*(n-t)/6,r,i,1,a);if(a.maxDepthCount>0&&C("integrate-adaptive-simpson: Warning: maximum recursion depth ("+i+") reached "+a.maxDepthCount+" times"),a.nanEncountered)throw new Error("Function does not converge over interval!");return c}(e,t,n,r,i)}catch(s){return Ie.simpson(e,t,n)}return te(a,12)},Ci:function(e){for(var t=0,n=1;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r)/(r*Ie.factorial(r))}return Math.log(e)+.5772156649015329+t},Si:function(e){for(var t=0,n=0;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r+1)/((r+1)*Ie.factorial(r+1))}return t},Ei:function(e){if(0===Number(e))return-1/0;for(var t=0,n=1;n<30;n++)t+=Math.pow(e,n)/(n*Ie.factorial(n));return.5772156649015329+Math.abs(Math.log(e))+t},Shi:function(e){for(var t,n,r=0,i=0;i<30;i++)n=(t=2*i)+1,r+=Math.pow(e,n)/(n*n*Ie.factorial(t));return r},Chi:function(e){var t;return.001,.5772156649015329,t=function(e){return(Math.cosh(e)-1)/e},Math.log(e)+.5772156649015329+Ie.num_integrate(t,.002,e,.001)},Li:function(e){return Ie.Ei(Ie.bigLog(e))},gamma_incomplete:function(e,t){for(var n=e-1,r=0,i=(t=t||0,0);i<n;i++)r+=Math.pow(t,i)/Ie.factorial(i);return Ie.factorial(n)*Math.exp(-t)*r},step:function(e){return e>0?1:e<0?0:.5},rect:function(e){return.5===(e=Math.abs(e))?e:e>.5?0:1},sinc:function(e){return e.equals(0)?1:Math.sin(e)/e},tri:function(e){return(e=Math.abs(e))>=1?0:1-e},nthroot:function(e,t){if(e instanceof Re||(e=new Re(e.toString())),t instanceof Re||(t=new Re(t.toString())),t.equals(1))return e;var n,r,i,a=e.divide(new Re(2)),s=new Re(1e-15),o=t.clone().invert(),u=t.subtract(new Re(1));do{var c=Ie.bigpow(a,u),l=o.multiply(e.divide(c).subtract(a)).toDecimal(25);if(n=Re.create(l),i)break;a=a.add(n);l=n.toDecimal();i=!!r&&r===l,r=l}while(n.abs().gte(s));return a},sqrt:function(e){var t,n,r,i;e instanceof Re||(e=new Re(e));var a=0,s=!1,o=new Re(1e-20);t=e.divide(new Re(2));do{if(a>1e3)throw new Error("Unable to calculate square root for "+e);t=t.add(e.divide(t)).divide(new Re(2)),t=new Re(t.decimal(30)),n=e.subtract(t.multiply(t)),i=!!r&&r.equals(n),(n.clone().abs().lessThan(o)||i)&&(s=!0),r=n,a++}while(!s);return t}};function Ce(e,t,r,i){var a="hash"===t,s=void 0,v=a?void 0:t,x="decimal"===v||"decimals"===v;function b(e){switch(t){case"decimals":case"decimal":return s=s||function(e){return!1},e.valueOf();case"recurring":s=s||function(e){return-1!==e.indexOf("'")};var r=e.toString();if(0===(g=/^-?\d+(?:\/\d+)?$/.exec(r)).length)return r;var i=g[0].split("/"),a=!1,o=Number(i[0]);o<0&&(o=-o,a=!0);var c=Number(i[1]);c||(c=1);var l=10*(o-(b=Math.floor(o/c))*c);for(b=b.toString()+".";l&&l<c;)l*=10,b+="0";for(var h="",p=[],f=0;;){if("undefined"!==typeof p[l])return(a?"-":"")+(b+h.slice(0,p[l])+"'"+h.slice(p[l])+"'").replace("'0'","").replace(/\.$/,"");var m=Math.floor(l/c),d=l-m*c;p[l]=f,h+=m.toString(),f+=1,l=10*d}case"mixed":s=s||function(e){return-1!==e.indexOf("/")};var g;r=e.toString();if(0===(g=/^-?\d+(?:\/\d+)?$/.exec(r)).length)return r;i=g[0].split("/");var v=new n(i[0]),y=new n(i[1]);y.equals(0)&&(y=new n(1));var x=v.divmod(y),b=x.quotient,w=x.remainder,S="-"===i[0][0]||b.equals(0)||w.equals(0)?"":"+";return(b.equals(0)?"":b.toString())+S+(w.equals(0)?"":w.toString()+"/"+i[1]);case"scientific":return s=s||function(e){return!1},new Le(e.valueOf()).toString(u.SCIENTIFIC_MAX_DECIMAL_PLACES);default:return s=s||function(e){return-1!==e.indexOf("/")},e.toString()}}if(x&&"undefined"===typeof i&&(i=16),P(e)){var w="",S="",T="",_=e.group||r,A=e.value;if(!a){var E=b(e.multiplier);"-1"==E&&"-1"===String(e.multiplier)&&(T="-",E="1"),"1"!=E&&(w=E);var k=e.power?b(e.power):"";"1"!=k&&(S=P(k)?Ce(k,v):k)}switch(_){case c:w="";var M=i&&x?e.multiplier.toDecimal(i):b(e.multiplier);A="-1"==String(e.multiplier)?"1":M,S="";break;case m:A=e.collectSymbols().map((function(e){var t=Ce(e,v,r,i);return"0"==t&&(t=""),t})).sort().join("+").replace(/\+\-/g,"-");break;case g:A=e.collectSymbols().map((function(e){var t=Ce(e,v,r,i);return"0"==t&&(t=""),t})).sort().join("+").replace(/\+\-/g,"-");break;case d:A=e.collectSymbols((function(e){var t=e.group;return(t===m||t===g)&&e.power.equals(1)&&e.multiplier.equals(1)?X(Ce(e,v)):Ce(e,v)})).join("*");break;case p:var N=e.previousGroup,I=e.power.group;N===m&&(A=e.collectSymbols(Ce,v).join("+").replace("+-","-")),N===c||N===h||N===f||a||(A=X(A)),I!==g&&I!==d&&I!==m&&"1"==e.power.multiplier.toString()||!S||(S=X(S))}if(_===f&&(A=e.fname+X(e.args.map((function(e){return Ce(e,v)})).join(","))),_===f&&e.fname in o){var C=Ce(e.args[0]),D=Ce(e.args[1]);e.args[0].isComposite()&&(C=X(C)),e.args[1].isComposite()&&(D=X(D)),A=C+o[e.fname]+D}S&&_!==p&&s(S)&&(S=X(S)),((_===g||_===m)&&(w&&"1"!=w||"-"===T)||(_===d||_===g||_===m)&&S&&"1"!=S||!a&&_===l&&-1==A||e.fname===y)&&(A=X(A)),i&&("decimal"===t||"decimals"===t&&w)&&(w=te(w,i));var L=T+w;w&&s(w)&&(L=X(L)),S<0&&(S=X(S)),w&&(L+="*"),S&&(S=u.POWER_OPERATOR+S),_===p&&"-"===A.charAt(0)&&(A=X(A));var R=L+A;return e.parens&&(R=X(R)),R+S}if(V(e)){for(var O=e.elements.length,F=(L=[],0);F<O;F++)L.push(e.elements[F].text(t));return"["+L.join(",")+"]"}try{return e.toString()}catch(U){return""}}function De(e){this.symbol=e}function Le(e){return this instanceof Le?((e=String("undefined"===typeof e?0:e)).startsWith("-")?(this.sign=-1,e=e.substr(1,e.length)):this.sign=1,Le.isScientific(e)?this.fromScientific(e):this.convert(e),this):new Le(e)}function Le(e){return this instanceof Le?((e=String("undefined"===typeof e?0:e)).startsWith("-")?(this.sign=-1,e=e.substr(1,e.length)):this.sign=1,Le.isScientific(e)?this.fromScientific(e):this.convert(e),this):new Le(e)}function Re(e){if(e instanceof Re)return e;if(void 0===e)return this;try{if(j(e))try{this.num=n(e),this.den=n(1)}catch(r){return Re.simple(e)}else{var t=Pe.convert(e);this.num=new n(t[0]),this.den=new n(t[1])}}catch(r){return Re.simple(e)}}function Oe(e){var t="Infinity"===e;return this instanceof Oe?(/^(\-?\+?\d+)\.?\d*e?\-?\+?\d*/i.test(e)?(this.group=c,this.value=v,this.multiplier=new Re(e)):(this.group=h,D(e),this.value=e,this.multiplier=new Re(1),this.imaginary=e===u.IMAGINARY,this.isInfinity=t),this.power=new Re(1),this):new Oe(e)}function Fe(){var e=this,t={},n={names:[],actions:[]};function r(e,t){this.start=e,this.end=t}function a(){this.elements=[]}function o(e,t,n){if(this.type=t,this.value=e,void 0!==n&&(this.column=n+1),t===o.OPERATOR){var r=E[e];for(var i in r)this[i]=r[i]}else t===o.FUNCTION&&(this.precedence=o.MAX_PRECEDENCE,this.leftAssoc=!1)}r.prototype.isConstant=function(){return this.start.isConstant()&&this.end.isConstant()},r.prototype.text=function(){return Ce(this.start)+":"+Ce(this.end)},a.prototype.append=function(e){this.elements.push(e)},a.prototype.getItems=function(){return this.elements},a.prototype.toString=function(){return e.pretty_print(this.elements)},a.create=function(e){var t=new a;return e&&t.append(e),t},o.prototype.toString=function(){return this.value},o.prototype.toString=function(){return this.is_prefix?"`"+this.value:this.value},o.OPERATOR="OPERATOR",o.VARIABLE_OR_LITERAL="VARIABLE_OR_LITERAL",o.FUNCTION="FUNCTION",o.UNIT="UNIT",o.KEYWORD="KEYWORD",o.MAX_PRECEDENCE=999,this.classes={Collection:a,Slice:r,Token:o};var v={prec:void 0,cos:function(t,n){var r,i;return r=e.parse(Math.cos(t)*Math.cosh(n)),i=e.parse(Math.sin(t)*Math.sinh(n)),e.subtract(r,e.multiply(i,Oe.imaginary()))},sin:function(t,n){var r,i;return r=e.parse(Math.sin(t)*Math.cosh(n)),i=e.parse(Math.cos(t)*Math.sinh(n)),e.subtract(r,e.multiply(i,Oe.imaginary()))},tan:function(t,n){var r,i;return r=e.parse(Math.sin(2*t)/(Math.cos(2*t)+Math.cosh(2*n))),i=e.parse(Math.sinh(2*n)/(Math.cos(2*t)+Math.cosh(2*n))),e.add(r,e.multiply(i,Oe.imaginary()))},sec:function(t,n){var r=this.removeDen(this.cos(t,n));return e.subtract(r[0],e.multiply(r[1],Oe.imaginary()))},csc:function(t,n){var r=this.removeDen(this.sin(t,n));return e.add(r[0],e.multiply(r[1],Oe.imaginary()))},cot:function(t,n){var r=this.removeDen(this.tan(t,n));return e.subtract(r[0],e.multiply(r[1],Oe.imaginary()))},acos:function(t,n){var r,i,a,s;return r=this.fromArray([t,n]),i=e.expand(e.pow(r.clone(),new Oe(2))),a=e.multiply($(e.subtract(new Oe(1),i)),Oe.imaginary()),s=ke(e.expand(e.add(r.clone(),a))),e.expand(e.multiply(Oe.imaginary().negate(),s))},asin:function(t,n){return e.subtract(e.parse("pi/2"),this.acos(t,n))},atan:function(t,n){var r,i,a,s;return s=v.fromArray([t,n]),r=e.expand(e.multiply(Oe.imaginary(),s.clone())),i=ke(e.expand(e.subtract(new Oe(1),r.clone()))),a=ke(e.expand(e.add(new Oe(1),r.clone()))),e.expand(e.multiply(e.divide(Oe.imaginary(),new Oe(2)),e.subtract(i,a)))},asec:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.acos.apply(this,n)},acsc:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.asin.apply(this,n)},acot:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.atan.apply(this,n)},cosh:function(t,n){var r,i;return r=e.parse(Math.cosh(t)*Math.cos(n)),i=e.parse(Math.sinh(t)*Math.sin(n)),e.add(r,e.multiply(i,Oe.imaginary()))},sinh:function(t,n){var r,i;return r=e.parse(Math.sinh(t)*Math.cos(n)),i=e.parse(Math.cosh(t)*Math.sin(n)),e.add(r,e.multiply(i,Oe.imaginary()))},tanh:function(t,n){var r,i;return r=e.parse(Math.sinh(2*t)/(Math.cos(2*n)+Math.cosh(2*t))),i=e.parse(Math.sin(2*n)/(Math.cos(2*n)+Math.cosh(2*t))),e.subtract(r,e.multiply(i,Oe.imaginary()))},sech:function(t,n){var r=this.removeDen(this.cosh(t,n));return e.subtract(r[0],e.multiply(r[1],Oe.imaginary()))},csch:function(t,n){var r=this.removeDen(this.sinh(t,n));return e.subtract(r[0],e.multiply(r[1],Oe.imaginary()))},coth:function(t,n){var r=this.removeDen(this.tanh(t,n));return e.add(r[0],e.multiply(r[1],Oe.imaginary()))},acosh:function(t,n){var r,i,a;return a=this.fromArray([t,n]),r=$(e.add(a.clone(),new Oe(1))),i=$(e.subtract(a.clone(),new Oe(1))),e.expand(ke(e.add(a,e.expand(e.multiply(r,i)))))},asinh:function(t,n){var r,i;return i=this.fromArray([t,n]),r=$(e.add(new Oe(1),e.expand(e.pow(i.clone(),new Oe(2))))),e.expand(ke(e.add(i,r)))},atanh:function(t,n){var r,i,a;return a=this.fromArray([t,n]),r=ke(e.add(a.clone(),new Oe(1))),i=ke(e.subtract(new Oe(1),a)),e.expand(e.divide(e.subtract(r,i),new Oe(2)))},asech:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.acosh.apply(this,n)},acsch:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.asinh.apply(this,n)},acoth:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.atanh.apply(this,n)},sqrt:function(t){var n,r,i,a,s;return n=t.realpart(),r=t.imagpart(),i=Oe.hyp(n,r),a=e.add(n.clone(),i),s=$(e.multiply(new Oe(2),a.clone())),e.add(e.divide(a.clone(),s.clone()),e.multiply(e.divide(r,s),Oe.imaginary()))},log:function(t,n){var r,i;return r=ke(Oe.hyp(t,n)),i=e.parse(Math.atan2(n,t)),e.add(r,e.multiply(Oe.imaginary(),i))},erf:function(t,n){return e.symfunction("erf",[t])},removeDen:function(t){var n,r,i;return K(t)?(r=t[0],i=t[1]):(r=t.realpart(),i=t.imagpart()),n=Math.pow(r,2)+Math.pow(i,2),[e.parse(r/n),e.parse(i/n)]},fromArray:function(t){return e.add(t[0],e.multiply(Oe.imaginary(),t[1]))},evaluate:function(t,n){var r,i,a;if(a=t.power.sign(),t.power=t.power.abs(),t.power.greaterThan(1)&&(t=e.expand(t)),a<0){var s=this.removeDen(t);r=s[0],i=s[1]}else r=t.realpart(),i=t.imagpart();return r.isConstant("all")&&i.isConstant("all")?this[n].call(this,r,i):e.symfunction(n,[t])}},T=this.trig={cos:function(t){if(t.equals("pi")&&t.multiplier.den.equals(2))return new Oe(0);if(u.PARSE2NUMBER){if(t.equals(new Oe(u.PI/2)))return new Oe(0);if(t.isConstant())return new Oe(Math.cos(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"cos")}if(t.equals(0))return new Oe(1);var n,r=!1,i=De(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if(j(a))n=new Oe(re(a)?1:-1);else{Number(a.num);var s=Number(a.den);2===s?n=new Oe(0):3===s?(n=e.parse("1/2"),r=!0):4===s?(n=e.parse("1/sqrt(2)"),r=!0):6===s?(n=e.parse("sqrt(3)/2"),r=!0):n=e.symfunction("cos",[t])}return!r||2!==i&&3!==i||n.negate(),n||(n=e.symfunction("cos",[t])),n},sin:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.sin(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"sin")}if(t.equals(0))return new Oe(0);var n,r=!1,i=De(t.multiplier.toDecimal()),a=t.multiplier.sign(),s=t.multiplier.abs();if(t.multiplier=s,t.equals("pi"))n=new Oe(0);else if(t.isPi()&&t.isLinear())if(j(s))n=new Oe(0);else{s.num;var o=s.den;2==o?(n=new Oe(1),r=!0):3==o?(n=e.parse("sqrt(3)/2"),r=!0):4==o?(n=e.parse("1/sqrt(2)"),r=!0):6==o?(n=e.parse("1/2"),r=!0):n=e.multiply(new Oe(a),e.symfunction("sin",[t]))}return n||(n=e.multiply(new Oe(a),e.symfunction("sin",[t]))),!r||3!==i&&4!==i||n.negate(),n},tan:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.tan(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"tan")}var n,r=!1,i=De(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear())if(j(a))n=new Oe(0);else{a.num;var s=a.den;if(2==s)throw new ve("tan is undefined for "+t.toString());3==s?(n=e.parse("sqrt(3)"),r=!0):4==s?(n=new Oe(1),r=!0):6==s?(n=e.parse("1/sqrt(3)"),r=!0):n=e.symfunction("tan",[t])}return n||(n=e.symfunction("tan",[t])),!r||2!==i&&4!==i||n.negate(),n},sec:function(t){if(u.PARSE2NUMBER)return t.isConstant()?new Oe(Ie.sec(t.valueOf())):t.isImaginary()?v.evaluate(t,"sec"):e.parse(Z("1/cos({0})",t));var n,r=!1,i=De(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if(j(a))n=new Oe(re(a)?1:-1);else{a.num;var s=a.den;if(2==s)throw new ve("sec is undefined for "+t.toString());3==s?(n=new Oe(2),r=!0):4==s?(n=e.parse("sqrt(2)"),r=!0):6==s?(n=e.parse("2/sqrt(3)"),r=!0):n=e.symfunction("sec",[t])}return!r||2!==i&&3!==i||n.negate(),n||(n=e.symfunction("sec",[t])),n},csc:function(t){if(u.PARSE2NUMBER)return t.isConstant()?new Oe(Ie.csc(t.valueOf())):t.isImaginary()?v.evaluate(t,"csc"):e.parse(Z("1/sin({0})",t));var n,r=!1,i=De(t.multiplier.toDecimal()),a=t.multiplier.sign(),s=t.multiplier.abs();if(t.multiplier=s,t.isPi()&&t.isLinear()){if(j(s))throw new ve("csc is undefined for "+t.toString());s.num;var o=s.den;2==o?(n=new Oe(1),r=!0):3==o?(n=e.parse("2/sqrt(3)"),r=!0):4==o?(n=e.parse("sqrt(2)"),r=!0):6==o?(n=new Oe(2),r=!0):n=e.multiply(new Oe(a),e.symfunction("csc",[t]))}return n||(n=e.multiply(new Oe(a),e.symfunction("csc",[t]))),!r||3!==i&&4!==i||n.negate(),n},cot:function(t){if(u.PARSE2NUMBER)return t.isConstant()?new Oe(Ie.cot(t.valueOf())):t.isImaginary()?v.evaluate(t,"cot"):e.parse(Z("1/tan({0})",t));var n,r=!1,i=De(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear()){if(j(a))throw new ve("cot is undefined for "+t.toString());a.num;var s=a.den;2==s?n=new Oe(0):3==s?(n=e.parse("1/sqrt(3)"),r=!0):4==s?(n=new Oe(1),r=!0):6==s?(n=e.parse("sqrt(3)"),r=!0):n=e.symfunction("cot",[t])}return n||(n=e.symfunction("cot",[t])),!r||2!==i&&4!==i||n.negate(),n},acos:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.acos(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"acos")}return e.symfunction("acos",arguments)},asin:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.asin(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"asin")}return e.symfunction("asin",arguments)},atan:function(t){var n;if(t.equals(0))n=new Oe(0);else{if(u.PARSE2NUMBER)return t.isConstant()?new Oe(Math.atan(t.valueOf())):t.isImaginary()?v.evaluate(t,"atan"):e.symfunction("atan",arguments);n=t.equals(-1)?e.parse("-pi/4"):e.symfunction("atan",arguments)}return n},asec:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.acos(t.invert().valueOf()));if(t.isImaginary())return v.evaluate(t,"asec")}return e.symfunction("asec",arguments)},acsc:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.asin(t.invert().valueOf()));if(t.isImaginary())return v.evaluate(t,"acsc")}return e.symfunction("acsc",arguments)},acot:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new e.add(e.parse("pi/2"),T.atan(t).negate());if(t.isImaginary())return v.evaluate(t,"acot")}return e.symfunction("acot",arguments)},atan2:function(t,n){if(t.equals(0)&&n.equals(0))throw new ve("atan2 is undefined for 0, 0");return u.PARSE2NUMBER&&t.isConstant()&&n.isConstant()?new Oe(Math.atan2(t,n)):e.symfunction("atan2",arguments)}},A=this.trigh={cosh:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.cosh(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"cosh")}return e.symfunction("cosh",arguments)},sinh:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.sinh(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"sinh")}return e.symfunction("sinh",arguments)},tanh:function(t){if(u.PARSE2NUMBER){if(t.isConstant())return new Oe(Math.tanh(t.valueOf()));if(t.isImaginary())return v.evaluate(t,"tanh")}return e.symfunction("tanh",arguments)},sech:function(t){return u.PARSE2NUMBER?t.isConstant()?new Oe(Math.sech(t.valueOf())):t.isImaginary()?v.evaluate(t,"sech"):e.parse(Z("1/cosh({0})",t)):e.symfunction("sech",arguments)},csch:function(t){return u.PARSE2NUMBER?t.isConstant()?new Oe(Math.csch(t.valueOf())):t.isImaginary()?v.evaluate(t,"csch"):e.parse(Z("1/sinh({0})",t)):e.symfunction("csch",arguments)},coth:function(t){return u.PARSE2NUMBER?t.isConstant()?new Oe(Math.coth(t.valueOf())):t.isImaginary()?v.evaluate(t,"coth"):e.parse(Z("1/tanh({0})",t)):e.symfunction("coth",arguments)},acosh:function(t){return u.PARSE2NUMBER&&t.isImaginary()?v.evaluate(t,"acosh"):u.PARSE2NUMBER?he(e.parse(Z(u.LOG+"(({0})+sqrt(({0})^2-1))",t.toString()))):e.symfunction("acosh",arguments)},asinh:function(t){return u.PARSE2NUMBER&&t.isImaginary()?v.evaluate(t,"asinh"):u.PARSE2NUMBER?he(e.parse(Z(u.LOG+"(({0})+sqrt(({0})^2+1))",t.toString()))):e.symfunction("asinh",arguments)},atanh:function(t){return u.PARSE2NUMBER&&t.isImaginary()?v.evaluate(t,"atanh"):u.PARSE2NUMBER?he(e.parse(Z("(1/2)*"+u.LOG+"((1+({0}))/(1-({0})))",t.toString()))):e.symfunction("atanh",arguments)},asech:function(t){return u.PARSE2NUMBER&&t.isImaginary()?v.evaluate(t,"asech"):u.PARSE2NUMBER?he(ke(e.add(t.clone().invert(),$(e.subtract(e.pow(t,new Oe(-2)),new Oe(1)))))):e.symfunction("asech",arguments)},acsch:function(t){return u.PARSE2NUMBER&&t.isImaginary()?v.evaluate(t,"acsch"):u.PARSE2NUMBER?he(e.parse(Z(u.LOG+"((1+sqrt(1+({0})^2))/({0}))",t.toString()))):e.symfunction("acsch",arguments)},acoth:function(t){return u.PARSE2NUMBER&&t.isImaginary()?v.evaluate(t,"acoth"):u.PARSE2NUMBER?t.equals(1)?Oe.infinity():he(e.divide(ke(e.divide(e.add(t.clone(),new Oe(1)),e.subtract(t.clone(),new Oe(1)))),new Oe(2))):e.symfunction("acoth",arguments)}};this.units={};var E={"\\":{precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}},"!!":{precedence:7,operator:"!!",action:"dfactorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(t){return e.symfunction(u.DOUBLEFACTORIAL,[t])}},"!":{precedence:7,operator:"!",action:"factorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(e){return H(e)}},"^":{precedence:6,operator:"^",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"**":{precedence:6,operator:"**",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"%":{precedence:4,operator:"%",action:"percent",prefix:!1,postfix:!0,leftAssoc:!0,overloaded:!0,overloadAction:"mod",overloadLeftAssoc:!1,operation:function(t){return e.divide(t,new Oe(100))}},"*":{precedence:4,operator:"*",action:"multiply",prefix:!1,postfix:!1,leftAssoc:!1},"/":{precedence:4,operator:"/",action:"divide",prefix:!1,postfix:!1,leftAssoc:!1},"+":{precedence:3,operator:"+",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e}},plus:{precedence:3,operator:"plus",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e}},"-":{precedence:3,operator:"-",action:"subtract",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e.negate()}},"=":{precedence:2,operator:"=",action:"equals",prefix:!1,postfix:!1,leftAssoc:!1},"==":{precedence:1,operator:"==",action:"eq",prefix:!1,postfix:!1,leftAssoc:!1},"<":{precedence:1,operator:"<",action:"lt",prefix:!1,postfix:!1,leftAssoc:!1},"<=":{precedence:1,operator:"<=",action:"lte",prefix:!1,postfix:!1,leftAssoc:!1},">":{precedence:1,operator:">",action:"gt",prefix:!1,postfix:!1,leftAssoc:!1},"=>":{precedence:1,operator:"=>",action:"gte",prefix:!1,postfix:!1,leftAssoc:!1},",":{precedence:0,operator:",",action:"comma",prefix:!1,postfix:!1,leftAssoc:!1},":":{precedence:0,operator:",",action:"assign",prefix:!1,postfix:!1,leftAssoc:!1,vectorFn:"slice"},":=":{precedence:0,operator:",",action:"function_assign",prefix:!1,postfix:!1,leftAssoc:!0}},M={"(":{type:"round",id:1,is_open:!0,is_close:!1},")":{type:"round",id:2,is_open:!1,is_close:!0},"[":{type:"square",id:3,is_open:!0,is_close:!1,maps_to:"vector"},"]":{type:"square",id:4,is_open:!1,is_close:!0},"{":{type:"curly",id:5,is_open:!0,is_close:!1,maps_to:"Set"},"}":{type:"curly",id:6,is_open:!1,is_close:!0}},N=this.functions={cos:[T.cos,1],sin:[T.sin,1],tan:[T.tan,1],sec:[T.sec,1],csc:[T.csc,1],cot:[T.cot,1],acos:[T.acos,1],asin:[T.asin,1],atan:[T.atan,1],arccos:[T.acos,1],arcsin:[T.asin,1],arctan:[T.atan,1],asec:[T.asec,1],acsc:[T.acsc,1],acot:[T.acot,1],atan2:[T.atan2,2],acoth:[A.acoth,1],asech:[A.asech,1],acsch:[A.acsch,1],sinh:[A.sinh,1],cosh:[A.cosh,1],tanh:[A.tanh,1],asinh:[A.asinh,1],sech:[A.sech,1],csch:[A.csch,1],coth:[A.coth,1],acosh:[A.acosh,1],atanh:[A.atanh,1],log10:[,1],exp:[function(t){return e.parse(Z("e^({0})",t))},1],radians:[function(t){return e.parse(Z("({0})*pi/180",t))},1],degrees:[function(t){return e.parse(Z("({0})*180/pi",t))},1],min:[function(){var t=[].slice.call(arguments);return I(t)?t[0]:fe(t)?new Oe(Math.min.apply(null,t)):u.SYMBOLIC_MIN_MAX&&me(t)?Ae("min",t):e.symfunction("min",t)},-1],max:[function(){var t=[].slice.call(arguments);return I(t)?t[0]:fe(t)?new Oe(Math.max.apply(null,t)):u.SYMBOLIC_MIN_MAX&&me(t)?Ae("max",t):e.symfunction("max",t)},-1],erf:[,1],floor:[,1],ceil:[,1],trunc:[,1],Si:[,1],step:[,1],rect:[,1],sinc:[function(t){if(u.PARSE2NUMBER)return t.isConstant()?new Oe(Ie.sinc(t)):e.parse(Z("sin({0})/({0})",t));return e.symfunction("sinc",[t])},1],tri:[,1],sign:[function(t){return t.isConstant(!0)?new Oe(Math.sign(he(t))):e.symfunction("sign",arguments)},1],Ci:[,1],Ei:[,1],Shi:[,1],Chi:[,1],Li:[,1],fib:[,1],fact:[H,1],factorial:[H,1],continued_fraction:[function(t,n){var r=he(t);if(r.isConstant()){var i=Ie.continuedFraction(r,n),a=ze.fromArray(i.fractions.map((function(e){return new Oe(e)})));return ze.fromArray([new Oe(i.sign),new Oe(i.whole),a])}return e.symfunction("continued_fraction",arguments)},[1,2]],dfactorial:[,1],gamma_incomplete:[,[1,2]],round:[Me,[1,2]],scientific:[function(e,t){return e.scientific=t||10,e},[1,2]],mod:[X,2],pfactor:[oe,1],vector:[function(){return new ze([].slice.call(arguments))},-1],matrix:[function(){return Ve.fromArray(arguments)},-1],Set:[function(){return qe.fromArray(arguments)},-1],imatrix:[function(e){return Ve.identity(e)},-1],parens:[function(t){if(u.PARSE2NUMBER)return t;return e.symfunction("parens",[t])},-1],sqrt:[$,1],cbrt:[ne,1],nthroot:[ae,2],log:[ke,[1,2]],expand:[Fe,1],abs:[z,1],invert:[function(e){if(q(e))return e.invert();k("invert expects a matrix")},1],determinant:[function(e){if(q(e))return e.determinant();return e},1],size:[function(e){var t;q(e)?t=[new Oe(e.cols()),new Oe(e.rows())]:V(e)||G(e)?t=new Oe(e.elements.length):k("size expects a matrix or a vector");return t},1],transpose:[function(e){if(q(e))return e.transpose();k("function transpose expects a matrix")},1],dot:[function(e,t){if(V(e)&&V(t))return e.dot(t);k("function dot expects 2 vectors")},2],cross:[function(e,t){if(V(e)&&V(t))return e.cross(t);k("function cross expects 2 vectors")},2],vecget:[function(t,n){return n.isConstant()&&j(n)?t.elements[n]:e.symfunction("vecget",arguments)},2],vecset:[function(t,n,r){return n.isConstant?(t.elements[n]=r,t):e.symfunction("vecset",arguments)},3],vectrim:[function(t,n){return n="undefined"===typeof n?1e-14:n,t=t.clone(),n=Number(n),t.elements.sort((function(e,t){return t.group-e.group})),t.elements=se(t.elements,(function(t,r){return Number(e.subtract(he(t),he(r)).abs())<=n})),t},[1,2]],matget:[function(t,n,r){return n.isConstant()&&r.isConstant()?t.elements[n][r]:e.symfunction("matget",arguments)},3],matset:[function(e,t,n,r){return e.elements[t][n]=r,e},4],matgetrow:[function(t,n){return n.isConstant()?new Ve(t.elements[n]):e.symfunction("matgetrow",arguments)},2],matsetrow:[function(t,n,r){if(!n.isConstant())return e.symfunction("matsetrow",arguments);if(t.elements[n].length!==r.elements.length)throw new Te("Matrix row must match row dimensions!");var i=t.clone();return i.elements[n]=r.clone().elements,i},3],matgetcol:[function(t,n){if(!n.isConstant())return e.symfunction("matgetcol",arguments);n=Number(n);var r=Ve.fromArray([]);return t.each((function(e,t,i){i===n&&r.elements.push([e.clone()])})),r},2],matsetcol:[function(t,n,r){if(!n.isConstant())return e.symfunction("matsetcol",arguments);if(n=Number(n),t.rows()!==r.elements.length)throw new Te("Matrix columns must match number of columns!");return r.each((function(e,r){t.set(r-1,n,e.elements[0].clone())})),t},3],rationalize:[Y,1],IF:[function(e,t,n){"boolean"!==typeof e&&B(e)&&(e=!!Number(e));return e?t:n},3],is_in:[function(e,t){if(q(e))for(var n=0,r=e.rows();n<r;n++)for(var i=0,a=e.cols();i<a;i++){if(e.elements[n][i].equals(t))return new Oe(1)}else if(e.elements)for(n=0,r=e.elements.length;n<r;n++)if(e.elements[n].equals(t))return new Oe(1);return new Oe(0)},2],realpart:[pe,1],imagpart:[ye,1],conjugate:[xe,1],arg:[_e,1],polarform:[function(t){var n,r,i,a;return n=Oe.toPolarFormArray(t),a=n[1],r=n[0],i=e.parse(Z("e^({0}*({1}))",u.IMAGINARY,a)),e.multiply(r,i)},1],rectform:[function(t){var n=t.clone();try{var r,i,a,s,o;return r=ee(t,"e",!0),i=e.divide(r.x.power,Oe.imaginary()),a=he(T.tan(i)),e.pow(r.a,new Oe(2)),s=a.getDenom(!0),o=a.getNum(),Oe.hyp(o,s).equals(r.a)?e.add(s,e.multiply(Oe.imaginary(),o)):n}catch(u){return n}},1],sort:[function(e,t){t=t?t.toString():"asc";var n=function e(t){return t.group===c?t.multiplier:t.group===f?""===t.fname?e(t.args[0]):t.fname:t.group===h?t.power:t.value};return new ze((V(e)?e.elements:e.collectSymbols()).sort((function(e,r){var i=n(e),a=n(r);return"desc"===t?a-i:i-a})))},[1,2]],integer_part:[,1],union:[function(e,t){return e.union(t)},2],contains:[function(e,t){return e.contains(t)},2],intersection:[function(e,t){return e.intersection(t)},2],difference:[function(e,t){return e.difference(t)},2],intersects:[function(e,t){return new Oe(Number(e.intersects(t)))},2],is_subset:[function(e,t){return new Oe(Number(e.is_subset(t)))},2],print:[function(){le(arguments).map((function(e){console.log(e.toString())}))},-1]};this.error=k;this.override=function(e,n){t[e]||(t[e]=[]),t[e].push(this[e]),this[e]=n},this.restore=function(e){this[e]&&(this[e]=t[e].pop())},this.extend=function(e,t,n){var r=this;if("function"===typeof this[e]&&"function"===typeof t){var i=this[e];this[e]=function(e,a){return P(e)&&P(a)&&!n?i.call(r,e,a):t.call(r,e,a,i)}}},this.symfunction=function(e,t){var n=new Oe(e);return n.group=f,"object"===typeof t&&(t=[].slice.call(t)),n.args=t,n.fname=e===y?"":e,n.updateHash(),n},this.callfunction=function(t,n,r){var i=N[t];i||k("Nerdamer currently does not support the function "+t);var a,s=i[1]||r,o=i[0];if(n instanceof Array||(n=void 0!==n?[n]:[]),-1!==s){var c=K(s),l=c?s[0]:s,h=c?s[1]:s,p=n.length,f=t+" requires a {0} of {1} arguments. {2} provided!";p<l&&k(Z(f,"minimum",l,p)),p>h&&k(Z(f,"maximum",h,p))}var m=fe(n);return u.USE_BIG&&m?a=Ne[t].apply(void 0,n):o?a=o.apply(i[2],n):(o=function(e){for(var t=u.FUNCTION_MODULES,n=t.length,r=0;r<n;r++){var i=t[r];if(e in i)return i[e]}k("The function "+e+" is undefined!")}(t),a=u.PARSE2NUMBER&&m?Le(o.apply(o,n)):e.symfunction(t,n)),a},this.operator_filter_regex=function(){var e="^\\"+Object.keys(E).filter((function(e){if(1===e.length)return e})).join("\\");return new RegExp("(["+e+"])\\s+(["+e+"])")}(),this.setOperator=function(t,n,r){var i=t.operator;if(E[i]=t,n&&(this[t.action]=n),e[i]=t.operation,t.action||t.prefix||t.postif||(t.action=i),"over"===r||"under"===r){var a=t.precedence;for(var s in E){var o=E[s];("over"===r?o.precedence>=a:o.precedence>a)&&o.precedence++}}},this.getOperator=function(e){return E[e]},this.aliasOperator=function(e,t){var n={},r=E[e];for(var i in r)n[i]=r[i];n.operator=t,this.setOperator(n)},this.getOperators=function(){return E},this.getBrackets=function(){return M};function D(e){this.type=e.type,this.value=e.value,this.left=e.left,this.right=e.right}this.initConstants=function(){this.CONSTANTS={E:new Oe(u.E),PI:new Oe(u.PI)}},this.pretty_print=function(t){if(Array.isArray(t)){var n=t.map((function(t){return e.pretty_print(t)})).join(", ");return"vector"===t.type?"vector<"+n+">":"("+n+")"}return t.toString()},this.peekers={pre_operator:[],post_operator:[],pre_function:[],post_function:[]},this.callPeekers=function(e){if(u.callPeekers)for(var t=this.peekers[e],n=le(arguments).slice(1).map(W),r=0;r<t.length;r++)t[r].apply(null,n)},this.tokenize=function(t){for(var n in t=(t=String(t)).trim().replace(/\s+/g," "),M){var r=new RegExp(M[n].is_close?"\\s+\\"+n:"\\"+n+"\\s+","g");t=t.replace(r,n)}for(var i=0,a=t.length,s=0,u=[],c=[u],l=c[0],h=0,p=[],f=!1,m=function(e,t){var n=[];void 0!==e&&(n.type=e),n.column=t,c.push(n),l.push(n),l=n,h++},d=function(){c.pop(),l=c[--h]},g=function(e){for(var n=(e=void 0!==e?e:i)+1;t.charAt(n++)in E;);return t.substring(e,n-1)},v=function(e){for(var t=i-e.length,n=[],r=e.charAt(0),a=1,s=e.length;a<s;a++){var u=e.charAt(a),c=r+u;c in E?r=c:(n.push(new o(r,o.OPERATOR,t+a)),r=u)}return n.push(new o(r,o.OPERATOR,t+a)),n},y=function(n,r){void 0===r&&(r=t.substring(s,n)),r in e.units?l.push(new o(r,o.UNIT,s)):""!==r&&l.push(new o(r,o.VARIABLE_OR_LITERAL,s))},x=function(e){l.push(new o(e,o.FUNCTION,s))},b=function(e){s=e+1};i<a;i++){var w=t.charAt(i);if(w in E){y(i);var S=l[0]&&O(l[0]);f&&s<i&&","!==w&&!(S&&"*"===w)&&(f=!1,d()),b(i+1);var T=g(i);s=s+T.length-2,i=s-1,l.push.apply(l,v(T))}else if(w in M){var _=M[w];if(_.is_open)p.push([_,s]),(D=t.substring(s,i))in N?x(D):""!==D&&l.push(new o(D,o.VARIABLE_OR_LITERAL,s)),m(_.maps_to,i);else if(_.is_close){var A=p.pop();if(!A)throw new be("Missing open bracket for bracket at: "+(i+1));if(A[0].id!==_.id-1)throw new be("Parity error");y(i),d()}b(i)}else if(" "===w){var k=t.substring(s,i),I=t.charAt(i+1);if(f){if(k in E)l.push(new o(k,o.OPERATOR,i));else{y(void 0,k),d();var C=I in E;(C&&"-"===E[I].value||!C)&&l.push(new o("*",o.OPERATOR,i))}f=!1}else{var D;if((D=t.substring(s,i))in N)f=!0,x(D),m();else if(D in E)l.push(new o(D,o.OPERATOR,i));else{y(void 0,D);I=t.charAt(i+1);""===k||""===I||k in E||I in E||l.push(new o("*",o.OPERATOR,i))}}b(i)}}if(p.length){var L=p.pop();throw new be("Missing closed bracket for bracket at "+(L[1]+1))}return y(i),u},this.toRPN=function(e){var t,n=e.type,r=e.length,i=[],a=[],s=[],u=function(e,t){for(;e.length;)t.push(e.pop())};for(t=0;t<r;t++){var c=e[t];if(c.type!==o.OPERATOR)break;if(!c.prefix)throw new we("Not a prefix operator");c.is_prefix=!0,a.push(c)}for(;t<r;t++){var l=e[t];if(l.type===o.OPERATOR){var h=l;if(h.overloaded)(m=e[t+1])&&m.type===o.VARIABLE_OR_LITERAL&&(h.postfix=!1,h.action=h.overloadAction,h.leftAssoc=h.overloadLeftAssoc);for(;a.length;){var p=a[a.length-1];if(!(p.precedence>h.precedence||!h.leftAssoc&&p.precedence===h.precedence))break;i.push(a.pop())}if("vector"!==n&&"set"!==n||!("vectorFn"in h)||(h.action=h.vectorFn),h.postfix){var f=e[t-1];if(!f)throw new we("Unexpected prefix operator '"+l.value+"'! at "+l.column);if(f.type===o.OPERATOR&&!f.postfix)throw new we("Unexpected prefix operator '"+f.value+"'! at "+f.column)}else do{var m,d=!!(m=e[t+1])&&m.type===o.OPERATOR;if(d){if(!m.prefix)throw new we("A prefix operator was expected at "+m.column);m.is_prefix=!0,s.push(m),t++}}while(d);for(h.is_prefix?s.push(h):a.push(h);s.length&&(h.leftAssoc||!h.leftAssoc&&s[s.length-1].precedence>=h.precedence);)a.push(s.pop())}else if(l.type===o.VARIABLE_OR_LITERAL){0===i.length&&u(s,a),i.push(l);var g=a[a.length-1];g&&g.leftAssoc||u(s,i)}else l.type===o.FUNCTION?a.push(l):l.type===o.UNIT&&i.push(l);Array.isArray(l)&&(i.push(this.toRPN(l)),l.type&&i.push(new o(l.type,o.FUNCTION,l.column)))}return u(a,i),u(s,i),i},this.parseRPN=function(t,n){try{for(var i in n=n||{})n[i]=e.parse(n[i],{});u.PARSE2NUMBER&&("e"in n||(n.e=new Oe(u.E)),"pi"in n||(n.pi=new Oe(u.PI)));for(var s=[],c=0,l=t.length;c<l;c++){var h=t[c];if(Array.isArray(h)&&(h=this.parseRPN(h,n)),h)if(h.type===o.OPERATOR)if(h.is_prefix||h.postfix)s.push(h.operation(s.pop()));else{var p=s.pop(),f=s.pop();if("undefined"===typeof f)throw new we(h+" is not a valid postfix operator at "+h.column);var m="comma"===h.action;f instanceof qe&&!m&&(f=ze.fromSet(f)),p instanceof qe&&!m&&(p=ze.fromSet(p)),this.callPeekers("pre_operator",f,p,h);var d=e[h.action](f,p);this.callPeekers("post_operator",d,f,p,h),s.push(d)}else if(h.type===o.FUNCTION){var g=s.pop(),v=g.parent;g instanceof a||(g=a.create(g));var y=h.value,x=g.getItems();this.callPeekers("pre_function",y,x);var b=e.callfunction(y,x);this.callPeekers("post_function",b,y,x);var w=s[s.length-1],S=t[c+1];if(!(S&&S.type===o.OPERATOR&&","===S.value)&&b instanceof ze&&w&&w.elements&&!(w instanceof a)){var T=s.pop(),A=b.elements[0];if(A.isConstant())if(A instanceof r)s.push(ze.fromArray(T.elements.slice(A.start,A.end)));else{var E=Number(A),k=T.elements.length;if(E<0&&(E=k+E),E<0||E>=k)throw new Se("Index out of range "+(h.column+1));var M=T.elements[E];T.getter=E,M.parent=T,s.push(M)}else T.getter=A,s.push(T),s.push(b)}else v&&(b.parent=v),s.push(b)}else{var N,I=h.value;I in u.ALIASES?h=e.parse(u.ALIASES[h]):h.type===o.VARIABLE_OR_LITERAL?h=new Oe(I):h.type===o.UNIT&&((h=new Oe(I)).isUnit=!0),I in e.CONSTANTS?(N=h,h=new Oe(e.CONSTANTS[I])):I in n&&I!==n[I].value?(N=h,h=n[I].clone()):I in _&&(N=h,h=_[I].clone()),N&&(h.subbed=N),s.push(h)}}return s[0]}catch(C){throw new ge(C.message+": "+h.column)}},D.prototype.toString=function(){var e=this.left?this.left.toString()+"---":"",t=this.right?"---"+this.right.toString():"";return e+"("+this.value+")"+t},D.prototype.toHTML=function(e,t){e=e||0,t="undefined"===typeof t?4:t;var n=function(e){return" ".repeat(t*e)},r="",i=this.left?n(e+1)+"<li>\n"+this.left.toHTML(e+2,t)+n(e+1)+"</li> \n":"",a=this.right?n(e+1)+"<li>\n"+this.right.toHTML(e+2,t)+n(e+1)+"</li>\n":"";r=n(e)+'<div class="'+this.type.toLowerCase()+'"><span>'+this.value+"</span></div>"+n(e)+"\n";return(i||a)&&(r+=n(e)+"<ul>\n"+i+a+n(e)+"</ul>\n"),r+=""},this.tree=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r))r=this.tree(r),t.push(r);else if(r.type===o.OPERATOR)if(r.is_prefix||r.postfix){var i=r.is_prefix?"left":"right",a=t.pop();(r=new D(r))[i]=a,t.push(r)}else(r=new D(r)).right=t.pop(),r.left=t.pop(),t.push(r);else if(r.type===o.FUNCTION){r=new D(r);var s=t.pop();if(r.right=s,"object"===r.value)if(a=t[t.length-1]){for(;a.right;)a=a.right;a.right=r;continue}t.push(r)}else t.push(new D(r))}return t[0]},this.parse=function(e,t){e=function(e){e=String(e);for(var t=0;t<n.actions.length;t++)e=n.actions[t].call(this,e);for(e=e.replace(/\s+/g," "),/e/gi.test(e)&&(e=e.replace(/\-*\d+\.*\d*e\+?\-?\d+/gi,(function(e){return L(e)}))),e=e.replace(/([\+\-\/\*]*[0-9]+)([a-z_\u03b1A\u03b2B\u03b3\u0393\u03b4\u0394\u03f5E\u03b6Z\u03b7H\u03b8\u0398\u03b9I\u03baK\u03bb\u039b\u03bcM\u03bdN\u03be\u039eoO\u03c0\u03a0\u03c1P\u03c3\u03a3\u03c4T\u03c5\u03d2\u03d5\u03a6\u03c7X\u03c8\u03a8\u03c9\u03a9]+[\+\-\/\*]*)/gi,(function(){var e=arguments[4],t=arguments[1],n=arguments[2],r=arguments[3],i=e.charAt(r),a="",s="*";return i.match(/[\+\-\/\*]/)||(a=e.charAt(r-1)),a.match(/[a-z]/i)&&(s=""),t+s+n})).replace(/([a-z0-9_]+)/gi,(function(e,t){return!1!==u.USE_MULTICHARACTER_VARS||t in N?t:isNaN(t)?t.split("").join("*"):t})).replace(/\)\(/g,")*(")||"0";;){if(e===(e=e.replace(/([a-z0-9_]+)(\()|(\))([a-z0-9]+)/gi,(function(e,t,n,r,i){var a=t||r,s=n||i;return a in N?a+s:a+"*"+s}))))break}return e}(e),t=t||{};var r=this.tokenize(e),i=this.toRPN(r);return this.parseRPN(i,t)},this.toObject=function(t){return function t(n){for(var r=[],i=0,a=n.length;i<a;i++){var s=n[i],u=s.value;if(s.type===o.VARIABLE_OR_LITERAL)r.push(new Oe(u));else if(s.type===o.FUNCTION){i++;var c=e.symfunction(u,t(n[i]));c.isConversion=!0,r.push(c)}else s.type===o.OPERATOR?r.push(u):r.push(t(s))}return r}(e.tokenize(t))};var F=function(e){for(var t=0,n=[[]],r=0,i=e.length;r<i;r++)","===e[r]?n[++t]=[]:n[t].push(e[r]);return n},U=function(e){return e.replace(/^\\left\((.+)\\right\)$/g,(function(e,t){return t||e}))};function z(t){if(t.isInfinity)return Oe.infinity();if(t.multiplier.lessThan(0)&&t.multiplier.negate(),t.isImaginary()){var n=t.realpart(),r=t.imagpart();if(n.isConstant()&&r.isConstant())return $(e.add(e.pow(n,new Oe(2)),e.pow(r,new Oe(2))))}else if(B(t)||re(t.power))return t;if(t.isComposite()){var i=[];t.each((function(e){i.push(e.multiplier)})),Ie.QGCD.apply(null,i).lessThan(0)&&(t.multiplier=t.multiplier.multiply(new Re(-1)),t.distributeMultiplier())}var a=e.parse(t.multiplier);return t.toUnitMultiplier(),e.multiply(a,e.symfunction(b,[t]))}function H(t){if(V(t)){var n=new ze;return t.each((function(e,t){n.set(t-1,H(e))})),n}if(q(t)){var r=new Ve;return t.each((function(e,t,n){r.set(t,n,H(e))})),r}if(u.PARSE2NUMBER&&t.isConstant())return Le(j(t)?Ie.bigfactorial(t):Ie.gamma(t.multiplier.add(new Re(1)).toDecimal()));if(t.isConstant()&&t.getDenom().equals(2)){var i,a,s,o,c=t.getNum();return t.multiplier.isNegative()?(o=e.subtract(c.negate(),new Oe(1)).multiplier.divide(new Re(2)),i=e.pow(new Oe(-4),new Oe(o)).multiplier.multiply(Ie.bigfactorial(o)),a=Ie.bigfactorial(new Re(2).multiply(o))):(o=e.add(c,new Oe(1)).multiplier.divide(new Re(2)),i=Ie.bigfactorial(new Re(2).multiply(o)),a=e.pow(new Oe(4),new Oe(o)).multiplier.multiply(Ie.bigfactorial(o))),s=i.divide(a),e.multiply(e.parse("sqrt(pi)"),new Oe(s))}return e.symfunction(w,[t])}function X(t,n){if(t.isConstant()&&n.isConstant()){var r=new Oe(1);return r.multiplier=r.multiplier.multiply(t.multiplier.mod(n.multiplier)),r}var i=e.divide(t.clone(),n.clone());return j(i)?new Oe(0):e.symfunction("mod",[t,n])}function Y(t){if(t.isComposite()){var n,r,i,a,s,o,u,c,l=new Oe(0);return t.each((function(t){n=t.getNum(),r=t.getDenom(),i=l.getNum(),a=l.getDenom(),s=e.multiply(r,i),o=e.multiply(n,a),u=e.expand(e.add(s,o)),c=e.multiply(a,r),l=e.divide(u,c)}),!0),l}return t}function $(t){""===t.fname&&t.power.equals(1)&&(t=t.args[0]);var n=t.multiplier.sign()<0;if(u.PARSE2NUMBER){if(t.isConstant()&&!n)return new Oe(Math.sqrt(t.multiplier.toDecimal()));if(t.isImaginary())return v.sqrt(t);if(t.group===h)return e.symfunction("sqrt",[t])}var r,i,a=t.isConstant();if(t.group===d&&t.isLinear()){var s=$(Oe(t.multiplier));for(var o in t.symbols){var c=t.symbols[o];s=e.multiply(s,$(c))}i=s}else if(t.fname===x){o=t.args[0];var l=t.multiplier;o.setPower(t.power.multiply(new Re(.25))),i=o,l.equals(1)||(i=e.multiply($(e.parse(l)),i))}else if(t.power.isInteger())if(t.multiplier<0&&t.group===h){var p=e.parse(t.multiplier).negate(),f=e.parse(t).toUnitMultiplier().negate();i=e.multiply(e.symfunction(u.SQRT,[f]),$(p))}else{var m=t.power.sign();t.power=t.power.abs(),a&&t.multiplier.lessThan(0)&&(r=Oe.imaginary(),t.multiplier=t.multiplier.abs());var g=t.multiplier.toDecimal(),y=Math.abs(g),b=Math.sqrt(y);if(j(b))s=new Oe(b);else if(j(g)){var w=Ie.ifactor(g),S=1;for(var c in w){var T=(N=w[c])-N%2;if(T){var _=Math.pow(c,T);S*=Math.pow(c,T/2),g/=_}}s=e.multiply(e.symfunction(x,[new Oe(g)]),new Oe(S))}else{for(var A=[new Oe(t.multiplier.num),new Oe(t.multiplier.den)],E=[new Oe(1),new Oe(1)],k=[new Oe(1),new Oe(1)],M=0;M<2;M++){var N;oe(N=A[M]).each((function(t){var n=(t=Oe.unwrapPARENS(t)).clone().toLinear(),r=Number(t.power),i=r%2,a=(r-i)/2;E[M]=e.multiply(E[M],e.pow(n,new Oe(a))),k[M]=e.multiply(k[M],$(e.pow(n,new Oe(i))))}))}s=e.divide(e.multiply(E[0],k[0]),e.multiply(E[1],k[1]))}i=(t=t.toUnitMultiplier(!0)).isOne()?t:re(t.power.toString())?e.pow(t.clone(),new Oe(.5)):e.symfunction(x,[t]),m<0&&i.power.negate(),s&&(i=e.multiply(s,i)),r&&(i=e.multiply(r,i))}else t.setPower(t.power.multiply(new Re(.5))),i=t;return n&&u.PARSE2NUMBER?e.parse(i):i}function ne(t){if(!t.isConstant(!0)){var n,r=t.power/3,i=e.pow(e.parse(t.multiplier),new Oe(1/3)),a=t.toUnitMultiplier();return j(r)?n=e.pow(a.toLinear(),e.parse(r)):a.group===d?(n=new Oe(1),a.each((function(t){n=e.multiply(n,ne(t))}))):n=e.symfunction("cbrt",[a]),e.multiply(i,n)}return ae(t,new Oe(3))}function ae(t,n,r,i){if((n=he(e.parse(n))).equals(0))throw new ve("Unable to calculate nthroots of zero");if(t<0&&re(n))throw new Error("Cannot calculate nthroot of negative number for even powers");if(!t.isConstant(!0))return e.symfunction("nthroot",arguments);t.group!==c&&(t=he(t)),"undefined"===typeof i&&(i=!0),r=r||25;var a,s,o=t.sign();return o<0&&(t=z(t)),j(t)&&n.isConstant()?(a=t<0x10000000000000000?Re.create(Math.pow(t,1/n)):Ie.nthroot(t,n),i&&(s=new Oe(a)),s=new Oe(a.toDecimal(r)),e.multiply(new Oe(o),s)):void 0}function oe(t){if(t.greaterThan(9999999999998891e26)||t.equals(-1))return t;if(t.equals(Math.PI))return new Oe(Math.PI);if((t=he(t.clone())).isConstant()){var n=new Oe(1),r=t.toString();if(j(r)){var i=Ie.ifactor(r);for(var a in i){var s=i[a];n=e.multiply(n,e.symfunction("parens",[new Oe(a).setPower(new Re(s))]))}}else{var o=oe(new Oe(t.multiplier.num)),u=oe(new Oe(t.multiplier.den));n=e.multiply(e.symfunction("parens",[o]),e.symfunction("parens",[u]).invert())}}else n=e.symfunction("pfactor",arguments);return n}function pe(e){return e.realpart()}function ye(e){return e.imagpart()}function xe(t){var n=t.realpart(),r=t.imagpart();return e.add(n,e.multiply(r.negate(),Oe.imaginary()))}function _e(t){var n=t.realpart(),r=t.imagpart();return n.isConstant()&&r.isConstant()?new Oe(Math.atan2(r,n)):e.symfunction("atan2",[r,n])}function _e(t){var n=t.realpart(),r=t.imagpart();return n.isConstant()&&r.isConstant()?r.equals(0)&&n.equals(-1)?e.parse("pi"):r.equals(1)&&n.equals(0)?e.parse("pi/2"):r.equals(1)&&n.equals(1)?e.parse("pi/4"):new Oe(Math.atan2(r,n)):e.symfunction("atan2",[r,n])}function Ae(e,t){var n,r,i;for(t.map((function(e){e.numVal=he(e).multiplier}));;){if((n=t.length)<2)return t[0];r=t.pop(),i=t[n-2],("min"===e?r.numVal<i.numVal:r.numVal>i.numVal)&&(t.pop(),t.push(r))}}function ke(t,n){if(t.equals(1))return new Oe(0);var r;if(t.fname===x&&t.multiplier.equals(1))return e.divide(ke(t.args[0]),new Oe(2));if(t.equals(0))throw new ve(u.LOG+"(0) is undefined!");if(t.isImaginary())return v.evaluate(t,u.LOG);if(t.isConstant()&&"undefined"!==typeof n&&n.isConstant()){var i=Math.log(t),a=Math.log(n);r=new Oe(i/a)}else if(t.group===p&&t.power.multiplier.lessThan(0)||"-1"===t.power.toString())t.power.negate(),r=ke(t).negate();else if("e"===t.value&&t.multiplier.equals(1)){var s=t.power;r=P(s)?s:new Oe(s)}else if(t.group===f&&"exp"===t.fname){var o=t.args[0];r=t.multiplier.equals(1)?e.multiply(o,new Oe(t.power)):e.symfunction(u.LOG,[t])}else if(u.PARSE2NUMBER&&B(t)){var c;t.multiplier.lessThan(0)&&(t.negate(),c=e.multiply(new Oe(Math.PI),new Oe("i"))),r=new Oe(Math.log(t.multiplier.toDecimal())),c&&(r=e.add(r,c))}else{t.power.equals(1)||(o=t.group===p?t.power:new Oe(t.power),t.toLinear()),r=arguments.length>1&&I(arguments)?new Oe(1):e.symfunction(u.LOG,arguments),o&&(r=e.multiply(o,r))}return r}function Me(t,n){var r,i,a,s,o=n&&n.isConstant()||"undefined"===typeof n;return t.isConstant()&&o?(r=t,n&&n.lessThan(0)&&(n=z(n),r=(i=Number(t).toExponential().toString().split("e"))[0],a=i[1]),s=new Oe(te(r,Number(n||0))),e.multiply(s,e.pow(new Oe(10),new Oe(a||0)))):e.symfunction("round",arguments)}function De(e){var t=e%2;return t<0&&(t=2+t),t>=0&&t<=.5?1:t>.5&&t<=1?2:t>1&&t<=1.5?3:4}function Le(e){if(!isFinite(e)){var t=Math.sign(e),n=new Oe(String(Math.abs(e)));return n.multiplier=n.multiplier.multiply(new Re(t)),n}if(P(e))return e;if("number"===typeof e)try{e=Re.simple(e)}catch(i){e=new Re(e)}var r=new Oe(0);return r.multiplier=e,r}function Fe(t){if(t.group===f&&""===t.fname)return e.expand(t.args[0]);if(!t.symbols)return t;var n=t.clone();try{if(!t.symbols)return t;for(var r in t.symbols){var i=t.symbols[r];t.symbols[r]=Fe(i)}var a=(t=e.parse(t)).power,s=t.multiplier.clone(),o=Number(a);if(j(o)&&o>0&&t.isComposite()){var u=new Oe(0);for(var i in t.symbols){var c=t.symbols[i];c.power.greaterThan(1)&&(c=e.expand(c)),u=e.add(u,c)}for(var l=o-1,h=u.clone(),m=0;m<l;m++){var g=new Oe(0);for(var i in u.symbols){var v=u.symbols[i];for(var y in h.symbols){var x=e.multiply(v.clone(),h.symbols[y]);x.group===d&&(x=e.expand(x)),g=e.add(g,x)}}h=g}if(!s.equals(1))for(var r in h.symbols){(i=h.symbols[r]).multiplier=i.multiplier.multiply(s),i.isComposite()&&i.distributeMultiplier(),t.symbols[r]=i}return h}if(t.group===d){var b=!1,w=t.power.clone(),S=t.power.sign();for(var i in t.symbols){var T=t.symbols[i];if(T.isComposite()){b=!0;break}P(T.power)||P(w)?(T.power=e.multiply(T.power,Oe(w)),T.group=p):T.power=T.power.multiply(w)}if(t.toLinear(),t=e.parse(t.text()),!b)return t;h=new Oe(0);var _=[],A=new Oe(t.multiplier);for(var r in t.symbols){if((i=t.symbols[r]).group!==p)if(i.isComposite()){a=i.power;var E=!1;j(a)&&a<0&&(i.power.negate(),E=!0),E?(i.power.negate(),A=e.multiply(A,i)):_.push(i)}else A=e.multiply(A,i)}for(h=_.pop();_.length;){r=_.pop(),g=new Oe(0);h.each((function(t){r.each((function(n){var r=e.multiply(t.clone(),n.clone());g=e.add(g,r)}))})),h=g}var k=new Oe(0);h.each((function(t){k=e.add(k,Fe(e.multiply(A,t)))})),k.power=k.power.multiply(w.abs()),t=e.expand(k),S<0&&t.invert()}}catch(M){return n}return t}function Pe(e){if(!P(e.power)&&e.power.absEquals(.5)){var t=e.power.sign(),n=$(e.group===l?new Oe(e.value):e.toLinear());return t<0&&n.invert(),n}return e}function Ge(e){if(e.group===l){var t=e.value,n=function(e){if(R(e))return[e];for(var t=e,n=1,r=[];n<t;){var i=e/n,a=Math.floor(i);i-a<=2220446049250313e-31&&n>1&&(-1!==s.indexOf(n)&&(s[n]=n),r.push(n),t=a),n++}return r.sort((function(e,t){return e-t}))}(t)[0];if(!n)return C("Unable to compute prime factors. This should not happen. Please review and report."),e;var r=new Re(Math.log(t)/Math.log(n)).multiply(e.power);if(r.den>e.power.den)return e;e=j(r)?Oe(Math.pow(n,r)):new Oe(n).setPower(r)}return e}this.toTeX=function(t,n){n=n||{};var r="string"===typeof t?this.toObject(t):t,i=[],a="undefined"===typeof n.cdot?"\\cdot":n.cdot;if(K(r)){for(var s,o,c=[],l=0;l<r.length;l++)s=r[l],"^"===r[l+1]?(o=r[l+2],c.push(Ue.braces(this.toTeX([s]))+"^"+Ue.braces(this.toTeX([o]))),l+=2):c.push(s);r=c}l=0;for(var h=r.length;l<h;l++){var p=r[l];if("*"===p&&(p=a),P(p))if(p.group===f){var m,d=p.fname;if(d===x)m="\\sqrt"+Ue.braces(this.toTeX(p.args));else if(d===b)m=Ue.brackets(this.toTeX(p.args),"abs");else if(d===y)m=Ue.brackets(this.toTeX(p.args),"parens");else if(d===u.LOG10)m="\\"+u.LOG10_LATEX+"\\left( "+this.toTeX(p.args)+"\\right)";else if("integrate"===d){var g=F(p.args);m="\\int "+(v=Ue.braces(this.toTeX(g[0])))+"\\, d"+(T=this.toTeX(g[1]))}else if("defint"===d){g=F(p.args);var v=Ue.braces(this.toTeX(g[0])),T=this.toTeX(g[3]);m="\\int\\limits_{"+this.toTeX(g[1])+"}^{"+this.toTeX(g[2])+"} "+v+"\\, d"+T}else if("diff"===d){g=F(p.args),T="",v=Ue.braces(this.toTeX(g[0]));if(1===g.length){var _=[];for(E=0;E<g[0].length;E++)3===g[0][E].group&&_.push(g[0][E].value);_.sort(),T=_.length>0?"\\frac{d}{d "+_[0]+"}":"\\frac{d}{d x}"}else T=2===g.length?"\\frac{d}{d "+g[1]+"}":"\\frac{d^{"+g[2]+"}}{d "+this.toTeX(g[1])+"^{"+g[2]+"}}";m=T+"\\left("+v+"\\right)"}else if("sum"===d||"product"===d){var A=[[],[],[],[]],E=0;for(l=0;l<p.args.length;l++)","!==p.args[l]?A[E].push(p.args[l]):E++;m=("sum"===d?"\\sum_":"\\prod_")+Ue.braces(this.toTeX(A[1])+" = "+this.toTeX(A[2])),m+="^"+Ue.braces(this.toTeX(A[3]))+Ue.braces(this.toTeX(A[0]))}else if("limit"===d){var k=F(p.args).map((function(t){return Array.isArray(t)?e.toTeX(t.join("")):e.toTeX(String(t))}));m="\\lim_"+Ue.braces(k[1]+"\\to "+k[2])+" "+Ue.braces(k[0])}else m=d===w||d===S?this.toTeX(p.args)+(d===w?"!":"!!"):Ue.latex(p);i.push(m)}else i.push(Ue.latex(p));else K(p)?i.push(Ue.brackets(this.toTeX(p))):"/"===p?i.push(Ue.frac(U(i.pop()),U(this.toTeX([r[++l]])))):i.push(p)}return i.join(" ")},this.expand=Fe,this.round=Me,this.clean=function t(n){var r,i=n.group;if(i===g){var a=n.getNum(),s=n.getDenom()||new Oe(1),o=Number(n.power),u=new Oe(1);if(1===Math.abs(o)){s.each((function(n){n.group===d?u=e.multiply(u,t(n.getDenom())):n.power.lessThan(0)&&(u=e.multiply(u,t(n.clone().toUnitMultiplier())))}));var c,l=new Oe(0);s.each((function(t){l=e.add(e.divide(t,u.clone()),l)})),u.invert(),a.isComposite()?(c=new Oe(0),a.each((function(n){c=e.add(e.multiply(t(n),u.clone()),c)}))):c=e.multiply(u,a),r=e.divide(c,l)}}else i===d?(r=new Oe(1),n.each((function(t){r=e.multiply(r,e.clean(t))}))):i===f&&1===n.args.length&&n.args[0].isConstant()&&(r=ce("PARSE2NUMBER",(function(){return e.parse(n)}),!0));return r||(r=n),r},this.sqrt=$,this.cbrt=ne,this.abs=z,this.log=ke,this.rationalize=Y,this.nthroot=ae,this.arg=_e,this.conjugate=xe,this.imagpart=ye,this.realpart=pe,this.getFunction=function(e){return N[e][0]},this.addPreprocessor=function(e,t,r,i){var a=n.names,s=n.actions;if("function"!==typeof t)throw new PreprocessorError("Incorrect parameters. Function expected!");r?i?(a.splice(r,0,e),s.splice(r,0,t)):(a[r]=e,s[r]=t):(a.push(e),s.push(t))},this.getPreprocessors=function(){for(var e={},t=0,n=e.names.length;t<n;t++){e[e.names[t]]={order:t,action:e.actions[t]}}return e},this.removePreprocessor=function(e,t){var r=n.names.indexOf(e);t?(ue(n.names,r),ue(n.actions,r)):(n.names[r]=void 0,n.actions[r]=void 0)},this.mapped_function=function(){for(var t={},n=this.params,r=0;r<n.length;r++)t[n[r]]=arguments[r];return e.parse(this.body,t)},this.add=function(t,n){var r=P(t),i=P(n);if(r&&i){if(t.unit||n.unit)return e.Unit.add(t,n);if(t.isInfinity||n.isInfinity){var a=t.multiplier.lessThan(0),s=n.multiplier.lessThan(0);if(t.isInfinity&&n.isInfinity&&a!==s)throw new ve("("+t+")+("+n+") is not defined!");var o=Oe.infinity();return s&&o.negate(),o}if(t.isComposite()&&t.isLinear()&&n.isComposite()&&n.isLinear()&&(t.distributeMultiplier(),n.distributeMultiplier()),t.multiplier.equals(0))return n;if(n.multiplier.equals(0))return t;if(t.isConstant()&&n.isConstant()&&u.PARSE2NUMBER)return A=new Oe(t.multiplier.add(n.multiplier).toDecimal(u.PRECISION));var v=t.group,y=n.group,b=t.power.toString(),w=n.power.toString();if(v<y||v===y&&b>w&&w>0)return this.add(n,t);if(v===d&&y===m&&t.value===n.value){var S=t;t=n,n=S,v=t.group,y=n.group,b=t.power.toString(),w=n.power.toString()}var T,_,A,E=b===w,M=t.value,N=n.value,I=t.isComposite(),C=n.isComposite();if(I&&(T=Ce(t,"hash")),C&&(_=Ce(n,"hash")),v===g&&y===g&&n.isLinear()&&!t.isLinear()&&T!==_)return this.add(n,t);v===m&&y===m&&(M=T,N=_);var D=v===l&&y===c,L=t.value===n.multiplier.toString(),R=M===N||T===_&&void 0!==T||D&&L;if(R&&E&&v===y)if(D&&(n=n.convert(l)),v!==m||y!==h&&y!==l)if(A=t,t.multiplier.isOne()&&n.multiplier.isOne()&&v===g&&t.isLinear()&&n.isLinear())for(var O in n.symbols){var F=n.symbols[O];A.attach(F)}else A.multiplier=A.multiplier.add(n.multiplier);else t.distributeMultiplier(),A=t.attach(n);else if(R&&v!==m)v===g&&y===m?(n.insert(t),A=n):(A=Oe.shell(m).attach([t,n])).value=v===m?T:M;else if(I&&t.isLinear()){var U=v===y,z=v===m&&y===m;if(z&&(U=t.value===n.value),t.distributeMultiplier(),n.isComposite()&&n.isLinear()&&U){for(var O in n.distributeMultiplier(),n.symbols){F=n.symbols[O];t.attach(F)}A=t}else z&&t.value!==_||v===m&&!R?(A=Oe.shell(g).attach([t,n])).updateHash():A=t.attach(n)}else{if(v===f&&t.fname===x&&y!==p&&n.power.equals(.5)){var G=n.multiplier.clone();(n=$(n.toUnitMultiplier().toLinear())).multiplier=G}2===t.length&&2===n.length&&re(t.power)&&re(n.power)?A=e.add(Fe(t),Fe(n)):(A=Oe.shell(g).attach([t,n])).updateHash()}if(A.multiplier.equals(0)&&(A=new Oe(0)),1===A.length){G=A.multiplier;(A=J(A.symbols)).multiplier=A.multiplier.multiply(G)}return A}if(i&&!r){S=t;t=n,n=S,S=i,i=r,r=S}var B=q(n);if(r&&B){var K=new Ve;n.eachElement((function(n,r,i){K.set(r,i,e.add(t.clone(),n))})),n=K}else if(q(t)&&B)n=t.add(n);else if(r&&V(n))n.each((function(r,i){i--,n.elements[i]=e.add(t.clone(),n.elements[i])}));else if(V(t)&&V(n))n.each((function(r,i){i--,n.elements[i]=e.add(t.elements[i],n.elements[i])}));else{if(V(t)&&q(n))return e.add(n,t);if(q(t)&&V(n)){if(n.elements.length===t.rows()){K=new Ve;var j=t.cols();return n.each((function(n,r){for(var i=[],a=0;a<j;a++)i.push(e.add(t.elements[r-1][a].clone(),n.clone()));K.elements.push(i)})),K}k("Dimensions must match!")}}return n},this.subtract=function(t,n){var r=r=P(t),i=P(n);if(r&&i)return t.unit||n.unit?e.Unit.subtract(t,n):this.add(t,n.negate());if(i&&V(t))n=t.map((function(t){return e.subtract(t,n.clone())}));else if(r&&V(n))n=n.map((function(n){return e.subtract(t.clone(),n)}));else if(V(t)&&V(n))t.dimensions()===n.dimensions()?n=t.subtract(n):e.error("Unable to subtract vectors. Dimensions do not match.");else if(q(t)&&V(n)){if(n.elements.length===t.rows()){var a=new Ve,s=t.cols();return n.each((function(n,r){for(var i=[],o=0;o<s;o++)i.push(e.subtract(t.elements[r-1][o].clone(),n.clone()));a.elements.push(i)})),a}k("Dimensions must match!")}else{if(V(t)&&q(n)){a=n.clone().negate();return e.add(a,t)}if(q(t)&&q(n))n=t.subtract(n);else if(q(t)&&i){a=new Ve;t.each((function(t,r,i){a.set(r,i,e.subtract(t,n.clone()))})),n=a}else if(r&&q(n)){a=new Ve;n.each((function(n,r,i){a.set(r,i,e.subtract(t.clone(),n))})),n=a}}return n},this.multiply=function(t,n){var r=P(t),s=P(n);if(r&&n instanceof a)return n.elements.push(t),n;if(r&&s){if(n.isUnit){var o=t.clone();return t.unit=n,o}if(t.unit||n.unit)return e.Unit.multiply(t,n);if(t.isInfinity||n.isInfinity){if(t.equals(0)||n.equals(0))throw new ve(t+"*"+n+" is undefined!");if(n.power.lessThan(0)){if(t.isInfinity)throw new ve("Infinity/Infinity is not defined!");return new Oe(0)}var v=t.multiplier.multiply(n.multiplier).sign(),y=Oe.infinity();if(t.isConstant()||n.isConstant()||t.isInfinity&&n.isInfinity)return v<0&&y.negate(),y}if(t.isConstant()&&n.isConstant()&&u.PARSE2NUMBER)return new Oe(b=new i(t.multiplier.toDecimal()).times(new i(n.multiplier.toDecimal())).toFixed());if(t.isOne())return n.clone();if(n.isOne())return t.clone();if(t.multiplier.equals(0)||n.multiplier.equals(0))return new Oe(0);if(n.group>t.group&&n.group!==g)return this.multiply(n,t);if(t.group===d&&n.group===m&&t.value===n.value){var b=t;t=n,n=b}var S=t.group,T=n.group,_=n.multiplier.num,A=n.multiplier.den;if(S!==f||t.fname!==x||n.isConstant()||t.args[0].value!==n.value||t.args[0].multiplier.lessThan(0))S===f&&t.fname===x&&t.multiplier.equals(1)&&t.power.equals(-1)&&n.isConstant()&&t.args[0].equals(n)&&(t=e.symfunction(x,[n.clone()]),n=new Oe(1));else{var E=t.power;(t=t.args[0].clone()).setPower(new Re(.5).multiply(E)),S=t.group}var M=t.value,N=n.value,I=(v=new Re(t.sign()),S===l&&T===c&&n.multiplier.equals(t.value)),C=I?new Re(1).multiply(t.multiplier).abs():t.multiplier.multiply(n.multiplier).abs();o=t.clone().toUnitMultiplier();if(n=n.clone().toUnitMultiplier(!0),S===f&&T===f){var D=t.args[0].clone(),L=n.args[0].clone();if(t.fname===x&&n.fname===x&&t.isLinear()&&n.isLinear()){var R=e.divide(D,L).invert();R.gt(1)&&j(R)&&(o=e.multiply(t.args[0].clone(),$(R.clone())),n=new Oe(1))}else if(t.fname===w&&n.fname===w&&!D.isConstant()&&!L.isConstant()&&n.power<0){var O=e.subtract(D.clone(),L.clone());if(O.isConstant())if(b=new Oe(1),O<0){for(var F=0,U=Math.abs(O);F<=U;F++){var z=e.add(D.clone(),new Oe(F));b=e.multiply(b,z)}o=e.multiply(e.pow(D,new Oe(t.power)),e.pow(b,new Oe(n.power))),n=new Oe(1)}else{for(F=0,U=Math.abs(O);F<=U;F++){z=e.add(L.clone(),new Oe(F));b=e.multiply(b,z)}o=e.multiply(e.pow(b,new Oe(t.power)),e.pow(L,new Oe(n.power))),n=new Oe(1)}else n=new Oe(1)}}if(M===N&&S===m&&S===T&&(M=t.text("hash"),N=n.text("hash")),T===p&&n.previousGroup===m&&S===m&&(M=Ce(t,"hash",p)),M!==N&&!I||S===m&&(T===h||T===l||T===f)||S===m&&T===d)if(S===d&&t.isLinear())if(T===d&&n.distributeExponent(),T===d&&n.isLinear()){for(var z in n.symbols){var G=n.symbols[z];o=o.combine(G)}o.multiplier=o.multiplier.multiply(n.multiplier)}else o.combine(n);else if(S!==c){if(S===d)o.distributeExponent(),o.combine(n);else if(!n.isOne()){var B=n.multiplier.clone();n.toUnitMultiplier(),(o=Oe.shell(d).combine([o,n])).multiplier=o.multiplier.multiply(B)}}else o=n.clone().toUnitMultiplier();else{var K=t.power,H=n.power,W=P(K),X=P(H),Z=W||X;if(S===m&&T!==m&&n.previousGroup!==m&&K.equals(1))o=new Oe(0),t.each((function(t){o=e.add(o,e.multiply(t,n.clone()))}),!0);else{if(o.power=Z?e.add(P(K)?K:new Oe(K),P(H)?H:new Oe(H)):S===c?K:K.add(H),o.power.equals(0)&&(o=o.convert(c)),Z&&o.convert(p),t.imaginary&&n.imaginary)re(o.power%2)&&(o=new Oe(1),C.negate());o.group!==p&&o.previousGroup&&(o.previousGroup=void 0),o.multiplier=o.multiplier.multiply(n.multiplier)}}if(o.group===l){var Y=Math.log(o.value),Q=Math.log(_)/Y,ee=Math.log(A)/Y,te=C.num/_,ne=C.den/A;0!==Q&&j(Q)&&j(te)&&(o.power=o.power.add(new Re(Q)),C.num/=_),0!==ee&&j(ee)&&j(ne)&&(o.power=o.power.subtract(new Re(ee)),C.den/=A)}if(1===o.length){b=o.multiplier;(o=J(o.symbols)).multiplier=o.multiplier.multiply(b)}var ie=o.power.toString();if(re(ie)&&o.fname===x){v*=o.sign();var ae=o.power;o=o.args[0],o=e.multiply(new Oe(C),e.pow(o,new Oe(ae.divide(new Re(2))))),v<0&&o.negate()}else o.multiplier=o.multiplier.multiply(C).multiply(v),o.group===g&&o.isImaginary()&&o.distributeMultiplier();return o.group===l&&j(o.power.toDecimal())&&(o=o.convert(c)),o}s&&!r&&(b=t,t=n,n=b,b=s,s=r,r=b);var se=q(n),oe=q(t);if(r&&se){var ue=new Ve;n.eachElement((function(n,r,i){ue.set(r,i,e.multiply(t.clone(),n))})),n=ue}else if(oe&&se)n=t.multiply(n);else if(r&&V(n))n.each((function(r,i){i--,n.elements[i]=e.multiply(t.clone(),n.elements[i])}));else if(V(t)&&V(n))n.each((function(r,i){i--,n.elements[i]=e.multiply(t.elements[i],n.elements[i])}));else{if(V(t)&&q(n))return this.multiply(n,t);if(q(t)&&V(n)){if(n.elements.length===t.rows()){ue=new Ve;var ce=t.cols();return n.each((function(n,r){for(var i=[],a=0;a<ce;a++)i.push(e.multiply(t.elements[r-1][a].clone(),n.clone()));ue.elements.push(i)})),ue}k("Dimensions must match!")}}return n},this.divide=function(t,n){var r=P(t),i=P(n);if(r&&i){if(t.unit||n.unit)return e.Unit.divide(t,n);var a;if(n.equals(0))throw new de("Division by zero not allowed!");return t.isConstant()&&n.isConstant()?(a=t.clone()).multiplier=a.multiplier.divide(n.multiplier):(n.invert(),a=e.multiply(t,n)),a}var s=V(t),o=V(n);if(r&&o)n=n.map((function(n){return e.divide(t.clone(),n)}));else if(s&&i)n=t.map((function(t){return e.divide(t,n.clone())}));else if(s&&o)t.dimensions()===n.dimensions()?n=n.map((function(n,r){return e.divide(t.elements[--r],n)})):e.error("Cannot divide vectors. Dimensions do not match!");else{var u=q(t),c=q(n);if(u&&i){var l=new Ve;t.eachElement((function(t,r,i){l.set(r,i,e.divide(t,n.clone()))})),n=l}else if(r&&c){l=new Ve;n.eachElement((function(n,r,i){l.set(r,i,e.divide(t.clone(),n))})),n=l}else if(u&&c){l=new Ve;t.rows()===n.rows()&&t.cols()===n.cols()?(t.eachElement((function(t,r,i){l.set(r,i,e.divide(t,n.elements[r][i]))})),n=l):e.error("Dimensions do not match!")}else if(u&&o)if(t.cols()===n.dimensions()){l=new Ve;t.eachElement((function(t,r,i){l.set(r,i,e.divide(t,n.elements[r].clone()))})),n=l}else e.error("Unable to divide matrix by vector.")}return n},this.pow=function(t,n){var r=P(t),i=P(n);if(r&&i){if(t.unit||n.unit)return e.Unit.pow(t,n);if(t.isInfinity||n.isInfinity){if(t.isInfinity&&n.isInfinity)throw new ve("("+t+")^("+n+") is undefined!");if(t.isConstant()&&n.isInfinity){if(t.equals(0)){if(n.lessThan(0))throw new ve("0^Infinity is undefined!");return new Oe(0)}if(t.equals(1))throw new ve("1^"+n.toString()+" is undefined!");if(n.lessThan(0))return new Oe(0);if(!t.lessThan(0))return Oe.infinity()}if(t.isInfinity&&n.isConstant()){if(n.equals(0))throw new ve(t+"^0 is undefined!");return n.lessThan(0)?new Oe(0):e.multiply(Oe.infinity(),e.pow(new Oe(t.sign()),n.clone()))}}var a=t.equals(0),s=n.equals(0);if(a&&s)throw new ve("0^0 is undefined!");if(a&&n.isConstant()&&n.multiplier.greaterThan(0))return new Oe(0);if(s)return new Oe(1);var o,l,h,m,g=n.isConstant(),v=t.isConstant(),w=n.isInteger(),S=t.multiplier,_=t.clone();if(v&&g&&t.equals(0)&&n.lessThan(0))throw new ve("Division by zero is not allowed!");if(u.PARSE2NUMBER&&v&&g&&t.sign()<0&&ie(n))return o=Math.PI*n,L=new Oe(Math.cos(o)),R=e.multiply(Oe.imaginary(),new Oe(Math.sin(o))),e.add(L,R);if(u.PARSE2NUMBER&&t.isImaginary()&&g&&j(n)&&!n.lessThan(0))if(L=t.realpart(),R=t.imagpart(),L.isConstant("all")&&R.isConstant("all"))return se=new Oe(Math.atan2(R,L)*n),D=e.pow(Oe.hyp(L,R),n),l=e.multiply(D.clone(),e.trig.cos(se.clone())),h=e.multiply(D,e.trig.sin(se)),e.add(l,e.multiply(Oe.imaginary(),h));if(_.toUnitMultiplier(),_.group!==f||_.fname!==x||g){var A=S.sign();ie(n)&&A<0&&(_.negate(),(_=e.symfunction(y,[_])).negate()),_.multiplyPower(n)}else{(W=_.args[0]).multiplyPower(new Oe(.5)),W.multiplier.multiply(_.multiplier),W.multiplyPower(n),_=W}if(v&&g&&u.PARSE2NUMBER)A<0&&(t.negate(),m=n.multiplier.den.equals(2)?new Oe(u.IMAGINARY):j(n.multiplier)?re(n.multiplier)?new Oe(1):new Oe(-1):re(n.multiplier.den)?e.pow(e.symfunction(y,[new Oe(A)]),n.clone()):new Oe(Math.pow(A,n.multiplier.num))),_=new Oe(Math.pow(t.multiplier.toDecimal(),n.multiplier.toDecimal())),m&&(_=e.multiply(_,m));else if(w&&!S.equals(1)){if(n.abs().gt(u.MAX_EXP))return n.sign()<0?new Oe(0):Oe.infinity();var E=n.multiplier.toDecimal(),k=Math.sign(E);E=Math.abs(E);var M=new Re(1);M.num=S.num.pow(E),M.den=S.den.pow(E),k<0&&M.invert(),_.multiplier=_.multiplier.multiply(M)}else{A=t.sign();if(n.isConstant()&&t.isConstant()&&!n.multiplier.den.equals(1)&&A<0)if(n.multiplier.den.equals(2)){var N=new Oe(u.IMAGINARY);t.negate(),n.lessThan(0)&&(N.negate(),n.negate()),_=e.multiply(e.pow(t,n),N)}else{(O=t.clone()).multiplier.negate(),_=e.pow(e.symfunction(y,[new Oe(A)]),n.clone());var I=e.pow(new Oe(O.multiplier.num),n.clone()),C=e.pow(new Oe(O.multiplier.den),n.clone()),D=e.divide(I,C);_=e.multiply(_,D)}else if(u.PARSE2NUMBER&&n.isImaginary()){var L,R,O,F,U,G;O=t.clone().toLinear(),L=n.realpart(),R=n.imagpart(),F=e.pow(O.clone(),L),U=T.cos(e.multiply(R.clone(),ke(O.clone()))),G=e.multiply(T.sin(e.multiply(R,ke(O))),Oe.imaginary()),_=e.multiply(F,e.add(U,G)),_=e.expand(e.parse(_))}else{var B=t.group===c&&A<0,K=Pe(new Oe(B?S.num:Math.abs(S.num)).setPower(n.clone())),H=Pe(new Oe(S.den).setPower(n.clone()).invert());if(t.imaginary)if(w){var W;W=Math.sign(n),E=z(n),_=new Oe(re(Q=E%4)?-1:u.IMAGINARY),(0===Q||W<0&&1===Q||W>0&&3===Q)&&_.negate()}else{var X=n.multiplier.multiply(Re.quick(1,2)),Z=Math.pow(-1,X.num);_=re(X.den)?new Oe(-1).setPower(X,!0):new Oe(Z)}if(A<0&&!B&&_.negate(),g&&t.group!==p){var Y=re(n.multiplier.den),J=re(t.power),Q=_.power.toDecimal(),$=re(Q);if(Y&&J&&!$){if(1===Q)_=e.symfunction(b,[_]);else if(j(Q))_=e.multiply(e.symfunction(b,[_.clone().toLinear()]),_.clone().setPower(new Re(Q-1)));else{E=_.power;_=e.symfunction(b,[_.toLinear()]).setPower(E)}u.POSITIVE_MULTIPLIERS&&_.fname===b&&(_=_.args[0])}}if(n.equals(2)&&_.group===d){var ee=new Oe(1);_.each((function(t){ee=e.multiply(ee,e.pow(t,n))})),_=ee}}}if(_=Pe(_),K&&H&&(_=e.multiply(_,Ge(e.multiply(K,H)))),_.fname===x){var te=_.group===p,ne=te?_.power.multiplier.toString():_.power.toString();if(re(ne)){var ae=te?e.divide(_.power,new Oe(2)):new Oe(_.power.divide(new Re(2)));S=_.multiplier;(_=e.pow(_.args[0],ae)).multiplier=_.multiplier.multiply(S)}}else if(!u.IGNORE_E&&_.isE()&&_.group===p&&_.power.contains("pi")&&_.power.contains(u.IMAGINARY)){var se=n.stripVar(u.IMAGINARY);_=e.add(T.cos(se),e.multiply(Oe.imaginary(),T.sin(se)))}return _}if(V(t)&&i)t=t.map((function(t){return e.pow(t,n.clone())}));else if(q(t)&&i){var oe=new Ve;t.eachElement((function(t,r,i){oe.set(r,i,e.pow(t,n.clone()))})),t=oe}else if(r&&q(n)){oe=new Ve;n.eachElement((function(n,r,i){oe.set(r,i,e.pow(t.clone(),n))})),t=oe}return t},this.comma=function(e,t){return e instanceof a||(e=a.create(e)),e.append(t),e},this.mod=function(e,t){return X(e,t)},this.slice=function(e,t){return new r(e,t)},this.equals=function(e,t){return e.group===h||e.isLinear()||k("Cannot set equality for "+e.toString()),_[e.value]=t.clone(),t},this.percent=function(t){return e.divide(t,new Oe(100))},this.assign=function(t,n){if(t instanceof a&&n instanceof a)return t.elements.map((function(t,r){return e.assign(t,n.elements[r])})),ze.fromArray(n.elements);if(t.parent){var r=t.parent;return r.elements[r.getter]=n,delete r.getter,r}if(t.group!==h)throw new Ee("Cannot complete operation. Incorrect LH value for "+t);return _[t.value]=n,n},this.function_assign=function(e,t){var n=e.elements.pop();return Q(n,e.elements,t)};var Be=function(e){return new Oe(!0===e?1:0)};this.eq=function(e,t){return Be(e.equals(t))},this.gt=function(e,t){return Be(e.gt(t))},this.gte=function(e,t){return Be(e.gte(t))},this.lt=function(e,t){return Be(e.lt(t))},this.lte=function(e,t){return Be(e.lte(t))},this.factorial=function(e){return this.symfunction(w,[e])},this.dfactorial=function(e){return this.symfunction(S,[e])}}u.FUNCTION_MODULES.push(Ie),oe(Ie),Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1},Math.cosh=Math.cosh||function(e){var t=Math.exp(e);return(t+1/t)/2},Math.sech=Math.sech||function(e){return 1/Math.cosh(e)},Math.csch=Math.csch||function(e){return 1/Math.sinh(e)},Math.coth=Math.coth||function(e){return 1/Math.tanh(e)},Math.sinh=Math.sinh||function(e){var t=Math.exp(e);return(t-1/t)/2},Math.tanh=Math.tanh||function(e){if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},Math.asinh=Math.asinh||function(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))},Math.acosh=Math.acosh||function(e){return Math.log(e+Math.sqrt(e*e-1))},Math.atanh=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},Math.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},De.getExpression=function(e,t){"last"!==e&&e||(e=T.length),"first"===e&&(e=1);var n=T[e-1];return n?new De(n):n},De.prototype={text:function(e,t){return t=t||19,e=e||"decimals",this.symbol.text_?this.symbol.text_(e):Ce(this.symbol,e,void 0,t)},latex:function(e){return this.symbol.latex?this.symbol.latex(e):Ue.latex(this.symbol,e)},valueOf:function(){return this.symbol.valueOf()},evaluate:function(){var e,n=arguments[0],r=1;"string"===typeof n?e="%"===n.charAt(0)?De.getExpression(n.substr(1)).text():n:n instanceof De||P(n)?e=n.text():(e=this.symbol.text(),r--);var i=arguments[r]||{},a=new De(ce("PARSE2NUMBER",(function(){return t.parse(e,i)}),!0));return a},buildFunction:function(e){return Ge.build(this.symbol,e)},isNumber:function(){return B(this.symbol)},isInfinity:function(){return Math.abs(this.symbol.multiplier)===1/0},variables:function(){return z(this.symbol)},toString:function(){try{return K(this.symbol)?"["+this.symbol.toString()+"]":this.symbol.toString()}catch(e){return""}},toDecimal:function(e){u.precision=e;var t=Ce(this.symbol,"decimals");return u.precision=void 0,t},isFraction:function(){return F(this.symbol)},isPolynomial:function(){return this.symbol.isPoly()},sub:function(e,n){return new De(this.symbol.sub(t.parse(e),t.parse(n)))},operation:function(e,n){return U(n)?n=n.symbol:P(n)||(n=t.parse(n)),new De(t[e](this.symbol.clone(),n.clone()))},add:function(e){return this.operation("add",e)},subtract:function(e){return this.operation("subtract",e)},multiply:function(e){return this.operation("multiply",e)},divide:function(e){return this.operation("divide",e)},pow:function(e){return this.operation("pow",e)},expand:function(){return new De(t.expand(this.symbol))},each:function(e,t){if(this.symbol.each)this.symbol.each(e,t);else if(K(this.symbol))for(t=0;t<this.symbol.length;t++)e.call(this.symbol,this.symbol[t],t);else e.call(this.symbol)},eq:function(e){P(e)||(e=t.parse(e));try{return t.subtract(this.symbol.clone(),e).equals(0)}catch(n){return!1}},lt:function(e){P(e)||(e=t.parse(e));try{return he(t.subtract(this.symbol.clone(),e)).lessThan(0)}catch(n){return!1}},gt:function(e){P(e)||(e=t.parse(e));try{return he(t.subtract(this.symbol.clone(),e)).greaterThan(0)}catch(n){return!1}},gte:function(e){return this.gt(e)||this.eq(e)},lte:function(e){return this.lt(e)||this.eq(e)},numerator:function(){return new De(this.symbol.getNum())},denominator:function(){return new De(this.symbol.getDenom())},hasFunction:function(e){return this.symbol.containsFunction(e)},contains:function(e){return this.symbol.contains(e)}},De.prototype.toTeX=De.prototype.latex,Le.prototype={fromScientific:function(e){var t=String(e).toLowerCase().split("e");return this.coeff=t[0],this.exponent=t[1],this},convert:function(e){var t=e.split("."),n=t[0]||"",r=t[1]||"";n=Le.removeLeadingZeroes(n),r=Le.removeTrailingZeroes(r);var i=n.length,a=n+r,s=Le.leadingZeroes(a).length;this.exponent=i-(s+1);var o=Le.removeLeadingZeroes(a);return this.coeff=o.charAt(0)+"."+(o.substr(1,o.length)||"0"),this},round:function(e){var t=this.copy();if(0===(e=Number(e)))t.coeff=t.coeff.charAt(0);else{var n=this.coeff.substring(0,e+1),r=this.coeff.substring(e+1,e+3),i=r.charAt(0);r.charAt(1)>4&&i++,t.coeff=n+i}return t},copy:function(){var e=new Le(0);return e.coeff=this.coeff,e.exponent=this.exponent,e.sign=this.sign,e},toString:function(e){var t,n="undefined"===typeof e?this.coeff:Le.round(this.coeff,e);return t=0===this.exponent&&u.SCIENTIFIC_IGNORE_INTS?this.coeff:n+"e"+this.exponent,(-1===this.sign?"-":"")+t}},Le.isScientific=function(e){return/\d+\.?\d*e[\+\-]*\d+/i.test(e)},Le.leadingZeroes=function(e){var t=e.match(/^(0*).*$/);return t?t[1]:""},Le.removeLeadingZeroes=function(e){var t=e.match(/^0*(.*)$/);return t?t[1]:""},Le.removeTrailingZeroes=function(e){var t=e.match(/0*$/);return t?e.substring(0,e.length-t[0].length):""},Le.round=function(e,t){var n=te(e,t),r=t-String(n).split(".").pop().length;return r>0&&(n+=new Array(r+1).join(0)),n},Le.prototype={fromScientific:function(e){var t=String(e).toLowerCase().split("e");return this.coeff=t[0],this.exponent=t[1],this},convert:function(e){var t=e.split("."),n=t[0]||"",r=t[1]||"";n=Le.removeLeadingZeroes(n),r=Le.removeTrailingZeroes(r);var i=n.length,a=n+r,s=Le.leadingZeroes(a).length;this.exponent=i-(s+1);var o=Le.removeLeadingZeroes(a);this.coeff=o.charAt(0)+"."+(o.substr(1,o.length)||"0");var u=this.coeff.split(".")[1]||"";return this.decp="0"===u?0:u.length,this.dec=r,this.wholes=n,this},round:function(e){var t=this.copy();if(0===(e=Number(e)))t.coeff=t.coeff.charAt(0);else{var n=this.coeff.substring(0,e+1),r=this.coeff.substring(e+1,e+3),i=r.charAt(0);r.charAt(1)>4&&i++,t.coeff=n+i}return t},copy:function(){var e=new Le(0);return e.coeff=this.coeff,e.exponent=this.exponent,e.sign=this.sign,e},toString:function(e){var t;if(u.SCIENTIFIC_IGNORE_ZERO_EXPONENTS&&0===this.exponent&&this.decp<e)t=0===this.decp?this.wholes:this.coeff;else{var n="undefined"===typeof e?this.coeff:Le.round(this.coeff,Math.min(e,this.decp||1));t=0===this.exponent?n:n+"e"+this.exponent}return(-1===this.sign?"-":"")+t}},Le.isScientific=function(e){return/\d+\.?\d*e[\+\-]*\d+/i.test(e)},Le.leadingZeroes=function(e){var t=e.match(/^(0*).*$/);return t?t[1]:""},Le.removeLeadingZeroes=function(e){var t=e.match(/^0*(.*)$/);return t?t[1]:""},Le.removeTrailingZeroes=function(e){var t=e.match(/0*$/);return t?e.substring(0,e.length-t[0].length):""},Re.create=function(e){if(e instanceof Re)return e;var t="-"===(e=e.toString()).charAt(0);t&&(e=e.substr(1,e.length-1));var n=new Re(e);return t&&n.negate(),n},Re.isFrac=function(e){return e instanceof Re},Re.quick=function(e,t){var r=new Re;return r.num=new n(e),r.den=new n(t),r},Re.simple=function(e){for(var t=String(L(e)).split("."),n=t.join(""),r=1,i=(t[1]||"").length,a=0;a<i;a++)r+="0";return Re.quick(n,r).simplify()},Re.prototype={multiply:function(e){if(this.isOne())return e.clone();if(e.isOne())return this.clone();var t=this.clone();return t.num=t.num.multiply(e.num),t.den=t.den.multiply(e.den),t.simplify()},divide:function(e){if(e.equals(0))throw new de("Division by zero not allowed!");return this.clone().multiply(e.clone().invert()).simplify()},subtract:function(e){return this.clone().add(e.clone().neg())},neg:function(){return this.num=this.num.multiply(-1),this},add:function(e){var t=this.den,n=e.den,r=this.clone(),i=r.num,a=e.num;return t.equals(n)?r.num=i.add(a):(r.num=i.multiply(n).add(a.multiply(t)),r.den=t.multiply(n)),r.simplify()},mod:function(e){var t=this.clone(),n=e.clone();return t.num=t.num.multiply(n.den),t.den=t.den.multiply(n.den),n.num=n.num.multiply(this.den),n.den=n.den.multiply(this.den),t.num=t.num.mod(n.num),t.simplify()},simplify:function(){var e=n.gcd(this.num,this.den);return this.num=this.num.divide(e),this.den=this.den.divide(e),this},clone:function(){var e=new Re;return e.num=new n(this.num),e.den=new n(this.den),e},decimal:function(e){var t=this.num.isNegative()?"-":"";if(this.num.equals(this.den))return"1";e=e||u.PRECISION,e++;for(var n=[],r=this.num.abs(),i=this.den,a=0;a<e;a++){var s=r.divide(i),o=r.subtract(s.multiply(i));if(n.push(s),o.equals(0))break;r=o.times(10)}var c=n.shift();if(0===n.length)return t+c.toString();if(a===e){var l=[];for(a=0;a<2;a++)l.unshift(n.pop());n.push(Math.round(l.join(".")))}return t+(c.toString()+"."+n.join(""))},toDecimal:function(e){return e||u.PRECISION?this.decimal(e):this.num/this.den},qcompare:function(e){return[this.num.multiply(e.den),e.num.multiply(this.den)]},equals:function(e){isNaN(e)||(e=new Re(e));var t=this.qcompare(e);return t[0].equals(t[1])},absEquals:function(e){isNaN(e)||(e=new Re(e));var t=this.qcompare(e);return t[0].abs().equals(t[1])},greaterThan:function(e){isNaN(e)||(e=new Re(e));var t=this.qcompare(e);return t[0].gt(t[1])},gte:function(e){return this.greaterThan(e)||this.equals(e)},lte:function(e){return this.lessThan(e)||this.equals(e)},lessThan:function(e){isNaN(e)||(e=new Re(e));var t=this.qcompare(e);return t[0].lt(t[1])},isInteger:function(){return this.den.equals(1)},negate:function(){return this.num=this.num.multiply(-1),this},invert:function(){var e=this.den;if(!this.num.equals(0)){var t=this.num.isNegative();this.den=this.num.abs(),this.num=e,t&&(this.num=this.num.multiply(-1))}return this},isOne:function(){return this.num.equals(1)&&this.den.equals(1)},sign:function(){return this.num.isNegative()?-1:1},abs:function(){return this.num=this.num.abs(),this},gcd:function(e){return Re.quick(n.gcd(e.num,this.num),n.lcm(e.den,this.den))},toString:function(){return this.den.equals(1)?this.num.toString():this.num.toString()+"/"+this.den.toString()},valueOf:function(){return u.USE_BIG?new i(this.num.toString()).div(new i(this.den.toString())):this.num/this.den},isNegative:function(){return this.toDecimal()<0}},Oe.imaginary=function(){var e=new Oe(u.IMAGINARY);return e.imaginary=!0,e},Oe.infinity=function(e){var t=new Oe("Infinity");return-1===e&&t.negate(),t},Oe.shell=function(e,t){var n=new Oe(t);return n.group=e,n.symbols={},n.length=0,n},Oe.unwrapSQRT=function(e,t){var n=e.power;if(e.fname===x&&(e.isLinear()||t)){var r=e.args[0].clone();r.power=r.power.multiply(new Re(.5)),r.multiplier=r.multiplier.multiply(e.multiplier),e=r,t&&(e.power=n.multiply(new Re(.5)))}return e},Oe.hyp=function(e,n){return e=e||new Oe(0),n=n||new Oe(0),t.sqrt(t.add(t.pow(e.clone(),new Oe(2)),t.pow(n.clone(),new Oe(2))))},Oe.toPolarFormArray=function(e){var n,r;return n=e.realpart(),r=e.imagpart(),[Oe.hyp(n,r),n.equals(0)?t.parse("pi/2"):t.trig.atan(t.divide(r,n))]},Oe.unwrapPARENS=function(e){if(""===e.fname){var t=e.args[0];return t.power=t.power.multiply(e.power),t.multiplier=t.multiplier.multiply(e.multiplier),""===e.fname?Oe.unwrapPARENS(t):t}return e},Oe.create=function(e,n){return n=void 0===n?1:n,t.parse("("+e+")^("+n+")")},Oe.prototype={isSimple:function(){return this.power.equals(1)&&this.multiplier.equals(1)},powSimp:function(){if(this.group===d){var e=[],n=this.multiplier.sign();this.each((function(t){var n=t.power;if(P(n)||n.equals(1))return this.clone();e.push(n)}));var r=new Re($(e)),i=(n=this.multiplier.sign(),this.multiplier.clone().abs()),a=Ie.ifactor(i),s=new Re(1),o=new Re(1);for(var u in a){var c=new Re(a[u]);c.lessThan(r)||(c=c.divide(r).subtract(new Re(1)),o=o.multiply(new Re(u))),s=s.multiply(t.parse(X(u)+"^"+X(c)).multiplier)}var l=new Oe(o);this.each((function(e){(e=e.clone()).power=e.power.divide(r),l=t.multiply(l,e)}));var h=t.symfunction(y,[l]);return h.power=r,h.multiplier=n<0?s.negate():s,h}return this.clone()},equals:function(e){return P(e)||(e=new Oe(e)),this.value===e.value&&this.power.equals(e.power)&&this.multiplier.equals(e.multiplier)&&this.group===e.group},abs:function(){var e=this.clone();return e.multiplier.abs(),e},gt:function(e){return P(e)||(e=new Oe(e)),this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},gte:function(e){return P(e)||(e=new Oe(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},lt:function(e){return P(e)||(e=new Oe(e)),this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},lte:function(e){return P(e)||(e=new Oe(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},isPoly:function(e){var t=this.group,n=this.power;if(!j(n)||n<0)return!1;if(t===c||t===h||this.isConstant(!0))return!0;var r=z(this);if(t===d&&1===r.length){var i=r[0];if(!i)return!0;for(var a in this.symbols){var s=this.symbols[a];if(s.group===f&&!s.args[0].isConstant())return!1;if(!s.contains(i)&&!s.isConstant(!0))return!1}return!0}if(this.isComposite()||t===d&&e){if(!e&&r.length>1)return!1;for(var a in this.symbols)if(!this.symbols[a].isPoly(e))return!1;return!0}return!1},stripVar:function(e,n){var r;return this.group!==m&&this.group!==h||this.value!==e?this.group===d&&this.isLinear()?(r=new Oe(1),this.each((function(n){n.contains(e,!0)||(r=t.multiply(r,n.clone()))})),r.multiplier=r.multiplier.multiply(this.multiplier)):this.group!==g||this.isLinear()?this.group===g&&this.isLinear()?(r=new Oe(0),this.each((function(n){if(!n.contains(e)){var i=n.clone();i.multiplier=i.multiplier.multiply(this.multiplier),r=t.add(r,i)}})),r.equals(0)&&(r=new Oe(this.multiplier))):r=this.group===p&&this.power.contains(e,!0)||this.group===f&&this.contains(e)?new Oe(this.multiplier):this.clone():r=new Oe(this.multiplier):r=new Oe(n?0:this.multiplier),r},toArray:function(e,n){n=n||{arr:[],add:function(e,n){var r=this.arr[n];this.arr[n]=r?t.add(r,e):e}};var r=this.group;if(r===h&&this.contains(e))n.add(new Oe(this.multiplier),this.power);else if(r===d){var i=this.stripVar(e),a=t.divide(this.clone(),i.clone()),s=a.isConstant()?0:a.power;n.add(i,s)}else if(r===m&&this.value===e)this.each((function(t,r){n.add(t.stripVar(e),r)}));else if(r===g)this.each((function(t){t.toArray(e,n)}));else{if(this.contains(e))throw new xe("Cannot convert to array! Exiting");n.add(this.clone(),0)}n=n.arr;for(var o=0;o<n.length;o++)n[o]||(n[o]=new Oe(0));return n},hasFunc:function(e){var t=this.group===f||this.group===p;if(t&&!e||t&&this.contains(e))return!0;if(this.symbols)for(var n in this.symbols)if(this.symbols[n].hasFunc(e))return!0;return!1},sub:function(e,n){e=P(e)?e.clone():t.parse(e),n=P(n)?n.clone():t.parse(n),e.group!==c&&e.group!==l||k("Cannot substitute a number. Must be a variable");var r,i=!1,a=e.multiplier.equals(1),s=this.multiplier.clone();if(this.value===e.value&&(this.group!==m&&e.group!==m||this.group===m&&e.group===m))(a||e.multiplier.equals(this.multiplier))&&(e.isLinear()?r=n:e.power.equals(this.power)&&(r=n,i=!0),e.multiplier.equals(this.multiplier)&&(s=new Re(1)));else if(this.group===d||this.previousGroup===d)r=new Oe(1),this.each((function(i){var a=t.parse(i.sub(e,n));r=t.multiply(r,a)}));else if(this.isComposite())if(e.isComposite()&&this.isComposite()&&this.isLinear()&&e.isLinear()){var o=function e(t,n){for(var r in t.symbols){var i=t.symbols[r];if(i.isComposite()&&e(i,n)||i.equals(n))return!0}return!1};for(var u in e.symbols)if(!o(this,e.symbols[u]))return this.clone();r=t.add(t.subtract(this.clone(),e),n)}else r=new Oe(0),this.each((function(i){r=t.add(r,i.sub(e,n))}));else if(this.group===p)r=t.parse(this.value).sub(e,n);else if(this.group===f){for(var h=[],g=0;g<this.args.length;g++){var v=this.args[g];P(v)||(v=t.parse(v)),h.push(v.sub(e,n))}r=t.symfunction(this.fname,h)}if(r){if(!i){var y=this.group===p?this.power.sub(e,n):t.parse(this.power);r=t.pow(r,y)}return r.multiplier=r.multiplier.multiply(s),r}return this.clone()},isMonomial:function(){if(this.group===h)return!0;if(this.group!==d)return!1;for(var e in this.symbols)if(this.symbols[e].group!==h)return!1;return!0},isPi:function(){return this.group===h&&"pi"===this.value},sign:function(){return this.multiplier.sign()},isE:function(){return"e"===this.value},isSQRT:function(){return this.fname===x},isConstant:function(e,t){if(t&&this.group===d)for(var n in this.symbols)if(this.symbols[n].isConstant(!0))return!0;if("all"===e&&(this.isPi()||this.isE()))return!0;if(e&&this.group===f){for(var r=0;r<this.args.length;r++)if(!this.args[r].isConstant(e))return!1;return!0}return e?B(this):this.value===v},isImaginary:function(){if(this.imaginary)return!0;if(this.symbols)for(var e in this.symbols)if(this.symbols[e].isImaginary())return!0;return!1},realpart:function(){if(this.isConstant())return this.clone();if(this.imaginary)return new Oe(0);if(this.isComposite()){var e=new Oe(0);return this.each((function(n){e=t.add(e,n.realpart())})),e}return this.isImaginary()?new Oe(0):this.clone()},imagpart:function(){if(this.group===h&&this.isImaginary())return new Oe(this.multiplier);if(this.isComposite()){var e=new Oe(0);return this.each((function(n){e=t.add(e,n.imagpart())})),e}return this.group===d?this.stripVar(u.IMAGINARY):new Oe(0)},isInteger:function(){return this.isConstant()&&this.multiplier.isInteger()},isLinear:function(e){if(e){if(this.isConstant())return!0;if(this.group===h)return this.value!==e||this.power.equals(1);if(this.isComposite()&&this.power.equals(1)){for(var t in this.symbols)if(!this.symbols[t].isLinear(e))return!1;return!0}return!(this.group!==d||!this.symbols[e])&&this.symbols[e].isLinear(e)}return this.power.equals(1)},containsFunction:function(e){if("string"===typeof e&&(e=[e]),this.group===f&&-1!==e.indexOf(this.fname))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].containsFunction(e))return!0;return!1},multiplyPower:function(e){if(this.group===c&&this.multiplier.equals(1))return this;var n=this.power;if(this.group!==p&&e.group===c){var r=e.multiplier;this.group!==c||r.isInteger()||this.convert(l),this.power=n.equals(1)?r.clone():n.multiply(r),this.group===l&&j(this.power)&&(this.value=Math.pow(this.value,this.power),this.toLinear(),this.convert(c))}else this.group!==p&&(n=new Oe(n),this.convert(p)),this.power=t.multiply(n,e);return this},setPower:function(e,t){if(this.group===c&&this.multiplier.equals(1))return this;if(this.group!==p||P(e)){var n=!1;P(e)&&(e.group===c?e=e.multiplier:n=!0);var r=n?p:l;this.power=e,this.group===c&&r&&this.convert(r,t)}else this.group=this.previousGroup,delete this.previousGroup,this.group===c?(this.multiplier=new Re(this.value),this.value=v):this.power=e;return this},isInverse:function(){return this.group===p?this.power.multiplier.lessThan(0):this.power<0},clone:function(e){var t,n=e||new Oe(0),r=["value","group","length","previousGroup","imaginary","fname","args","isInfinity","scientific"],i=r.length;if(this.symbols)for(var a in n.symbols={},this.symbols)n.symbols[a]=this.symbols[a].clone();for(t=0;t<i;t++)void 0!==this[r[t]]&&(n[r[t]]=this[r[t]]);return n.power=this.power.clone(),n.multiplier=this.multiplier.clone(),this.isConversion&&(n.isConversion=this.isConversion),this.isUnit&&(n.isUnit=this.isUnit),n},toUnitMultiplier:function(e){return this.multiplier.num=new n(this.multiplier.num.isNegative()&&e?-1:1),this.multiplier.den=new n(1),this},toLinear:function(){return this.setPower(new Re(1)),this},each:function(e,t){if(this.symbols)for(var n in this.symbols){var r=this.symbols[n];if(r.group===m&&t)for(var i in r.symbols)e.call(n,r.symbols[i],i);else e.call(this,r,n)}else e.call(this,this,this.value)},valueOf:function(){return this.group===c?this.multiplier.valueOf():0===this.power?1:0===this.multiplier?0:Ce(this,"decimals")},contains:function(e,t){e=String(e);var n=this.group;if(this.value===e)return!0;if(this.symbols)for(var r in this.symbols)if(this.symbols[r].contains(e,t))return!0;if(n===f||this.previousGroup===f)for(var i=0;i<this.args.length;i++)if(this.args[i].contains(e,t))return!0;if(n===p){if(t&&this.power.contains(e,t))return!0;if(this.value===e)return!0}return this.value===e},negate:function(){return this.multiplier.negate(),this.group!==g&&this.group!==m||this.distributeMultiplier(),this},invert:function(e,t){return e||(this.multiplier=this.multiplier.invert()),P(this.power)?this.power.negate():this.group===d&&t?this.each((function(e){return e.invert()})):this.power&&this.group!==c&&this.power.negate(),this},distributeMultiplier:function(e){var t=e?this.power.absEquals(1):this.power.equals(1);if(this.symbols&&t&&this.group!==d&&!this.multiplier.equals(1)){for(var n in this.symbols){var r=this.symbols[n];r.multiplier=r.multiplier.multiply(this.multiplier),r.distributeMultiplier()}this.toUnitMultiplier()}return this},distributeExponent:function(){if(!this.power.equals(1)){var e=this.power;for(var n in this.symbols){var r=this.symbols[n];r.group===p?r.power=t.multiply(r.power,new Oe(e)):this.symbols[n].power=this.symbols[n].power.multiply(e)}this.toLinear()}return this},convert:function(e,t){if(e>f){var n=this.clone();this.symbols={},e===d?n.toUnitMultiplier():this.toUnitMultiplier(),this.group===f&&(n.args=this.args,delete this.args,delete this.fname),this.isImgSymbol&&delete this.isImgSymbol,this.toLinear(),this.symbols[n.keyForGroup(e)]=n,this.group=e,this.length=1}else if(e===p)this.group===c&&this.multiplier.equals(1)||(this.group!==p&&(this.previousGroup=this.group),this.group===c?(this.value=this.multiplier.num.toString(),this.toUnitMultiplier()):this.value=Ce(this,"hash"),this.group=p);else if(e===c){var r=this.multiplier.toDecimal();this.symbols&&(this.symbols=void 0),new Oe(this.group===l?r*Math.pow(this.value,this.power):r).clone(this)}else e===l&&this.group===c&&(this.value=t?this.multiplier.num.toString():Math.abs(this.multiplier.num.toString()),this.toUnitMultiplier(!t),this.group=l);return this},insert:function(e,n){if(P(e)||k("Object "+e+" is not of type Symbol!"),this.symbols){var r=this.group;if(r>f){var i=e.keyForGroup(r),a=i in this.symbols&&this.symbols[i];if("add"===n){var s=i;a?(this.symbols[s]=t.add(a,e),this.symbols[s].multiplier.equals(0)&&(delete this.symbols[s],this.length--,0===this.length&&(this.convert(c),this.multiplier=new Re(0)))):(this.symbols[i]=e,this.length++)}else e.group===l&&j(e.power)&&e.convert(c),e.group!==p?(this.multiplier=this.multiplier.multiply(e.multiplier),e.toUnitMultiplier()):(e.parens=e.multiplier.lessThan(0),this.multiplier=this.multiplier.multiply(e.multiplier.clone().abs()),e.toUnitMultiplier(!0)),a&&((e=t.multiply(ue(this.symbols,i),e)).isConstant()&&(this.multiplier=this.multiplier.multiply(e.multiplier),e=new Oe(1)),this.length--),e.isOne(!0)?e.multiplier.lessThan(0)&&this.negate():(this.symbols[i]=e,this.length++);0===this.length&&this.convert(c),this.group!==g&&this.group!==d||this.updateHash()}}return this},attach:function(e){if(K(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"add");return this}return this.insert(e,"add")},combine:function(e){if(K(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"multiply");return this}return this.insert(e,"multiply")},updateHash:function(){if(this.group!==c)if(this.group===f){for(var e="",t=this.args,n=this.fname===y,r=0;r<t.length;r++)e+=(0===r?"":",")+Ce(t[r]);var i=n?"":this.fname;this.value=i+(n?e:X(e))}else this.group!==h&&this.group!==m&&(this.value=Ce(this,"hash"))},keyForGroup:function(e){var t,n=this.group;if(n===c)t=this.value;else if(n===h||n===l)t=e===m?this.power.toDecimal():this.value;else if(n===f)t=e===m?this.power.toDecimal():Ce(this,"hash");else{if(n===m)return t=e===d?Ce(this,"hash"):e===g?this.power.equals(1)?this.value:X(Ce(this,"hash"))+u.POWER_OPERATOR+this.power.toDecimal():e===m?this.power.toString():this.value;n===g?(e===g&&(t=Ce(this,"hash")),t=e===m?this.power.toDecimal():this.value):n===d?t=e===m?this.power.toDecimal():Ce(this,"hash"):n===p&&(t=e===m?Ce(this.power):Ce(this,"hash"))}return t},collectSymbols:function(e,t,n,r){var i=[];if(this.symbols)for(var a in this.symbols){var s=this.symbols[a];!r||s.group!==m&&s.group!==g?i.push(e?e(s,t):s):i=i.concat(s.collectSymbols())}else i.push(this);return null===n&&(n=void 0),i.sort(n)},latex:function(e){return Ue.latex(this,e)},text:function(e){return Ce(this,e)},isOne:function(e){var t=e?"absEquals":"equals";return this.group===c?this.multiplier[t](1):this.power.equals(0)},isComposite:function(){var e=this.group,t=this.previousGroup;return e===g||e===m||t===m||t===g},isCombination:function(){var e=this.group,t=this.previousGroup;return e===d||t===d},lessThan:function(e){return this.multiplier.lessThan(e)},greaterThan:function(e){return this.multiplier.greaterThan(e)},getDenom:function(){var e,n;if(n=this.clone(),this.group===d&&this.power.lessThan(0)&&(n=t.expand(n)),n.power.lessThan(0)){var r=t.parse(n.multiplier.den);(e=n.toUnitMultiplier()).power.negate(),e=t.multiply(r,e)}else if(n.group===d)for(var i in e=t.parse(n.multiplier.den),n.symbols)n.symbols[i].power<0&&(e=t.multiply(e,n.symbols[i].clone().invert()));else e=t.parse(n.multiplier.den);return e},getNum:function(){var e,n;return(n=this.clone()).group===d&&n.power.lessThan(0)&&(n=t.expand(n)),n.power.greaterThan(0)&&n.group!==d?e=t.multiply(t.parse(n.multiplier.num),n.toUnitMultiplier()):n.group===d?(e=t.parse(n.multiplier.num),n.each((function(n){(n.power>0||n.group===p&&n.power.multiplier>0)&&(e=t.multiply(e,n.clone()))}))):e=t.parse(n.multiplier.num),e},toString:function(){return this.text()}};var Pe={convert:function(e,t){var n;if(0===e)n=[0,1];else if(e<1e-6||e>1e20){var r=this.quickConversion(Number(e));if(r[1]<=1e20){var i=Math.abs(e),a=e/i;(n=this.fullConversion(i.toFixed((r[1]+"").length-1)))[0]=n[0]*a}else n=r}else n=this.fullConversion(e);return n},quickConversion:function(e){var t=(e.toExponential()+"").split("e"),n=t[0].split(".")[1],r=(n?n.length:0)-parseInt(t[1]);return[Math.round(Math.pow(10,r)*t[0]),Math.pow(10,Math.abs(t[1])+r)]},fullConversion:function(e){for(var t=!1,n=0,r=1,i=1,a=0,s=0,o=e;!t;){++s>1e4&&(t=!0);var u=Math.floor(o),c=n+u*i,l=r+u*a,h=o-u;h<1e-16&&(t=!0),o=1/h,n=i,r=a,i=c,a=l,(Math.abs(c/l-e)<1e-16||s>30)&&(t=!0)}return[c,l]}},Ue={parser:function(){var e=["classes","setOperator","getOperators","getBrackets","tokenize","toRPN","tree","units"],t=new Fe;for(var n in t)-1===e.indexOf(n)&&delete t[n];return t.setOperator({precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}}),t.setOperator({precedence:8,operator:"\\,",action:"slash_comma",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}}),t.getBrackets()["{"].maps_to=void 0,t}(),space:"~",dot:" \\cdot ",latex:function(e,n){if(e.clone&&(e=e.clone()),e instanceof t.classes.Collection&&(e=e.elements),K(e)){for(var r=[],i=0;i<e.length;i++){var a=e[i];P(a)||(a=t.parse(a)),r.push(this.latex(a,n))}return this.brackets(r.join(", "),"square")}if(q(e)){var s="\\begin{pmatrix}\n";for(i=0;i<e.elements.length;i++){for(var o=[],u=e.elements[i],c=0;c<u.length;c++)o.push(this.latex(u[c],n));s+=o.join(" & "),i<e.elements.length-1&&(s+="\\\\\n")}return s+="\\end{pmatrix}"}if(V(e)){for(s="\\left[",i=0;i<e.elements.length;i++)s+=this.latex(e.elements[i],n)+" "+(i!==e.elements.length-1?",\\,":"");return s+="\\right]"}if(G(e)){for(s="\\{",i=0;i<e.elements.length;i++)s+=this.latex(e.elements[i],n)+" "+(i!==e.elements.length-1?",\\,":"");return s+="\\}"}var h,p="decimal"===n||"decimals"===n,f=(e=e.clone()).power,m=H(f),g=e.multiplier.lessThan(0);if(e.group===l&&p)return String(e.multiplier.toDecimal()*Math.pow(e.value,e.power.toDecimal()));e.multiplier=e.multiplier.abs(),h=p?[String(e.multiplier.toDecimal()),""]:[e.multiplier.num,e.multiplier.den];var v,y=this.value(e,m,n,g);m&&f.negate(),p?(v=P(f)?Ue.latex(f,n):String(f.toDecimal()),"1"===String(v)&&(v="")):v=P(f)?this.latex(f,n):this.formatFrac(f,!0);var x=["",""];return x[m?1:0]=v,((g?"-":"")+this.set(h,y,x,e.group===d)).replace(/\+\-/gi,"-")},greek:{alpha:"\\alpha",beta:"\\beta",gamma:"\\gamma",delta:"\\delta",epsilon:"\\epsilon",zeta:"\\zeta",eta:"\\eta",theta:"\\theta",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",mu:"\\mu",nu:"\\nu",xi:"\\xi",omnikron:"\\omnikron",pi:"\\pi",rho:"\\rho",sigma:"\\sigma",tau:"\\tau",upsilon:"\\upsilon",phi:"\\phi",chi:"\\chi",psi:"\\psi",omega:"\\omega",Gamma:"\\Gamma",Delta:"\\Delta",Epsilon:"\\Epsilon",Theta:"\\Theta",Lambda:"\\Lambda",Xi:"\\Xi",Pi:"\\Pi",Sigma:"\\Sigma",Phi:"\\Phi",Psi:"\\Psi",Omega:"\\Omega"},symbols:{arccos:"\\arccos",cos:"\\cos",csc:"\\csc",exp:"\\exp",ker:"\\ker",limsup:"\\limsup",min:"\\min",sinh:"\\sinh",arcsin:"\\arcsin",cosh:"\\cosh",deg:"\\deg",gcd:"\\gcd",lg:"\\lg",ln:"\\ln",Pr:"\\Pr",sqrt:"\\sqrt",sup:"\\sup",arctan:"\\arctan",cot:"\\cot",det:"\\det",hom:"\\hom",lim:"\\lim",log:"\\log",LN:"\\LN",sec:"\\sec",tan:"\\tan",arg:"\\arg",coth:"\\coth",dim:"\\dim",inf:"\\inf",liminf:"\\liminf",max:"\\max",sin:"\\sin",tanh:"\\tanh"},value:function(e,t,n,r){var i=e.group,a=e.previousGroup,s=["",""],o=t?1:0;if(e.isInfinity)s[o]="\\infty";else if(i===h||i===l||a===h||a===l||a===c){F=e.value;F.replace&&(F=F.replace(/(.+)_$/,"$1\\_"));var m=String(F).split("_"),v=this.greek[m[0]];v&&(m[0]=v,F=m.join("_")),(e=this.symbols[m[0]])&&(m[0]=e,F=m.join("_")),s[o]=F}else if(i===f||a===f){for(var T=[],_=e.fname,A=0;A<e.args.length;A++){var E;E="string"===typeof(k=e.args[A])?k:this.latex(k,n),T.push(E)}if(_===x)s[o]="\\sqrt"+this.braces(T.join(","));else if(_===b)s[o]=this.brackets(T.join(","),"abs");else if(_===y)s[o]=this.brackets(T.join(","),"parens");else if("limit"===_)s[o]=" \\lim\\limits_{"+T[1]+" \\to "+T[2]+"} "+T[0];else if("integrate"===_)s[o]="\\int"+this.braces(T[0])+this.braces("d"+T[1]);else if("defint"===_)s[o]="\\int\\limits_"+this.braces(T[1])+"^"+this.braces(T[2])+" "+T[0]+" d"+T[3];else if(_===w||_===S){var k;(k=e.args[0]).power.equals(1)&&(k.isComposite()||k.isCombination())&&(T[0]=this.brackets(T[0])),s[o]=T[0]+(_===w?"!":"!!")}else if("floor"===_)s[o]="\\left \\lfloor"+this.braces(T[0])+"\\right \\rfloor";else if("ceil"===_)s[o]="\\left \\lceil"+this.braces(T[0])+"\\right \\rceil";else if(_===u.LOG&&T.length>1)s[o]="\\mathrm"+this.braces(u.LOG)+"_"+this.braces(T[1])+this.brackets(T[0]);else if(_===u.LOG10)s[o]="\\mathrm"+this.braces(u.LOG)+"_"+this.braces(10)+this.brackets(T[0]);else if("sum"===_){var M=T[0],N=T[1],I=T[2],C=T[3];s[o]="\\sum\\limits_{"+this.braces(N)+"="+this.braces(I)+"}^"+this.braces(C)+" "+this.braces(M)}else if("product"===_){M=T[0],N=T[1],I=T[2],C=T[3];s[o]="\\prod\\limits_{"+this.braces(N)+"="+this.braces(I)+"}^"+this.braces(C)+" "+this.braces(M)}else if("nthroot"===_)s[o]="\\sqrt["+T[1]+"]"+this.braces(T[0]);else if("mod"===_)s[o]=T[0]+" \\bmod "+T[1];else if("realpart"===_)s[o]="\\operatorname{Re}"+this.brackets(T[0]);else if("imagpart"===_)s[o]="\\operatorname{Im}"+this.brackets(T[0]);else{var D=""!==_?"\\mathrm"+this.braces(_.replace(/_/g,"\\_")):"";e.isConversion?s[o]=D+this.brackets(T.join(""),"parens"):s[o]=D+this.brackets(T.join(","),"parens")}}else if(e.isComposite()){var L=e.collectSymbols().sort(i===g||a===g?function(e,t){return t.group-e.group}:function(e,t){var n=P(e.power)?-1:e.power;return(P(t.power)?-1:t.power)-n}),R=[],O=L.length;for(A=0;A<O;A++)R.push(Ue.latex(L[A],n));var F=R.join("+");s[o]=e.isLinear()&&e.multiplier.equals(1)&&!r?F:this.brackets(F,"parens")}else if(i===d||a===p||a===d){i===d&&e.distributeExponent();var U=[],z=[],V=[],q=[],G=0,B=0,K=function(e,t,n){if(n>1&&t.length>0)for(var r=t.length,i=0;i<r;i++){var a=t[i],s=e[a];/^\\left\(.+\\right\)\^\{.+\}$/g.test(s)||/^\\left\(.+\\right\)$/g.test(s)||(e[a]=Ue.brackets(s,"parens"))}return e};e.each((function(t){var r;H(t.power)?(r=Ue.latex(t.invert(),n),B++,t.isComposite()&&(1!=e.multiplier.den&&1==Math.abs(t.power)&&(r=Ue.brackets(r,"parens")),V.push(U.length)),U.push(r)):(r=Ue.latex(t,n),G++,t.isComposite()&&(1!=e.multiplier.num&&1==Math.abs(t.power)&&(r=Ue.brackets(r,"parens")),q.push(z.length)),z.push(r))})),K(z,q,G),s[0]=z.join(this.dot),K(U,V,B),s[1]=U.join(this.dot)}return s},set:function(e,t,n,r){var i=function(e){return/^\\left\(.+\\right\)$/.test(e)};if(n&&(n=this.formatP(n)),r){var a=n[0];n[0]=""}t=this.merge(t,n);var s=e[0],o=e[1],u=t[0],c=t[1];u&&1===Number(s)&&(s=""),1===Number(o)&&(o="");var l=this.join(s,u,i(u)?"":this.dot),h=this.join(o,c,i(c)?"":this.dot);if(l&&h){var p=this.frac(l,h);return r&&a&&(p=this.brackets(p)+a),p}return l},merge:function(e,t){for(var n=[],r=0;r<2;r++)n[r]=e[r]+t[r];return n},join:function(e,t,n){return e||t?e&&!t?e:t&&!e?t:e+n+t:""},formatP:function(e){for(var t=0;t<2;t++){var n=e[t];n&&(e[t]="^"+this.braces(n))}return e},formatFrac:function(e,t){var n=e.num.toString(),r=e.den.toString();return t&&"1"===n&&"1"===r?"":"1"===r?n:this.frac(n,r)},frac:function(e,t){return"\\frac"+this.braces(e)+this.braces(t)},braces:function(e){return"{"+e+"}"},brackets:function(e,t){var n={parens:["(",")"],square:["[","]"],brace:["{","}"],abs:["|","|"],angle:["\\langle","\\rangle"]}[t=t||"parens"];return"\\left"+n[0]+e+"\\right"+n[1]},filterTokens:function(e){for(var t=[],n=["\\","left","right","big","Big","large","Large"],r=0,i=e.length;r<i;r++){var a=e[r];K(a)?t.push(Ue.filterTokens(a)):-1===n.indexOf(a.value)&&t.push(a)}return t},parse:function(e){var t,n,r="",i=this.filterTokens(e),a={cdot:"",times:"",infty:"Infinity"},s=function(){return i[++t]},o=function(){return Ue.parse(s())},u=function(e){return e in a?a[e]:e};for(t=0,n=i.length;t<n;t++){var c=i[t];if("frac"===c.value)r+=o()+"/"+o();else if(c.value in Ue.symbols)r+=c.value+o();else if("int"===c.value){var l=o();t++;var h=s().value;h=u(h.substring(1,h.length)),r+="integrate"+X(l+","+h)}else if("mathrm"===c.value){r+=(l=i[++t][0].value)+o()}else if("sum_"===c.value||"prod_"===c.value){var p="sum_"===c.value?"sum":"product",f=s();t++;var m=o();l=o();r+=p+X([l,u(f[0]),u(f[2]),u(m)].join(","))}else if("lim_"===c.value){f=s();r+="limit"+X([o(),u(f[0]),u(f[2])].join(","))}else Array.isArray(c)?r+=u(Ue.parse(c)):r+=u(c.value.toString())}return X(r)}};function ze(e){V(e)?this.elements=e.items.slice(0):K(e)?this.elements=e.slice(0):this.elements=[].slice.call(arguments)}function Ve(){var e,t,n,r,i=arguments,a=i.length,s=[];if(q(i))for(e=0;e<a;e++)s.push(i[e].slice(0));else for(e=0;e<a;e++)t=i[e],V(t)&&(t=t.elements),K(t)||(t=[t]),r=t.length,n&&n!==r&&k("Unable to create Matrix. Row dimensions do not match!"),s.push(t),n=r;this.elements=s}function qe(e){if(this.elements=[],V(e)||(e=ze.fromArray(arguments)),e)for(var t=e.elements,n=0,r=t.length;n<r;n++)this.add(t[n])}ze.arrayPrefill=function(e,t){var n=[];t=t||0;for(var r=0;r<e;r++)n[r]=t;return n},ze.fromArray=function(e){var t=new ze;return t.elements=e,t},ze.fromSet=function(e){return ze.fromArray(e.elements)},ze.prototype={custom:!0,e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},set:function(e,t){P(t)||(t=new Oe(t)),this.elements[e]=t},dimensions:function(){return this.elements.length},modulus:function(){return ce("SAFE",(function(){return t.pow(this.dot(this.clone()),new Oe(.5))}),void 0,this)},eql:function(e){var n=this.elements.length,r=e.elements||e;if(n!==r.length)return!1;do{if(Math.abs(t.subtract(this.elements[n-1],r[n-1]).valueOf())>PRECISION)return!1}while(--n);return!0},clone:function(){for(var e=new ze,t=this.elements.length,n=0;n<t;n++)e.elements.push(this.elements[n].clone());return this.getter&&(e.getter=this.getter.clone()),e},map:function(e){var t=[];return this.each((function(n,r){t.push(e(n,r))})),new ze(t)},each:function(e){var t,n=this.elements.length,r=n;do{t=r-n,e(this.elements[t],t+1)}while(--n)},toUnitVector:function(){return ce("SAFE",(function(){var e=this.modulus();return 0===e.valueOf()?this.clone():this.map((function(n){return t.divide(n,e)}))}),void 0,this)},angleFrom:function(e){return ce("SAFE",(function(){var n=e.elements||e;if(this.elements.length!==n.length)return null;var r=new Oe(0),i=new Oe(0),a=new Oe(0);this.each((function(e,s){r=t.add(r,t.multiply(e,n[s-1])),i=t.add(i,t.multiply(e,e)),a=t.add(a,t.multiply(n[s-1],n[s-1]))})),i=t.pow(i,new Oe(.5)),a=t.pow(a,new Oe(.5));var s=t.multiply(i,a);if(0===s.valueOf())return null;var o=t.divide(r,s),u=o.valueOf();return u<-1&&(o=-1),u>1&&(o=1),new Oe(Math.acos(o))}),void 0,this)},isParallelTo:function(e){var t=this.angleFrom(e).valueOf();return null===t?null:t<=PRECISION},isAntiparallelTo:function(e){var t=this.angleFrom(e).valueOf();return null===t?null:Math.abs(t-Math.PI)<=PRECISION},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=PRECISION},add:function(e){return ce("SAFE",(function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,r){return t.add(e,n[r-1])}))}),void 0,this)},subtract:function(e){return ce("SAFE",(function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,r){return t.subtract(e,n[r-1])}))}),void 0,this)},multiply:function(e){return this.map((function(t){return t.clone()*e.clone()}))},x:function(e){return this.multiply(e)},dot:function(e){return ce("SAFE",(function(){var n=e.elements||e,r=new Oe(0),i=this.elements.length;if(i!==n.length)return null;do{r=t.add(r,t.multiply(this.elements[i-1],n[i-1]))}while(--i);return r}),void 0,this)},cross:function(e){var n=e.elements||e;if(3!==this.elements.length||3!==n.length)return null;var r=this.elements;return ce("SAFE",(function(){return new ze([t.subtract(t.multiply(r[1],n[2]),t.multiply(r[2],n[1])),t.subtract(t.multiply(r[2],n[0]),t.multiply(r[0],n[2])),t.subtract(t.multiply(r[0],n[1]),t.multiply(r[1],n[0]))])}),void 0,this)},max:function(){var e,t=0,n=this.elements.length,r=n;do{e=r-n,Math.abs(this.elements[e].valueOf())>Math.abs(t.valueOf())&&(t=this.elements[e])}while(--n);return t},magnitude:function(){var e=new Oe(0);return this.each((function(n){e=t.add(e,t.pow(n,new Oe(2)))})),t.sqrt(e)},indexOf:function(e){var t,n=null,r=this.elements.length,i=r;do{t=i-r,null===n&&this.elements[t].valueOf()===e.valueOf()&&(n=t+1)}while(--r);return n},text:function(e){return Ce(this)},toString:function(){return this.text()},latex:function(e){for(var t=[],n=0;n<this.elements.length;n++)t.push(Ue.latex.call(Ue,this.elements[n],e));return"["+t.join(", ")+"]"}},Ve.identity=function(e){for(var t=new Ve,n=0;n<e;n++){t.elements.push([]);for(var r=0;r<e;r++)t.set(n,r,new Oe(n===r?1:0))}return t},Ve.fromArray=function(e){function t(e){return Ve.apply(this,e)}return t.prototype=Ve.prototype,new t(e)},Ve.zeroMatrix=function(e,t){for(var n=new Ve,r=0;r<e;r++)n.elements.push(ze.arrayPrefill(t,new Oe(0)));return n},Ve.prototype={custom:!0,get:function(e,t){if(this.elements[e])return this.elements[e][t]},map:function(e,t){var n=new Ve;return this.each((function(r,i,a){n.set(i,a,e.call(n,r),t)})),n},set:function(e,t,n,r){this.elements[e]||(this.elements[e]=[]),this.elements[e][t]=r||P(n)?n:new Oe(n)},cols:function(){return this.elements[0].length},rows:function(){return this.elements.length},row:function(e){return!e||e>this.cols()?[]:this.elements[e-1]},col:function(e){var t=this.rows(),n=[];if(e>this.cols()||!e)return n;for(var r=0;r<t;r++)n.push(this.elements[r][e-1]);return n},eachElement:function(e){var t,n,r=this.rows(),i=this.cols();for(t=0;t<r;t++)for(n=0;n<i;n++)e.call(this,this.elements[t][n],t,n)},determinant:function(){if(!this.isSquare())return null;var e,n=this.toRightTriangular(),r=n.elements[0][0],i=n.elements.length-1,a=i;do{e=a-i+1,r=t.multiply(r,n.elements[e][e])}while(--i);return r},isSquare:function(){return this.elements.length===this.elements[0].length},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){var t=this.rows();t!==e.rows()&&k("Cannot augment matrix. Rows don't match.");for(var n=0;n<t;n++)this.elements[n]=this.elements[n].concat(e.elements[n]);return this},clone:function(){for(var e=this.rows(),t=this.cols(),n=new Ve,r=0;r<e;r++){n.elements[r]=[];for(var i=0;i<t;i++){var a=this.elements[r][i];n.elements[r][i]=P(a)?a.clone():a}}return n},invert:function(){return this.isSquare()||k("Matrix is not square!"),ce("SAFE",(function(){var e,n,r,i,a,s,o,u=this.elements.length,c=u,l=Ve.identity(u),h=this.augment(l).toRightTriangular(),p=h.elements[0].length,f=[];do{a=[],r=p,f[e=u-1]=[],s=h.elements[e][e];do{i=p-r,o=t.divide(h.elements[e][i],s.clone()),a.push(o),i>=c&&f[e].push(o)}while(--r);for(h.elements[e]=a,n=0;n<e;n++){a=[],r=p;do{i=p-r,a.push(t.subtract(h.elements[n][i].clone(),t.multiply(h.elements[e][i].clone(),h.elements[n][e].clone())))}while(--r);h.elements[n]=a}}while(--u);return Ve.fromArray(f)}),void 0,this)},toRightTriangular:function(){return ce("SAFE",(function(){var e,n,r,i,a,s=this.clone(),o=this.elements.length,u=o,c=this.elements[0].length;do{if(r=u-o,0===s.elements[r][r].valueOf())for(var l=r+1;l<u;l++)if((n=s.elements[l][r])&&0!==n.valueOf()){e=[],i=c;do{a=c-i,e.push(t.add(s.elements[r][a].clone(),s.elements[l][a].clone()))}while(--i);s.elements[r]=e;break}if(0!==s.elements[r][r].valueOf())for(l=r+1;l<u;l++){var h=t.divide(s.elements[l][r].clone(),s.elements[r][r].clone());e=[],i=c;do{a=c-i,e.push(a<=r?new Oe(0):t.subtract(s.elements[l][a].clone(),t.multiply(s.elements[r][a].clone(),h.clone())))}while(--i);s.elements[l]=e}}while(--o);return s}),void 0,this)},transpose:function(){var e,t,n,r=this.elements.length,i=this.elements[0].length,a=new Ve,s=i;do{e=i-s,a.elements[e]=[],t=r;do{n=r-t,a.elements[e][n]=this.elements[n][e].clone()}while(--t)}while(--s);return a},canMultiplyFromLeft:function(e){var t=q(e)?e.elements.length:e.length;return this.elements[0].length===t},sameSize:function(e){return this.rows()===e.rows()&&this.cols()===e.cols()},multiply:function(e){return ce("SAFE",(function(){var n=e.elements||e;if(!this.canMultiplyFromLeft(n)){if(this.sameSize(e)){for(var r=new Ve,i=this.rows(),a=0;a<i;a++){var s=t.multiply(new ze(this.elements[a]),new ze(e.elements[a]));r.elements[a]=s.elements}return r}return null}var o,u,c,l,h,p=this.elements.length,f=p,m=n[0].length,d=this.elements[0].length,g=[];do{g[a=f-p]=[],o=m;do{u=m-o,c=new Oe(0),l=d;do{h=d-l,c=t.add(c,t.multiply(this.elements[a][h],n[h][u]))}while(--l);g[a][u]=c}while(--o)}while(--p);return Ve.fromArray(g)}),void 0,this)},add:function(e,n){var r=new Ve;return this.sameSize(e)&&this.eachElement((function(i,a,s){var o=t.add(i.clone(),e.elements[a][s].clone());n&&(o=n.call(r,o,i,e.elements[a][s])),r.set(a,s,o)})),r},subtract:function(e,n){var r=new Ve;return this.sameSize(e)&&this.eachElement((function(i,a,s){var o=t.subtract(i.clone(),e.elements[a][s].clone());n&&(o=n.call(r,o,i,e.elements[a][s])),r.set(a,s,o)})),r},negate:function(){return this.each((function(e){return e.negate()})),this},toVector:function(){if(1===this.rows()||1===this.cols()){var e=new ze;return e.elements=this.elements,e}return this},toString:function(e,t){var n=this.rows(),r=[];e=void 0===e?"\n":e;for(var i=0;i<n;i++)r.push("["+this.elements[i].map((function(e){var n=t?e.multiplier.toDecimal():e.toString();return void 0!==e?n:""})).join(",")+"]");return"matrix"+X(r.join(","))},text:function(){return"matrix("+this.elements.toString("")+")"},latex:function(e){var t=this.cols(),n=this.elements;return Z("\\begin{vmatrix}{0}\\end{vmatrix}",(function(){var r=[];for(var i in n){for(var a=[],s=0;s<t;s++)a.push(Ue.latex.call(Ue,n[i][s],e));r.push(a.join(" & "))}return r.join(" \\cr ")}))}},Ve.prototype.each=Ve.prototype.eachElement,qe.fromArray=function(e){function t(e){return qe.apply(this,e)}return t.prototype=qe.prototype,new t(e)},qe.prototype={add:function(e){this.contains(e)||this.elements.push(e.clone())},contains:function(e){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];if(e.equals(n))return!0}return!1},each:function(e){for(var t=this.elements,n=new qe,r=0,i=t.length;r<i;r++){var a=t[r];e.call(this,a,n,r)}return n},clone:function(){var e=new qe;return this.each((function(t){e.add(t.clone())})),e},union:function(e){var t=this.clone();return e.each((function(e){t.add(e)})),t},difference:function(e){var t=this.clone();return e.each((function(e){t.remove(e)})),t},remove:function(e){for(var t=0,n=this.elements.length;t<n;t++){if(this.elements[t].equals(e))return ue(this.elements,t),!0}return!1},intersection:function(e){var t=new qe,n=this;return e.each((function(e){n.contains(e)&&t.add(e)})),t},intersects:function(e){return this.intersection(e).elements.length>0},is_subset:function(e){for(var t=e.elements,n=0,r=t.length;n<r;n++)if(!this.contains(t[n]))return!1;return!0},toString:function(){return"{"+this.elements.join(",")+"}"}};var Ge={dependencies:{_rename:{"Math2.factorial":"factorial"},factorial:{"Math2.gamma":Ie.gamma},gamma_incomplete:{"Math2.factorial":Ie.factorial},Li:{"Math2.Ei":Ie.Ei,"Math2.bigLog":Ie.bigLog,Frac:Re},Ci:{"Math2.factorial":Ie.factorial},Ei:{"Math2.factorial":Ie.factorial},Si:{"Math2.factorial":Ie.factorial},Shi:{"Math2.factorial":Ie.factorial},Chi:{isInt:j,nround:te,"Math2.num_integrate":Ie.num_integrate},factor:{"Math2.ifactor":Ie.ifactor,Symbol:Oe},num_integrate:{"Math2.simpson":Ie.simpson,nround:te},fib:{even:re}},reformat:{diff:function(e,t){var n="var f = "+Ge.build(e.args[0].toString())+";";return t[1]+="var diff = "+Ie.diff.toString()+";",t[1]+=n,["diff(f)("+e.args[1].toString()+")",t]}},getProperName:function(e){return{continued_fraction:"continuedFraction"}[e]||e},compileDependencies:function(e,t){var n=Ge.dependencies[e],r=t&&t[1]?t[1]:"",i=t&&t[0]?t[0]:{};for(var a in n)if("object"!==typeof n[a]){var s=a.split(".");r+="var "+(s.length>1?s[1]:s[0])+"="+n[a]+";",i[a]=s.pop()}return[i,r]},getArgsDeps:function(e,t){for(var n=e.args,r=0;r<n.length;r++)e.args[r].each((function(e){e.group===f&&(t=Ge.compileDependencies(e.fname,t))}));return t},build:function(e,n){e=ce("PARSE2NUMBER",(function(){return t.parse(e)}),!0);var r=z(e),i=[],a=[];if(n){for(var s=0;s<r.length;s++){var o=r[s];-1===n.indexOf(o)&&k(o+" not found in argument array")}r=n}var u=function e(n,r){r=r||[];var s,o=[],u=n.group,m="",g=function(t){var i=t===d?"*":"+",a=[];for(var s in n.symbols){var o=n.symbols[s],u=e(o,r)[0];o.isComposite()&&(u=X(u)),a.push(u)}var c=a.join(i);return c=c&&!n.multiplier.equals(1)?X(c):c},v=function(t){var a;return t in Math?a="Math."+t:(t=Ge.getProperName(t),-1===i.indexOf(t)&&(r.push("var "+t+" = "+Ie[t].toString()+"; "),i.push(t)),a=t),a+=X(n.args.map((function(t){return e(t,r)[0]})).join(","))};if(u===c?o.push(n.multiplier.toDecimal()):n.multiplier.equals(-1)?m="-":n.multiplier.equals(1)||o.push(n.multiplier.toDecimal()),u===h||u===l)s=n.value;else if(u===f)if(a=Ge.compileDependencies(n.fname,a),a=Ge.getArgsDeps(n,a),Ge.reformat[n.fname]){var y=Ge.reformat[n.fname](n,a);a=y[1],s=y[0]}else s=v(n.fname);else if(u===p){var x=n.previousGroup;x===c||x===h?s=n.value:x===f?(s=v(n.fname),a=Ge.compileDependencies(n.fname,a),a=Ge.getArgsDeps(n,a)):s=g(n.previousGroup)}else s=g(n.group);if(n.group!==c&&!n.power.equals(1)){var b=e(t.parse(n.power));r.push(b[1]),s="Math.pow"+X(s+","+b[0])}return s&&o.push(m+s),[o.join("*"),r.join("").replace(/\n+\s+/g," ")]}(e);for(var m in a[0]){var g=a[0][m];u[1]=u[1].replace(m,g),a[1]=a[1].replace(m,g)}return new Function(r,(a[1]||"")+u[1]+" return "+u[0]+";")}};oe(t.CONSTANTS),oe(t.functions),t.initConstants(),t.error||(t.error=k),u.LOG_FNS={log:t.functions.log,log10:t.functions.log10};var Be={allSame:I,allNumeric:function(e){for(var t=0;t<e.length;t++)if(!O(e[t]))return!1;return!0},arguments2Array:le,arrayAddSlices:function(e,t){t=t||20;var n,r,i=[];i.push(e[0]);for(var a=0;a<e.length-1;a++){n=e[a],r=(e[a+1]-n)/t;for(var s=0;s<t;s++)n+=r,i.push(n)}return i},arrayClone:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t[r]=e[r].clone();return t},arrayMax:function(e){return Math.max.apply(void 0,e)},arrayMin:$,arrayUnique:ae,arraySum:function(e){var n=new Oe(0);return e.map((function(e){n=t.add(n,e)})),n},block:ce,build:Ge.build,clearU:function(e){var t=A.indexOf(e);-1!==t&&(A[t]=void 0)},comboSort:function(e,t){for(var n=e.length,r=[],i=0;i<e.length;i++)r.push([e[i],t[i]]);r.sort((function(e,t){return e[0]-t[0]}));var a=[],s=[];for(i=0;i<n;i++)a.push(r[i][0]),s.push(r[i][1]);return[a,s]},compare:function(e,n,r){for(var i,a={},s=0;s<r.length;s++)a[r[s]]=new Oe(Math.floor(5*Math.random())+1);return ce("PARSE2NUMBER",(function(){i=t.parse(e,a).equals(t.parse(n,a))})),i},convertToVector:function e(n){if(K(n)){for(var r=new ze([]),i=0;i<n.length;i++)r.elements.push(e(n[i]));return r}return P(n)?n:t.parse(n)},customError:M,customType:function(e){return void 0!==e&&e.custom},decompose_fn:ee,each:ne,evaluate:he,even:re,evenFraction:ie,fillHoles:function(e,t){t=t||e.length;for(var n=0;n<t;n++){e[n]||(e[n]=new Oe(0))}return e},firstObject:J,format:Z,generatePrimes:pe,getCoeffs:function(e,n){var r=[];e.each((function(e){if(e.contains(n))var i=e.stripVar(n),a=t.divide(e.clone(),i.clone()).power.toDecimal();else i=e,a=0;var s=r[a];r[a]=s?t.add(s,i):i}),!0);for(var i=0;i<r.length;i++)r[i]||(r[i]=new Oe(0));return r},getU:function(e){for(var t="u",n=0,r=z(e);-1!==A.indexOf(t)||-1!==r.indexOf(t);)t="u"+n++;for(var i=0,a=A.length;i<=a;i++)if(!A[i]){A[i]=t;break}return t},importFunctions:function(){var e={};for(var n in t.functions)e[n]=t.functions[n][0];return e},inBrackets:X,isArray:K,isExpression:U,isFraction:F,isInt:j,isMatrix:q,isNegative:H,isNumericSymbol:B,isPrime:R,isReserved:N,isSymbol:P,isVariableSymbol:function(e){return e.group===h&&e.multiplier.equals(1)&&e.power.equals(1)},isVector:V,keys:Y,nroots:function(e){var n,r;if(e.group===f&&""===e.fname?(n=Oe.unwrapPARENS(t.parse(e).toLinear()),r=t.parse(e.power)):e.group===l&&(n=t.parse(e.value),r=t.parse(e.power)),n&&r&&n.group===c&&r.group===c&&n.multiplier.isNegative()){for(var i=[],a=Oe.toPolarFormArray(he(e))[0],s=t.arg(n),o=r.multiplier.den.toString(),h=r.multiplier.num.toString(),p=0;p<o;p++){var m=he(t.parse(Z("(({0})+2*pi*({1}))/({2})",s,p,o))).multiplier.toDecimal();i.push(he(t.parse(Z("(({0})^({1})*(cos({3})+({2})*sin({3})))^({4})",a,o,u.IMAGINARY,m,h))))}return ze.fromArray(i)}if(e.isConstant(!0,!0)){var d=e.sign(),g=(s=he(e.abs()),t.sqrt(s));i=[g.clone(),g.negate()];d<0&&(i=i.map((function(e){return t.multiply(e,Oe.imaginary())})))}else i=[t.parse(e)];return ze.fromArray(i)},remove:ue,reserveNames:oe,range:function(e,t,n){var r=[];n=n||1;for(var i=e;i<=t;i++)r.push(i*n);return r},round:te,sameSign:function(e,t){return e<0===t<0},scientificToDecimal:L,separate:function e(n,r){n=t.expand(n),r=r||{};var i=function(e,n){r[e]||(r[e]=new Oe(0)),r[e]=t.add(r[e],n.clone())};return n.each((function(t){if(t.isConstant("all"))i("constants",t);else if(t.group===h)i(t.value,t);else if(t.group!==f||t.fname!==b&&""!==t.fname){if(t.group===p||t.group===f)throw new Error("Unable to separate. Term cannot be a function!");i(z(t).join(" "),t)}else e(t.args[0])})),r},stringReplace:function(e,t,n,r){return e.substr(0,t)+r+e.substr(n,e.length)},text:Ce,validateName:D,variables:z,warn:C},Ke={groups:a,Symbol:Oe,Expression:De,Frac:Re,Vector:ze,Matrix:Ve,Parser:Fe,Fraction:Pe,Math2:Ie,LaTeX:Ue,Utils:Be,PARSER:t,PARENTHESIS:y,Settings:u,err:k,bigInt:n,bigDec:i,exceptions:Me},je=function(e,n,i,a){var s=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(e);if(s)return r.setFunction(s[1],s[2].split(","),s[3]);e instanceof De&&(e=e.toString());var o=K(i),c=o?-1!==i.indexOf("numer"):"numer"===i;(o?-1!==i.indexOf("expand"):"expand"===i)&&(e=Z("{0}({1})","expand",e));var l=ce("PARSE2NUMBER",(function(){return t.parse(e,n)}),c||u.PARSE2NUMBER);return a?T[a-1]=l:T.push(l),new De(l)};return je.rpn=function(e){return t.tokenize(t.toRPN(e))},je.convertToLaTeX=function(e,n){return t.toTeX(e,n)},je.convertFromLaTeX=function(e){var n=Ue.parse(t.tokenize(e));return new De(t.parse(n))},je.version=function(e){if(e)try{return Ke[e].version}catch(t){return"No module named "+e+" found!"}return"1.1.5"},je.getWarnings=function(){return E},je.setConstant=function(e,n){if(D(e),!N(e))if("delete"===n||""===n)delete t.CONSTANTS[e];else{if(isNaN(n))throw new xe("Constant must be a number!");t.CONSTANTS[e]=n}return this},je.getConstant=function(e){return String(t.constant[e])},je.setFunction=Q,je.getCore=function(){return Ke},je.getExpression=je.getEquation=De.getExpression,je.reserved=function(e){return e?A:A.join(", ")},je.clear=function(e,t){if("all"===e)T=[];else if("last"===e)T.pop();else if("first"===e)T.shift();else{var n=e?e-1:T.length;!0===t?T[n]=void 0:ue(T,n)}return this},je.flush=function(){return this.clear("all"),this},je.expressions=function(e,t,n){for(var r=e?{}:[],i=0;i<T.length;i++){var a=t?Ue.latex(T[i],n):Ce(T[i],n);e?r[i+1]=a:r.push(a)}return r},je.register=function(e){var n=this.getCore();if(K(e))for(var r=0;r<e.length;r++)e&&this.register(e[r]);else if(e&&-1===u.exclude.indexOf(e.name)){if(e.dependencies)for(r=0;r<e.dependencies.length;r++)if(!n[e.dependencies[r]])throw new Error(Z("{0} requires {1} to be loaded!",e.name,e.dependencies[r]));var i=e.parent,a=e.build.call(n);if(i)n[i]||(n[e.parent]={}),("nerdamer"===i?this:n[i])[e.name]=a;e.visible&&(t.functions[e.name]=[a,e.numargs])}},je.validateName=D,je.validVarName=function(e){try{return D(e),-1===A.indexOf(e)}catch(t){return!1}},je.supported=function(){return Y(t.functions)},je.numEquations=je.numExpressions=function(){return T.length},je.setVar=function(e,n){return D(e),e in t.CONSTANTS&&k("Cannot set value for constant "+e),"delete"===n||""===n?delete _[e]:_[e]=P(n)?n:t.parse(n),this},je.getVar=function(e){return _[e]},je.clearVars=function(){return _={},this},je.load=function(e){return e.call(this),this},je.getVars=function(e,t){var n={};if("object"===(e=e||"text"))n=_;else for(var r in _)"latex"===e?n[r]=_[r].latex(t):"text"===e&&(n[r]=_[r].text(t));return n},je.set=function(e,n){if("object"===typeof e)for(var r in e)je.set(r,e[r]);-1!==["SAFE"].indexOf(e)&&k("Cannot modify setting: "+e),"PRECISION"===e?i.set({precision:n}):"USE_LN"===e&&!0===n?(u.LOG="LN",u.LOG10="log",t.functions.log=u.LOG_FNS.log10,t.functions.log[0]=function(e){return e.isConstant()?new Oe(Math.log10(e)):t.symfunction(u.LOG10,[e])},t.functions.LN=u.LOG_FNS.log,delete t.functions.log10):u[e]=n},je.get=function(e){return u[e]},je.api=function(e){var n=function(e){return function(){for(var n=[].slice.call(arguments),r=0;r<n.length;r++)n[r]=t.parse(n[r]);return new De(ce("PARSE2NUMBER",(function(){return t.callfunction(e,n)})))}};for(var r in t.functions)r in je&&!e||(je[r]=n(r))},je.replaceFunction=function(e,n,r){var i=t.functions[e],a="undefined"===typeof r?i[1]:r;t.functions[e]=[n.call(void 0,i[0],Ke),a]},je.setOperator=function(e,n){t.setOperator(e,n)},je.getOperator=function(e){return t.getOperator(e)},je.aliasOperator=function(e,n){t.aliasOperator(e,n)},je.tree=function(e){return t.tree(t.toRPN(t.tokenize(e)))},je.htmlTree=function(e,t){return'<div class="tree">\n    <ul>\n        <li>\n'+this.tree(e).toHTML(3,t)+"\n        </li>\n    </ul>\n</div>"},je.addPeeker=function(e,n){t.peekers[e]&&t.peekers[e].push(n)},je.removePeeker=function(e,n){ue(t.peekers[e],n)},je.parse=function(e){return String(e).split(";").map((function(e){return t.parse(e)}))},je.api(),je}({bigInt:function(){var r=function(e){"use strict";var t=1e7,n=9007199254740992,i=l(n),a=Math.log(n);function s(e,t){return"undefined"===typeof e?s[0]:"undefined"!==typeof t?10===+t?j(e):z(e,t):j(e)}function o(e,t){this.value=e,this.sign=t,this.isSmall=!1}function u(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){return-n<e&&e<n}function l(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function h(e){p(e);var n=e.length;if(n<4&&k(e,i)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function f(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return e>0?Math.floor(e):Math.ceil(e)}function d(e,n){var r,i,a=e.length,s=n.length,o=new Array(a),u=0,c=t;for(i=0;i<s;i++)u=(r=e[i]+n[i]+u)>=c?1:0,o[i]=r-u*c;for(;i<a;)u=(r=e[i]+u)===c?1:0,o[i++]=r-u*c;return u>0&&o.push(u),o}function g(e,t){return e.length>=t.length?d(e,t):d(t,e)}function v(e,n){var r,i,a=e.length,s=new Array(a),o=t;for(i=0;i<a;i++)r=e[i]-o+n,n=Math.floor(r/o),s[i]=r-n*o,n+=1;for(;n>0;)s[i++]=n%o,n=Math.floor(n/o);return s}function y(e,t){var n,r,i=e.length,a=t.length,s=new Array(i),o=0;for(n=0;n<a;n++)(r=e[n]-o-t[n])<0?(r+=1e7,o=1):o=0,s[n]=r;for(n=a;n<i;n++){if(!((r=e[n]-o)<0)){s[n++]=r;break}r+=1e7,s[n]=r}for(;n<i;n++)s[n]=e[n];return p(s),s}function x(e,t,n){var r,i,a=e.length,s=new Array(a),c=-t;for(r=0;r<a;r++)i=e[r]+c,c=Math.floor(i/1e7),i%=1e7,s[r]=i<0?i+1e7:i;return"number"===typeof(s=h(s))?(n&&(s=-s),new u(s)):new o(s,n)}function b(e,t){var n,r,i,a,s=e.length,o=t.length,u=f(s+o);for(i=0;i<s;++i){a=e[i];for(var c=0;c<o;++c)n=a*t[c]+u[i+c],r=Math.floor(n/1e7),u[i+c]=n-1e7*r,u[i+c+1]+=r}return p(u),u}function w(e,n){var r,i,a=e.length,s=new Array(a),o=t,u=0;for(i=0;i<a;i++)r=e[i]*n+u,u=Math.floor(r/o),s[i]=r-u*o;for(;u>0;)s[i++]=u%o,u=Math.floor(u/o);return s}function S(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function T(e,n,r){return new o(e<t?w(n,e):b(n,l(e)),r)}function _(e){var t,n,r,i,a=e.length,s=f(a+a);for(r=0;r<a;r++){n=0-(i=e[r])*i;for(var o=r;o<a;o++)t=i*e[o]*2+s[r+o]+n,n=Math.floor(t/1e7),s[r+o]=t-1e7*n;s[r+a]=n}return p(s),s}function A(e,t){var n,r,i,a,s=e.length,o=f(s);for(i=0,n=s-1;n>=0;--n)i=(a=1e7*i+e[n])-(r=m(a/t))*t,o[n]=0|r;return[o,0|i]}function E(e,n){var r,i,a=j(n),c=e.value,d=a.value;if(0===d)throw new Error("Cannot divide by zero");if(e.isSmall)return a.isSmall?[new u(m(c/d)),new u(c%d)]:[s[0],e];if(a.isSmall){if(1===d)return[e,s[0]];if(-1==d)return[e.negate(),s[0]];var g=Math.abs(d);if(g<t){i=h((r=A(c,g))[0]);var v=r[1];return e.sign&&(v=-v),"number"===typeof i?(e.sign!==a.sign&&(i=-i),[new u(i),new u(v)]):[new o(i,e.sign!==a.sign),new u(v)]}d=l(g)}var x=k(c,d);if(-1===x)return[s[0],e];if(0===x)return[s[e.sign===a.sign?1:-1],s[0]];i=(r=c.length+d.length<=200?function(e,n){var r,i,a,s,o,u,c,l=e.length,p=n.length,m=t,d=f(n.length),g=n[p-1],v=Math.ceil(m/(2*g)),y=w(e,v),x=w(n,v);for(y.length<=l&&y.push(0),x.push(0),g=x[p-1],i=l-p;i>=0;i--){for(r=m-1,y[i+p]!==g&&(r=Math.floor((y[i+p]*m+y[i+p-1])/g)),a=0,s=0,u=x.length,o=0;o<u;o++)a+=r*x[o],c=Math.floor(a/m),s+=y[i+o]-(a-c*m),a=c,s<0?(y[i+o]=s+m,s=-1):(y[i+o]=s,s=0);for(;0!==s;){for(r-=1,a=0,o=0;o<u;o++)(a+=y[i+o]-m+x[o])<0?(y[i+o]=a+m,a=0):(y[i+o]=a,a=1);s+=a}d[i]=r}return y=A(y,v)[0],[h(d),h(y)]}(c,d):function(e,t){for(var n,r,i,a,s,o=e.length,u=t.length,c=[],l=[];o;)if(l.unshift(e[--o]),p(l),k(l,t)<0)c.push(0);else{i=1e7*l[(r=l.length)-1]+l[r-2],a=1e7*t[u-1]+t[u-2],r>u&&(i=1e7*(i+1)),n=Math.ceil(i/a);do{if(k(s=w(t,n),l)<=0)break;n--}while(n);c.push(n),l=y(l,s)}return c.reverse(),[h(c),h(l)]}(c,d))[0];var b=e.sign!==a.sign,S=r[1],T=e.sign;return"number"===typeof i?(b&&(i=-i),i=new u(i)):i=new o(i,b),"number"===typeof S?(T&&(S=-S),S=new u(S)):S=new o(S,T),[i,S]}function k(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function M(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function N(e,t){for(var n,i,a,o=e.prev(),u=o,c=0;u.isEven();)u=u.divide(2),c++;e:for(i=0;i<t.length;i++)if(!e.lesser(t[i])&&!(a=r(t[i]).modPow(u,e)).equals(s[1])&&!a.equals(o)){for(n=c-1;0!=n;n--){if((a=a.square().mod(e)).isUnit())return!1;if(a.equals(o))continue e}return!1}return!0}o.prototype=Object.create(s.prototype),u.prototype=Object.create(s.prototype),o.prototype.add=function(e){var t=j(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new o(v(n,Math.abs(r)),this.sign):new o(g(n,r),this.sign)},o.prototype.plus=o.prototype.add,u.prototype.add=function(e){var t=j(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(c(n+r))return new u(n+r);r=l(Math.abs(r))}return new o(v(r,Math.abs(n)),n<0)},u.prototype.plus=u.prototype.add,o.prototype.subtract=function(e){var t=j(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?x(n,Math.abs(r),this.sign):function(e,t,n){var r;return k(e,t)>=0?r=y(e,t):(r=y(t,e),n=!n),"number"===typeof(r=h(r))?(n&&(r=-r),new u(r)):new o(r,n)}(n,r,this.sign)},o.prototype.minus=o.prototype.subtract,u.prototype.subtract=function(e){var t=j(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new u(n-r):x(r,Math.abs(n),n>=0)},u.prototype.minus=u.prototype.subtract,o.prototype.negate=function(){return new o(this.value,!this.sign)},u.prototype.negate=function(){var e=this.sign,t=new u(-this.value);return t.sign=!e,t},o.prototype.abs=function(){return new o(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},o.prototype.multiply=function(e){var n,r,i,a=j(e),u=this.value,c=a.value,h=this.sign!==a.sign;if(a.isSmall){if(0===c)return s[0];if(1===c)return this;if(-1===c)return this.negate();if((n=Math.abs(c))<t)return new o(w(u,n),h);c=l(n)}return r=u.length,i=c.length,new o(-.012*r-.012*i+15e-6*r*i>0?function e(t,n){var r=Math.max(t.length,n.length);if(r<=30)return b(t,n);r=Math.ceil(r/2);var i=t.slice(r),a=t.slice(0,r),s=n.slice(r),o=n.slice(0,r),u=e(a,o),c=e(i,s),l=e(g(a,i),g(o,s)),h=g(g(u,S(y(y(l,u),c),r)),S(c,2*r));return p(h),h}(u,c):b(u,c),h)},o.prototype.times=o.prototype.multiply,u.prototype._multiplyBySmall=function(e){return c(e.value*this.value)?new u(e.value*this.value):T(Math.abs(e.value),l(Math.abs(this.value)),this.sign!==e.sign)},o.prototype._multiplyBySmall=function(e){return 0===e.value?s[0]:1===e.value?this:-1===e.value?this.negate():T(Math.abs(e.value),this.value,this.sign!==e.sign)},u.prototype.multiply=function(e){return j(e)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,o.prototype.square=function(){return new o(_(this.value),!1)},u.prototype.square=function(){var e=this.value*this.value;return c(e)?new u(e):new o(_(l(Math.abs(this.value))),!1)},o.prototype.divmod=function(e){var t=E(this,e);return{quotient:t[0],remainder:t[1]}},u.prototype.divmod=o.prototype.divmod,o.prototype.divide=function(e){return E(this,e)[0]},u.prototype.over=u.prototype.divide=o.prototype.over=o.prototype.divide,o.prototype.mod=function(e){return E(this,e)[1]},u.prototype.remainder=u.prototype.mod=o.prototype.remainder=o.prototype.mod,o.prototype.pow=function(e){var t,n,r,i=j(e),a=this.value,o=i.value;if(0===o)return s[1];if(0===a)return s[0];if(1===a)return s[1];if(-1===a)return i.isEven()?s[1]:s[-1];if(i.sign)return s[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&c(t=Math.pow(a,o)))return new u(m(t));for(n=this,r=s[1];!0&o&&(r=r.times(n),--o),0!==o;)o/=2,n=n.square();return r},u.prototype.pow=o.prototype.pow,o.prototype.modPow=function(e,t){if(e=j(e),(t=j(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var n=s[1],r=this.mod(t);e.isPositive();){if(r.isZero())return s[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},u.prototype.modPow=o.prototype.modPow,o.prototype.compareAbs=function(e){var t=j(e),n=this.value,r=t.value;return t.isSmall?1:k(n,r)},u.prototype.compareAbs=function(e){var t=j(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},o.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=j(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:k(n,r)*(this.sign?-1:1)},o.prototype.compareTo=o.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=j(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},u.prototype.compareTo=u.prototype.compare,o.prototype.equals=function(e){return 0===this.compare(e)},u.prototype.eq=u.prototype.equals=o.prototype.eq=o.prototype.equals,o.prototype.notEquals=function(e){return 0!==this.compare(e)},u.prototype.neq=u.prototype.notEquals=o.prototype.neq=o.prototype.notEquals,o.prototype.greater=function(e){return this.compare(e)>0},u.prototype.gt=u.prototype.greater=o.prototype.gt=o.prototype.greater,o.prototype.lesser=function(e){return this.compare(e)<0},u.prototype.lt=u.prototype.lesser=o.prototype.lt=o.prototype.lesser,o.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},u.prototype.geq=u.prototype.greaterOrEquals=o.prototype.geq=o.prototype.greaterOrEquals,o.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},u.prototype.leq=u.prototype.lesserOrEquals=o.prototype.leq=o.prototype.lesserOrEquals,o.prototype.isEven=function(){return 0===(1&this.value[0])},u.prototype.isEven=function(){return 0===(1&this.value)},o.prototype.isOdd=function(){return 1===(1&this.value[0])},u.prototype.isOdd=function(){return 1===(1&this.value)},o.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},o.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},o.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},o.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},o.prototype.isDivisibleBy=function(e){var t=j(e),n=t.value;return 0!==n&&(1===n||(2===n?this.isEven():this.mod(t).equals(s[0])))},u.prototype.isDivisibleBy=o.prototype.isDivisibleBy,o.prototype.isPrime=function(e){var t=M(this);if(void 0!==t)return t;var n=this.abs(),i=n.bitLength();if(i<=64)return N(n,[2,325,9375,28178,450775,9780504,1795265022]);for(var a=Math.log(2)*i,s=Math.ceil(!0===e?2*Math.pow(a,2):a),o=[],u=0;u<s;u++)o.push(r(u+2));return N(n,o)},u.prototype.isPrime=o.prototype.isPrime,o.prototype.isProbablePrime=function(e){var t=M(this);if(void 0!==t)return t;for(var n=this.abs(),i=void 0===e?5:e,a=[],s=0;s<i;s++)a.push(r.randBetween(2,n.minus(2)));return N(n,a)},u.prototype.isProbablePrime=o.prototype.isProbablePrime,o.prototype.modInv=function(e){for(var t,n,i,a=r.zero,s=r.one,o=j(e),u=this.abs();!u.equals(r.zero);)t=o.divide(u),n=a,i=o,a=s,o=u,s=n.subtract(t.multiply(s)),u=i.subtract(t.multiply(u));if(!o.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===a.compare(0)&&(a=a.add(e)),this.isNegative()?a.negate():a},u.prototype.modInv=o.prototype.modInv,o.prototype.next=function(){var e=this.value;return this.sign?x(e,1,this.sign):new o(v(e,1),this.sign)},u.prototype.next=function(){var e=this.value;return e+1<n?new u(e+1):new o(i,!1)},o.prototype.prev=function(){var e=this.value;return this.sign?new o(v(e,1),!0):x(e,1,this.sign)},u.prototype.prev=function(){var e=this.value;return e-1>-n?new u(e-1):new o(i,!0)};for(var I=[1];2*I[I.length-1]<=t;)I.push(2*I[I.length-1]);var C=I.length,D=I[C-1];function L(e){return("number"===typeof e||"string"===typeof e)&&+Math.abs(e)<=t||e instanceof o&&e.value.length<=1}function R(e,t,n){t=j(t);for(var i=e.isNegative(),a=t.isNegative(),s=i?e.not():e,o=a?t.not():t,u=0,c=0,l=null,h=null,p=[];!s.isZero()||!o.isZero();)u=(l=E(s,D))[1].toJSNumber(),i&&(u=D-1-u),c=(h=E(o,D))[1].toJSNumber(),a&&(c=D-1-c),s=l[0],o=h[0],p.push(n(u,c));for(var f=0!==n(i?1:0,a?1:0)?r(-1):r(0),m=p.length-1;m>=0;m-=1)f=f.multiply(D).add(r(p[m]));return f}o.prototype.shiftLeft=function(e){if(!L(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;e>=C;)t=t.multiply(D),e-=C-1;return t.multiply(I[e])},u.prototype.shiftLeft=o.prototype.shiftLeft,o.prototype.shiftRight=function(e){var t;if(!L(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var n=this;e>=C;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=E(n,D))[1].isNegative()?t[0].prev():t[0],e-=C-1}return(t=E(n,I[e]))[1].isNegative()?t[0].prev():t[0]},u.prototype.shiftRight=o.prototype.shiftRight,o.prototype.not=function(){return this.negate().prev()},u.prototype.not=o.prototype.not,o.prototype.and=function(e){return R(this,e,(function(e,t){return e&t}))},u.prototype.and=o.prototype.and,o.prototype.or=function(e){return R(this,e,(function(e,t){return e|t}))},u.prototype.or=o.prototype.or,o.prototype.xor=function(e){return R(this,e,(function(e,t){return e^t}))},u.prototype.xor=o.prototype.xor;function O(e){var n=e.value,r="number"===typeof n?n|1<<30:n[0]+n[1]*t|1073758208;return r&-r}function F(e,t){return e=j(e),t=j(t),e.greater(t)?e:t}function P(e,t){return e=j(e),t=j(t),e.lesser(t)?e:t}function U(e,t){if(e=j(e).abs(),t=j(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,i=s[1];e.isEven()&&t.isEven();)n=Math.min(O(e),O(t)),e=e.divide(n),t=t.divide(n),i=i.multiply(n);for(;e.isEven();)e=e.divide(O(e));do{for(;t.isEven();)t=t.divide(O(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}o.prototype.bitLength=function(){var e=this;return e.compareTo(r(0))<0&&(e=e.negate().subtract(r(1))),0===e.compareTo(r(0))?r(0):r(function e(t,n){if(n.compareTo(t)<=0){var i=e(t,n.square(n)),a=i.p,s=i.e,o=a.multiply(n);return o.compareTo(t)<=0?{p:o,e:2*s+1}:{p:a,e:2*s}}return{p:r(1),e:0}}(e,r(2)).e).add(r(1))},u.prototype.bitLength=o.prototype.bitLength;var z=function(e,t){for(var n=e.length,r=Math.abs(t),i=0;i<n;i++){if("-"!==(l=e[i].toLowerCase())&&/[a-z0-9]/.test(l)){if(/[0-9]/.test(l)&&+l>=r){if("1"===l&&1===r)continue;throw new Error(l+" is not a valid digit in base "+t+".")}if(l.charCodeAt(0)-87>=r)throw new Error(l+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&n<=a/Math.log(t)){var s=parseInt(e,t);if(isNaN(s))throw new Error(l+" is not a valid digit in base "+t+".");return new u(parseInt(e,t))}t=j(t);var o=[],c="-"===e[0];for(i=c?1:0;i<e.length;i++){var l,h=(l=e[i].toLowerCase()).charCodeAt(0);if(48<=h&&h<=57)o.push(j(l));else if(97<=h&&h<=122)o.push(j(l.charCodeAt(0)-87));else{if("<"!==l)throw new Error(l+" is not a valid character");var p=i;do{i++}while(">"!==e[i]);o.push(j(e.slice(p+1,i)))}}return V(o,t,c)};function V(e,t,n){var r,i=s[0],a=s[1];for(r=e.length-1;r>=0;r--)i=i.add(e[r].times(a)),a=a.times(t);return n?i.negate():i}function q(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function G(e,t){if((t=r(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var i=!1;if(e.isNegative()&&t.isPositive()&&(i=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:i};for(var a,s=[],o=e;o.isNegative()||o.compareAbs(t)>=0;){a=o.divmod(t),o=a.quotient;var u=a.remainder;u.isNegative()&&(u=t.minus(u).abs(),o=o.next()),s.push(u.toJSNumber())}return s.push(o.toJSNumber()),{value:s.reverse(),isNegative:i}}function B(e,t){var n=G(e,t);return(n.isNegative?"-":"")+n.value.map(q).join("")}function K(e){if(c(+e)){var t=+e;if(t===m(t))return new u(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var i=r[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==m(i)||!c(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var a=r[0],s=a.indexOf(".");if(s>=0&&(i-=a.length-s-1,a=a.slice(0,s)+a.slice(s+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=a+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var l=[],h=e.length,f=h-7;h>0;)l.push(+e.slice(f,h)),(f-=7)<0&&(f=0),h-=7;return p(l),new o(l,n)}function j(e){return"number"===typeof e?function(e){if(c(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new u(e)}return K(e.toString())}(e):"string"===typeof e?K(e):e}o.prototype.toArray=function(e){return G(this,e)},u.prototype.toArray=function(e){return G(this,e)},o.prototype.toString=function(e){if(void 0===e&&(e=10),10!==e)return B(this,e);for(var t,n=this.value,r=n.length,i=String(n[--r]);--r>=0;)t=String(n[r]),i+="0000000".slice(t.length)+t;return(this.sign?"-":"")+i},u.prototype.toString=function(e){return void 0===e&&(e=10),10!=e?B(this,e):String(this.value)},o.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},o.prototype.valueOf=function(){return parseInt(this.toString(),10)},o.prototype.toJSNumber=o.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf;for(var H=0;H<1e3;H++)s[H]=new u(H),H>0&&(s[-H]=new u(-H));return s.one=s[1],s.zero=s[0],s.minusOne=s[-1],s.max=F,s.min=P,s.gcd=U,s.lcm=function(e,t){return e=j(e).abs(),t=j(t).abs(),e.divide(U(e,t)).multiply(t)},s.isInstance=function(e){return e instanceof o||e instanceof u},s.randBetween=function(e,n){var r=P(e=j(e),n=j(n)),i=F(e,n).subtract(r).add(1);if(i.isSmall)return r.add(Math.floor(Math.random()*i));for(var a=[],s=!0,c=i.value.length-1;c>=0;c--){var l=s?i.value[c]:t,p=m(Math.random()*l);a.unshift(p),p<l&&(s=!1)}return a=h(a),r.add("number"===typeof a?new u(a):new o(a,!1))},s.fromArray=function(e,t,n){return V(e.map(j),j(t||10),n)},s}();return e.hasOwnProperty("exports")&&(e.exports=r),void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n),r}(),bigDec:function(e){"use strict";var t,n,r,i=9e15,a=1e9,s="0123456789abcdef",o="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",c={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-i,maxE:i,crypto:!1},l=!0,h="[DecimalError] ",p=h+"Invalid argument: ",f=h+"Precision limit exceeded",m=h+"crypto unavailable",d=Math.floor,g=Math.pow,v=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,x=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,b=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,w=1e7,S=o.length-1,T=u.length-1,_={name:"[object Decimal]"};function A(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=F(n)),a+=r;(n=7-(r=(s=e[t])+"").length)&&(a+=F(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return a+s}function E(e,t,n){if(e!==~~e||e<t||e>n)throw Error(p+e)}function k(e,t,n,r){var i,a,s,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=g(10,7-t),o=e[i]%a|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),s=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):s=(n<4&&o+1==a||n>3&&o+1==a/2)&&(e[i+1]/a/100|0)==g(10,t-2)-1||(o==a/2||0==o)&&0==(e[i+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),s=(r||n<4)&&9999==o||!r&&n>3&&4999==o):s=((r||n<4)&&o+1==a||!r&&n>3&&o+1==a/2)&&(e[i+1]/a/1e3|0)==g(10,t-3)-1,s}function M(e,t,n){for(var r,i,a=[0],o=0,u=e.length;o<u;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=s.indexOf(e.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}_.absoluteValue=_.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),I(e)},_.ceil=function(){return I(new this.constructor(this),this.e+1,2)},_.comparedTo=_.cmp=function(e){var t,n,r,i,a=this,s=a.d,o=(e=new a.constructor(e)).d,u=a.s,c=e.s;if(!s||!o)return u&&c?u!==c?u:s===o?0:!s^u<0?1:-1:NaN;if(!s[0]||!o[0])return s[0]?u:o[0]?-c:0;if(u!==c)return u;if(a.e!==e.e)return a.e>e.e^u<0?1:-1;for(t=0,n=(r=s.length)<(i=o.length)?r:i;t<n;++t)if(s[t]!==o[t])return s[t]>o[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},_.cosine=_.cos=function(){var e,t,n=this,i=n.constructor;return n.d?n.d[0]?(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?(n=Math.ceil(i/3),r=Math.pow(4,-n).toString()):(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=j(e,1,t.times(r),new e(1));for(var a=n;a--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(i,H(i,n)),i.precision=e,i.rounding=t,I(2==r||3==r?n.neg():n,e,t,!0)):new i(1):new i(NaN)},_.cubeRoot=_.cbrt=function(){var e,t,n,r,i,a,s,o,u,c,h=this,p=h.constructor;if(!h.isFinite()||h.isZero())return new p(h);for(l=!1,(a=h.s*Math.pow(h.s*h,1/3))&&Math.abs(a)!=1/0?r=new p(a.toString()):(n=A(h.d),(a=((e=h.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=Math.pow(n,1/3),e=d((e+1)/3)-(e%3==(e<0?-1:2)),(r=new p(n=a==1/0?"5e"+e:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=h.s),s=(e=p.precision)+3;;)if(c=(u=(o=r).times(o).times(o)).plus(h),r=N(c.plus(h).times(o),c.plus(u),s+2,1),A(o.d).slice(0,s)===(n=A(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(I(r,e+1,1),t=!r.times(r).times(r).eq(h));break}if(!i&&(I(o,e+1,0),o.times(o).times(o).eq(h))){r=o;break}s+=4,i=1}return l=!0,I(r,e,p.rounding,t)},_.decimalPlaces=_.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-d(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},_.dividedBy=_.div=function(e){return N(this,new this.constructor(e))},_.dividedToIntegerBy=_.divToInt=function(e){var t=this.constructor;return I(N(this,new t(e),0,1,1),t.precision,t.rounding)},_.equals=_.eq=function(e){return 0===this.cmp(e)},_.floor=function(){return I(new this.constructor(this),this.e+1,3)},_.greaterThan=_.gt=function(e){return this.cmp(e)>0},_.greaterThanOrEqualTo=_.gte=function(e){var t=this.cmp(e);return 1==t||0===t},_.hyperbolicCosine=_.cosh=function(){var e,t,n,r,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(a.e,a.sd())+4,s.rounding=1,(i=a.d.length)<32?(e=Math.ceil(i/3),t=Math.pow(4,-e).toString()):(e=16,t="2.3283064365386962890625e-10"),a=j(s,1,a.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;)u=a.times(a),a=o.minus(u.times(l.minus(u.times(l))));return I(a,s.precision=n,s.rounding=r,!0)},_.hyperbolicSine=_.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=j(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=j(a,2,i=i.times(Math.pow(5,-e)),i,!0);for(var s,o=new a(5),u=new a(16),c=new a(20);e--;)s=i.times(i),i=i.times(o.plus(s.times(u.times(s).plus(c))))}return a.precision=t,a.rounding=n,I(i,t,n,!0)},_.hyperbolicTangent=_.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,N(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},_.inverseCosine=_.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?R(n,i,a):new n(0):new n(NaN):t.isZero()?R(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=R(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},_.inverseHyperbolicCosine=_.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,l=!1,n=n.times(n).minus(1).sqrt().plus(n),l=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},_.inverseHyperbolicSine=_.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,l=!1,n=n.times(n).plus(1).sqrt().plus(n),l=!0,r.precision=e,r.rounding=t,n.ln())},_.inverseHyperbolicTangent=_.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?I(new a(i),e,t,!0):(a.precision=n=r-i.e,i=N(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},_.inverseSine=_.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=R(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},_.inverseTangent=_.atan=function(){var e,t,n,r,i,a,s,o,u,c=this,h=c.constructor,p=h.precision,f=h.rounding;if(c.isFinite()){if(c.isZero())return new h(c);if(c.abs().eq(1)&&p+4<=T)return(s=R(h,p+4,f).times(.25)).s=c.s,s}else{if(!c.s)return new h(NaN);if(p+4<=T)return(s=R(h,p+4,f).times(.5)).s=c.s,s}for(h.precision=o=p+10,h.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(l=!1,t=Math.ceil(o/7),r=1,u=c.times(c),s=new h(c),i=c;-1!==e;)if(i=i.times(u),a=s.minus(i.div(r+=2)),i=i.times(u),void 0!==(s=a.plus(i.div(r+=2))).d[t])for(e=t;s.d[e]===a.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),l=!0,I(s,h.precision=p,h.rounding=f,!0)},_.isFinite=function(){return!!this.d},_.isInteger=_.isInt=function(){return!!this.d&&d(this.e/7)>this.d.length-2},_.isNaN=function(){return!this.s},_.isNegative=_.isNeg=function(){return this.s<0},_.isPositive=_.isPos=function(){return this.s>0},_.isZero=function(){return!!this.d&&0===this.d[0]},_.lessThan=_.lt=function(e){return this.cmp(e)<0},_.lessThanOrEqualTo=_.lte=function(e){return this.cmp(e)<1},_.logarithm=_.log=function(e){var t,n,r,i,a,s,o,u,c=this.constructor,h=c.precision,p=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10==0;)i/=10;a=1!==i}if(l=!1,s=q(this,o=h+5),r=t?L(c,o+10):q(e,o),k((u=N(s,r,o,1)).d,i=h,p))do{if(s=q(this,o+=10),r=t?L(c,o+10):q(e,o),u=N(s,r,o,1),!a){+A(u.d).slice(i+1,i+15)+1==1e14&&(u=I(u,h+1,0));break}}while(k(u.d,i+=10,p));return l=!0,I(u,h,p)},_.minus=_.sub=function(e){var t,n,r,i,a,s,o,u,c,h,p,f,m=this,g=m.constructor;if(e=new g(e),!m.d||!e.d)return m.s&&e.s?m.d?e.s=-e.s:e=new g(e.d||m.s!==e.s?m:NaN):e=new g(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(c=m.d,f=e.d,o=g.precision,u=g.rounding,!c[0]||!f[0]){if(f[0])e.s=-e.s;else{if(!c[0])return new g(3===u?-0:0);e=new g(m)}return l?I(e,o,u):e}if(n=d(e.e/7),h=d(m.e/7),c=c.slice(),a=h-n){for((p=a<0)?(t=c,a=-a,s=f.length):(t=f,n=h,s=c.length),a>(r=Math.max(Math.ceil(o/7),s)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((p=(r=c.length)<(s=f.length))&&(s=r),r=0;r<s;r++)if(c[r]!=f[r]){p=c[r]<f[r];break}a=0}for(p&&(t=c,c=f,f=t,e.s=-e.s),s=c.length,r=f.length-s;r>0;--r)c[s++]=0;for(r=f.length;r>a;){if(c[--r]<f[r]){for(i=r;i&&0===c[--i];)c[i]=w-1;--c[i],c[r]+=w}c[r]-=f[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=D(c,n),l?I(e,o,u):e):new g(3===u?-0:0)},_.modulo=_.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?I(new r(n),r.precision,r.rounding):(l=!1,9==r.modulo?(t=N(n,e.abs(),0,3,1)).s*=e.s:t=N(n,e,0,r.modulo,1),t=t.times(e),l=!0,n.minus(t))},_.naturalExponential=_.exp=function(){return V(this)},_.naturalLogarithm=_.ln=function(){return q(this)},_.negated=_.neg=function(){var e=new this.constructor(this);return e.s=-e.s,I(e)},_.plus=_.add=function(e){var t,n,r,i,a,s,o,u,c,h,p=this,f=p.constructor;if(e=new f(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new f(e.d||p.s===e.s?p:NaN)):e=new f(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(c=p.d,h=e.d,o=f.precision,u=f.rounding,!c[0]||!h[0])return h[0]||(e=new f(p)),l?I(e,o,u):e;if(a=d(p.e/7),r=d(e.e/7),c=c.slice(),i=a-r){for(i<0?(n=c,i=-i,s=h.length):(n=h,r=a,s=c.length),i>(s=(a=Math.ceil(o/7))>s?a+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=h.length)<0&&(i=s,n=h,h=c,c=n),t=0;i;)t=(c[--i]=c[i]+h[i]+t)/w|0,c[i]%=w;for(t&&(c.unshift(t),++r),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=D(c,r),l?I(e,o,u):e},_.precision=_.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(p+e);return n.d?(t=O(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},_.round=function(){var e=this,t=e.constructor;return I(new t(e),e.e+1,t.rounding)},_.sine=_.sin=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return j(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=j(e,2,t=t.times(Math.pow(5,-n)),t);for(var i,a=new e(5),s=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(s.times(i).minus(o))));return t}(i,H(i,n)),i.precision=e,i.rounding=t,I(r>2?n.neg():n,e,t,!0)):new i(NaN)},_.squareRoot=_.sqrt=function(){var e,t,n,r,i,a,s=this,o=s.d,u=s.e,c=s.s,h=s.constructor;if(1!==c||!o||!o[0])return new h(!c||c<0&&(!o||o[0])?NaN:o?s:1/0);for(l=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=A(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=d((u+1)/2)-(u<0||u%2),r=new h(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new h(c.toString()),n=(u=h.precision)+3;;)if(r=(a=r).plus(N(s,a,n+2,1)).times(.5),A(a.d).slice(0,n)===(t=A(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(I(r,u+1,1),e=!r.times(r).eq(s));break}if(!i&&(I(a,u+1,0),a.times(a).eq(s))){r=a;break}n+=4,i=1}return l=!0,I(r,u,h.rounding,e)},_.tangent=_.tan=function(){var e,t,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(e=i.precision,t=i.rounding,i.precision=e+10,i.rounding=1,(n=n.sin()).s=1,n=N(n,new i(1).minus(n.times(n)).sqrt(),e+10,0),i.precision=e,i.rounding=t,I(2==r||4==r?n.neg():n,e,t,!0)):new i(NaN)},_.times=_.mul=function(e){var t,n,r,i,a,s,o,u,c,h=this,p=h.constructor,f=h.d,m=(e=new p(e)).d;if(e.s*=h.s,!(f&&f[0]&&m&&m[0]))return new p(!e.s||f&&!f[0]&&!m||m&&!m[0]&&!f?NaN:f&&m?0*e.s:e.s/0);for(n=d(h.e/7)+d(e.e/7),(u=f.length)<(c=m.length)&&(a=f,f=m,m=a,s=u,u=c,c=s),a=[],r=s=u+c;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)o=a[i]+m[r]*f[i-r-1]+t,a[i--]=o%w|0,t=o/w|0;a[i]=(a[i]+t)%w|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=D(a,n),l?I(e,p.precision,p.rounding):e},_.toBinary=function(e,t){return W(this,2,e,t)},_.toDecimalPlaces=_.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(E(e,0,a),void 0===t?t=r.rounding:E(t,0,8),I(n,e+n.e+1,t))},_.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=C(r,!0):(E(e,0,a),void 0===t?t=i.rounding:E(t,0,8),n=C(r=I(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},_.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=C(i):(E(e,0,a),void 0===t?t=s.rounding:E(t,0,8),n=C(r=I(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},_.toFraction=function(e){var t,n,r,i,a,s,o,u,c,h,f,m,d=this,v=d.d,y=d.constructor;if(!v)return new y(d);if(c=n=new y(1),r=u=new y(0),s=(a=(t=new y(r)).e=O(v)-d.e-1)%7,t.d[0]=g(10,s<0?7+s:s),null==e)e=a>0?t:c;else{if(!(o=new y(e)).isInt()||o.lt(c))throw Error(p+o);e=o.gt(t)?a>0?t:c:o}for(l=!1,o=new y(A(v)),h=y.precision,y.precision=a=7*v.length*2;f=N(o,t,0,1,1),1!=(i=n.plus(f.times(r))).cmp(e);)n=r,r=i,i=c,c=u.plus(f.times(i)),u=i,i=t,t=o.minus(f.times(i)),o=i;return i=N(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=d.s,m=N(c,r,a,1).minus(d).abs().cmp(N(u,n,a,1).minus(d).abs())<1?[c,r]:[u,n],y.precision=h,l=!0,m},_.toHexadecimal=_.toHex=function(e,t){return W(this,16,e,t)},_.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:E(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(l=!1,n=N(n,e,0,t,1).times(e),l=!0,I(n)):(e.s=n.s,n=e),n},_.toNumber=function(){return+this},_.toOctal=function(e,t){return W(this,8,e,t)},_.toPower=_.pow=function(e){var t,n,r,i,a,s,o=this,u=o.constructor,c=+(e=new u(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new u(g(+o,c));if((o=new u(o)).eq(1))return o;if(r=u.precision,a=u.rounding,e.eq(1))return I(o,r,a);if((t=d(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=P(u,o,n,r),e.s<0?new u(1).div(i):I(i,r,a);if((s=o.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(s=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=s,o}return(t=0!=(n=g(+o,c))&&isFinite(n)?new u(n+"").e:d(c*(Math.log("0."+A(o.d))/Math.LN10+o.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(l=!1,u.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=V(e.times(q(o,r+n)),r)).d&&k((i=I(i,r+5,1)).d,r,a)&&(t=r+10,+A((i=I(V(e.times(q(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=I(i,r+1,0))),i.s=s,l=!0,u.rounding=a,I(i,r,a))},_.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=C(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(E(e,1,a),void 0===t?t=i.rounding:E(t,0,8),n=C(r=I(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},_.toSignificantDigits=_.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(E(e,1,a),void 0===t?t=n.rounding:E(t,0,8)),I(new n(this),e,t)},_.toString=function(){var e=this,t=e.constructor,n=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},_.truncated=_.trunc=function(){return I(new this.constructor(this),this.e+1,1)},_.valueOf=_.toJSON=function(){var e=this,t=e.constructor,n=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var N=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+i,e[a]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function r(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(i,a,s,o,u,c){var l,h,p,f,m,g,v,y,x,b,S,T,_,A,E,k,M,N,C,D,L=i.constructor,R=i.s==a.s?1:-1,O=i.d,F=a.d;if(!(O&&O[0]&&F&&F[0]))return new L(i.s&&a.s&&(O?!F||O[0]!=F[0]:F)?O&&0==O[0]||!F?0*R:R/0:NaN);for(c?(m=1,h=i.e-a.e):(c=w,m=7,h=d(i.e/m)-d(a.e/m)),C=F.length,M=O.length,b=(x=new L(R)).d=[],p=0;F[p]==(O[p]||0);p++);if(F[p]>(O[p]||0)&&h--,null==s?(A=s=L.precision,o=L.rounding):A=u?s+(i.e-a.e)+1:s,A<0)b.push(1),g=!0;else{if(A=A/m+2|0,p=0,1==C){for(f=0,F=F[0],A++;(p<M||f)&&A--;p++)E=f*c+(O[p]||0),b[p]=E/F|0,f=E%F|0;g=f||p<M}else{for((f=c/(F[0]+1)|0)>1&&(F=e(F,f,c),O=e(O,f,c),C=F.length,M=O.length),k=C,T=(S=O.slice(0,C)).length;T<C;)S[T++]=0;(D=F.slice()).unshift(0),N=F[0],F[1]>=c/2&&++N;do{f=0,(l=t(F,S,C,T))<0?(_=S[0],C!=T&&(_=_*c+(S[1]||0)),(f=_/N|0)>1?(f>=c&&(f=c-1),1==(l=t(v=e(F,f,c),S,y=v.length,T=S.length))&&(f--,r(v,C<y?D:F,y,c))):(0==f&&(l=f=1),v=F.slice()),(y=v.length)<T&&v.unshift(0),r(S,v,T,c),-1==l&&(l=t(F,S,C,T=S.length))<1&&(f++,r(S,C<T?D:F,T,c)),T=S.length):0===l&&(f++,S=[0]),b[p++]=f,l&&S[0]?S[T++]=O[k]||0:(S=[O[k]],T=1)}while((k++<M||void 0!==S[0])&&A--);g=void 0!==S[0]}b[0]||b.shift()}if(1==m)x.e=h,n=g;else{for(p=1,f=b[0];f>=10;f/=10)p++;x.e=p+h*m-1,I(x,u?s+x.e+1:s,o,g)}return x}}();function I(e,t,n,r){var i,a,s,o,u,c,h,p,f,m=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(i=1,o=p[0];o>=10;o/=10)i++;if((a=t-i)<0)a+=7,s=t,u=(h=p[f=0])/g(10,i-s-1)%10|0;else if((f=Math.ceil((a+1)/7))>=(o=p.length)){if(!r)break e;for(;o++<=f;)p.push(0);h=u=0,i=1,s=(a%=7)-7+1}else{for(h=o=p[f],i=1;o>=10;o/=10)i++;u=(s=(a%=7)-7+i)<0?0:h/g(10,i-s-1)%10|0}if(r=r||t<0||void 0!==p[f+1]||(s<0?h:h%g(10,i-s-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(a>0?s>0?h/g(10,i-s):0:p[f-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,c?(t-=e.e+1,p[0]=g(10,(7-t%7)%7),e.e=-t||0):p[0]=e.e=0,e;if(0==a?(p.length=f,o=1,f--):(p.length=f+1,o=g(10,7-a),p[f]=s>0?(h/g(10,i-s)%g(10,s)|0)*o:0),c)for(;;){if(0==f){for(a=1,s=p[0];s>=10;s/=10)a++;for(s=p[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(e.e++,p[0]==w&&(p[0]=1));break}if(p[f]+=o,p[f]!=w)break;p[f--]=0,o=1}for(a=p.length;0===p[--a];)p.pop()}return l&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function C(e,t,n){if(!e.isFinite())return G(e);var r,i=e.e,a=A(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+F(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+F(-i-1)+a,n&&(r=n-s)>0&&(a+=F(r))):i>=s?(a+=F(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+F(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=F(r))),a}function D(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function L(e,t,n){if(t>S)throw l=!0,n&&(e.precision=n),Error(f);return I(new e(o),t,1,!0)}function R(e,t,n){if(t>T)throw Error(f);return I(new e(u),t,n,!0)}function O(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function F(e){for(var t="";e--;)t+="0";return t}function P(e,t,n,r){var i,a=new e(1),s=Math.ceil(r/7+4);for(l=!1;;){if(n%2&&X((a=a.times(t)).d,s)&&(i=!0),0===(n=d(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}X((t=t.times(t)).d,s)}return l=!0,a}function U(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function V(e,t){var n,r,i,a,s,o,u,c=0,h=0,p=0,f=e.constructor,m=f.rounding,d=f.precision;if(!e.d||!e.d[0]||e.e>17)return new f(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(l=!1,u=d):u=t,o=new f(.03125);e.e>-2;)e=e.times(o),p+=5;for(u+=r=Math.log(g(2,p))/Math.LN10*2+5|0,n=a=s=new f(1),f.precision=u;;){if(a=I(a.times(e),u,1),n=n.times(++h),A((o=s.plus(N(a,n,u,1))).d).slice(0,u)===A(s.d).slice(0,u)){for(i=p;i--;)s=I(s.times(s),u,1);if(null!=t)return f.precision=d,s;if(!(c<3&&k(s.d,u-r,m,c)))return I(s,f.precision=d,m,l=!0);f.precision=u+=10,n=a=o=new f(1),h=0,c++}s=o}}function q(e,t){var n,r,i,a,s,o,u,c,h,p,f,m=1,d=e,g=d.d,v=d.constructor,y=v.rounding,x=v.precision;if(d.s<0||!g||!g[0]||!d.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=d.s?NaN:g?0:d);if(null==t?(l=!1,h=x):h=t,v.precision=h+=10,r=(n=A(g)).charAt(0),!(Math.abs(a=d.e)<15e14))return c=L(v,h+2,x).times(a+""),d=q(new v(r+"."+n.slice(1)),h-10).plus(c),v.precision=x,null==t?I(d,x,y,l=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=A((d=d.times(e)).d)).charAt(0),m++;for(a=d.e,r>1?(d=new v("0."+n),a++):d=new v(r+"."+n.slice(1)),p=d,u=s=d=N(d.minus(1),d.plus(1),h,1),f=I(d.times(d),h,1),i=3;;){if(s=I(s.times(f),h,1),A((c=u.plus(N(s,new v(i),h,1))).d).slice(0,h)===A(u.d).slice(0,h)){if(u=u.times(2),0!==a&&(u=u.plus(L(v,h+2,x).times(a+""))),u=N(u,new v(m),h,1),null!=t)return v.precision=x,u;if(!k(u.d,h-10,y,o))return I(u,v.precision=x,y,l=!0);v.precision=h+=10,c=s=d=N(p.minus(1),p.plus(1),h,1),f=I(d.times(d),h,1),i=o=1}u=c,i+=2}}function G(e){return String(e.s*e.s/0)}function B(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),l&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function K(e,n){var r,i,a,s,o,u,c,h,f;if("Infinity"===n||"NaN"===n)return+n||(e.s=NaN),e.e=NaN,e.d=null,e;if(y.test(n))r=16,n=n.toLowerCase();else if(v.test(n))r=2;else{if(!x.test(n))throw Error(p+n);r=8}for((s=n.search(/p/i))>0?(c=+n.slice(s+1),n=n.substring(2,s)):n=n.slice(2),o=(s=n.indexOf("."))>=0,i=e.constructor,o&&(s=(u=(n=n.replace(".","")).length)-s,a=P(i,new i(r),s,2*s)),s=f=(h=M(n,r,w)).length-1;0===h[s];--s)h.pop();return s<0?new i(0*e.s):(e.e=D(h,f),e.d=h,l=!1,o&&(e=N(e,a,4*u)),c&&(e=e.times(Math.abs(c)<54?Math.pow(2,c):t.pow(2,c))),l=!0,e)}function j(e,t,n,r,i){var a,s,o,u,c=e.precision,h=Math.ceil(c/7);for(l=!1,u=n.times(n),o=new e(r);;){if(s=N(o.times(u),new e(t++*t++),c,1),o=i?r.plus(s):r.minus(s),r=N(s.times(u),new e(t++*t++),c,1),void 0!==(s=o.plus(r)).d[h]){for(a=h;s.d[a]===o.d[a]&&a--;);if(-1==a)break}a=o,o=r,r=s,s=a}return l=!0,s.d.length=h+1,s}function H(e,t){var n,i=t.s<0,a=R(e,e.precision,1),s=a.times(.5);if((t=t.abs()).lte(s))return r=i?4:1,t;if((n=t.divToInt(a)).isZero())r=i?3:2;else{if((t=t.minus(n.times(a))).lte(s))return r=U(n)?i?2:3:i?4:1,t;r=U(n)?i?1:4:i?3:2}return t.minus(a).abs()}function W(e,t,r,i){var o,u,c,l,h,p,f,m,d,g=e.constructor,v=void 0!==r;if(v?(E(r,1,a),void 0===i?i=g.rounding:E(i,0,8)):(r=g.precision,i=g.rounding),e.isFinite()){for(v?(o=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):o=t,(c=(f=C(e)).indexOf("."))>=0&&(f=f.replace(".",""),(d=new g(1)).e=f.length-c,d.d=M(C(d),10,o),d.e=d.d.length),u=h=(m=M(f,10,o)).length;0==m[--h];)m.pop();if(m[0]){if(c<0?u--:((e=new g(e)).d=m,e.e=u,m=(e=N(e,d,r,i,0,o)).d,u=e.e,p=n),c=m[r],l=o/2,p=p||void 0!==m[r+1],p=i<4?(void 0!==c||p)&&(0===i||i===(e.s<0?3:2)):c>l||c===l&&(4===i||p||6===i&&1&m[r-1]||i===(e.s<0?8:7)),m.length=r,p)for(;++m[--r]>o-1;)m[r]=0,r||(++u,m.unshift(1));for(h=m.length;!m[h-1];--h);for(c=0,f="";c<h;c++)f+=s.charAt(m[c]);if(v){if(h>1)if(16==t||8==t){for(c=16==t?4:3,--h;h%c;h++)f+="0";for(h=(m=M(f,o,t)).length;!m[h-1];--h);for(c=1,f="1.";c<h;c++)f+=s.charAt(m[c])}else f=f.charAt(0)+"."+f.slice(1);f=f+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)f="0"+f;f="0."+f}else if(++u>h)for(u-=h;u--;)f+="0";else u<h&&(f=f.slice(0,u)+"."+f.slice(u))}else f=v?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=G(e);return e.s<0?"-"+f:f}function X(e,t){if(e.length>t)return e.length=t,!0}function Z(e){return new this(e).abs()}function Y(e){return new this(e).acos()}function J(e){return new this(e).acosh()}function Q(e,t){return new this(e).plus(t)}function $(e){return new this(e).asin()}function ee(e){return new this(e).asinh()}function te(e){return new this(e).atan()}function ne(e){return new this(e).atanh()}function re(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?R(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=R(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(N(e,t,a,1)),t=R(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(N(e,t,a,1)):(n=R(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ie(e){return new this(e).cbrt()}function ae(e){return I(e=new this(e),e.e+1,2)}function se(e){if(!e||"object"!=typeof e)throw Error(h+"Object expected");var t,n,r,s=!0===e.defaults,o=["precision",1,a,"rounding",0,8,"toExpNeg",-i,0,"toExpPos",0,i,"maxE",0,i,"minE",-i,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],s&&(this[n]=c[n]),void 0!==(r=e[n])){if(!(d(r)===r&&r>=o[t+1]&&r<=o[t+2]))throw Error(p+n+": "+r);this[n]=r}if(n="crypto",s&&(this[n]=c[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(p+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(m);this[n]=!0}else this[n]=!1}return this}function oe(e){return new this(e).cos()}function ue(e){return new this(e).cosh()}function ce(e,t){return new this(e).div(t)}function le(e){return new this(e).exp()}function he(e){return I(e=new this(e),e.e+1,3)}function pe(){var e,t,n=new this(0);for(l=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return l=!0,new this(1/0);n=t}return l=!0,n.sqrt()}function fe(e){return e instanceof t||e&&"[object Decimal]"===e.name||!1}function me(e){return new this(e).ln()}function de(e,t){return new this(e).log(t)}function ge(e){return new this(e).log(2)}function ve(e){return new this(e).log(10)}function ye(){return z(this,arguments,"lt")}function xe(){return z(this,arguments,"gt")}function be(e,t){return new this(e).mod(t)}function we(e,t){return new this(e).mul(t)}function Se(e,t){return new this(e).pow(t)}function Te(e){var t,n,r,i,s=0,o=new this(1),u=[];if(void 0===e?e=this.precision:E(e,1,a),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(m);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(u.push(i%1e7),s+=4);s=r/4}else for(;s<r;)u[s++]=1e7*Math.random()|0;for(e%=7,(r=u[--s])&&e&&(i=g(10,7-e),u[s]=(r/i|0)*i);0===u[s];s--)u.pop();if(s<0)n=0,u=[0];else{for(n=-1;0===u[0];n-=7)u.shift();for(r=1,i=u[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=u,o}function _e(e){return I(e=new this(e),e.e+1,this.rounding)}function Ae(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ee(e){return new this(e).sin()}function ke(e){return new this(e).sinh()}function Me(e){return new this(e).sqrt()}function Ne(e,t){return new this(e).sub(t)}function Ie(e){return new this(e).tan()}function Ce(e){return new this(e).tanh()}function De(e){return I(e=new this(e),e.e+1,1)}return(t=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,e instanceof a)return i.s=e.s,void(l?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(l?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):B(i,e.toString())}if("string"!==r)throw Error(p+e);return 45===e.charCodeAt(0)?(e=e.slice(1),i.s=-1):i.s=1,b.test(e)?B(i,e):K(i,e)}if(a.prototype=_,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=se,a.clone=e,a.isDecimal=fe,a.abs=Z,a.acos=Y,a.acosh=J,a.add=Q,a.asin=$,a.asinh=ee,a.atan=te,a.atanh=ne,a.atan2=re,a.cbrt=ie,a.ceil=ae,a.cos=oe,a.cosh=ue,a.div=ce,a.exp=le,a.floor=he,a.hypot=pe,a.ln=me,a.log=de,a.log10=ve,a.log2=ge,a.max=ye,a.min=xe,a.mod=be,a.mul=we,a.pow=Se,a.random=Te,a.round=_e,a.sign=Ae,a.sin=Ee,a.sinh=ke,a.sqrt=Me,a.sub=Ne,a.tan=Ie,a.tanh=Ce,a.trunc=De,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(c)).default=t.Decimal=t,o=new t(o),u=new t(u),t}()});e.exports=r}).call(this,n(14)(e))},function(e,t,n){var r;!function(n){"use strict";var i={s:1,n:0,d:1};function a(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function n(){}return n.prototype=Error.prototype,t.prototype=new n,t}var s=p.DivisionByZero=a("DivisionByZero"),o=p.InvalidParameter=a("InvalidParameter");function u(e,t){return isNaN(e=parseInt(e,10))&&c(),e*t}function c(){throw new o}var l=function(e,t){var n,r=0,a=1,o=1,l=0,h=0,p=0,f=1,m=1,d=0,g=1,v=1,y=1,x=1e7;if(void 0===e||null===e);else if(void 0!==t)o=(r=e)*(a=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(r=e.n,a=e.d,"s"in e&&(r*=e.s)):0 in e?(r=e[0],1 in e&&(a=e[1])):c(),o=r*a;break;case"number":if(e<0&&(o=e,e=-e),e%1===0)r=e;else if(e>0){for(e>=1&&(e/=m=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=x&&y<=x;){if(e===(n=(d+v)/(g+y))){g+y<=x?(r=d+v,a=g+y):y>g?(r=v,a=y):(r=d,a=g);break}e>n?(d+=v,g+=y):(v+=d,y+=g),g>x?(r=v,a=y):(r=d,a=g)}r*=m}else(isNaN(e)||isNaN(t))&&(a=r=NaN);break;case"string":if(null===(g=e.match(/\d+|./g))&&c(),"-"===g[d]?(o=-1,d++):"+"===g[d]&&d++,g.length===d+1?h=u(g[d++],o):"."===g[d+1]||"."===g[d]?("."!==g[d]&&(l=u(g[d++],o)),(++d+1===g.length||"("===g[d+1]&&")"===g[d+3]||"'"===g[d+1]&&"'"===g[d+3])&&(h=u(g[d],o),f=Math.pow(10,g[d].length),d++),("("===g[d]&&")"===g[d+2]||"'"===g[d]&&"'"===g[d+2])&&(p=u(g[d+1],o),m=Math.pow(10,g[d+1].length)-1,d+=3)):"/"===g[d+1]||":"===g[d+1]?(h=u(g[d],o),f=u(g[d+2],1),d+=3):"/"===g[d+3]&&" "===g[d+1]&&(l=u(g[d],o),h=u(g[d+2],o),f=u(g[d+4],1),d+=5),g.length<=d){o=r=p+(a=f*m)*l+m*h;break}default:c()}if(0===a)throw new s;i.s=o<0?-1:1,i.n=Math.abs(r),i.d=Math.abs(a)};function h(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function p(e,t){if(!(this instanceof p))return new p(e,t);l(e,t),e=p.REDUCE?h(i.d,i.n):1,this.s=i.s,this.n=i.n/e,this.d=i.d/e}p.REDUCE=1,p.prototype={s:1,n:0,d:1,abs:function(){return new p(this.n,this.d)},neg:function(){return new p(-this.s*this.n,this.d)},add:function(e,t){return l(e,t),new p(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return l(e,t),new p(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return l(e,t),new p(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return l(e,t),new p(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new p(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new p(NaN):void 0===e?new p(this.s*this.n%this.d,1):(l(e,t),0===i.n&&0===this.d&&p(0,0),new p(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d))},gcd:function(e,t){return l(e,t),new p(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(e,t){return l(e,t),0===i.n&&0===this.n?new p:new p(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new p(NaN):new p(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new p(this.s*this.d,this.n)},pow:function(e){return e<0?new p(Math.pow(this.s*this.d,-e),Math.pow(this.n,-e)):new p(Math.pow(this.s*this.n,e),Math.pow(this.d,e))},equals:function(e,t){return l(e,t),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(e,t){l(e,t);var n=this.s*this.n*i.d-i.s*i.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function n(e){return 1===e.length?new p(e[0]):n(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var r=0;r<t.length;r++){var i=n(t.slice(0,r+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return l(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(this.n)||isNaN(this.d))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t,n=this.n,r=this.d;if(isNaN(n)||isNaN(r))return"NaN";p.REDUCE||(n/=t=h(n,r),r/=t),e=e||15;var i=function(e,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,r),a=function(e,t,n){for(var r=1,i=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),a=0;a<300;a++){if(r===i)return a;r=10*r%t,i=10*i%t}return 0}(0,r,i),s=-1===this.s?"-":"";if(s+=n/r|0,n%=r,(n*=10)&&(s+="."),i){for(var o=a;o--;)s+=n/r|0,n%=r,n*=10;s+="(";for(o=i;o--;)s+=n/r|0,n%=r,n*=10;s+=")"}else for(o=e;n&&o--;)s+=n/r|0,n%=r,n*=10;return s}},void 0===(r=function(){return p}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=function e(t,n){"use strict";var r,i,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,s=/(^[ ]*|[ ]*$)/g,o=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,c=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=l(t).replace(s,"")||"",p=l(n).replace(s,"")||"",f=h.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=parseInt(h.match(u),16)||1!==f.length&&h.match(o)&&Date.parse(h),g=parseInt(p.match(u),16)||d&&p.match(o)&&Date.parse(p)||null;if(g){if(d<g)return-1;if(d>g)return 1}for(var v=0,y=Math.max(f.length,m.length);v<y;v++){if(r=!(f[v]||"").match(c)&&parseFloat(f[v])||f[v]||0,i=!(m[v]||"").match(c)&&parseFloat(m[v])||m[v]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!==typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},function(e,t,n){var r=n(2);n(6),n(7),n(15),n(16),e.exports=r},function(e,t,n){var r=n(2);n(7),function(){"use strict";var e=r.getCore(),t=e.PARSER,n=e.groups.N,i=e.groups.P,a=e.groups.S,s=e.groups.EX,o=e.groups.FN,u=e.groups.PL,c=e.groups.CP,l=e.groups.CB,h=e.Utils.keys,p=e.Utils.variables,f=e.Utils.format,m=e.Utils.round,d=e.Frac,g=e.Utils.isInt,v=e.Symbol,y=e.Settings.CONST_HASH,x=e.Utils.importFunctions(),b=e.Utils.evaluate;function w(n,r,i){if(e.Utils.isSymbol(n))this.parse(n),this.variable=this.variable||r;else if(isNaN(n))"string"===typeof n&&this.parse(t.parse(n));else{if(i=i||0,void 0===r)throw new e.exceptions.InvalidVariableNameError("Polynomial expects a variable name when creating using order");this.coeffs=[],this.coeffs[i]=n,this.fill(n)}}function S(){this.factors={},this.length=0}function T(t,n,r){this.terms=n||[],this.coeff=t,this.map=r,this.sum=new e.Frac(0),this.image=void 0}w.fromArray=function(t,n){if("undefined"===typeof n)throw new e.exceptions.InvalidVariableNameError("A variable name must be specified when creating polynomial from array");var r=new w;return r.coeffs=t,r.variable=n,r},w.fit=function(e,t,n,r,i,a){var s=new Array(i+1),o=n-t;s[0]=t,s[i]=e,o-=e*Math.pow(r,i);for(var u=i-1;u>0;u--){var c=Math.pow(r,u),l=o/c,h=Math.sign(l)*Math.floor(Math.abs(l));o-=h*c,s[u]=h}if(0!==o)return null;for(u=0;u<s.length;u++)s[u]=new d(s[u]);return w.fromArray(s,a)},w.prototype={parse:function(r,i){if(this.variable=p(r)[0],!r.isPoly())throw e.exceptions.NerdamerTypeError("Polynomial Expected! Received "+e.Utils.text(r));if(i=i||[],r.power.absEquals(1)||(r=t.expand(r)),r.group===e.groups.N)i[0]=r.multiplier;else if(r.group===e.groups.S)i[r.power.toDecimal()]=r.multiplier;else for(var a in r.symbols){var s=r.symbols[a],o=s.power;if(e.Utils.isSymbol(o))throw new e.exceptions.NerdamerTypeError("power cannot be a Symbol");o=s.group===n?0:o.toDecimal(),s.symbols?this.parse(s,i):i[o]=s.multiplier}this.coeffs=i,this.fill()},fill:function(e){e=Number(e)||0;for(var t=this.coeffs.length,n=0;n<t;n++)void 0===this.coeffs[n]&&(this.coeffs[n]=new d(e));return this},trim:function(){for(var e=this.coeffs.length;e--;){var t=this.coeffs[e],n=t.equals(0);if(!t||!n)break;if(0===e)break;this.coeffs.pop()}return this},modP:function(e){for(var t=this.coeffs.length,n=0;n<t;n++){var r=this.coeffs[n];if(r<0){for(var i,a=n;a<t;a++)if(this.coeffs[a]>0){i=this.coeffs[a];break}if(i){for(;a>n;a--)this.coeffs[a]=this.coeffs[a].subtract(new d(1)),this.coeffs[a-1]=this.coeffs[a-1].add(new d(e));r=this.coeffs[n]}}var s=r.mod(e),o=r.subtract(s).divide(e);if(!o.equals(0)){var u=n+1,c=this.coeffs[u]||new d(0);c=c.add(o),this.coeffs[u]=new d(c),this.coeffs[n]=new d(s)}}return this},add:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new d(0),i=e.coeffs[n]||new d(0);this.coeffs[n]=r.add(i)}return this},subtract:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new d(0),i=e.coeffs[n]||new d(0);this.coeffs[n]=r.subtract(i)}return this},divide:function(t){for(var n=this.variable,r=e.Utils.arrayClone(this.coeffs),i=e.Utils.arrayClone(t.coeffs),a=r.length,s=i.length-1,o=[],u=0;u<a;u++){var c=a-(u+1),l=c-s,h=r[c].divide(i[s]);if(l<0)break;o[l]=h;for(var p=0;p<=s;p++)r[p+l]=r[p+l].subtract(i[p].multiply(h))}var f=w.fromArray(r,n||"x").trim();return[w.fromArray(o,n||"x"),f]},multiply:function(e){for(var t=this.coeffs.length,n=e.coeffs.length,r=[],i=0;i<t;i++)for(var a=this.coeffs[i],s=0;s<n;s++){var o=i+s,u=e.coeffs[s],c=r[o]||new d(0);r[o]=c.add(a.multiply(u))}return this.coeffs=r,this},isZero:function(){for(var e=this.coeffs.length,t=0;t<e;t++){if(!this.coeffs[t].equals(0))return!1}return!0},sub:function(e){for(var t=new d(0),n=this.coeffs.length,r=0;r<n;r++){var i=this.coeffs[r];i.equals(0)||(t=t.add(i.multiply(new d(Math.pow(e,r)))))}return t},clone:function(){var e=new w;return e.coeffs=this.coeffs,e.variable=this.variable,e},deg:function(){return this.trim(),this.coeffs.length-1},lc:function(){return this.coeffs[this.deg()].clone()},monic:function(){for(var e=this.lc(),t=this.coeffs.length,n=0;n<t;n++)this.coeffs[n]=this.coeffs[n].divide(e);return this},gcd:function(t){if(this.coeffs.length-1<t.coeffs.length-1)return t.gcd(this);for(var n=this;!t.isZero();){var r=t.clone();t=(n=n.clone()).divide(r)[1],n=r}var i=e.Math2.QGCD.apply(null,n.coeffs);if(!i.equals(1))for(var a=n.coeffs.length,s=0;s<a;s++)n.coeffs[s]=n.coeffs[s].divide(i);return n},diff:function(){for(var e=[],t=this.coeffs.length,n=1;n<t;n++)e.push(this.coeffs[n].multiply(new d(n)));return this.coeffs=e,this},integrate:function(){for(var e=[0],t=this.coeffs.length,n=0;n<t;n++){var r=new d(n+1);e[r]=this.coeffs[n].divide(r)}return this.coeffs=e,this},gcf:function(t){for(var n=[],r=0;r<this.coeffs.length;r++){var i=this.coeffs[r];i.equals(0)||-1!==n.indexOf(i)||n.push(i)}var a=[e.Math2.QGCD.apply(void 0,n),function(e){for(var t=0;t<e.length;t++)if(!e[t].equals(0))return t}(this.coeffs)].toDecimal();if(t){var s=[];s[a[1]-1]=a[0],a=w.fromArray(s,this.variable).fill()}return a},quad:function(e){var t=[];if(this.coeffs.length>3)throw new Error("Cannot calculate quadratic order of "+(this.coeffs.length-1));if(0===this.coeffs.length)throw new Error("Polynomial array has no terms");var n=this.coeffs[2]||0,r=this.coeffs[1]||0,i=r*r-4*n*this.coeffs[0];return i<0&&!e||(t[0]=(-r+Math.sqrt(i))/(2*n),t[1]=(-r-Math.sqrt(i))/(2*n)),t},squareFree:function(){for(var e=this.clone(),t=1,n=e.clone().diff(),r=e.clone().gcd(n),i=e.divide(r)[0],a=w.fromArray([new d(1)],e.variable);!r.equalsNumber(1);){var s=i.gcd(r),o=i.divide(s)[0];if(!o.equalsNumber(1)&&t>1){for(var u=o.clone(),c=1;c<t;c++)u.multiply(o.clone());o=u}a=a.multiply(o),t++,i=s,r=r.divide(s)[0]}return[a,i,t]},toSymbol:function(){var n=this.coeffs.length,r=this.variable;if(0===n)return new e.Symbol(0);for(var i=n-1,a="",s=0;s<n;s++){var o=s===i?"":"+",u=this.coeffs[s];u.equals(0)||(a+=u+"*"+r+"^"+s+o)}return t.parse(a)},equalsNumber:function(e){return this.trim(),1===this.coeffs.length&&this.coeffs[0].toDecimal()===String(e)},toString:function(){return this.toSymbol().toString()}},v.prototype.coeffs=function(e,n){n&&!this.isPoly(!0)&&t.error("Polynomial expected when requesting coefficients with order"),e=e||[];var r=this.clone().distributeMultiplier();if(r.isComposite())for(var i in r.symbols){var a=r.symbols[i];a.isComposite()?a.clone().distributeMultiplier().coeffs(e,n):n?e[a.isConstant()?0:a.power.toDecimal()]=a.multiplier:e.push(a.multiplier)}else if(n)e[r.isConstant(!0)?0:r.power.toDecimal()]=r.multiplier;else if(r.group===l&&r.isImaginary()){var s=new v(r.multiplier);r.each((function(e){(e.isConstant(!0)||e.imaginary)&&(s=t.multiply(s,e))})),e.push(s)}else e.push(r.multiplier);if(n)for(var o=0;o<e.length;o++)void 0===e[o]&&(e[o]=new v(0));return e},v.prototype.tBase=function(e){if("undefined"===typeof e)throw new Error("Symbol.tBase requires a map object!");for(var t=[],n=this.collectSymbols(null,null,null,!0),r=n.length,i=0;i<r;i++){var a=n[i],s=a.group,o=new T(a.multiplier,[],e);if(s===l)for(var u in a.symbols){var c=a.symbols[u];o.terms[e[u]]=c.power}else o.terms[e[a.value]]=a.power;t.push(o.fill()),o.updateCount()}return t},v.prototype.altVar=function(e){var t=this.multiplier.toString(),n=this.power.toString();return("1"===t?"":t+"*")+e+("1"===n?"":"^"+n)},v.prototype.sameVars=function(e){if(!this.symbols&&this.group!==e.group)return!1;for(var t in this.symbols){var n=this.symbols[t],r=e.symbols[t];if(!r)return!1;if(n.value!==r.value)return!1}return!0},v.prototype.groupTerms=function(n){var r,i,a;n=String(n);var s=[];return this.each((function(o){if(o.group===u){a=o.groupTerms(n);for(var c=0;c<a.length;c++){var l=a[c];l&&(s[c]=l)}}else r=e.Utils.decompose_fn(o,n,!0),i=r.x.value===n?Number(r.x.power):0,s[i]=t.add(s[i]||new v(0),r.a)})),s},v.prototype.collectFactors=function(){var e=[];return this.group===l?this.each((function(t){e.push(t.clone())})):e.push(this.clone()),e},S.prototype.getNumberSymbolics=function(){var e=0;return this.each((function(t){t.isConstant(!0)||e++})),e},S.prototype.add=function(n){if(n.equals(0))return this;if(n.equals(-1)&&this.length>0){var r=e.Utils.firstObject(this.factors,null,!0);return this.add(t.symfunction(e.Settings.PARENTHESIS,[r.obj]).negate()),delete this.factors[r.key],this.length--,this}if(n.group===l){var i=this;n.multiplier.equals(1)||i.add(new v(n.multiplier)),n.each((function(e){i.add(e)}))}else{this.preAdd&&(n=this.preAdd(n)),this.pFactor&&(n=t.pow(n,new v(this.pFactor)));var a=n.isConstant();if(a&&n.equals(1))return this;var s=a?n.value:n.text();s in this.factors?(this.factors[s]=t.multiply(this.factors[s],n),this.factors[s].equals(1)&&(delete this.factors[s],this.length--)):(this.factors[s]=n,this.length++)}return this},S.prototype.toSymbol=function(){for(var n=new v(1),r=Object.values(this.factors).sort((function(e,t){return e.group>t.group})),i=0,a=r.length;i<a;i++){var s=r[i],o=s.power.equals(1)&&""!==s.fname?t.symfunction(e.PARENTHESIS,[s]):s;n=t.multiply(n,o)}return""===n.fname&&(n=v.unwrapPARENS(n)),n},S.prototype.merge=function(e){for(var n in e)n in this.factors?this.factors[n]=t.multiply(this.factors[n],e[n]):this.factors[n]=e[n];return this},S.prototype.each=function(t){for(var n in this.factors){var r=this.factors[n];r.fname===e.PARENTHESIS&&r.isLinear()&&(r=r.args[0]),t.call(this,r,n)}return this},S.prototype.count=function(){return h(this.factors).length},S.prototype.clean=function(){try{var t=e.Settings.CONST_HASH;this.factors[t].lessThan(0)&&(this.factors[t].equals(-1)?delete this.factors[t]:this.factors[t].negate(),this.each((function(e){e.negate()})))}catch(n){}},S.prototype.toString=function(){return this.toSymbol().toString()},T.prototype.updateCount=function(){this.count=this.count||0;for(var e=0;e<this.terms.length;e++)this.terms[e].equals(0)||this.count++;return this},T.prototype.getVars=function(){for(var e=[],t=0;t<this.terms.length;t++){var n=this.terms[t];this.getRevMap();n.equals(0)||e.push(this.rev_map[t])}return e.join(" ")},T.prototype.len=function(){return"undefined"===typeof this.count&&this.updateCount(),this.count},T.prototype.toSymbol=function(e){e=e||this.getRevMap();for(var n=new v(this.coeff),r=0;r<this.terms.length;r++){var i=e[r],a=this.terms[r];if(!a.equals(0)&&i!==y){var s=new v(i);s.power=a,n=t.multiply(n,s)}}return n},T.prototype.getRevMap=function(){if(this.rev_map)return this.rev_map;var e={};for(var t in this.map)e[this.map[t]]=t;return this.rev_map=e,e},T.prototype.generateImage=function(){return this.image=this.terms.join(" "),this},T.prototype.getImg=function(){return this.image||this.generateImage(),this.image},T.prototype.fill=function(){for(var t=this.map.length,n=0;n<t;n++)"undefined"===typeof this.terms[n]?this.terms[n]=new e.Frac(0):this.sum=this.sum.add(this.terms[n]);return this},T.prototype.divide=function(e){for(var t=this.coeff.divide(e.coeff),n=this.terms.length,r=new T(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].subtract(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},T.prototype.multiply=function(e){for(var t=this.coeff.multiply(e.coeff),n=this.terms.length,r=new T(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].add(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},T.prototype.isZero=function(){return this.coeff.equals(0)},T.prototype.toString=function(){return"{ coeff: "+this.coeff.toString()+", terms: ["+this.terms.join(",")+"]: sum: "+this.sum.toString()+", count: "+this.count+"}"},e.Utils.toMapObj=function(e){for(var t=0,n={},r=0;r<e.length;r++){var i=e[r];"undefined"===typeof n[i]&&(n[i]=t,t++)}return n.length=t,n},e.Utils.filledArray=function(e,t,n){for(var r=[];t--;)r[t]=n?new n(e):e;return r},e.Utils.arrSum=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r];return t},e.Utils.haveIntersection=function(e,t){var n;return t.length>e.length&&(n=t,t=e,e=n),e.some((function(e){return t.indexOf(e)>-1}))},e.Utils.subFunctions=function(t,n){n=n||{};var r=[];return t.each((function(t){if(t.group===o||t.previousGroup===o){var i=e.Utils.text(t,"hash"),a=n[i];if(a)r.push(t.altVar(a));else{var s=t.fname+h(n).length;n[i]=s,r.push(t.altVar(s))}}else t.group===l||t.group===u||t.group===c?r.push(e.Utils.subFunctions(t,n)):r.push(t.text())})),t.group===c||t.group===u?t.altVar(e.Utils.inBrackets(r.join("+"))):t.group===l?t.altVar(e.Utils.inBrackets(r.join("*"))):t.text()},e.Utils.getFunctionsSubs=function(e){var n={};for(var r in e)n[e[r]]=t.parse(r);return n};var _=e.Algebra={version:"1.4.6",proots:function(n,r){r=r||7;var i=[],s=function(e,t,n){for(var r=N(e,t,n).concat(i),a=0;a<0;a++)r.unshift(0);return r};if(n instanceof v&&n.isPoly()){if(n.distributeMultiplier(),n.group===u){var o=e.Utils.arrayMin(h(n.symbols)),c=n.symbols[o].clone().toUnitMultiplier();n=t.expand(t.divide(n,c)),i.push(0)}if(n.group===e.groups.S)return[0];if(n.group===e.groups.PL){var l=h(n.symbols),p=e.Utils.arrayMin(l);n=e.PARSER.divide(n,e.PARSER.parse(n.value+"^"+p))}for(var f=h(n.symbols).sort().pop(),d=n.group===e.groups.PL?n.symbols:n.symbols[f],g=d.group,x=(l=g===a?[d.power.toDecimal()]:h(d.symbols),[]),b=e.Utils.arrayMax(l),w=1;w<=b;w++){var S=0;-1!==l.indexOf(w+"")&&(S=g===a?d.multiplier:d.symbols[w].multiplier),x.unshift(S)}return x.push(n.symbols[y].multiplier),d.group===a&&(x[0]=d.multiplier),s(x,l,b)}if(e.Utils.isArray(n)){var T=n,_=(x=[],l=[],0);for(w=0;w<T.length;w++){for(var A=T[w][0],E=T[w][1],k=E-_-1,M=0;M<k;M++)x.unshift(0);x.unshift(A),0!==E&&l.push(E),_=E}return s(x,l,b=Math.max.apply(void 0,l))}throw new e.exceptions.NerdamerTypeError("Cannot calculate roots. Symbol must be a polynomial!");function N(t,n,i){var a=t.slice(0);if(t.unshift(i),i>100)throw new e.exceptions.ValueLimitExceededError("This utility accepts polynomials of degree up to 100. ");var s=[],o={};for(o.Degree=i,w=0;w<i;w++)s.push(0);var u=s.slice(0);function c(e,t,n,r,i,a){i[0]=a.b=r[0],i[1]=a.a=-t*a.b+r[1];for(var s=2;s<e;s++)i[s]=-(t*a.a+n*a.b)+r[s],a.b=a.a,a.a=i[s]}function l(e,t,n,r,i,a,s,o,u){var l=new Object,h=3;return l.b=l.a=0,c(t,s,o,a,u,l),i.c=l.a,i.d=l.b,Math.abs(i.c)<=100*e*Math.abs(a[t-1])&&Math.abs(i.d)<=100*e*Math.abs(a[t-2])||(i.h=o*r,Math.abs(i.d)>=Math.abs(i.c)?(h=2,i.e=n/i.d,i.f=i.c/i.d,i.g=s*r,i.a3=i.e*(i.g+n)+i.h*(r/i.d),i.a1=-n+i.f*r,i.a7=i.h+(i.f+s)*n):(h=1,i.e=n/i.c,i.f=i.d/i.c,i.g=i.e*s,i.a3=i.e*n+(i.g+i.h/i.c)*r,i.a1=-n*(i.d/i.c)+r,i.a7=i.g*i.d+i.h*i.f+n)),h}function h(e,t,n,r,i,a,s,o,u){var c;if(3!=n)if(c=1==n?i:r,Math.abs(a.a1)>10*e*Math.abs(c)){a.a7/=a.a1,a.a3/=a.a1,s[0]=u[0],s[1]=-u[0]*a.a7+u[1];for(l=2;l<t;l++)s[l]=-u[l-1]*a.a7+o[l-2]*a.a3+u[l]}else{s[0]=0,s[1]=-u[0]*a.a7;for(l=2;l<t;l++)s[l]=-u[l-1]*a.a7+o[l-2]*a.a3}else{s[1]=s[0]=0;for(var l=2;l<t;l++)s[l]=o[l-2]}}function p(e,t,n,r,i,a,s,o,u,c,l,h,p,f,m,d,g){var v,y,x,b,w,S,T,_;t.b=t.a=0,3!=e&&(2!=e?(v=n+p*s+h*c,y=o+(p+f*c)*u):(v=(n+l)*c+h,y=(c+p)*o+f*u),0!=(_=-(T=-((w=(x=-m[d-1]/g[d])*a)+(S=x*x*i))+f*(b=-(m[d-2]+x*g[d-1])/g[d])*r)+y+x*v)&&(t.a=-(p*(S+w)+f*(x*r+b*a))/_+p,t.b=f*(1+T/_)))}function f(e,t,n,r){var i,a,s;r.sr=r.si=r.lr=r.li=0,0!=e?0!=n?(i=t/2,Math.abs(i)<Math.abs(n)?(s=-(s=n>=0?e:-e)+i*(i/Math.abs(n)),a=Math.sqrt(Math.abs(s))*Math.sqrt(Math.abs(n))):(s=-e/i*(n/i)+1,a=Math.sqrt(Math.abs(s))*Math.abs(i)),s>=0?(a=i>=0?-a:a,r.lr=(-i+a)/e,r.sr=0!=r.lr?n/r.lr/e:r.sr):(r.lr=r.sr=-i/e,r.si=Math.abs(a/e),r.li=-r.si)):r.lr=-t/e:r.sr=0!=t?-n/t:r.sr}function d(e,t,n,r,i,a,s,o,u,m,d,g){var v,y,x,b,w,S,T,_,A,E,k,M=new Object,N=0,I=0;n.NZ=0,S=r,_=i;do{if(M.li=M.lr=M.si=M.sr=0,f(1,S,_,M),n.szr=M.sr,n.szi=M.si,n.lzr=M.lr,n.lzi=M.li,Math.abs(Math.abs(n.szr)-Math.abs(n.lzr))>.01*Math.abs(n.lzr))break;for(c(s,S,_,u,a,o),y=Math.abs(-n.szr*o.b+o.a)+Math.abs(n.szi*o.b),E=Math.sqrt(Math.abs(_)),v=2*Math.abs(a[0]),w=-n.szr*o.b,k=1;k<t;k++)v=v*E+Math.abs(a[k]);if(y<=20*(v=(9*(v=v*E+Math.abs(w+o.a))+2*Math.abs(w)-7*(Math.abs(o.a+w)+E*Math.abs(o.b)))*e)){n.NZ=2;break}if(++N>20)break;if(N>=2&&b<=.01&&y>=x&&!I){for(c(s,S-=S*(b=b<e?Math.sqrt(e):Math.sqrt(b)),_+=_*b,u,a,o),k=0;k<5;k++)h(e,t,l(e,t,o.a,o.b,d,g,S,_,m),o.a,o.b,d,g,m,a);I=1,N=0}x=y,h(e,t,l(e,t,o.a,o.b,d,g,S,_,m),o.a,o.b,d,g,m,a),p(l(e,t,o.a,o.b,d,g,S,_,m),o,o.a,d.a1,d.a3,d.a7,o.b,d.c,d.d,d.f,d.g,d.h,S,_,g,t,u),T=o.a,0!=(A=o.b)&&(b=Math.abs((-_+A)/A),S=T,_=A)}while(0!=A)}function g(e,t,n,r,i,a,s,o,u){var c,l,h,p,f,m,d,g,v,y,x,b=r-1;for(t.NZ=x=v=0,d=n.a;;){for(m=i[0],s[0]=m,y=1;y<a;y++)s[y]=m=m*d+i[y];for(h=Math.abs(m),p=Math.abs(d),c=.5*Math.abs(s[0]),y=1;y<a;y++)c=c*p+Math.abs(s[y]);if(h<=20*e*(2*c-h)){t.NZ=1,t.szr=d,t.szi=0;break}if(++x>10)break;if(x>=2&&Math.abs(g)<=.001*Math.abs(-g+d)&&h>f){v=1,t.a=d;break}for(f=h,u[0]=l=o[0],y=1;y<r;y++)u[y]=l=l*d+o[y];if(Math.abs(l)>10*Math.abs(o[b])*e)for(g=-m/l,o[0]=s[0],y=1;y<r;y++)o[y]=g*u[y-1]+s[y];else for(o[0]=0,y=1;y<r;y++)o[y]=u[y-1];for(l=o[0],y=1;y<r;y++)l=l*d+o[y];d+=g=Math.abs(l)>10*Math.abs(o[b])*e?-m/l:0}return v}function v(e,t,n,r,i,a,s,o,u,f,m,v){var y,x,b,w,S,T,_,A,E,k,M,N,I,C,D,L,R,O,F,P,U,z,V,q,G,B=new Object,K=new Object,j=new Array(t),H=new Array(t),W=1;for(v.NZ=0,w=b=.25,S=r,A=i,B.b=B.a=0,c(u,m,i,o,f,B),y=B.a,x=B.b,K.h=K.g=K.f=K.e=K.d=K.c=K.a7=K.a3=K.a1=0,V=l(e,s,y,x,K,a,m,i,j),P=0;P<n;P++){if(O=1,h(e,s,V,y,x,K,a,j,f),p(V=l(e,s,y,x,K,a,m,i,j),B,y,K.a1,K.a3,K.a7,x,K.c,K.d,K.f,K.g,K.h,m,i,a,s,o),D=B.a,R=L=B.b,k=0!=a[s-1]?-o[s]/a[s-1]:0,M=I=1,0!=P&&3!=V&&(q=(C=(I=0!=R?Math.abs((R-A)/R):I)<_?I*_:1)<w?1:0,(U=(N=(M=0!=k?Math.abs((k-S)/k):M)<T?M*T:1)<b?1:0)||q)){for(F=0;F<s;F++)H[F]=a[F];for(E=k,z=G=0;;){if(O&&0==(O=0)&&U&&(!q||N<C));else{if(d(e,s,v,D,L,f,u,B,o,j,K,a),y=B.a,x=B.b,v.NZ>0)return;if(W=G=1,w*=.25,z||!U)W=0;else for(F=0;F<s;F++)a[F]=H[F]}if(0!=W){if(B.a=E,W=g(e,v,B,s,o,u,f,a,j),E=B.a,v.NZ>0)return;if(z=1,b*=.25,0!=W){D=-(E+E),L=E*E;continue}}for(F=0;F<s;F++)a[F]=H[F];if(!q||G)break}c(u,m,i,o,f,B),V=l(e,s,y=B.a,x=B.b,K,a,m,i,j)}A=R,S=k,_=I,T=M}}!function(e,t,n,r){var i,a,s,o,u,c,l,h,p,m,d,g,y,x,b,w,S,T,_,A,E,k,M,N=e.Degree,I=Math.LN2,C=e.Degree+1,D=new Array(C),L=new Array(C),R=new Array(C),O=new Array(C),F=new Object,P=new Object;g=1;do{a=g,y=1+(g/=2)}while(y>1);var U=Number.MIN_VALUE/a,z=Math.cos(1.6406094968746698),V=Math.sin(1.6406094968746698),q=Math.sqrt(.5),G=-q;for(P.NZ=T=0,P.szr=P.szi=P.lzr=P.lzi=0;0==t[N];)n[T]=r[T]=0,N--,T++;for(k=N+1;N>=1;){if(N<=2){N<2?(n[e.Degree-1]=-t[1]/t[0],r[e.Degree-1]=0):(F.li=F.lr=F.si=F.sr=0,f(t[0],t[1],t[2],F),n[e.Degree-2]=F.sr,r[e.Degree-2]=F.si,n[e.Degree-1]=F.lr,r[e.Degree-1]=F.li);break}for(l=0,h=Number.MAX_VALUE,B=0;B<k;B++)(m=Math.abs(t[B]))>l&&(l=m),0!=m&&m<h&&(h=m);if(((p=U/h)<=1&&l>=10||p>1&&Number.MAX_VALUE/p>=l)&&(p=0==p?Number.MIN_VALUE:p,A=Math.floor(Math.log(p)/I+.5),1!=(u=Math.pow(2,A))))for(B=0;B<k;B++)t[B]*=u;for(var B=0;B<k;B++)L[B]=Math.abs(t[B]);L[N]=-L[N],E=N-1,m=Math.exp((Math.log(-L[N])-Math.log(L[0]))/N),0!=L[E]&&(m=(d=-L[N]/L[E])<m?d:m),d=m;do{d=.1*(m=d),c=L[0];for(B=1;B<k;B++)c=c*d+L[B]}while(c>0);o=m;do{s=c=L[0];for(B=1;B<N;B++)s=m*s+(c=m*c+L[B]);m-=o=(c=m*c+L[N])/s}while(Math.abs(o/m)>.005);i=m;for(B=1;B<N;B++)D[B]=(N-B)*t[B]/N;for(D[0]=t[0],g=t[N],y=t[E],M=0==D[E]?1:0,_=0;_<5;_++)if(x=D[E],M){for(B=0;B<E;B++)D[T=E-B]=D[T-1];D[0]=0,M=0==D[E]?1:0}else{w=-g/x;for(B=0;B<E;B++)D[T=E-B]=w*D[T-1]+t[T];D[0]=t[0],M=Math.abs(D[E])<=Math.abs(y)*a*10?1:0}for(B=0;B<N;B++)O[B]=D[B];for(_=1;_<=20;_++){if(S=-V*G+z*q,G=V*q+z*G,v(a,C,20*_,b=i*(q=S),i,D,N,t,k,R,-2*b,P),0!=P.NZ){n[T=e.Degree-N]=P.szr,r[T]=P.szi,N=(k-=P.NZ)-1;for(B=0;B<k;B++)t[B]=R[B];1!=P.NZ&&(n[T+1]=P.lzr,r[T+1]=P.lzi);break}for(B=0;B<N;B++)D[B]=O[B]}if(_>20){e.Degree-=N;break}}}(o,a,u,s);var y=s.length;for(w=0;w<y;w++){var x=m(s[w],r+8),b=m(u[w],r+8),S=x<0?"-":"";0===(b=r-String(b).length>2?b:u[w])&&(b=""),0===x&&(x=""),x=1===Math.abs(x)?S+"i":x?x+"*i":"";var T=b&&x?b+"+"+x:b+x;u[w]=T.replace(/\+\-/g,"-")}return u}},roots:function(n){if(n.isConstant(!0,!0))return e.Utils.nroots(n);var r=_.proots(n).map((function(e){return t.parse(e)}));return e.Vector.fromArray(r)},froot:function(t,n,r){return function(n){for(var i=r||e.Utils.build(e.Calculus.diff(t.clone())),a=t instanceof Function?t:e.Utils.build(t),s=!1,o=0;!s;){var u=n-a(n)/i(n),c=Math.abs(u)-Math.abs(n);n=u,Math.abs(c)<1e-12?s=!0:o>1e4&&(n=null,s=!0),o++}return n}(Number(n))},quad:function(e,n,r){var i=function(e,n,r,i){return t.parse("-("+n+"+"+i+"*sqrt(("+n+")^2-4*("+e+")*("+r+")))/(2*"+e+")")};return[i(e,n,r,1),i(e,n,r,-1)]},sumProd:function(e,t){return _.quad(-t,e,-1).map((function(e){return e.invert()}))},coeffs:function(e,n,r){n=String(n),e=t.expand(e),r=r||[new v(0)],e.group===s&&e.contains(n,!0)&&t.error("Unable to get coefficients using expression "+e.toString());var i=p(e);if(i.length<=1&&i[0]===n)for(var a=new w(e).coeffs.map((function(e){return new v(e)})),o=0,u=a.length;o<u;o++){var h=a[o];(m=r[o])&&(h=t.add(m,h)),r[o]=h}else if(n||t.error("Polynomial contains more than one variable. Please specify which variable is to be used!"),-1===i.indexOf(n))r[0]=t.add(e,r[0]);else if(r=r||[new v(0)],e.group===l){var f=e.symbols[n];f||t.error("Expression is not a polynomial!");var m,d=Number(f.power);((h=t.divide(e.clone(),f.clone())).contains(n,!0)||d<0||!g(d))&&t.error("Expression is not a polynomial!"),(m=r[d])&&(h=t.add(m,h)),r[d]=h}else e.group===c&&e.each((function(e){_.coeffs(e.clone(),n,r)}),!0);for(o=0,u=r.length;o<u;o++)"undefined"===typeof r[o]&&(r[o]=new v(0));return r},polyPowers:function(t,r,i){if(i=i||[],(p=p=t.group)===u&&r===t.value)i=i.concat(h(t.symbols));else if(p===c)for(var s in t.symbols){var o=t.symbols[s],p=o.group,f=o.value;if(p===a&&r===f)i.push(o.power);else if(p===u||p===c)i=_.polyPowers(o,r,i);else if(p===l&&o.contains(r)){var m=o.symbols[r];m&&i.push(m.power)}else p!==n&&r===f||i.push(0)}else p===l&&t.contains(r)&&i.push(e.Utils.decompose_fn(t,r,!0).x.power);return e.Utils.arrayUnique(i).sort()},Factor:{split:function(e){var n=new v(1),r=new v(1);return _.Factor.factor(e,new S).each((function(e){var i=t.parse(e);e.isConstant(!0)?n=t.multiply(n,i):r=t.multiply(r,i)})),[n,r]},mix:function(e,t){for(var n=h(e),r=n.length,i=[],a=0;a<r;a++){for(var s=n[a],o=e[s],u=i.length,c=0;c<u;c++){var l=i[c]*s;i.push(l),t&&i.push(-l)}for(c=1;c<=o;c++)i.push(Math.pow(s,c))}return i},common:function(n,r){try{if(n.group===c){for(var i=t.expand(n.clone(),!0).collectSymbols(null,null,(function(e,t){return(t.length||1)-(e.length||1)})),a={},s=[],o=0;o<i.length;o++){var u=i[o];s.push(u.multiplier.clone()),u.each((function(e){var t=Number(e.power);if(isNaN(t))throw new Error("exiting");e.value in a?(t<a[e.value][0]&&(a[e.value][0]=t),a[e.value][1].push(e)):a[e.value]=[t,[e]]}))}var l=new v(1);for(var h in a)a[h][1].length===i.length&&(l=t.multiply(l,t.pow(new v(h),new v(a[h][0]))));var p=e.Math2.QGCD.apply(null,s);if(!p.equals(1)){r.add(new v(p));for(o=0;o<i.length;o++)i[o].multiplier=i[o].multiplier.divide(p)}if(!l.equals(1)){r.add(l),n=new v(0);for(o=0;o<i.length;o++)n=t.add(n,t.divide(i[o],l.clone()))}}}catch(f){}return n},zeroes:function(n,r){var i=function(){throw new e.exceptions.ValueLimitExceededError("Exiting")};try{var a,s,o,u,l;l=(n=t.expand(n.clone())).toString(),a=p(n),o=new v(0);for(var h=[],f=[],m=0,y=a.length;m<a.length;m++){for(var x={},b=0;b<y;b++)m!==b&&(x[a[b]]=0);var w=(s=t.parse(l,x)).power;g(w)||i(),h.push(s),f.push(s.power)}if(e.Utils.allSame(f)){var S=n.length,T=h.length;2===T&&(u=new d(f[0]/(S-1))),3===T&&(u=new d(f[0]/Math.round((Math.sqrt(8*S-1)-3)/2)))}else u=e.Math2.QGCD.apply(null,f);g(u)||i();for(m=0;m<h.length;m++){var A=h[m],E=A.power.clone().divide(u);A.multiplier=new d(Math.pow(A.multiplier,1/E)),A.power=u.clone(),o=t.add(o,A)}if(o.group!==c)return n;for(;;){var k=_.div(n.clone(),o.clone());if(!k[1].equals(0))break;if(n=k[0],r.add(o.clone()),n.equals(1))break}}catch(l){}return n},factor:function(e,n){var r=t.parse(e),i=_.Factor._factor(r,n);if(i.equals(e))return i;if(i.group===l){var a=new v(1),s=t.parse(i.power),o=t.parse(i.multiplier);i.toUnitMultiplier(),i.multiplier.lessThan(0)&&(a.negate(),i.negate()),i.each((function(e){var n=_.Factor._factor(e);n.group===l?n.each((function(e){var n=_.Factor._factor(e);a=t.multiply(a,n)})):a=t.multiply(a,n)})),i=t.pow(t.multiply(o,a),s)}return i},quadFactor:function(n,r){if(n.isPoly()&&_.degree(n.equals(2))){var i=e.Utils.variables(n)[0],a=_.coeffs(n,i),s=_.Factor._factor(a[2].clone());if(s.group===l){var o=s.collectSymbols();if(o.length>2)return n;var u=t.multiply(t.parse(a[0]),t.parse(o[0])),c=t.parse(a[1]).negate(),h=t.parse(o[1]),p=_.quad(h,c,u).filter((function(t){if(e.Utils.isInt(t))return t}));if(1===p.length){var m=p[0],d=t.divide(a[0],t.parse(m));e.Utils.isInt(d)&&(r.add(t.parse(f("({0})*({1})+({2})",o[1],i,d))),r.add(t.parse(f("({0})*({1})+({2})",o[0],i,m))),n=new v(1))}}}return n},_factor:function(n,r){if(n.group===o){var i=n.args[0];if(i.group===a&&i.isSimple())return n}else if(n.group===a&&n.isSimple())return n;if(n.group===c){n.distributeMultiplier();var s=new v(0);n.each((function(e){(e.group===c&&e.power.greaterThan(1)||e.group===l)&&(e=t.expand(e)),s=t.add(s,e)})),s.power=n.power,n=s}n.group===o&&"sqrt"!==n.fname&&(n=e.Utils.evaluate(n));var u=n.clone();try{if(n.group===l){var f,m,d,y,x,b,w=t.parse(n.power);if(f=_.Simplify.strip(n.getDenom()),m=_.Simplify.strip(n.getNum()),d=f.pop(),(y=m.pop()).equals(n))return n;b=_.Factor.factor(y),x=_.Factor.factor(d);var T=_.Simplify.unstrip(m,b),A=_.Simplify.unstrip(f,x);return t.divide(T,A)}if(n.group===a)return n;if(n.isConstant())return n.equals(1)?n.clone():e.Math2.factor(n);w=n.power.clone();if(g(w)&&(!w.lessThan(0)||n.group!==o)){var E=w.sign();n.toLinear(),r=r||new S;var k={};n=t.parse(e.Utils.subFunctions(n,k)),h(k).length>0&&(r.preAdd=function(n){return t.parse(n,e.Utils.getFunctionsSubs(k))}),n.isLinear()||(r.pFactor=n.power.toString(),n.toLinear());var M=p(n);n.isImaginary()&&M.push(e.Settings.IMAGINARY);var N=M.length>1;if(N){var I=!0,C=!0;if(n.each((function(e){e.group!==a&&(I=!1),e.multiplier.equals(1)||(C=!1)})),I&&C)return t.pow(t.parse(n,e.Utils.getFunctionsSubs(k)),t.parse(w))}var D=new S;n=_.Factor.coeffFactor(n,D),D.each((function(e){E<0&&e.invert(),r.add(e)}));var L=new S;if(n=_.Factor.powerFactor(n,L),L.each((function(e){E<0&&e.invert(),r.add(e)})),N)n=_.Factor.mfactor(n,r),r.each((function(e){E<0&&e.power.negate()}));else{var R=M[0];n=_.Factor.squareFree(n,r,R);var O=new S;n=_.Factor.trialAndError(n,O,R);var F=O.toSymbol();if(F.equals(u))return F;for(var P in O.factors){var U=O.factors[P];r.add(t.pow(U,t.parse(w)))}n.equals(u)&&(n=_.Factor.quadFactor(n,r))}return n=t.parse(n,e.Utils.getFunctionsSubs(k)),r.add(t.pow(n,t.parse(w))),r.toSymbol()}return n}catch(z){return u}},reduce:function(e,n){if(e.group===c&&2===e.length){var r=e.collectSymbols().sort((function(e,t){return t.multiplier-e.multiplier}));if(r[0].power.equals(r[1].power)){var i=t.parse(r[0].power),a=r[0].clone().toLinear(),s=r[1].clone().toLinear();n.add(t.add(a.clone(),s.clone())),s.negate();for(var o=Number(i),u=new v(0),l=1;l<=o;l++){var h=t.pow(a.clone(),t.subtract(i.clone(),new v(l))),p=t.pow(s.clone(),t.subtract(new v(l),new v(1)));u=t.add(u,t.multiply(h,p))}return u}}return e},squareFree:function(e,t,n){if(e.isConstant()||e.group===a)return e;var r=new w(e,n).squareFree(),i=r[2];if(1!==i){var s=r[1].toSymbol();return s.power=s.power.multiply(new d(i)),t.add(_.Factor.factor(s)),_.Factor.squareFree(r[0].toSymbol(),t)}return e},powerFactor:function(n,r){if(n.group!==u||n.previousGroup===s)return n;var i=h(n.symbols);if(!e.Utils.allNumeric(i))return n;var a=e.Utils.arrayMin(i),o=new v(0),c=t.parse(n.value+"^"+a);return n.each((function(e){e=t.divide(e,c.clone()),o=t.add(o,e)})),r.add(c),o},coeffFactor:function(t,n){if(t.isComposite()){var r=e.Math2.QGCD.apply(null,t.coeffs());r.equals(1)||t.each((function(e){e.isComposite()?e.each((function(e){e.multiplier=e.multiplier.divide(r)})):e.multiplier=e.multiplier.divide(r)})),t.updateHash(),n&&n.add(new v(r))}return t},trialAndError:function(t,n,r){if(t.isConstant()||t.group===a)return t;for(var i=new w(t,r),s=i.coeffs[0],o=e.Math2.ifactor(s),u=_.proots(t),c=0;c<u.length;c++){var l=u[c],h=1;if(!isNaN(l)){for(var p in o){var f=e.Utils.round(Math.log(p)/Math.log(Math.abs(l)),8);if(g(f)){l=p,h=f;break}}var m=new d(l),v=[new d(m.num).negate()];v[h]=new d(m.den);var y=w.fromArray(v,i.variable).fill(),x=i.divide(y);x[1].equalsNumber(0)&&(i=x[0],n.add(y.toSymbol()))}}return i.equalsNumber(1)||(i=_.Factor.search(i,n)),i.toSymbol()},search:function(t,n,r){r=r||10;var i=t.variable,a=function(e,a,s,o){var u=w.fit(e,a,s,r,o,i);if(u&&u.coeffs.length>1){var c=t.divide(u);if(c[1].equalsNumber(0))return n.add(u.toSymbol()),[c[0],u]}return null},s=t.coeffs[0],o=e.Math2.ifactor(s),u=t.lc(),c=e.Math2.ifactor(u),l=t.sub(r),h=e.Math2.ifactor(l),p=_.Factor.mix(h,l<0),f=Math.ceil(t.coeffs.length/2),m=u.lessThan(0),d=s.lessThan(0);for(c[1]=1,o[1]=1;f--;)for(var g in c)for(var v in o)for(var y=0;y<p.length;y++){var x=a(g,v,p[y],f);if(x)return t=x[0],e.Utils.isPrime(t.sub(r))||(t=_.Factor.search(t,n)),t;x||(m&&d?x=a(-g,-v,p[y],f):m?x=a(-g,v,p[y],f):d&&(x=a(g,-v,p[y],f)))}return t},mSqfrFactor:function(t,n){if(t.group!==o)for(var r=p(t).reverse(),i=0;i<r.length;i++)do{if(r[i]!==t.value){var a=e.Calculus.diff(t,r[i]),s=_.Factor.coeffFactor(a);if(s.equals(0))break;var u=!0;if(s.isConstant()&&t.isComposite()&&t.each((function(e){e.multiplier%s!==0&&(u=!1)}),!0),u){var c=_.div(t,s.clone()),l=c[1].equals(0);if(c[0].isConstant()){n.add(c[0]);break}}else l=!1;l&&(n.add(c[0]),t=s)}else n.add(t),t=new v(1)}while(l);return t},sqdiff:function(n,r){try{var i,s,o=function(t){return e.Utils.block("POSITIVE_MULTIPLIERS",(function(){return v.unwrapPARENS(x.sqrt(x.abs(t)))}),!0)},u=e.Utils.separate(n.clone()),c=[];for(var l in u)"constants"!==l&&c.push(u[l]);if(c.sort((function(e,t){return t.power-e.power})),2===c.length)if(i=c.pop(),s=c.pop(),i.isComposite()&&s.power.equals(2)){s=o(s);var h=_.Factor.factor(t.add(i,u.constants));h.power.equals(2)&&(h.toLinear(),r.add(t.subtract(h.clone(),s.clone())),r.add(t.add(h,s)),n=new v(1))}else if(i=i.powSimp(),s=s.powSimp(),(i.group===a||""===i.fname)&&i.power.equals(2)&&(s.group===a||""===s.fname)&&s.power.equals(2)){if(i.multiplier.lessThan(0)){var p=s;s=i,i=p}i.multiplier.greaterThan(0)&&(i=o(i),s=o(s)),r.add(t.subtract(i.clone(),s.clone())),r.add(t.add(i,s)),n=new v(1)}}catch(f){}return n},mfactor:function(n,r){if(n.group===o)if("sqrt"===n.fname){var i=new S,a=_.Factor.common(n.args[0].clone(),i);a=_.Factor.coeffFactor(a,i),n=t.multiply(t.symfunction("sqrt",[a]),t.parse(n.multiplier)),i.each((function(r){n=t.multiply(n,t.parse(e.Utils.format("sqrt({0})",r)))}))}else r.add(n);else{n=_.Factor.mSqfrFactor(n,r);for(var s=p(n),u=n.collectSymbols().map((function(e){return v.unwrapSQRT(e)})),c={},l={},h=s.length,f=u.length,m=0;m<h;m++){var d=s[m];c[d]=new v(0);for(var y=0;y<f;y++){var x=u[y];if(x.contains(d)){var b=x.value===d?x.power.toDecimal():x.symbols[d].power.toDecimal();(!l[d]||b<l[d])&&(l[d]=b),c[d]=t.add(c[d],x.clone())}}}for(var w in c){var T=t.parse(w+"^"+l[w]),A=t.divide(c[w],T),E=t.expand(A);if(E.equals(1))break;var k=_.div(n.clone(),E);if(k[0].equals(0))break;var M=g(E)&&E.lessThan(0);if(k[1].equals(0)&&!M){var N=_.div(n.clone(),k[0].clone());T=N[0];if(n=N[1],T.equals(-1)&&!n.equals(0))return n;var I=k[0];if(n.equals(I)){var C=_.Factor.reduce(I,r);if(!n.equals(C))return _.Factor.mfactor(C,r)}else if(r.add(I),n.equals(0))return T;return T.isConstant("all")?(r.add(T),T):_.Factor.mfactor(T,r)}}}return n=_.Factor.sqdiff(n,r),n=_.Factor.zeroes(n,r)}},allLinear:function(e){for(var t=e.length,n=0;n<t;n++)if(!_.isLinear(e[n]))return!1;return!0},isLinear:function(e){var t=!1,r=e.group;if(r===u||r===c)for(var i in t=!0,e.symbols){var h=e.symbols[i],f=h.group;if(f!==o&&f!==s||(t=!1),f===l)t=1===p(h).length;else if(f===u||f===c)t=_.isLinear(h);else if(h.group!==n&&"1"!==h.power.toString()){t=!1;break}}else r===a&&1===e.power&&(t=!0);return t},gcd:function(){var n;if(0===(n=1===arguments.length&&arguments[0]instanceof e.Vector?arguments[0].elements:e.Utils.arguments2Array(arguments)).length)return new v(1);if(1===n.length)return n[0];for(var r=[],i=!1,a=0;a<n.length;a++)if(n[a].group===o&&"gcd"===n[a].fname)(n=n.concat(arguments[a].args)).splice(a,1);else{var s=p(n[a]);if(e.Utils.haveIntersection(s,r)){i=!0;break}r=r.concat(s)}if(i||0===r.length){if(n.every((function(e){return e.getDenom().equals(1)}))){var u=n[0];for(a=1;a<n.length;a++)u=_.gcd_(n[a],u);return u}return t.divide(_.gcd.apply(null,n.map((function(e){return e.getNum()}))),_.lcm.apply(null,n.map((function(e){return e.getDenom()}))))}return t.symfunction("gcd",n)},gcd_:function(n,r){if(n.group!==o&&n.group!==i||(n=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(n)}))),r.group===o&&(r=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(r)}))),n.isConstant()&&r.isConstant())return new v(e.Math2.QGCD(new d(+n),new d(+r)));var a=t.multiply(n.getDenom()||new v(1),r.getDenom()||new v(1)).invert();if(n=t.multiply(n.clone(),a.clone()),r=t.multiply(r.clone(),a.clone()),n=t.expand(n),r=t.expand(r),n.group===l||r.group===l){var u=t.divide(n.clone(),r.clone());if(!(m=t.multiply(r.clone(),u.getDenom().invert())).equals(1))return m}if(n.group===s||r.group===s){var c=new v(e.Math2.GCD(n.multiplier,r.multiplier)),h=_.gcd_(n.value===y?new v(1):t.parse(n.value),r.value===y?new v(1):t.parse(r.value)),f=_.gcd_(t.parse(n.power),t.parse(r.power));return t.multiply(c,t.pow(h,f))}if(n.length<r.length){var m=n;n=r,r=m}var g=p(n),x=p(r);if(g.length===x.length&&1===g.length&&g[0]===x[0]||1===g.length&&0===x.length||0===g.length&&1===x.length)return n=new w(n),r=new w(r),t.divide(n.gcd(r).toSymbol(),a);var b,S=[];for(n.each((function(e){S.push(e.multiplier)})),r.each((function(e){S.push(e.multiplier)}));!r.equals(0);){m=r.clone();if(n=n.clone(),b=_.div(n,m),r=b[1],b[0].equals(0))return t.divide(new v(e.Math2.QGCD(n.multiplier,r.multiplier)),a);n=m}var T=e.Math2.QGCD.apply(void 0,S);return T.equals(1)||n.each((function(e){e.multiplier=e.multiplier.divide(T)})),!n.equals(1)||n.isConstant()||r.isConstant()?t.divide(n,a):t.divide(t.symfunction("gcd",arguments),a)},lcm:function(){var n;1===arguments.length?arguments[0]instanceof e.Vector?n=arguments[0].elements:t.error("lcm expects either 1 vector or 2 or more arguments"):n=e.Utils.arguments2Array(arguments);var r=n.reduce((function(e,n){return t.multiply(e,n.clone())}),new v(1)),i=function(e,t){var n,r,i,a=[],s=Math.pow(2,e.length);for(r=t;r<s;r++){n=[],i=e.length-1;do{0!==(r&1<<i)&&n.push(e[i])}while(i--);n.length==t&&a.push(n)}return a}(arguments,arguments.length-1).map((function(e){return e.reduce((function(e,n){return t.multiply(e,n.clone())}),new v(1))}));if(n.every((function(t){return e.Utils.isVariableSymbol(t)})))var a=t.symfunction("gcd",e.Utils.arrayUnique(i));else a=_.gcd.apply(null,i);return t.divide(r,a)},divide:function(n,r){var i,a,s,o;return(o=(s=e.Algebra.Factor.factor(n.clone())).getDenom()).isConstant("all")?o=new v(1):n=t.expand(v.unwrapPARENS(t.multiply(s,o.clone()))),i=_.div(n,r),a=t.divide(i[1],r),t.divide(t.add(i[0],a),o)},div:function(n,r){if(r.isConstant())return n.each((function(e){e.multiplier=e.multiplier.divide(r.multiplier)})),[n,new v(0)];if(n=t.expand(n),r=t.expand(r),n.group===a&&r.group===c){var i=n.value,s=e.Utils.decompose_fn(r.clone(),i,!0);if(n.isLinear()&&s.x&&s.x.isLinear()&&r.isLinear()){var o=v.create(n.multiplier);return[t.divide(o.clone(),s.a.clone()),t.divide(t.multiply(o,s.b),s.a).negate()]}}if(n.group===a&&r.group===a){var u=t.divide(n.clone(),r.clone());return u.isConstant()?[u,new v(0)]:[new v(0),n.clone()]}var l=n.hasFunc(),h=r.hasFunc(),f=!1;if(l||h){f=!0;var m={},g=(n=t.parse(e.Utils.subFunctions(n,m)),r=t.parse(e.Utils.subFunctions(r,m)),e.Utils.getFunctionsSubs(m))}var x,b,S,_,A=e.Utils.arrayUnique(p(n).concat(p(r)));if((n.isImaginary()||r.isImaginary())&&A.push(e.Settings.IMAGINARY),1===A.length){x=(j=new w(n).divide(new w(r)))[0].toSymbol(),b=j[1].toSymbol()}else{A.push(y);var E=function(e){for(var n=new v(0),r=0;r<e.length;r++){var i=e[r].toSymbol();n=t.add(n,i)}return n},k=function(e,t){var n,r=Math.max.apply(null,e.terms),i=0;if(!t)for(var a=0;a<e.terms.length;a++)if(e.terms[a].equals(r)&&(n=a,i++),i>1)return;if(t)for(a=0;a<e.terms.length;a++)if(e.terms[a].equals(r)){n=a;break}return[r,n,e]},M=e.Utils.toMapObj(A),N=function(e,t){return t.sum.subtract(e.sum)},I=function(e,t){if(!e||!t)return!1;for(var n=0;n<e.terms.length;n++)if(e.terms[n].lessThan(t.terms[n]))return!1;return!0},C=n.tBase(M).sort(N),D=r.tBase(M).sort(N),L=function e(t,n){var r=t[n=n||0],i=t.length;if(r){for(var a,s,o=k(r),u=n+1;u<i;u++){var c=t[u],l=r.sum.equals(c.sum);if(!l&&o)break;if(l){for(var h,p,f,m,d=r.terms.length,g=0;g<d;g++){var v=r.terms[g],y=c.terms[g];("undefined"===typeof h||v.greaterThan(h))&&(h=v,f=g),("undefined"===typeof p||y.greaterThan(p))&&(p=y,m=g)}var x=h.subtract(c.terms[f]),b=p.subtract(r.terms[m]);if(b>x){o=[p,m,c];break}if(x>b){o=[h,f,r];break}}else if(o=k(c))break;o=k(c)}if(!o)return k(t[0],!0);for(u=0;u<D.length;u++){var w=D[u].terms;if((s=o[1])===w.length-1)return;if(!(a=w[s]).equals(0))break}return a.equals(0)?e(t,++n):o}}(I(C[0],D[0])&&C[0].count>D[0].count?D:C),R=[];if(L){var O=L[1],F=function(e,t){var n=e.len(),r=t.len(),i=t.terms[O],a=e.terms[O];return r>n&&i.greaterThan(a)?r-n:i.subtract(a)};O=function(e,t,n){for(var r=[],i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.terms.length;s++){var o=r[s],u=a.terms[s];0===i?r[s]=u:o&&!o.equals(u)&&(r[s]=void 0)}for(i=0;i<r.length;i++){if((a=r[i])&&!a.equals(0))return i}return n}(C,0,O),C.sort(F),D.sort(F);var P=D[0],U=C[0],z=new T(new d(1),[],U.map);if(P.sum.greaterThan(U.sum)&&U.len()>1)for(var V=0;V<U.terms.length;V++){var q=P.terms[V].subtract(U.terms[V]);if(q.equals(0))z.terms[V]=new d(0);else{var G=q.add(new d(1));z.terms[V]=q;for(var B=0;B<C.length;B++)C[B].terms[V]=C[B].terms[V].add(G)}}for(var K=I(C[0],D[0]);K&&(_=D,!(S=C)[0].sum.equals(_[0].sum)||S.length>=_.length);){var j=C[0].divide(D[0]);R.push(j),C.shift();for(V=1;V<D.length;V++){var H=D[V].multiply(j).generateImage(),W=C.length;0===W&&(H.coeff=H.coeff.neg(),C.push(H),C.sort(F));for(B=0;B<W;B++){var X=C[B];if(X.getImg()===H.getImg()){X.coeff=X.coeff.subtract(H.coeff),X.coeff.equals(0)&&(e.Utils.remove(C,B),B--);break}B===W-1&&(H.coeff=H.coeff.neg(),C.push(H),C.sort(F))}}if(!(K=I(C[0],D[0]))&&C.length>=D.length)for(V=1;V<C.length;V++)if(K=I(C[V],D[0])){C.unshift(e.Utils.remove(C,V));break}}}x=E(R),b=E(C),"undefined"!==typeof z&&(z=z.toSymbol(),x=t.divide(x,z.clone()),b=t.divide(b,z))}return f&&(x=t.parse(x.text(),g),b=t.parse(b.text(),g)),[x,b]},line:function(n,r,i){e.Utils.isArray(n)&&(n=e.Utils.convertToVector(n)),e.Utils.isArray(r)&&(r=e.Utils.convertToVector(r)),i=t.parse(i||"x"),e.Utils.isVector(n)&&e.Utils.isVector(r)||t.error('Line expects a vector! Received "'+n+'" & "'+r+'"');var a=t.subtract(r.e(1).clone(),n.e(1).clone()),s=t.subtract(r.e(2).clone(),n.e(2).clone()),o=t.divide(s,a),u=t.multiply(i,o.clone()),c=t.multiply(n.e(1).clone(),o);return t.add(t.subtract(u,c),n.e(2).clone())},PartFrac:{createTemplate:function(e,n,r,i){var s,u,c,l,h,p,f;(e=_.Factor.factor(e)).each((function(t,n){if(t.group===o&&""===t.fname&&t.args[0].group===a){var r=t.args[0];this.symbols?(delete this.symbols[n],this.symbols[r.value]=r):e=t.args[0]}})),s=n.collectFactors(),u=[],p=[],f=new v(1);for(var m=0;m<s.length;m++){var d=v.unwrapPARENS(s[m]);if(d.power.greaterThan(1)){l=Number(d.power),c=d.clone().toLinear(),h=Number(_.degree(c,i));for(var g=0;g<l;g++){var y=t.pow(c.clone(),new v(g+1));r.push(y.clone());var x=t.divide(e.clone(),y.clone());p.push(h),u.push(x)}}else{h=Number(_.degree(d,i)),r.push(d);x=t.divide(e.clone(),d.clone());x=t.expand(v.unwrapPARENS(x)),p.push(h),u.push(x)}}return[r=r.map((function(e){return t.multiply(e,f.clone())})),u,p]},partfrac:function(n,r,i){var a=p(n);r=r||t.parse(a[0]);try{var s,o,u,c,l,h,f,m,d,g,y,x,b,w,S,T,A,E,k;if(s=t.expand(n.getNum()),o=t.expand(n.getDenom().toUnitMultiplier()),s.multiplier=n.multiplier,l=s.groupTerms(r),Number(_.degree(s,r))>=Number(_.degree(o,r))?(b=(x=_.div(s.clone(),t.expand(o.clone())))[0],l=(s=x[1]).groupTerms(r)):b=new v(0),1===Number(_.degree(o,r))){var M=t.divide(s,o);return i?[b,M]:t.add(b,M)}c=_.Factor.factor(o),T=_.PartFrac.createTemplate(o.clone(),c,[],r),A=T[0],w=T[1],h=T[2],y=[l.length],f=[],u=[],S=[],w.map((function(e,n){E=A[n],k=h[n];for(var i=0;i<k;i++){u.push(E.clone());var a=v.create(r,i),s=t.expand(t.multiply(e,a.clone())).groupTerms(r),o=s.length;y.push(o),f.push(s),S.push(a.clone())}})),m=e.Utils.arrayMax(y),g=new e.Matrix(e.Utils.fillHoles(l,m)).transpose(),d=new e.Matrix;for(var N=0;N<f.length;N++)d.elements.push(e.Utils.fillHoles(f[N],m));var I=t.multiply(d.transpose().invert(),g),C=i?[b]:b;return I.each((function(e,n){var r=t.multiply(S[n],t.divide(e,u[n]));i?C.push(r):C=t.add(C,r)})),C}catch(O){try{if(n.isComposite()){var D={};n.each((function(e){var n=e.getDenom(),r=e.getNum(),i=D[n];D[n]=i?t.add(i,r):r}));var L=new v(0);for(var R in D)L=t.add(L,t.divide(D[R],t.parse(R)));n=L}}catch(F){}}return n}},degree:function(n,r,i){if(i=i||{nd:[],sd:[],depth:0},!r){var o=p(n);if(o.length>1)throw new Error("You must specify the variable for multivariate polynomials!");if(0===o.length)return new v(0);r=t.parse(o[0])}var u=n.group;n.isComposite()?((n=n.clone()).distributeExponent(),n.each((function(e){i.depth++,_.degree(e,r,i),i.depth--}))):n.group===l?n.each((function(e){i.depth++,_.degree(e,r,i),i.depth++})):u===s&&n.value===r.value?i.sd.push(n.power.clone()):u===a&&n.value===r.value?i.nd.push(t.parse(n.power)):i.nd.push(new v(0));var c=i.nd.length>0?e.Utils.arrayMax(i.nd):void 0;return 0===i.depth&&i.sd.length>0?(void 0!==c&&i.sd.unshift(c),t.symfunction("max",i.sd)):(e.Utils.isSymbol(c)||(c=t.parse(c)),c)},sqComplete:function(n,r,i){e.Utils.isSymbol(r)||(r=t.parse(r));var a,s,o,u,c,l,h,p,f,m,d,g=function(t){throw t=t||"Stopping",new e.exceptions.ValueLimitExceededError(t)};return n.isPoly()||g("Must be a polynomial!"),f=e.Utils.inBrackets,n=n.clone(),(a=e.Algebra.degree(n,r)).equals(2)||g("Cannot complete square for degree "+a),s=(h=e.Algebra.coeffs(n,r))[2],p=h[1].sign(),o=t.divide(h[1],new v(2)),u=t.pow(o.clone(),new v(2)),i?[s,o,c]:(d=x.sqrt(s),l=t.divide(x.sqrt(u),d.clone()),c=t.subtract(h[0],t.pow(l.clone(),new v(2))),{a:m=t.parse(f(d.clone()+"*"+r+(p<0?"-":"+")+l)),c:c,f:t.add(t.pow(m.clone(),new v(2)),c.clone())})},Simplify:{strip:function(e){var n=t.parse(e.multiplier);e.toUnitMultiplier();var r=t.parse(e.power);return e.toLinear(),[n,r,e]},unstrip:function(e,n){var r=e[0],i=e[1];return t.multiply(r,t.pow(n,i))},complexSimp:function(e,n){var r,i,a,s,o,u,c,l,h;return u=e.realpart(),l=e.imagpart(),c=n.realpart(),h=n.imagpart(),r=t.multiply(u.clone(),c.clone()),i=t.multiply(l.clone(),h.clone()),a=t.multiply(c.clone(),l),s=t.multiply(u,h.clone()),o=t.add(t.pow(c,new v(2)),t.pow(h,new v(2))),t.divide(t.add(t.add(r,i),t.multiply(t.subtract(a,s),v.imaginary())),o)},trigSimp:function(n){if(n.containsFunction(["cos","sin","tan"])){n=n.clone();var r=_.Simplify.strip(n),i=(n=r.pop()).clone();if(n.group===c){var a=new v(0);n.each((function(e){var n=_.Simplify.trigSimp(e.fnTransform());a=t.add(a,n)}),!0),i=t.pow(t.multiply(new v(n.multiplier),a),new v(n.power))}else if(n.group===l){var s=n.getNum(),o=n.getDenom();if("sin"===s.fname&&"cos"===o.fname&&s.args[0].equals(o.args[0])&&s.power.equals(o.power)&&(i=t.parse(e.Utils.format("({0})*({1})*tan({2})^({3})",o.multiplier,s.multiplier,s.args[0],s.power))),i.group===l){var u=new v(1);i.each((function(n){"tan"===n.fname&&(n=t.parse(e.Utils.format("({0})*sin({1})^({2})/cos({1})^({2})",n.multiplier,_.Simplify.simplify(n.args[0]),n.power))),u=t.multiply(u,n)})),i=u}}n=i=_.Simplify.unstrip(r,i).distributeMultiplier()}return n},fracSimp:function(e){var n=e.getDenom();if((f=e.getNum()).isImaginary()&&n.isImaginary()&&(e=_.Simplify.complexSimp(f,n)),e.isComposite()){e.power>1&&(e=t.expand(e));var r,i,a,s,o,u,c,l,h,p,f,m=e.collectSymbols();for(i=m.pop();m.length;)a=m.pop(),s=t.parse(i.getDenom()),o=t.parse(a.getDenom()),u=i.getNum(),c=a.getNum(),p=t.multiply(s.clone(),o.clone()),l=t.multiply(u,o),h=t.multiply(c,s),i=t.divide(t.add(l,h),p);return n=t.expand(i.getDenom()),(r=(f=t.expand(i.getNum())).isImaginary()&&n.isImaginary()?_.Simplify.complexSimp(f,n):t.divide(f,n)).equals(e)?e:_.Simplify.simplify(r)}return e},ratSimp:function(e){if(e.group===l){var n=e.getDenom(),r=e.getNum().distributeMultiplier(),i=_.Simplify.fracSimp(n),a=_.Simplify.fracSimp(r);e=t.divide(a,i)}return e},simplify:function(n){var r,i=_.Simplify.strip(n);if(n=i.pop(),(n=_.Simplify.fracSimp(n)).isConstant()||n.group===e.groups.S)return i.push(n),_.Simplify.unstrip(i,n);if(n=n.clone(),r=_.Simplify.trigSimp(n),r=_.Simplify.ratSimp(r),(r=_.Factor.factor(r)).group===e.groups.CP&&r.isLinear()){var a=r.multiplier.clone();r.toUnitMultiplier();var s=new v(0);r.each((function(e){var n=_.Simplify.simplify(e);s=t.add(s,n)})),r=s,s.multiplier=s.multiplier.multiply(a)}return _.Simplify.unstrip(i,b(r))}},Classes:{Polynomial:w,Factors:S,MVTerm:T}};r.useAlgebraDiv=function(){var n=_.divideFn=t.divide,r=0;t.divide=function(t,i){var a;return a=1===++r?e.Algebra.divide(t,i):n(t,i),r=0,a}},r.useParserDiv=function(){_.divideFn&&(t.divide=_.divideFn),delete _.divideFn},r.register([{name:"factor",visible:!0,numargs:1,build:function(){return _.Factor.factor}},{name:"simplify",visible:!0,numargs:1,build:function(){return _.Simplify.simplify}},{name:"gcd",visible:!0,numargs:[1],build:function(){return _.gcd}},{name:"lcm",visible:!0,numargs:[1],build:function(){return _.lcm}},{name:"roots",visible:!0,numargs:-1,build:function(){return _.roots}},{name:"divide",visible:!0,numargs:2,build:function(){return _.divide}},{name:"div",visible:!0,numargs:2,build:function(){return _.div}},{name:"partfrac",visible:!0,numargs:[1,2],build:function(){return _.PartFrac.partfrac}},{name:"deg",visible:!0,numargs:[1,2],build:function(){return _.degree}},{name:"coeffs",visible:!0,numargs:[1,2],build:function(){return function(){var t=_.coeffs.apply(_,arguments);return new e.Vector(t)}}},{name:"line",visible:!0,numargs:[2,3],build:function(){return _.line}},{name:"sqcomp",visible:!0,numargs:[1,2],build:function(){return function(e,t){try{return t=t||p(e)[0],_.sqComplete(e.clone(),t).f}catch(n){return e}}}}]),r.api()}()},function(e,t,n){if("undefined"===typeof r){var r=n(2);n(6)}!function(){"use strict";var e=r.getCore(),t=e.PARSER,n=e.Frac,i=e.Settings,a=e.Utils.isSymbol,s=e.groups.FN,o=e.Symbol,u=e.Utils.text,c=e.Utils.inBrackets,l=e.Utils.isInt,h=e.Utils.format,p=e.Utils.even,f=e.Utils.evaluate,m=e.groups.N,d=e.groups.S,g=(s=e.groups.FN,e.groups.PL),v=e.groups.CP,y=e.groups.CB,x=e.groups.EX,b=e.groups.P,w=i.LOG,S="sqrt",T="sin",_="cos",A="tan",E="sec",k="csc",M="cot",N="sinh",I="cosh";function C(e){this.message=e||""}C.prototype=new Error,o.prototype.hasIntegral=function(){return this.containsFunction("integrate")},o.prototype.fnTransform=function(){if(this.group!==s)return this;var e,n=this.args[0],r=new o(this.multiplier),i=this.clone().toUnitMultiplier();if(this.isLinear())switch(this.fname){case N:e=t.parse(h("(e^({0})-e^(-({0})))/2",n));break;case I:e=t.parse(h("(e^({0})+e^(-({0})))/2",n));break;case"tanh":e=t.parse(h("(e^({0})-e^(-({0})))/(e^({0})+e^(-({0})))",n));break;case A:e=t.parse(h("sin({0})/cos({0})",n));break;case k:e=t.parse(h("1/sin({0})",n));break;case E:e=t.parse(h("1/cos({0})",n));break;default:e=i}else if(this.power.equals(2))switch(this.fname){case T:e=t.parse(h("1/2-cos(2*({0}))/2",n));break;case _:e=t.parse(h("1/2+cos(2*({0}))/2",n));break;case A:e=t.parse(h("sin({0})^2/cos({0})^2",n));break;case I:e=t.parse(h("1/2+cosh(2*({0}))/2",n));break;case N:e=t.parse(h("-1/2+cosh(2*({0}))/2",n));break;case"tanh":e=t.parse(h("(1+cosh(2*({0})))/(-1+cosh(2*({0})))",n));break;case E:e=t.parse(h("(1-cos(2*({0})))/(1+cos(2*({0})))+1",n));break;default:e=i}else if(this.fname===E)e=t.parse(h("1/cos({0})^({1})",this.args[0],this.power));else if(this.fname===k)e=t.parse(h("1/sin({0})^({1})",this.args[0],this.power));else if(this.fname===A)e=this.power.lessThan(0)?t.parse(h("cos({0})^(-({1}))/sin({0})^({1})",this.args[0],this.power.negate())):t.parse(h("sin({0})^({1})/cos({0})^({1})",this.args[0],this.power));else if(this.fname===T&&this.power.lessThan(0))e=t.parse(h("csc({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===_&&this.power.lessThan(0))e=t.parse(h("sec({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===T&&this.power.equals(3))e=t.parse(h("(3*sin({0})-sin(3*({0})))/4",this.args[0]));else if(this.fname===_&&this.power.equals(3))e=t.parse(h("(cos(3*({0}))+3*cos({0}))/4",this.args[0]));else if(this.fname!==_&&this.fname!==T||!p(this.power))e=i;else{var a=this.power/2,u=t.pow(this.clone().toLinear(),t.parse(2)).fnTransform(),c=t.expand(t.pow(u,t.parse(a)));e=new o(0),c.each((function(n){var r=n.fnTransform();e=t.add(e,r)}),!0)}return t.multiply(e,r)},o.prototype.hasTrig=function(){if(this.isConstant(!0)||this.group===d)return!1;if(this.fname&&(e.Utils.in_trig(this.fname)||e.Utils.in_inverse_trig(this.fname)))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].hasTrig())return!0;return!1},e.Expression.prototype.hasIntegral=function(){return this.symbol.hasIntegral()},e.Utils.toCommonDenominator=function(n){if(n.isComposite()&&n.isLinear()){var r=new o(n.multiplier),i=new o(1),a=new o(0);return n.each((function(e){i=t.multiply(i,e.getDenom())}),!0),n.each((function(e){var n=e.getNum(),r=e.getDenom(),s=t.multiply(n,t.divide(i.clone(),r));a=t.add(a,s)})),t.multiply(r,e.Algebra.divide(t.expand(a),t.expand(i)))}return n},e.Utils.in_inverse_trig=function(e){return-1!==["asin","acos","atan","acsc","asec","acot"].indexOf(e)},e.Utils.in_trig=function(e){return-1!==[_,T,A,E,k,M].indexOf(e)},e.Utils.in_htrig=function(e){return-1!==[N,I,"tanh","acsch","asech","acoth"].indexOf(e)};var D=e.Utils.all_functions=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].group!==s)return!1;return!0},L=e.Utils.cosAsinBtranform=function(e,n){var r,i;return r=e.args[0],i=n.args[0],t.parse(h("(sin(({0})+({1}))-sin(({0})-({1})))/2",r,i))},R=e.Utils.cosAsinAtranform=function(e,n){return 1!==Number(n.power)?t.multiply(e,n):(r=e.args[0],t.parse(h("(sin(2*({0})))/2",r)));var r},O=e.Utils.cosAsinBtranform=function(e,n){var r,i;return r=e.args[0],i=n.args[0],t.parse(h("(cos(({0})+({1}))-cos(({0})-({1})))/2",r,i))},F=e.Utils.trigTransform=function(e){for(var n,r,i={},a=new o(1),u=0,c=e.length;u<c;u++)if((n=e[u]).group===s){var l=n.fname;l===_&&i.sin?(r=i.sin.args[0].toString()!==n.args[0].toString()?L(n,i.sin):R(n,i.sin),delete i.sin,a=t.multiply(a,r)):l===T&&i.cos?(r=i.cos.args[0].toString()!==n.args[0].toString()?L(n,i.cos):R(n,i.cos),delete i.cos,a=t.multiply(a,r)):l===T&&i.sin?(i.sin.args[0].toString()!==n.args[0].toString()?(r=O(n,i.sin),delete i.sin):(r=t.multiply(n,i.sin),delete i.sin),a=r):i[l]=n}else a=t.multiply(a,n);for(var h in i)a=t.multiply(a,i[h]);return a};e.Settings.integration_depth=10,e.Settings.max_lim_depth=10;var P=e.Calculus={version:"1.4.6",sum:function(n,r,i,a){if(r.group!==e.groups.S)throw new e.exceptions.NerdamerTypeError("Index must be symbol. "+u(r)+" provided");var s;if(r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(a)){var c=a-i<200?"":"PARSE2NUMBER";i=Number(i),a=Number(a),s=e.Utils.block(c,(function(){for(var s=n.text(),u={"~":!0},c=new e.Symbol(0),l=i;l<=a;l++){u[r]=new o(l);var h=t.parse(s,u);c=t.add(c,h)}return c}))}else s=t.symfunction("sum",arguments);return s},product:function(n,r,i,a){if(r.group!==e.groups.S)throw new e.exceptions.NerdamerTypeError("Index must be symbol. "+u(r)+" provided");var s;if(r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(a)){var c=a-i<200?"":"PARSE2NUMBER";s=e.Utils.block(c,(function(){i=Number(i),a=Number(a.multiplier);for(var s=n.text(),u={},c=new e.Symbol(1),l=i;l<=a;l++)u[r]=new o(l),c=t.multiply(c,t.parse(s,u));return c}))}else s=t.symfunction("product",arguments);return s},diff:function(r,l,p){if(e.Utils.isVector(r)){var f=new e.Vector([]);return r.each((function(e){f.elements.push(P.diff(e,l,p))})),f}if(e.Utils.isMatrix(r)){var N=new e.Matrix;return r.each((function(e,t,n){N.set(t,n,P.diff(e,l,p))})),N}var I=a(l)?l.text():l;if(p=a(p)?p.multiplier:p||1,void 0===I&&(I=e.Utils.variables(r)[0]),r.group===s&&r.fname===S){var C=r.args[0],D=r.power.clone();C.group===m&&C.group===b||(C.power=a(C.power)?t.multiply(C.power,t.multiply(new o(.5)),D):C.power.multiply(new n(.5)).multiply(D),C.multiplier=C.multiplier.multiply(r.multiplier)),r=C}if(r.group!==s||a(r.power))r=F(r);else{var L=F(t.parse(r)),R=P.diff(r.args[0].clone(),I);r=t.multiply(L,R)}return p>1&&(p--,r=P.diff(r,l,p)),r;function O(e){return(e.value===I||e.contains(I,!0))&&(e.multiplier=e.multiplier.multiply(e.power),e.power=e.power.subtract(new n(1)),e.power.equals(0)&&(e=o(e.multiplier))),e}function F(e){var r,p,f=e.group;if(f===m||f===d&&e.value!==I||f===b)e=o(0);else if(f===d)e=O(e);else{if(f===y){var S=e.multiplier.clone();e.toUnitMultiplier();var N=t.multiply(function(e){for(var n=e.collectSymbols(),r=new o(0),i=n.length,a=0;a<i;a++){for(var s=P.diff(n[a].clone(),I),u=0;u<i;u++)a!==u&&(s=t.multiply(s,n[u].clone()));r=t.add(r,s)}return r}(e),O(e));return N.multiplier=N.multiplier.multiply(S),N}if(f===s&&e.power.equals(1))switch(e.fname){case w:p=e.clone(),(e=e.args[0].clone()).power=e.power.negate(),e.multiplier=p.multiplier.divide(e.multiplier);break;case _:e.fname=T,e.multiplier.negate();break;case T:e.fname=_;break;case A:e.fname=E,e.power=new n(2);break;case E:e=U(e,A);break;case k:e=U(e,"-cot");break;case M:e.fname=k,e.multiplier.negate(),e.power=new n(2);break;case"asin":e=t.parse("(sqrt(1-("+u(e.args[0])+")^2))^(-1)");break;case"acos":e=t.parse("-(sqrt(1-("+u(e.args[0])+")^2))^(-1)");break;case"atan":e=t.parse("(1+("+u(e.args[0])+")^2)^(-1)");break;case"abs":S=e.multiplier.clone(),e.toUnitMultiplier(),(r=e.args[0].clone()).toUnitMultiplier(),(e=t.parse(c(u(e.args[0]))+"/abs"+c(u(r)))).multiplier=S;break;case"parens":e=o(1);break;case"cosh":e.fname="sinh";break;case"sinh":e.fname="cosh";break;case"tanh":e.fname="sech",e.power=new n(2);break;case"sech":e=U(e,"-tanh");break;case"csch":var C=String(e.args[0]);return t.parse("-coth("+C+")*csch("+C+")");case"coth":C=String(e.args[0]);return t.parse("-csch("+C+")^2");case"asinh":e=t.parse("(sqrt(1+("+u(e.args[0])+")^2))^(-1)");break;case"acosh":e=t.parse("(sqrt(-1+("+u(e.args[0])+")^2))^(-1)");break;case"atanh":e=t.parse("(1-("+u(e.args[0])+")^2)^(-1)");break;case"asech":C=String(e.args[0]);e=t.parse("-1/(sqrt(1/("+C+")^2-1)*("+C+")^2)");break;case"acoth":e=t.parse("-1/(("+e.args[0]+")^2-1)");break;case"acsch":C=String(e.args[0]);e=t.parse("-1/(sqrt(1/("+C+")^2+1)*("+C+")^2)");break;case"asec":C=String(e.args[0]);e=t.parse("1/(sqrt(1-1/("+C+")^2)*("+C+")^2)");break;case"acsc":C=String(e.args[0]);e=t.parse("-1/(sqrt(1-1/("+C+")^2)*("+C+")^2)");break;case"acot":e=t.parse("-1/(("+e.args[0]+")^2+1)");break;case"S":C=String(e.args[0]);e=t.parse("sin((pi*("+C+")^2)/2)");break;case"C":C=String(e.args[0]);e=t.parse("cos((pi*("+C+")^2)/2)");break;case"Si":C=e.args[0];e=t.parse("sin("+C+")/("+C+")");break;case"Shi":C=e.args[0];e=t.parse("sinh("+C+")/("+C+")");break;case"Ci":C=e.args[0];e=t.parse("cos("+C+")/("+C+")");break;case"Chi":C=e.args[0];e=t.parse("cosh("+C+")/("+C+")");break;case"Ei":C=e.args[0];e=t.parse("e^("+C+")/("+C+")");break;case"Li":C=e.args[0];e=t.parse("1/"+i.LOG+"("+C+")");break;case"erf":e=t.parse("(2*e^(-("+e.args[0]+")^2))/sqrt(pi)");break;case"atan2":var D=String(e.args[0]),L=String(e.args[1]);e=t.parse("("+L+")/(("+L+")^2+("+D+")^2)");break;case"sign":e=new o(0);break;case"sinc":e=t.parse(h("(({0})*cos({0})-sin({0}))*({0})^(-2)",e.args[0]));break;case i.LOG10:e=t.parse("1/(("+e.args[0]+")*"+i.LOG+"(10))");break;default:e=t.symfunction("diff",[e,l])}else if(f===x||f===s&&a(e.power)){var R;R=f===x?e.value:f===s&&e.contains(I)?e.fname+c(u(e.args[0])):e.value+c(u(e.args[0])),t.multiply(t.parse(w+c(R)),e.power.clone()),r=P.diff(t.multiply(t.parse(w+c(R)),e.power.clone()),I),e=t.multiply(e,r)}else if(f!==s||e.power.equals(1)){if(f===v||f===g){var z=new o(0);for(var V in e.symbols)z=t.add(z,P.diff(e.symbols[V].clone(),I));e=t.multiply(O(e.clone()),z)}}else(r=e.clone()).toLinear(),r.toUnitMultiplier(),e=t.multiply(O(e.clone()),F(r))}return e.updateHash(),e}function U(e,n,r){return t.multiply(e,t.parse(n+c(r||u(e.args[0]))))}},integration:{u_substitution:function(n,r){function i(e,n,i){var a=P.diff(n,r),s=i?i(e,n):t.divide(e.clone(),a);return s.contains(r,!0)?null:s}function a(e,n){var r=P.integrate(t.symfunction(e,[new o(f)]),f,0);return(r=r.sub(new o(f),n)).updateHash(),r}var u,c=n[0].clone(),l=n[1].clone(),h=c.group,p=l.group,f="__u__";if(h===s&&p!==s){if(u=i(l,(m=c.args[0]).clone()))return t.multiply(u,a(c.fname,m));if(u=i(l,c))return P.integration.poly_integrate(c)}else if(p===s&&h!==s){var m;if(u=i(c,(m=l.args[0]).clone()))return t.multiply(u,a(l.fname,m))}else if(h===s&&p===s){if(u=i(c.clone(),l.clone()))return t.multiply(P.integration.poly_integrate(l),u);if(u=i(l.clone(),c.clone()))return t.multiply(P.integration.poly_integrate(l),u)}else{if(h===x&&p!==x){if(!(u=i(l,(S=c.power).clone()))){var d=P.integration.decompose_arg(S.clone(),r),g=P.diff(d[2].clone(),r),v=P.integration.decompose_arg(g.clone(),r);if(t.multiply(d[1],v[1]).power.equals(l.power)){var y=t.divide(d[0].clone(),v[0].clone()),b=t.multiply(y.clone(),t.pow(new o(c.value),t.multiply(d[0],new o(f))));return b=t.multiply(b,new o(f)),P.integration.by_parts(b,f,0,{}).sub(f,d[1].clone())}}var w=P.integrate(c.sub(S.clone(),new o(f)),f,0);return t.multiply(w.sub(new o(f),S),u)}if(p===x&&h!==x){var S;u=i(c,(S=l.power).clone());w=P.integrate(l.sub(S,new o(f)),f,0);return t.multiply(w.sub(new o(f),S),u)}if(c.isComposite()||l.isComposite()){var T=function(n,i){var a=P.diff(i,r),s=e.Algebra.Factor.factor(n),o=e.Algebra.Factor.factor(a);return t.divide(s,o)},_=c.isComposite()?c.clone().toLinear():c.clone(),A=l.isComposite()?l.clone().toLinear():l.clone();if(u=i(_.clone(),A.clone(),T))return t.multiply(P.integration.poly_integrate(l),u);if(u=i(A.clone(),_.clone(),T))return t.multiply(P.integration.poly_integrate(c),u)}}},poly_integrate:function(e){var n=e.power.toString(),r=e.multiplier.toDecimal(),i=e.toUnitMultiplier().toLinear();return-1===Number(n)?t.multiply(new o(r),t.symfunction(w,[i])):t.parse(h("({0})*({1})^(({2})+1)/(({2})+1)",r,i,n))},stop:function(t){throw t=t||"Unable to compute integral!",e.Utils.warn(t),new C(t)},partial_fraction:function(n,r,i,s){var u,c;return a(r)||(r=t.parse(r)),u=new o(0),(c=e.Algebra.PartFrac.partfrac(n,r)).group===y&&c.isLinear()?(c.each((function(e){e.isLinear()||P.integration.stop()})),c.each((function(e){u=t.add(u,P.integrate(e,r,i,s))}))):u=t.add(u,P.integrate(c,r,i,s)),u},get_udv:function(n){var r=[[],[],[],[],[]],i=function(t){var n=t.group;if(n===s){var i=t.fname;e.Utils.in_trig(i)||e.Utils.in_htrig(i)?r[3].push(t):e.Utils.in_inverse_trig(i)?r[1].push(t):i===w?r[0].push(t):P.integration.stop()}else n===d||t.isComposite()&&t.isLinear()||n===y&&t.isLinear()?r[2].push(t):n===x||t.isComposite()&&!t.isLinear()?r[4].push(t):P.integration.stop()};n.group===y?n.each((function(e){i(o.unwrapSQRT(e,!0))})):i(n);for(var a,u=new o(1),c=0;c<5;c++){var l,h=r[c],p=h.length;if(p>0){if(p>1){l=new o(1);for(var f=0;f<p;f++)l=t.multiply(l,h[f].clone())}else l=h[0].clone();a?u=t.multiply(u,l):(a=l).multiplier=a.multiplier.multiply(n.multiplier)}}return[a,u]},trig_sub:function(n,r,i,a,s,o){(s=s||P.integration.decompose_arg(n.clone().toLinear(),r))[3],s[2];var u=s[0],l=s[1];if(l.power.equals(2)&&u.greaterThan(0)){var h=e.Utils.getU(n),p=t.parse(A+c(h)),f=t.parse(E+c(h)+"^2"),m=t.multiply(n.sub(l,p),f),d=P.integrate(m,h,i,a).sub(p,l);return e.Utils.clearU(p),d}},by_parts:function(n,r,i,a){var s,u,c,l,h,p,f,m,d,g,v,y;if(a.previous=a.previous||[],u=(s=P.integration.get_udv(n))[0],c=s[1],v=(l=o.unwrapSQRT(t.expand(P.diff(u.clone(),r)),!0)).clone().stripVar(r),l=t.divide(l,v.clone()),h=P.integrate(c.clone(),r,i||0),y=(p=t.multiply(h.clone(),l)).toString(),-1!==a.previous.indexOf(y)&&e.Utils.in_trig(u.fname)&&c.isE())return a.is_cyclic=!0,new o(1);if(a.previous.push(y),f=t.multiply(u,h),g=p.multiplier.clone(),p.toUnitMultiplier(),(d=t.multiply(P.integrate(p.clone(),r,i,a),v)).multiplier=d.multiplier.multiply(g),m=t.subtract(f,d),a.is_cyclic&&(a.previous.pop(),0===a.previous.length)){m=t.expand(m);var x=new o(0);m.each((function(e){e.contains(r)||(x=t.add(x,e.clone()))})),m=t.divide(t.subtract(m,x.clone()),t.subtract(new o(1),x))}return m},decompose_arg:e.Utils.decompose_fn},integrate:function(r,u,f,m){if(!u){var b=e.Utils.variables(r);1===b.length&&(u=b[0]),u=u||"x"}if(e.Utils.isVector(r)){var L=new e.Vector([]);return r.each((function(e){L.elements.push(P.integrate(e,u))})),L}return isNaN(u)||t.error("variable expected but received "+u),r.isConstant(!0)?t.multiply(r.clone(),t.parse(u)):(m=m||{},e.Utils.block("PARSE2NUMBER",(function(){f=f||0;var b,L=a(u)?u.toString():u,R=o.unwrapSQRT(r.clone(),!0),O=R.group;try{if(++f>e.Settings.integration_depth&&P.integration.stop("Maximum depth reached. Exiting!"),R.contains(L,!0)){if(O===d)b=P.integration.poly_integrate(R,L,f);else if(O===x)if(R.previousGroup===s&&"sqrt"!==R.fname&&R.fname!==i.PARENTHESIS&&P.integration.stop(),R.contains(L)&&R.previousGroup!==s){if(R.power.contains(L))P.integration.stop();else(Oe=P.diff(R.clone().toLinear(),L)).contains(L)&&P.integration.stop(),b=P.integration.poly_integrate(R,L,f)}else{if((j=P.diff(R.power.clone(),L)).contains(L)){var U=j.stripVar(L);if((H=t.divide(j.clone(),U.clone())).group===d&&H.isLinear())return U.multiplier=U.multiplier.divide(new n(2)),t.parse(h("({2})*(sqrt(pi)*erf(sqrt(-{0})*{1}))/(2*sqrt(-{0}))",U,L,R.multiplier));P.integration.stop()}if(R.isE())j.isLinear()?b=R:j.isE()&&j.power.group===d&&j.power.power.equals(1)?b=t.multiply(t.symfunction("Ei",[R.power.clone()]),R.power):P.integration.stop();else{var z=t.symfunction(w,[t.parse(R.value)]);b=t.divide(R,z)}b=t.divide(b,j)}else if(R.isComposite()&&R.isLinear()){var V=t.parse(R.multiplier);R.toUnitMultiplier(),b=new o(0),R.each((function(e){b=t.add(b,P.integrate(e,L,f))})),b=t.multiply(V,b)}else if(O===v)if(R.power.greaterThan(1)&&(R=t.expand(R)),R.power.equals(1))b=new o(0),R.each((function(e){b=t.add(b,P.integrate(e,L,f))}),!0);else{var q=Number(R.power);V=R.multiplier.clone();R.toUnitMultiplier();var G=R.clone().toLinear(),B=(bt=P.integration.decompose_arg(G,L))[3],K=bt[2],j=bt[0],H=bt[1];if(-1===q&&H.group!==g&&H.power.equals(2)){var W=!l(B)||B>0;if(H.group===d&&H.power.equals(2)&&W){var X=function(e){var n=new o(1);return e.each((function(e){n=t.multiply(n,"abs"===e.fname?e.args[0]:e)})),n},Z=j.clone(),Y=B.clone();Z=t.pow(Z,new o(.5)),Y=t.pow(Y,new o(.5));z=t.multiply(X(Y),X(Z));var J=t.symfunction("atan",[t.divide(t.multiply(j,H.toLinear()),z.clone())]);b=t.divide(J,z)}else if(H.group===d&&H.isLinear())b=t.divide(P.integration.poly_integrate(R),j);else if(H.power.equals(4)){var Q,$,ee,te,ne,re,ie=c;Z=t.parse(S+ie(j)+"*"+L+"^2"),Y=t.parse(S+ie(2)+"*"+ie(j)+"^"+ie("1/4")+"*"+ie(B)+"^"+ie("1/4")+"*"+L),Q=t.parse(S+ie(B)),ve=t.add(t.add(Z.clone(),Y.clone()),Q.clone()),Ve=t.add(t.subtract(Z,Y),Q),$=t.parse(S+ie(2)+"*"+ie(B)+"^"+ie("3/4")),ee=t.parse(S+ie(B)+"*"+ie(B)+"^"+ie("1/4")+"*"+L),te=t.parse("2*"+ie(B)+"*"+S+ie(2)+"*"+ie(B)+"^"+ie("1/4")),ne=t.divide(t.subtract($.clone(),ee.clone()),t.multiply(te.clone(),Ve)),re=t.divide(t.add($,ee),t.multiply(te,ve.clone())),b=t.add(P.integrate(ne,L,f,m),P.integrate(re,L,f,m))}else b=P.integration.partial_fraction(R,L,f)}else if(-.5===q)if(H.group===d&&H.power.equals(2))if(K.multiplier.lessThan(0)&&!B.multiplier.lessThan(0))if(j.negate(),B.isConstant()&&j.isConstant()){z=t.symfunction(S,[j.clone()]);var ae=t.symfunction(S,[t.multiply(j.clone(),B)]);b=t.divide(t.symfunction("asin",[t.divide(K.toLinear(),ae)]),z)}else{var se=t.symfunction(S,[j]),oe=t.multiply(se.clone(),H.clone().toLinear());b=t.divide(t.symfunction("atan",[t.divide(oe,t.symfunction(S,[G.clone()]))]),se)}else P.integration.stop();else P.integration.stop();else if(H.isLinear()&&H.group!==g)b=t.divide(P.integration.poly_integrate(R),j);else{if(H.power.equals(2)&&j.greaterThan(0)){var ue,ce,le,he,pe,fe;ue=t.parse(S+c(j)),ce=t.parse(S+c(B)),le=t.multiply(ue.clone(),ce.clone()).invert(),he=t.pow(B,new o(R.power)),fe=e.Utils.getU(R),Se=t.multiply(le,H.clone().toLinear()),pe=t.parse("atan"+c(Se));var me=2*(Math.abs(R.power)-1),de=P.integrate(t.parse(_+c(fe)+"^"+me));return e.Utils.clearU(fe),t.multiply(de.sub(fe,pe),he)}if(R.group===y||R.power.lessThan(0)){J=R.clone().toLinear();var ge=e.Algebra.Factor.factor(J).toString()!==J.toString();if(e.Algebra.degree(J,t.parse(L)).equals(2)&&!ge)try{var ve,ye,xe;xe=e.Algebra.sqComplete(J,L),Se=e.Utils.getU(J),ve=xe.f.sub(xe.a,Se),ye=t.pow(ve,t.parse(R.power)),b=P.integrate(ye,Se).sub(Se,xe.a)}catch(Vt){P.integration.stop()}else b=P.integration.partial_fraction(R,L,f,m)}else b=P.integration.by_parts(R,L,f,m)}b.multiplier=b.multiplier.multiply(V)}else if(O===s){var be=R.args[0];V=R.multiplier.clone();R.toUnitMultiplier();j=(bt=P.integration.decompose_arg(be,L))[0],H=bt[1];var we=R.fname;if(we===w||"asin"===we||"acos"===we||"atan"===we&&H.isLinear()){q=R.power.toString();if(l(q)&&(f-=q),be.isComposite()){var Se=e.Utils.getU(R),Te=(J=t.pow(t.parse(w+c(Se)),new o(q)),P.diff(be,L)),_e=t.multiply(J,Te);de=P.integrate(_e,Se,f,m);b=t.multiply(t.parse(V),de.sub(Se,be))}else b=t.multiply(t.parse(V),P.integration.by_parts(R,L,f,m))}else{if(we===A&&R.power.lessThan(0))return(Ct=R.clone()).power.negate(),Ct.fname=M,t.multiply(t.parse(V),P.integrate(Ct,L,f));if(!j.contains(L,!0)&&R.isLinear())if("abs"===we){if((H=t.divide(be.clone(),j.clone())).group!==d||H.power.lessThan(0))P.integration.stop();else if(e.Utils.even(H.power))b=P.integrate(be,L,f);else{var Ae=P.integrate(H,L,f);Ae.power=Ae.power.subtract(new n(1)),b=t.multiply(t.multiply(t.symfunction("abs",[H.toLinear()]),Ae),j)}}else{var Ee=R.args[0].group,ke=P.integration.decompose_arg(be,L);switch((Ee!==v&&Ee!==d&&Ee!==y||!ke[1].power.equals(1)||be.hasFunc())&&P.integration.stop(),we){case _:b=t.symfunction(T,[be]);break;case T:(b=t.symfunction(_,[be])).negate();break;case A:b=t.parse(h(i.LOG+"(sec({0}))",be));break;case E:b=t.parse(h(i.LOG+"(tan({0})+sec({0}))",be));break;case k:b=t.parse(h("-"+i.LOG+"(csc({0})+cot({0}))",be));break;case M:b=t.parse(h(i.LOG+"(sin({0}))",be));break;case N:b=t.symfunction(I,[be]);break;case I:b=t.symfunction(N,[be]);break;case"tanh":b=t.parse(h(i.LOG+"(cosh({0}))",be));break;case"asec":case"acsc":case"acot":case"asech":case"acsch":case"acoth":b=P.integration.by_parts(R,L,f,m);break;case"sech":b=t.parse(h("atan(sinh({0}))",be));break;case"csch":b=t.parse(h(i.LOG+"(tanh(({0})/2))",be));break;case"coth":b=t.parse(h(i.LOG+"(sinh({0}))",be));break;case"exp":b=P.integrate(t.parse(h("e^({0})",be)),L,f);break;case"S":be=R.args[0].clone();var Me=(Et=P.integration.decompose_arg(be,L))[1],Ne=Et[0],Ie=Et[3];b=t.parse(h("(cos((1/2)*pi*(({1})+({0})*({2}))^2)+pi*(({1})+({0})*({2}))*S(({1})+({0})*({2})))/(({0})*pi)",Ne,Ie,H));break;case"C":be=R.args[0].clone(),Me=(Et=P.integration.decompose_arg(be,L))[1],Ne=Et[0],Ie=Et[3];b=t.parse(h("(pi*(({1})+({0})*({2}))*C(({1})+({0})*({2}))-sin((1/2)*pi*(({1})+({0})*({2}))^2))/(({0})*pi)",Ne,Ie,Me));break;case"erf":be=R.args[0].clone(),Me=(Et=P.integration.decompose_arg(be,L))[1],Ne=Et[0];b=t.parse(h("e^(-(({2}))^2)/(({0})*sqrt(pi))+(1/({0})+({1}))*erf(({2}))",Ne,Me,be));break;case"sign":b=t.multiply(R.clone(),be.clone());break;default:P.integration.stop()}b=t.divide(b,j)}else if(H.isLinear()){if(we===_||we===T)if((q=Number(R.power))<0)R.fname=we===T?k:E,R.invert().updateHash(),b=P.integrate(R,L,f);else{be=R.args[0];var Ce=R.clone(),De=R.clone(),Le=new o((q-1)/q),Re=t.multiply(j.clone(),new o(q)).invert();Ce.power=Ce.power.subtract(new n(1)),De.power=De.power.subtract(new n(2));var Oe=t.symfunction(we===_?T:_,[be.clone()]);we===T&&Oe.negate(),b=t.add(t.multiply(t.multiply(Re,Ce),Oe),t.multiply(Le,P.integrate(t.parse(De),L,f)))}else if(we===A||we===M){if(R.args[0].isLinear(L)){me=R.power.subtract(new n(1)).toString();var Fe=R.clone().toUnitMultiplier(),Pe=t.parse(h((we===M?"-":"")+"1/({2}*{0})*{3}({1})^({0})",me,be,j,we));Fe.power=Fe.power.subtract(new n(2)),Fe.power.equals(0)&&(Fe=t.parse(Fe)),b=t.subtract(Pe,P.integrate(Fe,L,f))}}else if(we===E||we===k){var Ue=R.power.subtract(new n(1)).toString(),ze=R.power.subtract(new n(2)).toString(),Ve=we===E?A:M,qe=(Fe=R.clone().toUnitMultiplier(),h((we===k?"-":"")+"1/({0}*{1})*{4}({3})^({2})*{5}({3})",j,Ue,ze,be,we,Ve));Pe=t.parse(qe);Fe.power=Fe.power.subtract(new n(2)),Fe.power.equals(0)&&(Fe=t.parse(Fe)),b=t.add(Pe,t.multiply(new o(ze/Ue),P.integrate(Fe,L,f)))}else we!==I&&we!==N||!R.power.equals(2)?P.integration.stop():b=P.integrate(R.fnTransform(),L,f)}else P.integration.stop();b.multiplier=b.multiplier.multiply(V)}}else if(O===g)b=P.integration.partial_fraction(R,L,f);else if(O===y){R.getDenom().group===d&&(R=t.expand(R));var Ge=R.stripVar(L),Be=t.divide(R.clone(),Ge.clone());if(Ge.contains(L)&&(Be=t.multiply(Be,Ge),Ge=new o(1)),Be.group!==y){if(Be.equals(1))return P.integrate(t.expand(R),L,f);Be.clone().toLinear().isPoly(!0)&&e.Utils.variables(Be).length>1&&(Be=e.Algebra.Factor.factor(Be)),b=P.integrate(Be,L,f)}else{var Ke=Be.collectSymbols().sort((function(e,t){return e.group===t.group?Number(e.power)===Number(t.power)?e<t?1:-1:t.power-e.power:t.group-e.group})).map((function(e){var n=o.unwrapSQRT(e,!0);return"exp"===n.fname?t.parse(h("({1})*e^({0})",n.args[0],n.multiplier)):n})),je=Ke.length;if(R.power<0){if(2===je)return P.integrate(t.expand(R),L,f,m)}else if(2===je){try{b=P.integration.u_substitution(Ke,L)}catch(Vt){}if(!b){var He=Ke[0].group,We=Ke[1].group,Xe=Ke[0],Ze=Ke[1],Ye=Xe.fname,Je=Ze.fname;if(R=t.multiply(Xe.clone(),Ze.clone()),He===s&&We===s)if(Ye===w||Je===w)b=P.integration.by_parts(R.clone(),L,f,m);else{Ke.sort((function(e,t){return t.fname>e.fname}));var Qe=Xe.args[0];(!Qe.isLinear()||Qe.group!==v&&Qe.group!==y&&Qe.group!==d)&&P.integration.stop(),H=(bt=P.integration.decompose_arg(Qe,L))[1],j=bt[0],H.isLinear()||P.integration.stop();var $e=Ze.args[0];if(Qe.equals($e))if(Ye===T&&Je===_||Ye===_&&Je===T)if(Xe.power.lessThan(0)&&P.integration.stop(),Ye===T&&Xe.power.add(Ze.power).equals(0))Xe.fname=A,Xe.updateHash(),b=P.integrate(Xe,L,f);else if(p(Xe.power)&&Je===_&&Ze.power.lessThan(0)){me=Number(Xe.power)/2;var et=t.parse(h("(1-cos({0})^2)^({1})",Xe.args[0],me));b=P.integrate(t.expand(t.multiply(et,Ze.clone())),L,f,m)}else if(p(Xe.power)&&Je===T&&Ze.power.lessThan(0)){me=Number(Xe.power)/2,et=t.parse(h("(1-sin({0})^2)^({1})",Xe.args[0],me));b=P.integrate(t.expand(t.multiply(et,Ze.clone())),L,f,m)}else{var tt=e.Utils.even(Xe.power),nt=e.Utils.even(Ze.power);if(b=new o(0),tt&&nt){var rt=function(e){var n,r=e.power/2;return n=e.fname===_?"((1/2)+(cos(2*("+e.args[0]+"))/2))^"+r:"((1/2)-(cos(2*("+e.args[0]+"))/2))^"+r,t.parse(n)};j=rt(Xe),B=rt(Ze),Oe=t.multiply(j,B);return(Ct=t.expand(Oe)).each((function(e){b=t.add(b,P.integrate(e,L,f))})),t.multiply(b,Ge)}tt?(Se=Xe,Fe=Ze):(Se=Ze,Fe=Xe);var it=Se.fname===_?-1:1,at=((me=Fe.power)-1)/2,st=t.parse("(1-"+Se.fname+e.Utils.inBrackets(Qe)+"^2)^"+at);(Ct=t.expand(t.multiply(new o(it),t.multiply(Se.clone(),st)))).each((function(e){b=t.add(b,P.integration.poly_integrate(e.clone()))}))}else if(Ye===E&&Je===A&&H.isLinear()&&Ze.isLinear())b=t.parse(h("sec({0})^({1})/({1})",Xe.args[0],Xe.power));else if(Ye===A&&Je===E&&H.isLinear())if(Xe.isLinear()&&Ze.isLinear())b=t.divide(t.symfunction(E,[Qe.clone()]),j);else if(p(Xe.power)){q=Number(Xe.power)/2,Oe=t.parse(h("(sec({0})^2-1)^({1})",Xe.args[0],q));b=P.integrate(t.expand(t.multiply(Oe,Ze)),L,f)}else P.integration.stop();else if(Ye===E&&Je===_)Xe.fname=_,Xe.invert().updateHash(),b=P.integrate(t.multiply(Xe,Ze),L,f);else if(Ye===T&&Je===k)Ze.fname=T,Ze.invert().updateHash(),b=P.integrate(t.multiply(Xe,Ze),L,f);else if(Ye!==A||Je!==_&&Je!==T||!Ze.power.lessThan(0)){Oe=t.multiply(Xe.fnTransform(),Ze.fnTransform());b=P.integrate(t.expand(Oe),L,f)}else{var Oe=t.multiply(Xe.fnTransform(),Ze);b=P.integrate(t.expand(Oe),L,f)}else if(Ye!==T&&Ye!==_||Je!==T&&Je!==_)P.integration.stop();else if(Xe.isLinear()&&Ze.isLinear())if(Xe.args[0].isLinear()&&Ze.args[0].isLinear()){Je===T?(K=Xe.args[0],kt=Ze.args[0]):(kt=Xe.args[0],K=Ze.args[0]),J=t.parse(h("(sin(({1})+({0}))+sin(({1})-({0})))/2",K.toString(),kt.toString())),b=P.integrate(J,L,f)}else{var ot=F(Ke);b=P.integrate(t.expand(ot),L,f)}else{ot=new o(1);Ke.map((function(e){var n=e.fnTransform();ot=t.multiply(ot,n)}));Oe=t.expand(ot);(b=P.integrate(Oe,L,f)).hasIntegral()&&(b=P.integrate(F(ot.collectSymbols()),L,f))}}else if(He===s&&We===d){var ut=Xe.isLinear();if(Xe.fname===_&&ut&&Ze.power.equals(-1))b=t.symfunction("Ci",[Xe.args[0]]);else if(Xe.fname===_&&Ze.power.equals(-1))b=P.integrate(t.multiply(Xe.fnTransform(),Ze.clone()),L,f);else if(Xe.fname===I&&ut&&Ze.power.equals(-1))b=t.symfunction("Chi",[Xe.args[0]]);else if(Xe.fname===I&&Ze.power.equals(-1))b=P.integrate(t.multiply(Xe.fnTransform(),Ze.clone()),L,f);else if(Xe.fname===T&&ut&&Ze.power.equals(-1))b=t.symfunction("Si",[Xe.args[0]]);else if(Xe.fname===T&&Ze.power.equals(-1))b=P.integrate(t.multiply(Xe.fnTransform(),Ze.clone()),L,f);else if(Xe.fname===N&&ut&&Ze.power.equals(-1))b=t.symfunction("Shi",[Xe.args[0]]);else if(Xe.fname===N&&Ze.power.equals(-1))b=P.integrate(t.multiply(Xe.fnTransform(),Ze.clone()),L,f);else if(Xe.fname===w&&Ze.power.equals(-1))b=P.integration.poly_integrate(Xe,L,f);else if("erf"===Xe.fname){if(Ze.power.equals(1)){Ne=(Et=P.integration.decompose_arg(Xe.args[0],L))[0],Me=Et[1],be=Xe.args[0].toString();b=t.parse(h("(e^(-(({2}))^2)*(sqrt(pi)*e^((({2}))^2)*(2*({0})^2*({1})^2-3)*erf(({2}))+2*({0})*({1})-2))/(4*sqrt(pi)*({0})^2)",Ne,Me,be))}}else b=P.integration.by_parts(R,L,f,m)}else if(He===x&&We===d){H=Ye===w?P.integration.decompose_arg(Xe.args[0],L)[1]:null;b=Xe.isE()&&(Xe.power.group===d||Xe.power.group===y)&&Ze.power.equals(-1)?t.symfunction("Ei",[Xe.power.clone()]):Ye===w&&H.value===Ze.value?P.integration.poly_integrate(Xe,L,f):P.integration.by_parts(R,L,f,m)}else if(He===g&&We===d){if(Ze.value===Xe.value&&Xe.power.equals(-1)){var ct=Math.min.apply(null,e.Utils.keys(Xe.symbols)),lt=Math.min(ct,Ze.power),ht=Ze.clone();ht.power=new n(lt),Ze=t.divide(Ze,ht.clone());Oe=new o(0);Xe.each((function(e){Oe=t.add(Oe,t.divide(e.clone(),ht.clone()))})),Oe.multiplier=Xe.multiplier,R=t.divide(Ze,Oe)}else R=t.expand(R);b=P.integration.partial_fraction(R,L,f)}else if(He===v&&We===d){J=Xe.clone().toLinear();var pt=e.Algebra.degree(J,t.parse(L)).equals(1);if(Xe.power.equals(-.5)){j=(bt=P.integration.decompose_arg(Xe.clone().toLinear(),L))[0].negate(),H=bt[1],B=bt[3];var ft=Number(Xe.power),mt=Number(Ze.power);if(l(mt)&&e.Utils.even(mt)&&H.power.equals(2)){var dt=t.divide(t.multiply(t.pow(B.clone(),new o(2)),t.symfunction(S,[t.divide(B.clone(),j.clone())])),t.pow(j.clone(),new o(2)));dt=t.multiply(dt,t.symfunction(S,[B]).invert());var gt=t.parse("sin(u)");gt.power=gt.power.multiply(Ze.power);de=P.integrate(gt,"u",f);var vt=t.parse("asin(sqrt("+j+"/"+B+")*"+L+")");b=t.multiply(dt,de.sub(new o("u"),vt))}else if(-.5===ft){var yt=function(e,n){var r=t.parse(P.integrate(e,L,f,m).sub(L,h(n,L)));if(!r.hasIntegral())return r};-1===mt?b=yt(t.expand(t.expand(t.pow(t.multiply(Xe.invert(),Ze.invert()),new o(2)))).invert(),"sqrt(1-1/({0})^2)"):-2===mt&&(b=yt(t.sqrt(t.expand(t.divide(t.pow(R,new o(2)).invert(),t.pow(new o(L),new o(2))).negate())).invert(),"sqrt(1-1/({0})^2)"))}}else if(Xe.power.equals(-1)&&Ze.isLinear()&&pt)b=P.integration.partial_fraction(R,L,f);else if(!Xe.power.lessThan(0)&&l(Xe.power)){var xt=t.expand(Xe);b=new o(0),xt.each((function(e){e.group===g?e.each((function(e){b=t.add(b,P.integrate(t.multiply(Ze.clone(),e),L,f))})):b=t.add(b,P.integrate(t.multiply(Ze.clone(),e),L,f))}))}else if(Xe.power.lessThan(-2))b=P.integration.by_parts(R,L,f,m);else if(Xe.power.lessThan(0)&&Ze.power.greaterThan(1)){var bt;j=(bt=P.integration.decompose_arg(Xe.clone().toLinear(),L))[0].negate(),H=bt[1],B=bt[3],G=Xe.clone().toLinear();if(H.group!==g&&H.isLinear()){q=Number(Ze.power),Se=new o(Te="_u_");var wt=t.expand(t.divide(t.pow(t.subtract(Se.clone(),B.clone()),new o(q)),Se.clone())),St={};St[Te]=G;var Tt=t.parse(wt,St);b=P.integrate(Tt,L,0)}else if(Ze.power.greaterThan(H.power)||Ze.power.equals(H.power)){var _t=new e.Algebra.Classes.Factors;Xe=e.Algebra.Factor.coeffFactor(Xe.invert(),_t);var At=e.Algebra.divide(Ze,Xe);At.group!==y?(b=new o(0),At.each((function(e){b=t.add(b,P.integrate(e,L,f))})),_t.each((function(e){b=t.divide(b,e)})),b=t.expand(b)):b=P.integration.by_parts(R,L,f,m)}else b=P.integration.partial_fraction(R,L,f)}else if(Xe.power.den.equals(2)){j=(Et=P.integration.decompose_arg(Xe.clone().toLinear(),L))[3],H=Et[1],B=Et[0];var Et,kt=Et[2];if(H.power.equals(2)&&B.lessThan(0)){j.equals(1)||(Ge=t.multiply(Ge,t.pow(j,new o(2))));Se=L,dt=t.divide(t.pow(B.clone().negate(),new o(.5)),t.pow(j,new o(.5))),Te=t.symfunction(_,[new o(Se)]);var Mt=t.pow(t.symfunction(_,[new o(Se)]),new o(Xe.power.num)),Nt=t.pow(t.symfunction(T,[new o(Se)]),new o(Ze.power)),It=t.multiply(t.multiply(Mt,Te),Nt);de=P.integrate(It,Se,f);b=de.sub(Se,t.symfunction("asin",[t.multiply(new o(L),dt)]))}else b=P.integration.partial_fraction(R,L,f,m)}else pt&&(b=P.integration.partial_fraction(R,L,f))}else if(Xe.isComposite()&&Ze.isComposite())if(b=new o(0),Xe.power.greaterThan(0)&&Ze.power.greaterThan(0)){var Ct;(Ct=t.expand(R)).each((function(e){b=t.add(b,P.integrate(e,L,f))}),!0)}else{ft=Number(Xe.power),mt=Number(Ze.power);if(ft<0&&mt>0){Oe=Xe;Xe=Ze,Ze=Oe}-1===ft&&-1===mt?b=P.integration.partial_fraction(R,L):Xe.each((function(e){var n=t.multiply(e,Ze.clone()),r=P.integrate(n,L,f);b=t.add(b,r)}))}else if(He===v&&Ke[0].power.greaterThan(0))Xe=t.expand(Xe),b=new o(0),Xe.each((function(e){b=t.add(b,P.integrate(t.multiply(e,Ze.clone()),L,f))}),!0);else if(He===s&&We===x&&e.Utils.in_htrig(Xe.fname))Xe=Xe.fnTransform(),b=P.integrate(t.expand(t.multiply(Xe,Ze)),L,f);else if(He===s&&We===v||We===s&&He===v){if(We===s&&He===v){Oe=Xe;Xe=Ze,Ze=Oe}var Dt,Lt,Rt;if(Te=o.unwrapSQRT(P.diff(Xe.clone(),L),!0),Dt=o.unwrapSQRT(Ze,!0),Te.power.equals(Dt.power)){if(q=new o(Ze.power),Lt=Te.clone().toLinear(),Rt=Ze.clone().toLinear(),(Le=e.Algebra.divide(Lt.toLinear(),Rt)).isConstant()){var Ot=t.pow(Le,q.negate());b=t.multiply(Ot,P.integration.poly_integrate(Xe.clone()))}}else b=P.integration.by_parts(R,L,f,m)}else{var Ft=Xe.clone().toLinear(),Pt=Ze.clone().toLinear();b=He===x&&We===x&&Xe.power.contains(L)&&Ze.power.contains(L)&&!Ft.contains(L)&&!Pt.contains(L)?t.parse(h("(({0})^(({2})*({4}))*({1})^(({3})*({4})))/(log(({0})^({2}))+log(({1})^({3})))",Ft.toString(),Pt.toString(),Xe.power.multiplier.toString(),Ze.power.multiplier.toString(),L)):P.integration.by_parts(R,L,f,m)}}}else if(3===je&&(Ke[2].group===d&&Ke[2].power.lessThan(2)||Ke[0].group===v)){var Ut=Ke[0];if(Ut.group===v){Ut.power.greaterThan(1)&&(Ut=t.expand(Ut));Fe=t.multiply(Ke[1],Ke[2]);b=new o(0),Ut.each((function(e){var n=t.multiply(e,Fe.clone()),r=P.integrate(n,L,f);b=t.add(b,r)}),!0)}else b=P.integration.by_parts(R,L,f,m)}else if(D(Ke)){Oe=new o(1);var zt=0;for(je=Ke.length;zt<je;zt++)Oe=t.multiply(Oe,Ke[zt].fnTransform());Oe=t.expand(Oe),b=P.integrate(Oe,L,f)}else{ot=F(Ke);b=P.integrate(t.expand(ot),L,f)}}b=t.multiply(b,Ge)}}else b=t.multiply(R.clone(),t.parse(L));if(b)return b}catch(qt){if(!(qt instanceof C||qt instanceof e.exceptions.DivisionByZero))throw qt}return t.symfunction("integrate",[r,u])}),!1))},defint:function(n,r,i,a){a=a||"x";var s,u,c=function(e,n,r){try{return t.parse(e,n)}catch(i){return P.Limit.limit(e,a,r)}},l=e.Utils.variables(n),h=n.hasTrig();if(1===l.length&&(a=l[0]),h||(u=P.integrate(n,a)),h||u.hasIntegral())if(1===l.length&&r.isConstant()&&i.isConstant()){var p=e.Utils.build(n);s=new o(e.Math2.num_integrate(p,Number(r),Number(i)))}else s=t.symfunction("defint",[n,r,i,a]);else{var f,m,d={},g={};d[a]=i,g[a]=r,f=c(u,d,i),m=c(u,g,r),s=t.subtract(f,m)}return s},Limit:{interval:function(e,n){return t.parse(h("[{0}, {1}]",e,n))},diverges:function(){return P.Limit.interval("-Infinity","Infinity")},divide:function(n,r,a,s,u){if(!(u++>i.max_lim_depth)){n.clone();var c=r.clone();if("abs"===r.fname){var l=n.sign(),h=s.sign();if(s.isInfinity)return t.multiply(new o(l),new o(h));if(s.equals(0)){var p=t.parse(n.multiplier),m=t.parse(r.multiplier);return t.divide(t.multiply(p,P.Limit.interval("-1","1")),m)}P.Limit.diverges()}var d=function(t){if(e.Utils.isVector(t)){for(var n=0;n<t.elements.length;n++)if(!t.elements[n].isInfinity)return!1;return!0}return t.isInfinity},g=function(t,n){return!e.Utils.isVector(t)&&t.equals(n)};do{var v=f(P.Limit.limit(n.clone(),a,s,u)),y=f(P.Limit.limit(r.clone(),a,s,u)),x=d(v)&&d(y)||g(v,0)&&g(y,0);if(x){var b=P.diff(n.clone(),a),w=P.diff(r.clone(),a),S=t.expand(t.divide(b,w));n=S.getNum(),r=S.getDenom()}}while(x);var T=y.equals(0),_=Number(c.power);return s.isConstant(!0)&&T?o.infinity(e.Utils.even(_)&&v.lessThan(0)?-1:void 0):T?P.Limit.diverges():t.divide(v,y)}},rewriteToLog:function(e){var n=e.power.clone();return e.toLinear(),t.pow(new o("e"),t.multiply(n,t.symfunction(i.LOG+"",[e])))},getSubbed:function(e,t,n){var r;e.group===x&&(e=P.rewriteToLog(e));try{r=e.sub(t,n)}catch(i){r=e}return r},isInterval:function(t){return e.Utils.isVector(t)},isConvergent:function(e){return!(P.Limit.isInterval(e)&&e.elements[0].isInfinity&&e.elements[1].isInfinity||e.containsFunction("limit"))},limit:function(n,r,a,u){if(n=e.Algebra.Simplify.simplify(n),u=u||1,!(u++>i.max_lim_depth)){var c=t.parse(n.multiplier);n.toUnitMultiplier();try{var l;if(n.isConstant(!0))l=n;else{var p={};p[r]=a;try{var m=t.parse(n.sub(r,a),p);(m.isConstant(!0)||m.isInfinity)&&(l=m)}catch(J){}if(!l){var g=n.getNum(),v=n.getDenom();if(v.isConstant(!0)){if(n.group===x){var b=n.clone().toLinear(),S=(n.power.clone(),b.getNum()),E=b.getDenom(),k=e.Utils.decompose_fn(E,r,!0);if(S.group===d&&S.multiplier.isOne()&&k.ax.group===d&&k.b.isConstant(!0)&&k.a.isOne()&&k.b.isConstant(!0))l=t.parse(h("(1/e^({0}))",k.b));else{var M=P.Limit.rewriteToLog(n.clone()),N=M.power.clone(),I=M.clone().toLinear(),C=P.Limit.limit(I,r,a,u),D=P.Limit.limit(N,r,a,u);l=t.pow(C,D)}}else if(n.group===s&&1===n.args.length){var L,R=P.Limit.limit(n.args[0],r,a,u);if(e.Utils.isVector(R))return l=R.map((function(e){return n.clone().args[0]=e,P.Limit.limit(t.symfunction(n.fname,[e]),r,a,u)})),t.multiply(c,l);if(R.isConstant(!0)){var O=t.symfunction(n.fname,[R]);try{f(O),L=!0}catch(J){L=!1}}if(L)l=O;else if(P.Limit.isConvergent(R))if(n.fname===w)switch(R.toString()){case"0":l=o.infinity().negate();break;case"Infinity":case"-Infinity":l=o.infinity()}else if(n.fname!==_&&n.fname!==T||!a.isInfinity){if(n.fname===A){var F=n.args[0],U=F.getNum(),z=F.getDenom(),V=U.toUnitMultiplier();(a.isInfinity||V.equals("pi")&&z.equals(2))&&(l=divergent())}else if(n.fname===i.FACTORIAL&&R.isInfinity)return o.infinity()}else l=P.Limit.interval(-1,1)}else if(n.group===d){if(n.power>0)return t.parse(n,p);l=e.Utils.even(n.power)?o.infinity():P.Limit.diverges()}else if(n.group===y){var q,G;b=(j=n.collectSymbols().sort((function(e,t){return e.group-t.group}))).pop();for(q=f(P.Limit.limit(b,r,a,u));j.length;){var B=j.pop();G=f(P.Limit.limit(B,r,a,u)),q.isInfinity||!P.Limit.isConvergent(q)&&G.equals(0)||q.equals(0)&&P.Limit.isConvergent(G)?(B.containsFunction(w)&&(B=[b,b=B][0]),B.invert(),q=P.Limit.divide(b,B,r,a,u)):(q=t.multiply(q,G),b=t.multiply(b,B))}l=q}else if(n.isComposite()){var K;n.isLinear()||(n=t.expand(n)),l=new o(0);for(var j=n.collectSymbols().sort((function(e,t){return t.group-e.group})),H=[],W=new o(0),X=0,Z=j.length;X<Z;X++){(Y=j[X].clone()).group===s||Y.group===y&&Y.hasFunc()?W=t.add(W,Y):H.push(Y)}H.unshift(W),1!==H.length&&(j=H);for(X=0,Z=j.length;X<Z;X++){var Y=j[X];try{K=P.Limit.limit(Y,r,a,u)}catch(J){K=P.Limit.diverges()}try{l=t.add(l,K)}catch(J){if(u++>i.max_lim_depth)return;l=P.Limit.limit(P.diff(n,r),r,a,u)}}}}else l=P.Limit.divide(g,v,r,a,u)}}l||(l=t.symfunction("limit",[n,r,a]))}catch(J){l=t.symfunction("limit",[n,r,a])}return t.multiply(c,l)}}},Fresnel:{S:function(e){return e.isConstant(!0)?P.defint(t.parse("sin(pi*x^2/2)"),o(0),e,"x"):t.symfunction("S",arguments)},C:function(e){return e.isConstant(!0)?P.defint(t.parse("cos(pi*x^2/2)"),o(0),e,"x"):t.symfunction("C",arguments)}}};r.register([{name:"diff",visible:!0,numargs:[1,3],build:function(){return P.diff}},{name:"sum",visible:!0,numargs:4,build:function(){return P.sum}},{name:"product",visible:!0,numargs:4,build:function(){return P.product}},{name:"integrate",visible:!0,numargs:[1,2],build:function(){return P.integrate}},{name:"defint",visible:!0,numargs:[3,4],build:function(){return P.defint}},{name:"S",visible:!0,numargs:1,build:function(){return P.Fresnel.S}},{name:"C",visible:!0,numargs:1,build:function(){return P.Fresnel.C}},{name:"limit",visible:!0,numargs:[3,4],build:function(){return P.Limit.limit}}]),r.api()}()},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){"use strict";var r,i,a;i=[],void 0===(a="function"===typeof(r=function(){function e(){return!0}function t(){return!1}function n(){}return function r(){var i=[{name:"number",test:function(e){return"number"===typeof e}},{name:"string",test:function(e){return"string"===typeof e}},{name:"boolean",test:function(e){return"boolean"===typeof e}},{name:"Function",test:function(e){return"function"===typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"===typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],a={name:"any",test:e},s=[],o=[],u={types:i,conversions:o,ignore:s};function c(e){var t=z(u.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return a;var n=z(u.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(n?'. Did you mean "'+n.name+'"?':""))}function l(e){return e===a?999:u.types.indexOf(e)}function h(e){var t=z(u.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function p(e){return e.map((function(e){var t=e.types.map(b);return(e.restParam?"...":"")+t.join("|")})).join(",")}function f(e,t){var n=0===e.indexOf("..."),r=(n?e.length>3?e.slice(3):"any":e).split("|").map(D).filter(L).filter(C),i=function(e,t){var n={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||n[e.from]||(n[e.from]=e)})),Object.keys(n).map((function(e){return n[e]}))}(t,r),a=r.map((function(e){var t=c(e);return{name:e,typeIndex:l(t),test:t.test,conversion:null,conversionIndex:-1}})),s=i.map((function(e){var n=c(e.from);return{name:e.from,typeIndex:l(n),test:n.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:a.concat(s),restParam:n}}function m(e){var t=F(e);return!!t&&t.restParam}function d(e){return e.types.some((function(e){return null!=e.conversion}))}function g(t){if(t&&0!==t.types.length){if(1===t.types.length)return c(t.types[0].name).test;if(2===t.types.length){var n=c(t.types[0].name).test,r=c(t.types[1].name).test;return function(e){return n(e)||r(e)}}var i=t.types.map((function(e){return c(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function v(e){var t,n,r,i;if(m(e)){var a=(t=(i=e,i.slice(0,i.length-1)).map(g)).length,s=g(F(e));return function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return function(e){for(var t=a;t<e.length;t++)if(!s(e[t]))return!1;return!0}(e)&&e.length>=a+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=g(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=g(e[0]),r=g(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(g),function(e){for(var n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function y(e,t){return t<e.params.length?e.params[t]:m(e.params)?F(e.params):null}function x(e,t,n){var r=y(e,t);return(r?n?r.types.filter(w):r.types:[]).map(b)}function b(e){return e.name}function w(e){return null===e.conversion||void 0===e.conversion}function S(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return Object.keys(t)}(V(e,(function(e){return x(e,t,!1)})));return-1!==n.indexOf("any")?["any"]:n}function T(e,t,n){var r,i,a,s=e||"unnamed",o=n;for(a=0;a<t.length;a++){var u=o.filter((function(e){var n=g(y(e,a));return(a<e.params.length||m(e.params))&&n(t[a])}));if(0===u.length){if((i=S(o,a)).length>0){var c=h(t[a]);return(r=new TypeError("Unexpected type of argument in function "+s+" (expected: "+i.join(" or ")+", actual: "+c+", index: "+a+")")).data={category:"wrongType",fn:s,index:a,actual:c,expected:i},r}}else o=u}var l=o.map((function(e){return m(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,l))return i=S(o,a),(r=new TypeError("Too few arguments in function "+s+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:s,index:t.length,expected:i},r;var p=Math.max.apply(null,l);return t.length>p?((r=new TypeError("Too many arguments in function "+s+" (expected: "+p+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:s,index:t.length,expectedLength:p},r):((r=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+s+".")).data={category:"mismatch",actual:t.map(h)},r)}function _(e){for(var t=999,n=0;n<e.types.length;n++)w(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function A(e){for(var t=999,n=0;n<e.types.length;n++)w(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function E(e,t){var n;return 0!==(n=e.restParam-t.restParam)||0!==(n=d(e)-d(t))||0!==(n=_(e)-_(t))?n:A(e)-A(t)}function k(e,t){var n,r,i=Math.min(e.params.length,t.params.length);if(0!==(r=e.params.some(d)-t.params.some(d)))return r;for(n=0;n<i;n++)if(0!==(r=d(e.params[n])-d(t.params[n])))return r;for(n=0;n<i;n++)if(0!==(r=E(e.params[n],t.params[n])))return r;return e.params.length-t.params.length}function M(e){var t,n,r,i,a=[],s=[];switch(e.types.forEach((function(e){e.conversion&&(a.push(c(e.conversion.from).test),s.push(e.conversion.convert))})),s.length){case 0:return function(e){return e};case 1:return t=a[0],r=s[0],function(e){return t(e)?r(e):e};case 2:return t=a[0],n=a[1],r=s[0],i=s[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(var t=0;t<s.length;t++)if(a[t](e))return s[t](e);return e}}}function N(e,t){return function e(n,r,i){if(r<n.length){var a,s=n[r],o=t?s.types.filter(w):s.types;if(s.restParam){var u=o.filter(w);a=u.length<o.length?[u,o]:[o]}else a=o.map((function(e){return[e]}));return V(a,(function(t){return e(n,r+1,i.concat([t]))}))}return[i.map((function(e,t){return{types:e,restParam:t===n.length-1&&m(n)}}))]}(e,0,[])}function I(e,r){if(0===Object.keys(r).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(r).map((function(e){return function(e,t,n){var r=[];return""!==e.trim()&&(r=e.split(",").map(D).map((function(e,t,r){var i=f(e,n);if(i.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),r.some(O)?null:{params:r,fn:t}}(e,r[e],u.conversions)})).filter(R).forEach((function(e){var t=z(i,(function(t){return function(e,t){for(var n=Math.max(e.params.length,t.params.length),r=0;r<n;r++)if(!U(x(e,r,!0),x(t,r,!0)))return!1;var i=e.params.length,a=t.params.length,s=m(e.params),o=m(t.params);return s?o?i===a:a>=i:o?i>=a:i===a}(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+p(t.params)+'" and "'+p(e.params)+'".');i.push(e)}));var a=V(i,(function(e){return(e?N(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(R);a.sort(k);var s=a[0]&&a[0].params.length<=2&&!m(a[0].params),o=a[1]&&a[1].params.length<=2&&!m(a[1].params),c=a[2]&&a[2].params.length<=2&&!m(a[2].params),l=a[3]&&a[3].params.length<=2&&!m(a[3].params),h=a[4]&&a[4].params.length<=2&&!m(a[4].params),y=a[5]&&a[5].params.length<=2&&!m(a[5].params),b=s&&o&&c&&l&&h&&y,w=a.map((function(e){return v(e.params)})),S=s?g(a[0].params[0]):t,_=o?g(a[1].params[0]):t,A=c?g(a[2].params[0]):t,E=l?g(a[3].params[0]):t,I=h?g(a[4].params[0]):t,C=y?g(a[5].params[0]):t,L=s?g(a[0].params[1]):t,F=o?g(a[1].params[1]):t,q=c?g(a[2].params[1]):t,G=l?g(a[3].params[1]):t,B=h?g(a[4].params[1]):t,K=y?g(a[5].params[1]):t,j=a.map((function(e){return function(e,t){var n=t;if(e.some(d)){var r=m(e),i=e.map(M);n=function(){for(var e=[],n=r?arguments.length-1:arguments.length,a=0;a<n;a++)e[a]=i[a](arguments[a]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(null,e)}}var a=n;if(m(e)){var s=e.length-1;a=function(){return n.apply(null,P(arguments,0,s).concat([P(arguments,s)]))}}return a}(e.params,e.fn)})),H=s?j[0]:n,W=o?j[1]:n,X=c?j[2]:n,Z=l?j[3]:n,Y=h?j[4]:n,J=y?j[5]:n,Q=s?a[0].params.length:-1,$=o?a[1].params.length:-1,ee=c?a[2].params.length:-1,te=l?a[3].params.length:-1,ne=h?a[4].params.length:-1,re=y?a[5].params.length:-1,ie=b?6:0,ae=a.length,se=function(){for(var t=ie;t<ae;t++)if(w[t](arguments))return j[t].apply(null,arguments);throw T(e,arguments,a)},oe=function(e,t){return arguments.length===Q&&S(e)&&L(t)?H.apply(null,arguments):arguments.length===$&&_(e)&&F(t)?W.apply(null,arguments):arguments.length===ee&&A(e)&&q(t)?X.apply(null,arguments):arguments.length===te&&E(e)&&G(t)?Z.apply(null,arguments):arguments.length===ne&&I(e)&&B(t)?Y.apply(null,arguments):arguments.length===re&&C(e)&&K(t)?J.apply(null,arguments):se.apply(null,arguments)};try{Object.defineProperty(oe,"name",{value:e})}catch(ue){}return oe.signatures=function(e){var t={};return e.forEach((function(e){e.params.some(d)||N(e.params,!0).forEach((function(n){t[p(n)]=e.fn}))})),t}(a),oe}function C(e){return-1===u.ignore.indexOf(e)}function D(e){return e.trim()}function L(e){return!!e}function R(e){return null!==e}function O(e){return 0===e.types.length}function F(e){return e[e.length-1]}function P(e,t,n){return Array.prototype.slice.call(e,t,n)}function U(e,t){for(var n=0;n<e.length;n++)if(r=t,i=e[n],-1!==r.indexOf(i))return!0;var r,i;return!1}function z(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}function V(e,t){return Array.prototype.concat.apply([],e.map(t))}function q(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(("object"===typeof r.signatures||"string"===typeof r.signature)&&""!==r.name)if(""===t)t=r.name;else if(t!==r.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+r.name+")");throw i.data={actual:r.name,expected:t},i}}return t}function G(e){var t,n={};function r(e,r){if(n.hasOwnProperty(e)&&r!==n[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var i=0;i<e.length;i++){var a=e[i];if("object"===typeof a.signatures)for(var s in a.signatures)a.signatures.hasOwnProperty(s)&&(r(s,a.signatures[s]),n[s]=a.signatures[s]);else{if("string"!==typeof a.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;r(a.signature,a),n[a.signature]=a}}return n}return(u=I("typed",{"string, Object":I,Object:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return I(q(t),e)},"...Function":function(e){return I(q(e),G(e))},"string, ...Function":function(e,t){return I(e,G(t))}})).create=r,u.types=i,u.conversions=o,u.ignore=s,u.convert=function(e,t){var n=h(e);if(t===n)return e;for(var r=0;r<u.conversions.length;r++){var i=u.conversions[r];if(i.from===n&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+n+" to "+t)},u.find=function(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var n;if("string"===typeof t){n=t.split(",");for(var r=0;r<n.length;r++)n[r]=n[r].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");n=t}var i=n.join(","),a=e.signatures[i];if(a)return a;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+n.join(", ")+"))")},u.addType=function(e,t){if(!e||"string"!==typeof e.name||"function"!==typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var n=0;n<u.types.length;n++)if("Object"===u.types[n].name)return void u.types.splice(n,0,e);u.types.push(e)},u.addConversion=function(e){if(!e||"string"!==typeof e.from||"string"!==typeof e.to||"function"!==typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(e)},u}()})?r.apply(t,i):r)||(e.exports=a)},function(e,t,n){"use strict";(function(t){var n=[],r="undefined"===typeof t?window:t,i=Math.pow(256,6),a=Math.pow(2,52),s=2*a,o=Math.random;function u(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<256;)s[i]=i++;for(i=0;i<256;i++)s[i]=s[a=255&a+e[i%n]+(t=s[i])],s[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,s=r.S;e--;)t=s[i=255&i+1],n=256*n+s[255&(s[i]=s[a=255&a+t])+(s[a]=t)];return r.i=i,r.j=a,n})(256)}function c(e,t){var n,r=[],i=(typeof e)[0];if(t&&"o"==i)for(n in e)try{r.push(c(e[n],t-1))}catch(a){}return r.length?r:"s"==i?e:e+"\0"}function l(e,t){for(var n,r=e+"",i=0;i<r.length;)t[255&i]=255&(n^=19*t[255&i])+r.charCodeAt(i++);return p(t)}function h(e){try{return r.crypto.getRandomValues(e=new Uint8Array(256)),p(e)}catch(t){return[+new Date,r,r.navigator&&r.navigator.plugins,r.screen,p(n)]}}function p(e){return String.fromCharCode.apply(0,e)}e.exports=function(t,r){if(r&&!0===r.global)return r.global=!1,Math.random=e.exports(t,r),r.global=!0,Math.random;var o=r&&r.entropy||!1,f=[],m=(l(c(o?[t,p(n)]:0 in arguments?t:h(),3),f),new u(f));return l(p(m.S),n),function(){for(var e=m.g(6),t=i,n=0;e<a;)e=256*(e+n),t*=256,n=m.g(1);for(;e>=s;)e/=2,t/=2,n>>>=1;return(e+n)/t}},e.exports.resetGlobal=function(){Math.random=o},l(Math.random(),n)}).call(this,n(35))},function(e,t,n){var r=n(17),i=n(8),a=n(18),s=n(20),o=n(21),u=n(22),c=n(24),l=n(29);e.exports=function e(t,n,r){function i(s,o){if(!n[s]){if(!t[s]){if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var a=!1,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){var r;r=this,function(e){"use strict";var t={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,"5module":n+" export import",6:n+" const class extends export import super"},i=/^in(stanceof)?$/,a="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",s="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",o=new RegExp("["+a+"]"),u=new RegExp("["+a+s+"]");a=s=null;var c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],l=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function h(e,t){for(var n=65536,r=0;r<t.length;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}}function p(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&o.test(String.fromCharCode(e)):!1!==t&&h(e,c)))}function f(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&(h(e,c)||h(e,l)))))}var m=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function d(e,t){return new m(e,{beforeExpr:!0,binop:t})}var g={beforeExpr:!0},v={startsExpr:!0},y={};function x(e,t){return void 0===t&&(t={}),t.keyword=e,y[e]=new m(e,t)}var b={num:new m("num",v),regexp:new m("regexp",v),string:new m("string",v),name:new m("name",v),eof:new m("eof"),bracketL:new m("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new m("]"),braceL:new m("{",{beforeExpr:!0,startsExpr:!0}),braceR:new m("}"),parenL:new m("(",{beforeExpr:!0,startsExpr:!0}),parenR:new m(")"),comma:new m(",",g),semi:new m(";",g),colon:new m(":",g),dot:new m("."),question:new m("?",g),arrow:new m("=>",g),template:new m("template"),invalidTemplate:new m("invalidTemplate"),ellipsis:new m("...",g),backQuote:new m("`",v),dollarBraceL:new m("${",{beforeExpr:!0,startsExpr:!0}),eq:new m("=",{beforeExpr:!0,isAssign:!0}),assign:new m("_=",{beforeExpr:!0,isAssign:!0}),incDec:new m("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new m("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:d("||",1),logicalAND:d("&&",2),bitwiseOR:d("|",3),bitwiseXOR:d("^",4),bitwiseAND:d("&",5),equality:d("==/!=/===/!==",6),relational:d("</>/<=/>=",7),bitShift:d("<</>>/>>>",8),plusMin:new m("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:d("%",10),star:d("*",10),slash:d("/",10),starstar:new m("**",{beforeExpr:!0}),_break:x("break"),_case:x("case",g),_catch:x("catch"),_continue:x("continue"),_debugger:x("debugger"),_default:x("default",g),_do:x("do",{isLoop:!0,beforeExpr:!0}),_else:x("else",g),_finally:x("finally"),_for:x("for",{isLoop:!0}),_function:x("function",v),_if:x("if"),_return:x("return",g),_switch:x("switch"),_throw:x("throw",g),_try:x("try"),_var:x("var"),_const:x("const"),_while:x("while",{isLoop:!0}),_with:x("with"),_new:x("new",{beforeExpr:!0,startsExpr:!0}),_this:x("this",v),_super:x("super",v),_class:x("class",v),_extends:x("extends",g),_export:x("export"),_import:x("import",v),_null:x("null",v),_true:x("true",v),_false:x("false",v),_in:x("in",{beforeExpr:!0,binop:7}),_instanceof:x("instanceof",{beforeExpr:!0,binop:7}),_typeof:x("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:x("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:x("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},w=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(w.source,"g");function T(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var _=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,A=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,E=Object.prototype,k=E.hasOwnProperty,M=E.toString;function N(e,t){return k.call(e,t)}var I=Array.isArray||function(e){return"[object Array]"===M.call(e)};function C(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var D=function(e,t){this.line=e,this.column=t};D.prototype.offset=function(e){return new D(this.line,this.column+e)};var L=function(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)};function R(e,t){for(var n=1,r=0;;){S.lastIndex=r;var i=S.exec(e);if(!(i&&i.index<t))return new D(n,t-r);++n,r=i.index+i[0].length}}var O={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function F(e){var t={};for(var n in O)t[n]=e&&N(e,n)?e[n]:O[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),I(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return I(t.onComment)&&(t.onComment=function(e,t){return function(n,r,i,a,s,o){var u={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(u.loc=new L(this,s,o)),e.ranges&&(u.range=[i,a]),t.push(u)}}(t,t.onComment)),t}function P(e,t){return 2|(e?4:0)|(t?8:0)}var U=function(e,n,i){this.options=e=F(e),this.sourceFile=e.sourceFile,this.keywords=C(r[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var a="";if(!0!==e.allowReserved){for(var s=e.ecmaVersion;!(a=t[s]);s--);"module"===e.sourceType&&(a+=" await")}this.reservedWords=C(a);var o=(a?a+" ":"")+t.strict;this.reservedWordsStrict=C(o),this.reservedWordsStrictBind=C(o+" "+t.strictBind),this.input=String(n),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(w).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},z={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};U.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},z.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},z.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},z.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},z.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},z.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},z.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},U.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},U.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n},U.parse=function(e,t){return new this(t,e).parse()},U.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()},U.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(U.prototype,z);var V=U.prototype,q=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function G(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}V.strictDirective=function(e){for(;;){A.lastIndex=e,e+=A.exec(this.input)[0].length;var t=q.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,A.lastIndex=e,e+=A.exec(this.input)[0].length,";"===this.input[e]&&e++}},V.eat=function(e){return this.type===e&&(this.next(),!0)},V.isContextual=function(e){return this.type===b.name&&this.value===e&&!this.containsEsc},V.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},V.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},V.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||w.test(this.input.slice(this.lastTokEnd,this.start))},V.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},V.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},V.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},V.expect=function(e){this.eat(e)||this.unexpected()},V.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},V.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},V.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},V.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},V.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var B=U.prototype;B.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==b.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var K={kind:"loop"},j={kind:"switch"};B.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;A.lastIndex=this.pos;var t=A.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(91===r)return!0;if(e)return!1;if(123===r)return!0;if(p(r,!0)){for(var a=n+1;f(this.input.charCodeAt(a),!0);)++a;var s=this.input.slice(n,a);if(!i.test(s))return!0}return!1},B.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;A.lastIndex=this.pos;var e=A.exec(this.input),t=this.pos+e[0].length;return!w.test(this.input.slice(this.pos,t))&&"function"===this.input.slice(t,t+8)&&(t+8===this.input.length||!f(this.input.charAt(t+8)))},B.parseStatement=function(e,t,n){var r,i=this.type,a=this.startNode();switch(this.isLet(e)&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(a,i.keyword);case b._debugger:return this.parseDebuggerStatement(a);case b._do:return this.parseDoStatement(a);case b._for:return this.parseForStatement(a);case b._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case b._class:return e&&this.unexpected(),this.parseClass(a,!0);case b._if:return this.parseIfStatement(a);case b._return:return this.parseReturnStatement(a);case b._switch:return this.parseSwitchStatement(a);case b._throw:return this.parseThrowStatement(a);case b._try:return this.parseTryStatement(a);case b._const:case b._var:return r=r||this.value,e&&"var"!==r&&this.unexpected(),this.parseVarStatement(a,r);case b._while:return this.parseWhileStatement(a);case b._with:return this.parseWithStatement(a);case b.braceL:return this.parseBlock(!0,a);case b.semi:return this.parseEmptyStatement(a);case b._export:case b._import:if(this.options.ecmaVersion>10&&i===b._import){A.lastIndex=this.pos;var s=A.exec(this.input),o=this.pos+s[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var u=this.value,c=this.parseExpression();return i===b.name&&"Identifier"===c.type&&this.eat(b.colon)?this.parseLabeledStatement(a,u,c,e):this.parseExpressionStatement(a,c)}},B.parseBreakContinueStatement=function(e,t){var n="break"===t;this.next(),this.eat(b.semi)||this.insertSemicolon()?e.label=null:this.type!==b.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(e.label&&n)break}}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")},B.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},B.parseDoStatement=function(e){return this.next(),this.labels.push(K),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(b._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},B.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(K),this.enterScope(0),this.expect(b.parenL),this.type===b.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===b._var||this.type===b._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var a=new G,s=this.parseExpression(!0,a);return this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===b._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(s,!1,a),this.checkLVal(s),this.parseForIn(e,s)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,s))},B.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,W|(n?0:X),!1,t)},B.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(b._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},B.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},B.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(b.braceL),this.labels.push(j),this.enterScope(0);for(var n=!1;this.type!==b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(b.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},B.parseThrowStatement=function(e){return this.next(),w.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var H=[];B.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===b._catch){var t=this.startNode();if(this.next(),this.eat(b.parenL)){t.param=this.parseBindingAtom();var n="Identifier"===t.param.type;this.enterScope(n?32:0),this.checkLVal(t.param,n?4:2),this.expect(b.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(b._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},B.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},B.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(K),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},B.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},B.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},B.parseLabeledStatement=function(e,t,n,r){for(var i=0,a=this.labels;i<a.length;i+=1)a[i].name===t&&this.raise(n.start,"Label '"+t+"' is already declared");for(var s=this.type.isLoop?"loop":this.type===b._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var u=this.labels[o];if(u.statementStart!==e.start)break;u.statementStart=this.start,u.kind=s}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")},B.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},B.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(b.braceL),e&&this.enterScope(0);!this.eat(b.braceR);){var n=this.parseStatement(null);t.body.push(n)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},B.parseFor=function(e,t){return e.init=t,this.expect(b.semi),e.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),e.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},B.parseForIn=function(e,t){var n=this.type===b._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(b.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")},B.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(b.eq)?r.init=this.parseMaybeAssign(t):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||t&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return e},B.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var W=1,X=2;B.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===b.star&&t&X&&this.unexpected(),e.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&W&&(e.id=4&t&&this.type!==b.name?null:this.parseIdent(),!e.id||t&X||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(P(e.async,e.generator)),t&W||(e.id=this.type===b.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(e,t&W?"FunctionDeclaration":"FunctionExpression")},B.parseFunctionParams=function(e){this.expect(b.parenL),e.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},B.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),i=!1;for(r.body=[],this.expect(b.braceL);!this.eat(b.braceR);){var a=this.parseClassElement(null!==e.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(i&&this.raise(a.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(r,"ClassBody"),this.strict=n,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},B.parseClassElement=function(e){var t=this;if(this.eat(b.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var i=t.start,a=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===b.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(i,a),n.key.name=e,t.finishNode(n.key,"Identifier"),!1))};n.kind="method",n.static=r("static");var i=this.eat(b.star),a=!1;i||(this.options.ecmaVersion>=8&&r("async",!0)?(a=!0,i=this.options.ecmaVersion>=9&&this.eat(b.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var s=n.key,o=!1;return n.computed||n.static||!("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)?n.static&&"Identifier"===s.type&&"prototype"===s.name&&this.raise(s.start,"Classes may not have a static property named prototype"):("method"!==n.kind&&this.raise(s.start,"Constructor can't have get/set modifier"),i&&this.raise(s.start,"Constructor can't be a generator"),a&&this.raise(s.start,"Constructor can't be an async method"),n.kind="constructor",o=e),this.parseClassMethod(n,i,a,o),"get"===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,"getter should have no params"),"set"===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),"set"===n.kind&&"RestElement"===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n},B.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")},B.parseClassId=function(e,t){this.type===b.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},B.parseClassSuper=function(e){e.superClass=this.eat(b._extends)?this.parseExprSubscripts():null},B.parseExport=function(e,t){if(this.next(),this.eat(b.star))return this.expectContextual("from"),this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(t,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,4|W,!1,n)}else if(this.type===b._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==b.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var a=0,s=e.specifiers;a<s.length;a+=1){var o=s[a];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},B.checkExport=function(e,t,n){e&&(N(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)},B.checkPatternExport=function(e,t){var n=t.type;if("Identifier"===n)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===n)for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if("ArrayPattern"===n)for(var s=0,o=t.elements;s<o.length;s+=1){var u=o[s];u&&this.checkPatternExport(e,u)}else"Property"===n?this.checkPatternExport(e,t.value):"AssignmentPattern"===n?this.checkPatternExport(e,t.left):"RestElement"===n?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(e,t.expression)},B.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}},B.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},B.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t},B.parseImport=function(e){return this.next(),this.type===b.string?(e.specifiers=H,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},B.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return e}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(b.braceL);!this.eat(b.braceR);){if(t)t=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},B.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},B.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"===typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Z=U.prototype;Z.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e},Z.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];6===this.options.ecmaVersion&&t&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return e},Z.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Z.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==b.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case b.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case b.braceL:return this.parseObj(!0)}return this.parseIdent()},Z.parseBindingList=function(e,t,n){for(var r=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(b.comma),t&&this.type===b.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===b.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),r.push(s)}return r},Z.parseBindingListItem=function(e){return e},Z.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Z.checkLVal=function(e,t,n){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(N(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLVal(a,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var s=0,o=e.elements;s<o.length;s+=1){var u=o[s];u&&this.checkLVal(u,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var Y=U.prototype;Y.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type)&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r,i=e.key;switch(i.type){case"Identifier":r=i.name;break;case"Literal":r=String(i.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===a&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=i.start):this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var s=t[r="$"+r];s?("init"===a?this.strict&&s.init||s.get||s.set:s.init||s[a])&&this.raiseRecoverable(i.start,"Redefinition of property"):s=t[r]={init:!1,get:!1,set:!1},s[a]=!0}}},Y.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===b.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(b.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i},Y.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,a=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new G,r=!0);var s=this.start,o=this.startLoc;this.type!==b.parenL&&this.type!==b.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,s,o)),this.type.isAssign){var c=this.startNodeAt(s,o);return c.operator=this.value,c.left=this.type===b.eq?this.toAssignable(u,!1,t):u,r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.left.start&&(t.shorthandAssign=-1),this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),u},Y.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(b.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(b.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i},Y.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===n&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,n,r,-1,e)},Y.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(null!=a&&(!i||this.type!==b._in)&&a>r){var s=this.type===b.logicalOR||this.type===b.logicalAND,o=this.value;this.next();var u=this.start,c=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,a,i),h=this.buildBinary(t,n,e,l,o,s);return this.parseExprOp(h,t,n,r,i)}return e},Y.buildBinary=function(e,t,n,r,i,a){var s=this.startNodeAt(e,t);return s.left=n,s.operator=i,s.right=r,this.finishNode(s,a?"LogicalExpression":"BinaryExpression")},Y.parseMaybeUnary=function(e,t){var n,r=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))n=this.parseAwait(),t=!0;else if(this.type.prefix){var a=this.startNode(),s=this.type===b.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):t=!0,n=this.finishNode(a,s?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,i);o.operator=this.value,o.prefix=!1,o.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(b.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},Y.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var i=this.parseSubscripts(r,t,n);return e&&"MemberExpression"===i.type&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1)),i},Y.parseSubscripts=function(e,t,n,r){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var a=this.parseSubscript(e,t,n,r,i);if(a===e||"ArrowFunctionExpression"===a.type)return a;e=a}},Y.parseSubscript=function(e,t,n,r,i){var a=this.eat(b.bracketL);if(a||this.eat(b.dot)){var s=this.startNodeAt(t,n);s.object=e,s.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),s.computed=!!a,a&&this.expect(b.bracketR),e=this.finishNode(s,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var o=new G,u=this.yieldPos,c=this.awaitPos,l=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,o);if(i&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=c,this.awaitIdentPos=l,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(o,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=c||this.awaitPos,this.awaitIdentPos=l||this.awaitIdentPos;var p=this.startNodeAt(t,n);p.callee=e,p.arguments=h,e=this.finishNode(p,"CallExpression")}else if(this.type===b.backQuote){var f=this.startNodeAt(t,n);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},Y.parseExprAtom=function(e){this.type===b.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case b._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==b.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==b.dot&&this.type!==b.bracketL&&this.type!==b.parenL&&this.unexpected(),this.finishNode(t,"Super");case b._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case b.name:var r=this.start,i=this.startLoc,a=this.containsEsc,s=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===s.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.parseFunction(this.startNodeAt(r,i),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(r,i),[s],!1);if(this.options.ecmaVersion>=8&&"async"===s.name&&this.type===b.name&&!a)return s=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,i),[s],!0)}return s;case b.regexp:var o=this.value;return(t=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},t;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(t=this.startNode()).value=this.type===b._null?null:this.type===b._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case b.parenL:var u=this.start,c=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(c)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),c;case b.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(b.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case b.braceL:return this.parseObj(!1,e);case b._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();case b._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},Y.parseExprImport=function(){var e=this.startNode();switch(this.next(),this.type){case b.parenL:return this.parseDynamicImport(e);default:this.unexpected()}},Y.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(b.parenR)){var t=this.start;this.eat(b.comma)&&this.eat(b.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")},Y.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},Y.parseParenExpression=function(){this.expect(b.parenL);var e=this.parseExpression();return this.expect(b.parenR),e},Y.parseParenAndDistinguishExpression=function(e){var t,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,s=this.start,o=this.startLoc,u=[],c=!0,l=!1,h=new G,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(c?c=!1:this.expect(b.comma),i&&this.afterTrailingComma(b.parenR,!0)){l=!0;break}if(this.type===b.ellipsis){a=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,h,this.parseParenItem))}var m=this.start,d=this.startLoc;if(this.expect(b.parenR),e&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(n,r,u);u.length&&!l||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((t=this.startNodeAt(s,o)).expressions=u,this.finishNodeAt(t,"SequenceExpression",m,d)):t=u[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},Y.parseParenItem=function(e){return e},Y.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var J=[];Y.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||n)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc,a=this.type===b._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,i,!0),a&&"ImportExpression"===e.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(b.parenL)?e.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):e.arguments=J,this.finishNode(e,"NewExpression")},Y.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===b.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===b.backQuote,this.finishNode(n,"TemplateElement")},Y.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===b.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(b.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(b.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")},Y.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===b.name||this.type===b.num||this.type===b.string||this.type===b.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===b.star)&&!w.test(this.input.slice(this.lastTokEnd,this.start))},Y.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(b.braceR))break;var a=this.parseProperty(e,t);e||this.checkPropClash(a,i,t),n.properties.push(a)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")},Y.parseProperty=function(e,t){var n,r,i,a,s=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(b.ellipsis))return e?(s.argument=this.parseIdent(!1),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(s,"RestElement")):(this.type===b.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),s.argument=this.parseMaybeAssign(!1,t),this.type===b.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(s,"SpreadElement"));this.options.ecmaVersion>=6&&(s.method=!1,s.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(n=this.eat(b.star)));var o=this.containsEsc;return this.parsePropertyName(s),!e&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(s)?(r=!0,n=this.options.ecmaVersion>=9&&this.eat(b.star),this.parsePropertyName(s,t)):r=!1,this.parsePropertyValue(s,e,n,r,i,a,t,o),this.finishNode(s,"Property")},Y.parsePropertyValue=function(e,t,n,r,i,a,s,o){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===b.comma||this.type===b.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,a,e.key):this.type===b.eq&&s?(s.shorthandAssign<0&&(s.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var c=e.value.start;"get"===e.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},Y.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(b.bracketR),e.key;e.computed=!1}return e.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},Y.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},Y.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,s=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|P(t,r.generator)|(n?128:0)),this.expect(b.parenL),r.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=s,this.finishNode(r,"FunctionExpression")},Y.parseArrowExpression=function(e,t,n){var r=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|P(n,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")},Y.parseFunctionBody=function(e,t,n){var r=t&&this.type!==b.braceL,i=this.strict,a=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!s||(a=this.strictDirective(this.end))&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!i&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},Y.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1)if("Identifier"!==n[t].type)return!1;return!0},Y.checkParams=function(e,t){for(var n={},r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLVal(a,1,t?null:n)}},Y.parseExprList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(b.comma),t&&this.afterTrailingComma(e))break;var s=void 0;n&&this.type===b.comma?s=null:this.type===b.ellipsis?(s=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):s=this.parseMaybeAssign(!1,r),i.push(s)}return i},Y.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;this.inGenerator&&"yield"===r&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))},Y.parseIdent=function(e,t){var n=this.startNode();return this.type===b.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},Y.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===b.semi||this.canInsertSemicolon()||this.type!==b.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(b.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},Y.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")};var Q=U.prototype;Q.raise=function(e,t){var n=R(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},Q.raiseRecoverable=Q.raise,Q.curPosition=function(){if(this.options.locations)return new D(this.curLine,this.pos-this.lineStart)};var $=U.prototype,ee=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};$.enterScope=function(e){this.scopeStack.push(new ee(e))},$.exitScope=function(){this.scopeStack.pop()},$.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},$.declareName=function(e,t,n){var r=!1;if(2===t){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t)this.currentScope().lexical.push(e);else if(3===t){var a=this.currentScope();r=this.treatFunctionsAsVar?a.lexical.indexOf(e)>-1:a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var o=this.scopeStack[s];if(o.lexical.indexOf(e)>-1&&!(32&o.flags&&o.lexical[0]===e)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(e)>-1){r=!0;break}if(o.var.push(e),this.inModule&&1&o.flags&&delete this.undefinedExports[e],3&o.flags)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")},$.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},$.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},$.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},$.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var te=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new L(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},ne=U.prototype;function re(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}ne.startNode=function(){return new te(this,this.start,this.startLoc)},ne.startNodeAt=function(e,t){return new te(this,e,t)},ne.finishNode=function(e,t){return re.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},ne.finishNodeAt=function(e,t,n,r){return re.call(this,e,t,n,r)};var ie=function(e,t,n,r,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!i},ae={b_stat:new ie("{",!1),b_expr:new ie("{",!0),b_tmpl:new ie("${",!1),p_stat:new ie("(",!1),p_expr:new ie("(",!0),q_tmpl:new ie("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new ie("function",!1),f_expr:new ie("function",!0),f_expr_gen:new ie("function",!0,!1,null,!0),f_gen:new ie("function",!1,!1,null,!0)},se=U.prototype;se.initialContext=function(){return[ae.b_stat]},se.braceIsBlock=function(e){var t=this.curContext();return t===ae.f_expr||t===ae.f_stat||(e!==b.colon||t!==ae.b_stat&&t!==ae.b_expr?e===b._return||e===b.name&&this.exprAllowed?w.test(this.input.slice(this.lastTokEnd,this.start)):e===b._else||e===b.semi||e===b.eof||e===b.parenR||e===b.arrow||(e===b.braceL?t===ae.b_stat:e!==b._var&&e!==b._const&&e!==b.name&&!this.exprAllowed):!t.isExpr)},se.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},se.updateContext=function(e){var t,n=this.type;n.keyword&&e===b.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ae.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ae.b_stat:ae.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(ae.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(e){var t=e===b._if||e===b._for||e===b._with||e===b._while;this.context.push(t?ae.p_stat:ae.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=b._class.updateContext=function(e){!e.beforeExpr||e===b.semi||e===b._else||e===b._return&&w.test(this.input.slice(this.lastTokEnd,this.start))||(e===b.colon||e===b.braceL)&&this.curContext()===ae.b_stat?this.context.push(ae.f_stat):this.context.push(ae.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===ae.q_tmpl?this.context.pop():this.context.push(ae.q_tmpl),this.exprAllowed=!1},b.star.updateContext=function(e){if(e===b._function){var t=this.context.length-1;this.context[t]===ae.f_expr?this.context[t]=ae.f_expr_gen:this.context[t]=ae.f_gen}this.exprAllowed=!0},b.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==b.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var oe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ue=oe+" Extended_Pictographic",ce={9:oe,10:ue,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},le="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",he="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",pe=he+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",fe={9:he,10:pe,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},me={};function de(e){var t=me[e]={binary:C(ce[e]+" "+le),nonBinary:{General_Category:C(le),Script:C(fe[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}de(9),de(10),de(11);var ge=U.prototype,ve=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=me[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ye(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function xe(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function be(e){return e>=65&&e<=90||e>=97&&e<=122}function we(e){return be(e)||95===e}function Se(e){return we(e)||Te(e)}function Te(e){return e>=48&&e<=57}function _e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Ae(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Ee(e){return e>=48&&e<=55}ve.prototype.reset=function(e,t,n){var r=-1!==n.indexOf("u");this.start=0|e,this.source=t+"",this.flags=n,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ve.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},ve.prototype.at=function(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);if(!this.switchU||r<=55295||r>=57344||e+1>=n)return r;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(r<<10)+i-56613888:r},ve.prototype.nextIndex=function(e){var t=this.source,n=t.length;if(e>=n)return n;var r,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=n||(r=t.charCodeAt(e+1))<56320||r>57343?e+1:e+2},ve.prototype.current=function(){return this.at(this.pos)},ve.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ve.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ve.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},ge.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var i=n.charAt(r);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(i,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},ge.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ge.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];-1===e.groupNames.indexOf(r)&&e.raise("Invalid named capture referenced")}},ge.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ge.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ge.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ge.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},ge.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ge.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ge.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1},ge.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ge.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ge.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ge.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ge.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ge.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ge.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!xe(t)&&(e.lastIntValue=t,e.advance(),!0)},ge.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!xe(n);)e.advance();return e.pos!==t},ge.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},ge.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ge.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ge.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ye(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ye(e.lastIntValue);return!0}return!1},ge.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return p(e,!0)||36===e||95===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ge.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),function(e){return f(e,!0)||36===e||95===e||8204===e||8205===e}(n)?(e.lastIntValue=n,!0):(e.pos=t,!1)},ge.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ge.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1},ge.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ge.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ge.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ge.regexp_eatZero=function(e){return 48===e.current()&&!Te(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ge.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ge.regexp_eatControlLetter=function(e){var t=e.current();return!!be(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ge.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,n=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var r=e.lastIntValue;if(e.switchU&&r>=55296&&r<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=1024*(r-55296)+(a-56320)+65536,!0}e.pos=i,e.lastIntValue=r}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&(t=e.lastIntValue)>=0&&t<=1114111)return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=n}return!1},ge.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},ge.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ge.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ge.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ge.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){N(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")},ge.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},ge.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";we(t=e.current());)e.lastStringValue+=ye(t),e.advance();return""!==e.lastStringValue},ge.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Se(t=e.current());)e.lastStringValue+=ye(t),e.advance();return""!==e.lastStringValue},ge.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ge.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ge.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;!e.switchU||-1!==t&&-1!==n||e.raise("Invalid character class"),-1!==t&&-1!==n&&t>n&&e.raise("Range out of order in character class")}}},ge.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||Ee(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},ge.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ge.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Te(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},ge.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ge.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Te(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},ge.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;_e(n=e.current());)e.lastIntValue=16*e.lastIntValue+Ae(n),e.advance();return e.pos!==t},ge.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*n+e.lastIntValue:e.lastIntValue=8*t+n}else e.lastIntValue=t;return!0}return!1},ge.regexp_eatOctalDigit=function(e){var t=e.current();return Ee(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ge.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!_e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Ae(i),e.advance()}return!0};var ke=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new L(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Me=U.prototype;function Ne(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Me.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ke(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Me.getToken=function(){return this.next(),new ke(this)},"undefined"!==typeof Symbol&&(Me[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===b.eof,value:t}}}}),Me.curContext=function(){return this.context[this.context.length-1]},Me.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Me.readToken=function(e){return p(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Me.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Me.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(S.lastIndex=n;(e=S.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},Me.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!T(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())},Me.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&_.test(String.fromCharCode(e))))break e;++this.pos}}},Me.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},Me.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},Me.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},Me.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++n,r=b.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(b.assign,n+1):this.finishOp(r,n)},Me.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?b.logicalOR:b.logicalAND,2):61===t?this.finishOp(b.assign,2):this.finishOp(124===e?b.bitwiseOR:b.bitwiseAND,1)},Me.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},Me.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!w.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(b.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},Me.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(b.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Me.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===e?b.eq:b.prefix,1)},Me.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 63:return++this.pos,this.finishToken(b.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(b.prefix,1)}this.raise(this.pos,"Unexpected character '"+Ne(e)+"'")},Me.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},Me.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(w.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if("["===r)t=!0;else if("]"===r&&t)t=!1;else if("/"===r&&!t)break;e="\\"===r}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(a);var o=this.regexpState||(this.regexpState=new ve(this));o.reset(n,i,s),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(i,s)}catch(c){}return this.finishToken(b.regexp,{pattern:i,flags:s,value:u})},Me.readInt=function(e,t){for(var n=this.pos,r=0,i=0,a=null==t?1/0:t;i<a;++i){var s=this.input.charCodeAt(this.pos),o=void 0;if((o=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=e)break;++this.pos,r=r*e+o}return this.pos===n||null!=t&&this.pos-n!==t?null:r},Me.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return null==n&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n="undefined"!==typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,n)},Me.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var n=this.pos-t>=2&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&110===r){var i=this.input.slice(t,this.pos),a="undefined"!==typeof BigInt?BigInt(i):null;return++this.pos,p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,a)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=this.input.slice(t,this.pos),o=n?parseInt(s,8):parseFloat(s);return this.finishToken(b.num,o)},Me.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Me.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;92===r?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(T(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(b.string,t)};var Ie={};Me.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Ie)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Me.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ie;this.raise(e,t)},Me.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==b.template&&this.type!==b.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(b.template,e)):36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote));if(92===n)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(T(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Me.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(b.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Me.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ne(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return T(t)?"":String.fromCharCode(t)}},Me.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return null===n&&this.invalidStringToken(t,"Bad character escape sequence"),n},Me.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(f(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var s=this.readCodePoint();(t?p:f)(s,r)||this.invalidStringToken(a,"Invalid Unicode escape"),e+=Ne(s),n=this.pos}t=!1}return e+this.input.slice(n,this.pos)},Me.readWord=function(){var e=this.readWord1(),t=b.name;return this.keywords.test(e)&&(t=y[e]),this.finishToken(t,e)},U.acorn={Parser:U,version:"7.1.0",defaultOptions:O,Position:D,SourceLocation:L,getLineInfo:R,Node:te,TokenType:m,tokTypes:b,keywordTypes:y,TokContext:ie,tokContexts:ae,isIdentifierChar:f,isIdentifierStart:p,Token:ke,isNewLine:T,lineBreak:w,lineBreakG:S,nonASCIIwhitespace:_},e.Node=te,e.Parser=U,e.Position=D,e.SourceLocation=L,e.TokContext=ie,e.Token=ke,e.TokenType=m,e.defaultOptions=O,e.getLineInfo=R,e.isIdentifierChar=f,e.isIdentifierStart=p,e.isNewLine=T,e.keywordTypes=y,e.lineBreak=w,e.lineBreakG=S,e.nonASCIIwhitespace=_,e.parse=function(e,t){return U.parse(e,t)},e.parseExpressionAt=function(e,t,n){return U.parseExpressionAt(e,t,n)},e.tokContexts=ae,e.tokTypes=b,e.tokenizer=function(e,t){return U.tokenizer(e,t)},e.version="7.1.0",Object.defineProperty(e,"__esModule",{value:!0})}("object"===typeof n&&"undefined"!==typeof t?n:(r=r||self).acorn={})},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.contextName,o=void 0===r?"gl":r,u=n.throwGetError,c=n.useTrackablePrimitives,l=n.readPixelsFile,h=n.recording,p=void 0===h?[]:h,f=n.variables,m=void 0===f?{}:f,d=n.onReadPixels,g=n.onUnrecognizedArgumentLookup,v=new Proxy(e,{get:S}),y=[],x={},b=0,w="";return v;function S(n,r){switch(r){case"addComment":return I;case"checkThrowError":return C;case"getReadPixelsVariableName":return t;case"insertVariable":return A;case"reset":return _;case"setIndent":return k;case"toString":return T;case"getContextVariableName":return R}return"function"===typeof e[r]?function(){switch(r){case"getError":return u?p.push("".concat(w,"if (").concat(o,".getError() !== ").concat(o,".NONE) throw new Error('error');")):p.push("".concat(w).concat(o,".getError();")),e.getError();case"getExtension":var n="".concat(o,"Variables").concat(y.length);p.push("".concat(w,"const ").concat(n," = ").concat(o,".getExtension('").concat(arguments[0],"');"));var h=e.getExtension(arguments[0]);if(h&&"object"===typeof h){var f=i(h,{getEntity:E,useTrackablePrimitives:c,recording:p,contextName:n,contextVariables:y,variables:m,indent:w,onUnrecognizedArgumentLookup:g});return y.push(f),f}return y.push(null),h;case"readPixels":var v,x=y.indexOf(arguments[6]);if(-1===x){var b=L(arguments[6]);b?(v=b,p.push("".concat(w).concat(b))):(v="".concat(o,"Variable").concat(y.length),y.push(arguments[6]),p.push("".concat(w,"const ").concat(v," = new ").concat(arguments[6].constructor.name,"(").concat(arguments[6].length,");")))}else v="".concat(o,"Variable").concat(x);t=v;var S=[arguments[0],arguments[1],arguments[2],arguments[3],E(arguments[4]),E(arguments[5]),v];return p.push("".concat(w).concat(o,".readPixels(").concat(S.join(", "),");")),l&&N(arguments[2],arguments[3]),d&&d(v,S),e.readPixels.apply(e,arguments);case"drawBuffers":return p.push("".concat(w).concat(o,".drawBuffers([").concat(a(arguments[0],{contextName:o,contextVariables:y,getEntity:E,addVariable:M,variables:m,onUnrecognizedArgumentLookup:g}),"]);")),e.drawBuffers(arguments[0])}var T=e[r].apply(e,arguments);switch(typeof T){case"undefined":return void p.push("".concat(w).concat(D(r,arguments),";"));case"number":case"boolean":if(c&&-1===y.indexOf(s(T))){p.push("".concat(w,"const ").concat(o,"Variable").concat(y.length," = ").concat(D(r,arguments),";")),y.push(T=s(T));break}default:null===T?p.push("".concat(D(r,arguments),";")):p.push("".concat(w,"const ").concat(o,"Variable").concat(y.length," = ").concat(D(r,arguments),";")),y.push(T)}return T}:(x[e[r]]=r,e[r])}function T(){return p.join("\n")}function _(){for(;p.length>0;)p.pop()}function A(e,t){m[e]=t}function E(e){var t=x[e];return t?o+"."+t:e}function k(e){w=" ".repeat(e)}function M(e,t){var n="".concat(o,"Variable").concat(y.length);return p.push("".concat(w,"const ").concat(n," = ").concat(t,";")),y.push(e),n}function N(e,t){var n="".concat(o,"Variable").concat(y.length),r="imageDatum".concat(b);p.push("".concat(w,"let ").concat(r,' = ["P3\\n# ').concat(l,'.ppm\\n", ').concat(e,", ' ', ").concat(t,', "\\n255\\n"].join("");')),p.push("".concat(w,"for (let i = 0; i < ").concat(r,".length; i += 4) {")),p.push("".concat(w,"  ").concat(r," += ").concat(n,"[i] + ' ' + ").concat(n,"[i + 1] + ' ' + ").concat(n,"[i + 2] + ' ';")),p.push("".concat(w,"}")),p.push("".concat(w,'if (typeof require !== "undefined") {')),p.push("".concat(w,"  require('fs').writeFileSync('./").concat(l,".ppm', ").concat(r,");")),p.push("".concat(w,"}")),b++}function I(e){p.push("".concat(w,"// ").concat(e))}function C(){p.push("".concat(w,"(() => {\n").concat(w,"const error = ").concat(o,".getError();\n").concat(w,"if (error !== ").concat(o,".NONE) {\n").concat(w,"  const names = Object.getOwnPropertyNames(gl);\n").concat(w,"  for (let i = 0; i < names.length; i++) {\n").concat(w,"    const name = names[i];\n").concat(w,"    if (").concat(o,"[name] === error) {\n").concat(w,"      throw new Error('").concat(o," threw ' + name);\n").concat(w,"    }\n").concat(w,"  }\n").concat(w,"}\n").concat(w,"})();"))}function D(e,t){return"".concat(o,".").concat(e,"(").concat(a(t,{contextName:o,contextVariables:y,getEntity:E,addVariable:M,variables:m,onUnrecognizedArgumentLookup:g}),")")}function L(e){if(m)for(var t in m)if(m[t]===e)return t;return null}function R(e){var t=y.indexOf(e);return-1!==t?"".concat(o,"Variable").concat(t):null}}function i(e,t){var n=new Proxy(e,{get:function(t,n){return"function"===typeof t[n]?function(){switch(n){case"drawBuffersWEBGL":return l.push("".concat(p).concat(i,".drawBuffersWEBGL([").concat(a(arguments[0],{contextName:i,contextVariables:o,getEntity:m,addVariable:g,variables:h,onUnrecognizedArgumentLookup:f}),"]);")),e.drawBuffersWEBGL(arguments[0])}var t=e[n].apply(e,arguments);switch(typeof t){case"undefined":return void l.push("".concat(p).concat(d(n,arguments),";"));case"number":case"boolean":c&&-1===o.indexOf(s(t))?(l.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(d(n,arguments),";")),o.push(t=s(t))):(l.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(d(n,arguments),";")),o.push(t));break;default:null===t?l.push("".concat(d(n,arguments),";")):l.push("".concat(p,"const ").concat(i,"Variable").concat(o.length," = ").concat(d(n,arguments),";")),o.push(t)}return t}:(r[e[n]]=n,e[n])}}),r={},i=t.contextName,o=t.contextVariables,u=t.getEntity,c=t.useTrackablePrimitives,l=t.recording,h=t.variables,p=t.indent,f=t.onUnrecognizedArgumentLookup;return n;function m(e){return r.hasOwnProperty(e)?"".concat(i,".").concat(r[e]):u(e)}function d(e,t){return"".concat(i,".").concat(e,"(").concat(a(t,{contextName:i,contextVariables:o,getEntity:m,addVariable:g,variables:h,onUnrecognizedArgumentLookup:f}),")")}function g(e,t){var n="".concat(i,"Variable").concat(o.length);return o.push(e),l.push("".concat(p,"const ").concat(n," = ").concat(t,";")),n}}function a(e,t){var n=t.variables,r=t.onUnrecognizedArgumentLookup;return Array.from(e).map((function(e){var i=function(e){if(n)for(var t in n)if(n.hasOwnProperty(t)&&n[t]===e)return t;return r?r(e):null}(e);return i||function(e,t){var n=t.contextName,r=t.contextVariables,i=t.getEntity,a=t.addVariable,s=t.onUnrecognizedArgumentLookup;if("undefined"===typeof e)return"undefined";if(null===e)return"null";var o=r.indexOf(e);if(o>-1)return"".concat(n,"Variable").concat(o);switch(e.constructor.name){case"String":var u=/\n/.test(e),c=/'/.test(e),l=/"/.test(e);return u?"`"+e+"`":c&&!l?'"'+e+'"':"'"+e+"'";case"Number":case"Boolean":return i(e);case"Array":return a(e,"new ".concat(e.constructor.name,"([").concat(Array.from(e).join(","),"])"));case"Float32Array":case"Uint8Array":case"Uint16Array":case"Int32Array":return a(e,"new ".concat(e.constructor.name,"(").concat(JSON.stringify(Array.from(e)),")"));default:if(s){var h=s(e);if(h)return h}throw new Error("unrecognized argument type ".concat(e.constructor.name))}}(e,t)})).join(", ")}function s(e){return new e.constructor(e)}"undefined"!==typeof t&&(t.exports={glWiretap:r,glExtensionWiretap:i}),"undefined"!==typeof window&&(r.glExtensionWiretap=i,window.glWiretap=r)},{}],4:[function(e,t,n){function r(e){for(var t=new Array(e.length),n=0;n<e.length;n++){var r=e[n];r.toArray?t[n]=r.toArray():t[n]=r}return t}function i(){for(var e=r(arguments),t=new Float32Array(this.output.x),n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,t[n]=this._fn.apply(this,e);return t}function a(){for(var e=r(arguments),t=new Array(this.output.y),n=0;n<this.output.y;n++){for(var i=new Float32Array(this.output.x),a=0;a<this.output.x;a++)this.thread.x=a,this.thread.y=n,this.thread.z=0,i[a]=this._fn.apply(this,e);t[n]=i}return t}function s(){for(var e=r(arguments),t=0;t<this.output.y;t++)for(var n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=t,this.thread.z=0,this._fn.apply(this,e)}function o(){for(var e=r(arguments),t=new Array(this.output.z),n=0;n<this.output.z;n++){for(var i=new Array(this.output.y),a=0;a<this.output.y;a++){for(var s=new Float32Array(this.output.x),o=0;o<this.output.x;o++)this.thread.x=o,this.thread.y=a,this.thread.z=n,s[o]=this._fn.apply(this,e);i[a]=s}t[n]=i}return t}function u(e){e.setOutput=function(t){e.output=h(t),e.graphical&&c(e)},e.toJSON=function(){throw new Error("Not usable with gpuMock")},e.setConstants=function(t){return e.constants=t,e},e.setGraphical=function(t){return e.graphical=t,e},e.setCanvas=function(t){return e.canvas=t,e},e.setContext=function(t){return e.context=t,e},e.destroy=function(){},e.validateSettings=function(){},e.graphical&&e.output&&c(e),e.exec=function(){var t=arguments;return new Promise((function(n,r){try{n(e.apply(e,t))}catch(i){r(i)}}))},e.getPixels=function(t){var n=e.output,r=n.x,i=n.y;return t?function(e,t,n){for(var r=n/2|0,i=4*t,a=new Uint8ClampedArray(4*t),s=e.slice(0),o=0;o<r;++o){var u=o*i,c=(n-o-1)*i;a.set(s.subarray(u,u+i)),s.copyWithin(u,c,c+i),s.set(a,c)}return s}(e._imageData.data,r,i):e._imageData.data.slice(0)},e.color=function(t,n,r,i){"undefined"===typeof i&&(i=1),t=Math.floor(255*t),n=Math.floor(255*n),r=Math.floor(255*r),i=Math.floor(255*i);var a=e.output.x,s=e.output.y,o=e.thread.x+(s-e.thread.y-1)*a;e._colorData[4*o+0]=t,e._colorData[4*o+1]=n,e._colorData[4*o+2]=r,e._colorData[4*o+3]=i};for(var t=function(){return e},n=["setWarnVarUsage","setArgumentTypes","setTactic","setOptimizeFloatMemory","setDebug","setLoopMaxIterations","setConstantTypes","setFunctions","setNativeFunctions","setInjectedNative","setPipeline","setPrecision","setOutputToTexture","setImmutable","setStrictIntegers","setDynamicOutput","setHardcodeConstants","setDynamicArguments","setUseLegacyEncoder","setWarnVarUsage","addSubKernel"],r=0;r<n.length;r++)e[n[r]]=t;return e}function c(e){var t=e.output,n=t.x,r=t.y;if(e.context&&e.context.createImageData){var i=new Uint8ClampedArray(n*r*4);e._imageData=e.context.createImageData(n,r),e._colorData=i}else{var a=new Uint8ClampedArray(n*r*4);e._imageData={data:a},e._colorData=a}}function h(e){var t=null;if(e.length)if(3===e.length){var n=l(e,3);t={x:n[0],y:n[1],z:n[2]}}else if(2===e.length){var r=l(e,2);t={x:r[0],y:r[1]}}else t={x:l(e,1)[0]};else t=e;return t}t.exports={gpuMock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.output?h(t.output):null;function r(){return r.output.z?o.apply(r,arguments):r.output.y?r.graphical?s.apply(r,arguments):a.apply(r,arguments):i.apply(r,arguments)}return r._fn=e,r.constants=t.constants||null,r.context=t.context||null,r.canvas=t.canvas||null,r.graphical=t.graphical||!1,r._imageData=null,r._colorData=null,r.output=n,r.thread={x:0,y:0,z:0},u(r)}}},{}],5:[function(e,t,n){var r=e("./utils").utils;t.exports={alias:function(e,t){var n=t.toString();return new Function("return function ".concat(e," (").concat(r.getArgumentNamesFromString(n).join(", "),") {\n  ").concat(r.getFunctionBodyFromString(n),"\n}"))()}}},{"./utils":114}],6:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"astFunction",value:function(e,t){if(!this.isRootKernel){t.push("function"),t.push(" "),t.push(this.name),t.push("(");for(var n=0;n<this.argumentNames.length;++n){var r=this.argumentNames[n];n>0&&t.push(", "),t.push("user_"),t.push(r)}t.push(") {\n")}for(var i=0;i<e.body.body.length;++i)this.astGeneric(e.body.body[i],t),t.push("\n");return this.isRootKernel||t.push("}\n"),t}},{key:"astReturnStatement",value:function(e,t){var n=this.returnType||this.getType(e.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(t.push(this.leadingReturnStatement),this.astGeneric(e.argument,t),t.push(";\n"),t.push(this.followingReturnStatement),t.push("continue;\n")):this.isSubKernel?(t.push("subKernelResult_".concat(this.name," = ")),this.astGeneric(e.argument,t),t.push(";"),t.push("return subKernelResult_".concat(this.name,";"))):(t.push("return "),this.astGeneric(e.argument,t),t.push(";")),t}},{key:"astLiteral",value:function(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);return t.push(e.value),t}},{key:"astBinaryExpression",value:function(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}},{key:"astIdentifierExpression",value:function(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);switch(e.name){case"Infinity":t.push("Infinity");break;default:this.constants&&this.constants.hasOwnProperty(e.name)?t.push("constants_"+e.name):t.push("user_"+e.name)}return t}},{key:"astForStatement",value:function(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);var n=[],r=[],i=[],a=[],s=null;if(e.init){this.pushState("in-for-loop-init"),this.astGeneric(e.init,n);for(var o=0;o<n.length;o++)n[o].includes&&n[o].includes(",")&&(s=!1);this.popState("in-for-loop-init")}else s=!1;if(e.test?this.astGeneric(e.test,r):s=!1,e.update?this.astGeneric(e.update,i):s=!1,e.body&&(this.pushState("loop-body"),this.astGeneric(e.body,a),this.popState("loop-body")),null===s&&(s=this.isSafe(e.init)&&this.isSafe(e.test)),s)t.push("for (".concat(n.join(""),";").concat(r.join(""),";").concat(i.join(""),"){\n")),t.push(a.join("")),t.push("}\n");else{var u=this.getInternalVariableName("safeI");n.length>0&&t.push(n.join(""),";\n"),t.push("for (let ".concat(u,"=0;").concat(u,"<LOOP_MAX;").concat(u,"++){\n")),r.length>0&&t.push("if (!".concat(r.join(""),") break;\n")),t.push(a.join("")),t.push("\n".concat(i.join(""),";")),t.push("}\n")}return t}},{key:"astWhileStatement",value:function(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),t.push("if ("),this.astGeneric(e.test,t),t.push(") {\n"),this.astGeneric(e.body,t),t.push("} else {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}},{key:"astDoWhileStatement",value:function(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);return t.push("for (let i = 0; i < LOOP_MAX; i++) {"),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") {\n"),t.push("break;\n"),t.push("}\n"),t.push("}\n"),t}},{key:"astAssignmentExpression",value:function(e,t){var n=this.getDeclaration(e.left);if(n&&!n.assignable)throw this.astErrorOutput("Variable ".concat(e.left.name," is not assignable here"),e);return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t}},{key:"astBlockStatement",value:function(e,t){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);this.popState("block-body")}else{t.push("{\n");for(var r=0;r<e.body.length;r++)this.astGeneric(e.body[r],t);t.push("}\n")}return t}},{key:"astVariableDeclaration",value:function(e,t){t.push("".concat(e.kind," "));for(var n=e.declarations,r=0;r<n.length;r++){r>0&&t.push(",");var i=n[r],a=this.getDeclaration(i.id);a.valueType||(a.valueType=this.getType(i.init)),this.astGeneric(i,t)}return this.isState("in-for-loop-init")||t.push(";"),t}},{key:"astIfStatement",value:function(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type||"IfStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}},{key:"astSwitchStatement",value:function(e,t){var n=e.discriminant,r=e.cases;t.push("switch ("),this.astGeneric(n,t),t.push(") {\n");for(var i=0;i<r.length;i++)null!==r[i].test?(t.push("case "),this.astGeneric(r[i].test,t),t.push(":\n"),r[i].consequent&&r[i].consequent.length>0&&(this.astGeneric(r[i].consequent,t),t.push("break;\n"))):(t.push("default:\n"),this.astGeneric(r[i].consequent,t),r[i].consequent&&r[i].consequent.length>0&&t.push("break;\n"));t.push("\n}")}},{key:"astThisExpression",value:function(e,t){return t.push("_this"),t}},{key:"astMemberExpression",value:function(e,t){var n=this.getMemberExpressionDetails(e),r=n.signature,i=n.type,a=n.property,s=n.xProperty,o=n.yProperty,u=n.zProperty,c=n.name,l=n.origin;switch(r){case"this.thread.value":return t.push("_this.thread.".concat(c)),t;case"this.output.value":switch(c){case"x":t.push("outputX");break;case"y":t.push("outputY");break;case"z":t.push("outputZ");break;default:throw this.astErrorOutput("Unexpected expression",e)}return t;case"value":throw this.astErrorOutput("Unexpected expression",e);case"value[]":case"value[][]":case"value[][][]":case"value.value":if("Math"===l)return t.push(Math[c]),t;switch(a){case"r":return t.push("user_".concat(c,"[0]")),t;case"g":return t.push("user_".concat(c,"[1]")),t;case"b":return t.push("user_".concat(c,"[2]")),t;case"a":return t.push("user_".concat(c,"[3]")),t}break;case"value.value[]":return this.removeIstanbulCoverage||t.push("".concat(e.object.object.name,".").concat(e.object.property.name,"[").concat(e.property.value,"]")),t;case"value.value[][]":return this.removeIstanbulCoverage||t.push("".concat(e.object.object.object.name,".").concat(e.object.object.property.name,"[").concat(e.object.property.value,"][").concat(e.property.value,"]")),t;case"this.constants.value":case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":break;case"fn()[]":return this.astGeneric(e.object,t),t.push("["),this.astGeneric(e.property,t),t.push("]"),t;default:throw this.astErrorOutput("Unexpected expression",e)}if(!e.computed)switch(i){case"Number":case"Integer":case"Float":case"Boolean":return t.push("".concat(l,"_").concat(c)),t}var h="".concat(l,"_").concat(c);switch(i){case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLImageArray":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"HTMLImage":default:var p,f;if("constants"===l){var m=this.constants[c];p=(f="Input"===this.constantTypes[c])?m.size:null}else p=(f=this.isInput(c))?this.argumentSizes[this.argumentNames.indexOf(c)]:null;t.push("".concat(h)),u&&o?f?(t.push("[("),this.astGeneric(u,t),t.push("*".concat(this.dynamicArguments?"(outputY * outputX)":p[1]*p[0],")+(")),this.astGeneric(o,t),t.push("*".concat(this.dynamicArguments?"outputX":p[0],")+")),this.astGeneric(s,t),t.push("]")):(t.push("["),this.astGeneric(u,t),t.push("]"),t.push("["),this.astGeneric(o,t),t.push("]"),t.push("["),this.astGeneric(s,t),t.push("]")):o?f?(t.push("[("),this.astGeneric(o,t),t.push("*".concat(this.dynamicArguments?"outputX":p[0],")+")),this.astGeneric(s,t),t.push("]")):(t.push("["),this.astGeneric(o,t),t.push("]"),t.push("["),this.astGeneric(s,t),t.push("]")):"undefined"!==typeof s&&(t.push("["),this.astGeneric(s,t),t.push("]"))}return t}},{key:"astCallExpression",value:function(e,t){if("CallExpression"!==e.type)throw this.astErrorOutput("Unknown CallExpression",e);var n=this.astMemberExpressionUnroll(e.callee);this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),this.isAstMathFunction(e),this.onFunctionCall&&this.onFunctionCall(this.name,n,e.arguments),t.push(n),t.push("(");for(var r=this.lookupFunctionArgumentTypes(n)||[],i=0;i<e.arguments.length;++i){var a=e.arguments[i],s=this.getType(a);r[i]||this.triggerImplyArgumentType(n,i,s,this),i>0&&t.push(", "),this.astGeneric(a,t)}return t.push(")"),t}},{key:"astArrayExpression",value:function(e,t){var n=e.elements.length;t.push("new Float32Array([");for(var r=0;r<n;++r){r>0&&t.push(", ");var i=e.elements[r];this.astGeneric(i,t)}return t.push("])"),t}},{key:"astDebuggerStatement",value:function(e,t){return t.push("debugger;"),t}}]),n}(e("../function-node").FunctionNode);t.exports={CPUFunctionNode:r}},{"../function-node":10}],7:[function(e,t,n){var r=e("../../utils").utils;t.exports={cpuKernelString:function(e,t){var n=[],i=[],a=[],s=!/^function/.test(e.color.toString());if(n.push("  const { context, canvas, constants: incomingConstants } = settings;","  const output = new Int32Array(".concat(JSON.stringify(Array.from(e.output)),");"),"  const _constantTypes = ".concat(JSON.stringify(e.constantTypes),";"),"  const _constants = ".concat(function(e,t){var n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],a=e[r];switch(i){case"Number":case"Integer":case"Float":case"Boolean":n.push("".concat(r,":").concat(a));break;case"Array(2)":case"Array(3)":case"Array(4)":n.push("".concat(r,":new ").concat(a.constructor.name,"(").concat(JSON.stringify(Array.from(a)),")"))}}return"{ ".concat(n.join()," }")}(e.constants,e.constantTypes),";")),i.push("    constants: _constants,","    context,","    output,","    thread: {x: 0, y: 0, z: 0},"),e.graphical){n.push("  const _imageData = context.createImageData(".concat(e.output[0],", ").concat(e.output[1],");")),n.push("  const _colorData = new Uint8ClampedArray(".concat(e.output[0]," * ").concat(e.output[1]," * 4);"));var o=r.flattenFunctionToString((s?"function ":"")+e.color.toString(),{thisLookup:function(t){switch(t){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(e[t])},findDependency:function(e,t){return null}}),u=r.flattenFunctionToString((s?"function ":"")+e.getPixels.toString(),{thisLookup:function(t){switch(t){case"_colorData":return"_colorData";case"_imageData":return"_imageData";case"output":return"output";case"thread":return"this.thread"}return JSON.stringify(e[t])},findDependency:function(){return null}});i.push("    _imageData,","    _colorData,","    color: ".concat(o,",")),a.push("  kernel.getPixels = ".concat(u,";"))}for(var c=[],l=Object.keys(e.constantTypes),h=0;h<l.length;h++)c.push(e.constantTypes[l]);if(-1!==e.argumentTypes.indexOf("HTMLImageArray")||-1!==c.indexOf("HTMLImageArray")){var p=r.flattenFunctionToString((s?"function ":"")+e._imageTo3DArray.toString(),{doNotDefine:["canvas"],findDependency:function(t,n){return"this"===t?(s?"function ":"")+e[n].toString():null},thisLookup:function(e){switch(e){case"canvas":return;case"context":return"context"}}});a.push(p),i.push("    _mediaTo2DArray,"),i.push("    _imageTo3DArray,")}else if(-1!==e.argumentTypes.indexOf("HTMLImage")||-1!==c.indexOf("HTMLImage")){var f=r.flattenFunctionToString((s?"function ":"")+e._mediaTo2DArray.toString(),{findDependency:function(e,t){return null},thisLookup:function(e){switch(e){case"canvas":return"settings.canvas";case"context":return"settings.context"}throw new Error("unhandled thisLookup")}});a.push(f),i.push("    _mediaTo2DArray,")}return"function(settings) {\n".concat(n.join("\n"),"\n  for (const p in _constantTypes) {\n    if (!_constantTypes.hasOwnProperty(p)) continue;\n    const type = _constantTypes[p];\n    switch (type) {\n      case 'Number':\n      case 'Integer':\n      case 'Float':\n      case 'Boolean':\n      case 'Array(2)':\n      case 'Array(3)':\n      case 'Array(4)':\n        if (incomingConstants.hasOwnProperty(p)) {\n          console.warn('constant ' + p + ' of type ' + type + ' cannot be resigned');\n        }\n        continue;\n    }\n    if (!incomingConstants.hasOwnProperty(p)) {\n      throw new Error('constant ' + p + ' not found');\n    }\n    _constants[p] = incomingConstants[p];\n  }\n  const kernel = (function() {\n").concat(e._kernelString,"\n  })\n    .apply({ ").concat(i.join("\n")," });\n  ").concat(a.join("\n"),"\n  return kernel;\n}")}}},{"../../utils":114}],8:[function(e,t,n){var r=e("../kernel").Kernel,h=e("../function-builder").FunctionBuilder,p=e("./function-node").CPUFunctionNode,f=e("../../utils").utils,m=e("./kernel-string").cpuKernelString,d=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).mergeSettings(e.settings||r),i._imageData=null,i._colorData=null,i._kernelString=null,i._prependedString=[],i.thread={x:0,y:0,z:0},i.translatedSources=null,i}return o(n,null,[{key:"getFeatures",value:function(){return this.features}},{key:"isContextMatch",value:function(e){return!1}},{key:"nativeFunctionArguments",value:function(){return null}},{key:"nativeFunctionReturnType",value:function(){throw new Error("Looking up native function return type not supported on ".concat(this.name))}},{key:"combineKernels",value:function(e){return e}},{key:"getSignature",value:function(e,t){return"cpu"+(t.length>0?":"+t.join(","):"")}},{key:"features",get:function(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}},{key:"isSupported",get:function(){return!0}},{key:"mode",get:function(){return"cpu"}}]),o(n,[{key:"initCanvas",value:function(){return"undefined"!==typeof document?document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):void 0}},{key:"initContext",value:function(){return this.canvas?this.canvas.getContext("2d"):null}},{key:"initPlugins",value:function(e){return[]}},{key:"validateSettings",value:function(e){if(!this.output||0===this.output.length){if(1!==e.length)throw new Error("Auto output only supported for kernels with only one input");var t=f.getVariableType(e[0],this.strictIntegers);if("Array"===t)this.output=f.getDimensions(t);else{if("NumberTexture"!==t&&"ArrayTexture(4)"!==t)throw new Error("Auto output not supported for input type: "+t);this.output=e[0].output}}if(this.graphical&&2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");this.checkOutput()}},{key:"translateSource",value:function(){if(this.leadingReturnStatement=this.output.length>1?"resultX[x] = ":"result[x] = ",this.subKernels){for(var e=[],t=0;t<this.subKernels.length;t++){var n=this.subKernels[t].name;e.push(this.output.length>1?"resultX_".concat(n,"[x] = subKernelResult_").concat(n,";\n"):"result_".concat(n,"[x] = subKernelResult_").concat(n,";\n"))}this.followingReturnStatement=e.join("")}var r=h.fromKernel(this,p);this.translatedSources=r.getPrototypes("kernel"),this.graphical||this.returnType||(this.returnType=r.getKernelResultType())}},{key:"build",value:function(){if(!this.built){if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){var e=this.canvas,t=this.output;if(!e)throw new Error("no canvas available for using graphical output");var n=t[0],r=t[1]||1;e.width=n,e.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(n*r*4)}var i=this.getKernelString();this.kernelString=i,this.debug&&(console.log("Function output:"),console.log(i));try{this.run=new Function([],i).bind(this)()}catch(a){console.error("An error occurred compiling the javascript: ",a)}this.buildSignature(arguments),this.built=!0}}},{key:"color",value:function(e,t,n,r){"undefined"===typeof r&&(r=1),e=Math.floor(255*e),t=Math.floor(255*t),n=Math.floor(255*n),r=Math.floor(255*r);var i=this.output[0],a=this.output[1],s=this.thread.x+(a-this.thread.y-1)*i;this._colorData[4*s+0]=e,this._colorData[4*s+1]=t,this._colorData[4*s+2]=n,this._colorData[4*s+3]=r}},{key:"getKernelString",value:function(){if(null!==this._kernelString)return this._kernelString;var e=null,t=this.translatedSources;return t.length>1?t=t.filter((function(t){return/^function/.test(t)?t:(e=t,!1)})):e=t.shift(),this._kernelString="  const LOOP_MAX = ".concat(this._getLoopMaxString(),";\n  ").concat(this.injectedNative||"","\n  const _this = this;\n  ").concat(this._resultKernelHeader(),"\n  ").concat(this._processConstants(),"\n  return (").concat(this.argumentNames.map((function(e){return"user_"+e})).join(", "),") => {\n    ").concat(this._prependedString.join(""),"\n    ").concat(this._earlyThrows(),"\n    ").concat(this._processArguments(),"\n    ").concat(this.graphical?this._graphicalKernelBody(e):this._resultKernelBody(e),"\n    ").concat(t.length>0?t.join("\n"):"","\n  };")}},{key:"toString",value:function(){return m(this)}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";"):" 1000;"}},{key:"_processConstants",value:function(){if(!this.constants)return"";var e=[];for(var t in this.constants)switch(this.constantTypes[t]){case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":e.push("    const constants_".concat(t," = this._mediaTo2DArray(this.constants.").concat(t,");\n"));break;case"HTMLImageArray":e.push("    const constants_".concat(t," = this._imageTo3DArray(this.constants.").concat(t,");\n"));break;case"Input":e.push("    const constants_".concat(t," = this.constants.").concat(t,".value;\n"));break;default:e.push("    const constants_".concat(t," = this.constants.").concat(t,";\n"))}return e.join("")}},{key:"_earlyThrows",value:function(){var e=this;if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";for(var t=[],n=0;n<this.argumentTypes.length;n++)"Array"===this.argumentTypes[n]&&t.push(this.argumentNames[n]);if(0===t.length)return"";for(var r=[],i=function(n){var i=t[n],a=e._mapSubKernels((function(e){return"user_".concat(i," === result_").concat(e.name)})).join(" || ");r.push("user_".concat(i," === result").concat(a?" || ".concat(a):""))},a=0;a<t.length;a++)i(a);return"if (".concat(r.join(" || "),") throw new Error('Source and destination arrays are the same.  Use immutable = true');")}},{key:"_processArguments",value:function(){for(var e=[],t=0;t<this.argumentTypes.length;t++){var n="user_".concat(this.argumentNames[t]);switch(this.argumentTypes[t]){case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":e.push("    ".concat(n," = this._mediaTo2DArray(").concat(n,");\n"));break;case"HTMLImageArray":e.push("    ".concat(n," = this._imageTo3DArray(").concat(n,");\n"));break;case"Input":e.push("    ".concat(n," = ").concat(n,".value;\n"));break;case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"NumberTexture":case"MemoryOptimizedNumberTexture":e.push("\n    if (".concat(n,".toArray) {\n      if (!_this.textureCache) {\n        _this.textureCache = [];\n        _this.arrayCache = [];\n      }\n      const textureIndex = _this.textureCache.indexOf(").concat(n,");\n      if (textureIndex !== -1) {\n        ").concat(n," = _this.arrayCache[textureIndex];\n      } else {\n        _this.textureCache.push(").concat(n,");\n        ").concat(n," = ").concat(n,".toArray();\n        _this.arrayCache.push(").concat(n,");\n      }\n    }"))}}return e.join("")}},{key:"_mediaTo2DArray",value:function(e){var t=this.canvas,n=e.width>0?e.width:e.videoWidth,r=e.height>0?e.height:e.videoHeight;t.width<n&&(t.width=n),t.height<r&&(t.height=r);var i=this.context;i.drawImage(e,0,0,n,r);for(var a=i.getImageData(0,0,n,r).data,s=new Array(r),o=0,u=r-1;u>=0;u--)for(var c=s[u]=new Array(n),l=0;l<n;l++){var h=new Float32Array(4);h[0]=a[o++]/255,h[1]=a[o++]/255,h[2]=a[o++]/255,h[3]=a[o++]/255,c[l]=h}return s}},{key:"getPixels",value:function(e){var t=l(this.output,2),n=t[0],r=t[1];return e?f.flipPixels(this._imageData.data,n,r):this._imageData.data.slice(0)}},{key:"_imageTo3DArray",value:function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=this._mediaTo2DArray(e[n]);return t}},{key:"_resultKernelHeader",value:function(){if(this.graphical)return"";if(this.immutable)return"";if(!this.pipeline)return"";switch(this.output.length){case 1:return this._mutableKernel1DResults();case 2:return this._mutableKernel2DResults();case 3:return this._mutableKernel3DResults()}}},{key:"_resultKernelBody",value:function(e){switch(this.output.length){case 1:return(!this.immutable&&this.pipeline?this._resultMutableKernel1DLoop(e):this._resultImmutableKernel1DLoop(e))+this._kernelOutput();case 2:return(!this.immutable&&this.pipeline?this._resultMutableKernel2DLoop(e):this._resultImmutableKernel2DLoop(e))+this._kernelOutput();case 3:return(!this.immutable&&this.pipeline?this._resultMutableKernel3DLoop(e):this._resultImmutableKernel3DLoop(e))+this._kernelOutput();default:throw new Error("unsupported size kernel")}}},{key:"_graphicalKernelBody",value:function(e){switch(this.output.length){case 2:return this._graphicalKernel2DLoop(e)+this._graphicalOutput();default:throw new Error("unsupported size kernel")}}},{key:"_graphicalOutput",value:function(){return"\n    this._imageData.data.set(this._colorData);\n    this.context.putImageData(this._imageData, 0, 0);\n    return;"}},{key:"_getKernelResultTypeConstructorString",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return"Float32Array";case"Array(2)":case"Array(3)":case"Array(4)":return"Array";default:if(this.graphical)return"Float32Array";throw new Error("unhandled returnType ".concat(this.returnType))}}},{key:"_resultImmutableKernel1DLoop",value:function(e){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(t,"(outputX);\n    ").concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new ").concat(t,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(e){return"let subKernelResult_".concat(e.name,";\n")})).join("    "),"\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ").concat(e,"\n    }")}},{key:"_mutableKernel1DResults",value:function(){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const result = new ".concat(e,"(outputX);\n    ").concat(this._mapSubKernels((function(t){return"const result_".concat(t.name," = new ").concat(e,"(outputX);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(e){return"let subKernelResult_".concat(e.name,";\n")})).join("    "))}},{key:"_resultMutableKernel1DLoop",value:function(e){return"  const outputX = _this.output[0];\n    for (let x = 0; x < outputX; x++) {\n      this.thread.x = x;\n      this.thread.y = 0;\n      this.thread.z = 0;\n      ".concat(e,"\n    }")}},{key:"_resultImmutableKernel2DLoop",value:function(e){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(e){return"let subKernelResult_".concat(e.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y] = new ").concat(t,"(outputX);\n      ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = result_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(e,"\n      }\n    }")}},{key:"_mutableKernel2DResults",value:function(){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const result = new Array(outputY);\n    ".concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new Array(outputY);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(e){return"let subKernelResult_".concat(e.name,";\n")})).join("    "),"\n    for (let y = 0; y < outputY; y++) {\n      const resultX = result[y] = new ").concat(e,"(outputX);\n      ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = result_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join(""),"\n    }")}},{key:"_resultMutableKernel2DLoop",value:function(e){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      const resultX = result[y];\n      ".concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = result_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join(""),"\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ").concat(e,"\n      }\n    }")}},{key:"_graphicalKernel2DLoop",value:function(e){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    for (let y = 0; y < outputY; y++) {\n      this.thread.z = 0;\n      this.thread.y = y;\n      for (let x = 0; x < outputX; x++) {\n        this.thread.x = x;\n        ".concat(e,"\n      }\n    }")}},{key:"_resultImmutableKernel3DLoop",value:function(e){var t=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(e){return"let subKernelResult_".concat(e.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(e){return"const resultY_".concat(e.name," = result_").concat(e.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y] = new ").concat(t,"(outputX);\n        ").concat(this._mapSubKernels((function(e){return"const resultX_".concat(e.name," = resultY_").concat(e.name,"[y] = new ").concat(t,"(outputX);\n")})).join("        "),"\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ").concat(e,"\n        }\n      }\n    }")}},{key:"_mutableKernel3DResults",value:function(){var e=this._getKernelResultTypeConstructorString();return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    const result = new Array(outputZ);\n    ".concat(this._mapSubKernels((function(e){return"const result_".concat(e.name," = new Array(outputZ);\n")})).join("    "),"\n    ").concat(this._mapSubKernels((function(e){return"let subKernelResult_".concat(e.name,";\n")})).join("    "),"\n    for (let z = 0; z < outputZ; z++) {\n      const resultY = result[z] = new Array(outputY);\n      ").concat(this._mapSubKernels((function(e){return"const resultY_".concat(e.name," = result_").concat(e.name,"[z] = new Array(outputY);\n")})).join("      "),"\n      for (let y = 0; y < outputY; y++) {\n        const resultX = resultY[y] = new ").concat(e,"(outputX);\n        ").concat(this._mapSubKernels((function(t){return"const resultX_".concat(t.name," = resultY_").concat(t.name,"[y] = new ").concat(e,"(outputX);\n")})).join("        "),"\n      }\n    }")}},{key:"_resultMutableKernel3DLoop",value:function(e){return"  const outputX = _this.output[0];\n    const outputY = _this.output[1];\n    const outputZ = _this.output[2];\n    for (let z = 0; z < outputZ; z++) {\n      this.thread.z = z;\n      const resultY = result[z];\n      for (let y = 0; y < outputY; y++) {\n        this.thread.y = y;\n        const resultX = resultY[y];\n        for (let x = 0; x < outputX; x++) {\n          this.thread.x = x;\n          ".concat(e,"\n        }\n      }\n    }")}},{key:"_kernelOutput",value:function(){return this.subKernels?"\n    return {\n      result: result,\n      ".concat(this.subKernels.map((function(e){return"".concat(e.property,": result_").concat(e.name)})).join(",\n      "),"\n    };"):"\n    return result;"}},{key:"_mapSubKernels",value:function(e){return null===this.subKernels?[""]:this.subKernels.map(e)}},{key:"destroy",value:function(e){e&&delete this.canvas}},{key:"toJSON",value:function(){var e=a(i(n.prototype),"toJSON",this).call(this);return e.functionNodes=h.fromKernel(this,p).toJSON(),e}},{key:"setOutput",value:function(e){a(i(n.prototype),"setOutput",this).call(this,e);var t=l(this.output,2),r=t[0],s=t[1];this.graphical&&(this._imageData=this.context.createImageData(r,s),this._colorData=new Uint8ClampedArray(r*s*4))}},{key:"prependString",value:function(e){if(this._kernelString)throw new Error("Kernel already built");this._prependedString.push(e)}},{key:"hasPrependString",value:function(e){return this._prependedString.indexOf(e)>-1}}],[{key:"destroyContext",value:function(e){}}]),n}(r);t.exports={CPUKernel:d}},{"../../utils":114,"../function-builder":9,"../kernel":36,"./function-node":6,"./kernel-string":7}],9:[function(e,t,n){var i=function(){"use strict";function e(t){if(s(this,e),t=t||{},this.kernel=t.kernel,this.rootNode=t.rootNode,this.functionNodes=t.functionNodes||[],this.subKernelNodes=t.subKernelNodes||[],this.nativeFunctions=t.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(var n=0;n<this.functionNodes.length;n++)this.functionMap[this.functionNodes[n].name]=this.functionNodes[n];if(this.subKernelNodes)for(var r=0;r<this.subKernelNodes.length;r++)this.functionMap[this.subKernelNodes[r].name]=this.subKernelNodes[r];if(this.nativeFunctions)for(var i=0;i<this.nativeFunctions.length;i++){var a=this.nativeFunctions[i];this.nativeFunctionNames.push(a.name)}}return o(e,null,[{key:"fromKernel",value:function(t,n,r){for(var i=t.kernelArguments,a=t.kernelConstants,s=t.argumentNames,o=t.argumentSizes,u=t.argumentBitRatios,c=t.constants,l=t.constantBitRatios,h=t.debug,p=t.loopMaxIterations,f=t.nativeFunctions,m=t.output,d=t.optimizeFloatMemory,g=t.precision,v=t.plugins,y=t.source,x=t.subKernels,b=t.functions,w=t.leadingReturnStatement,S=t.followingReturnStatement,T=t.dynamicArguments,_=t.dynamicOutput,A=t.onIstanbulCoverageVariable,E=t.removeIstanbulCoverage,k=new Array(i.length),M={},N=0;N<i.length;N++)k[N]=i[N].type;for(var I=0;I<a.length;I++){var C=a[I];M[C.name]=C.type}var D=function(e,t){return W.needsArgumentType(e,t)},L=function(e,t,n){W.assignArgumentType(e,t,n)},R=function(e,t,n){return W.lookupReturnType(e,t,n)},O=function(e){return W.lookupFunctionArgumentTypes(e)},F=function(e,t){return W.lookupFunctionArgumentName(e,t)},P=function(e,t){return W.lookupFunctionArgumentBitRatio(e,t)},U=function(e,t,n,r){W.assignArgumentType(e,t,n,r)},z=function(e,t,n,r){W.assignArgumentBitRatio(e,t,n,r)},V=function(e,t,n){W.trackFunctionCall(e,t,n)},q=function(e,t){for(var r=[],i=0;i<e.params.length;i++)r.push(e.params[i].name);var a=new n(null,Object.assign({},G,{returnType:null,ast:e,name:e.id.name,argumentNames:r,lookupReturnType:R,lookupFunctionArgumentTypes:O,lookupFunctionArgumentName:F,lookupFunctionArgumentBitRatio:P,needsArgumentType:D,assignArgumentType:L,triggerImplyArgumentType:U,triggerImplyArgumentBitRatio:z,onFunctionCall:V}));a.traceFunctionAST(e),W.addFunctionNode(a)},G=Object.assign({isRootKernel:!1,onNestedFunction:q,lookupReturnType:R,lookupFunctionArgumentTypes:O,lookupFunctionArgumentName:F,lookupFunctionArgumentBitRatio:P,needsArgumentType:D,assignArgumentType:L,triggerImplyArgumentType:U,triggerImplyArgumentBitRatio:z,onFunctionCall:V,onIstanbulCoverageVariable:A?function(e){return A(e,t)}:null,removeIstanbulCoverage:E,optimizeFloatMemory:d,precision:g,constants:c,constantTypes:M,constantBitRatios:l,debug:h,loopMaxIterations:p,output:m,plugins:v,dynamicArguments:T,dynamicOutput:_},r||{}),B=Object.assign({},G,{isRootKernel:!0,name:"kernel",argumentNames:s,argumentTypes:k,argumentSizes:o,argumentBitRatios:u,leadingReturnStatement:w,followingReturnStatement:S});if("object"===typeof y&&y.functionNodes)return(new e).fromJSON(y.functionNodes,n);var K=new n(y,B),j=null;b&&(j=b.map((function(e){return new n(e.source,{returnType:e.returnType,argumentTypes:e.argumentTypes,output:m,plugins:v,constants:c,constantTypes:M,constantBitRatios:l,optimizeFloatMemory:d,precision:g,lookupReturnType:R,lookupFunctionArgumentTypes:O,lookupFunctionArgumentName:F,lookupFunctionArgumentBitRatio:P,needsArgumentType:D,assignArgumentType:L,triggerImplyArgumentType:U,triggerImplyArgumentBitRatio:z,onFunctionCall:V,onNestedFunction:q,onIstanbulCoverageVariable:A?function(e){return A(e,t)}:null,removeIstanbulCoverage:E})})));var H=null;x&&(H=x.map((function(e){var t=e.name,r=e.source;return new n(r,Object.assign({},G,{name:t,isSubKernel:!0,isRootKernel:!1}))})));var W=new e({kernel:t,rootNode:K,functionNodes:j,nativeFunctions:f,subKernelNodes:H});return W}}]),o(e,[{key:"addFunctionNode",value:function(e){if(!e.name)throw new Error("functionNode.name needs set");this.functionMap[e.name]=e,e.isRootKernel&&(this.rootNode=e)}},{key:"traceFunctionCalls",value:function(e,t){if(e=e||"kernel",t=t||[],this.nativeFunctionNames.indexOf(e)>-1)return-1===t.indexOf(e)&&t.push(e),t;var n=this.functionMap[e];if(n){var r=t.indexOf(e);if(-1===r){t.push(e),n.toString();for(var i=0;i<n.calledFunctions.length;++i)this.traceFunctionCalls(n.calledFunctions[i],t)}else{var a=t.splice(r,1)[0];t.push(a)}}return t}},{key:"getPrototypeString",value:function(e){return this.getPrototypes(e).join("\n")}},{key:"getPrototypes",value:function(e){return this.rootNode&&this.rootNode.toString(),e?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(e,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}},{key:"getStringFromFunctionNames",value:function(e){for(var t=[],n=0;n<e.length;++n)this.functionMap[e[n]]&&t.push(this.functionMap[e[n]].toString());return t.join("\n")}},{key:"getPrototypesFromFunctionNames",value:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i=this.nativeFunctionNames.indexOf(r);if(i>-1)t.push(this.nativeFunctions[i].source);else{var a=this.functionMap[r];a&&t.push(a.toString())}}return t}},{key:"toJSON",value:function(){var e=this;return this.traceFunctionCalls(this.rootNode.name).reverse().map((function(t){var n=e.nativeFunctions.indexOf(t);if(n>-1)return{name:t,source:e.nativeFunctions[n].source};if(e.functionMap[t])return e.functionMap[t].toJSON();throw new Error("function ".concat(t," not found"))}))}},{key:"fromJSON",value:function(e,t){this.functionMap={};for(var n=0;n<e.length;n++){var r=e[n];this.functionMap[r.settings.name]=new t(r.ast,r.settings)}return this}},{key:"getString",value:function(e){return e?this.getStringFromFunctionNames(this.traceFunctionCalls(e).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}},{key:"lookupReturnType",value:function(e,t,n){if("CallExpression"!==t.type)throw new Error('expected ast type of "CallExpression", but is '.concat(t.type));if(this._isNativeFunction(e))return this._lookupNativeFunctionReturnType(e);if(this._isFunction(e)){var r=this._getFunction(e);if(r.returnType)return r.returnType;for(var i=0;i<this.lookupChain.length;i++)if(this.lookupChain[i].ast===t){if(0===r.argumentTypes.length&&t.arguments.length>0){for(var a=t.arguments,s=0;s<a.length;s++)this.lookupChain.push({name:n.name,ast:a[i],requestingNode:n}),r.argumentTypes[s]=n.getType(a[s]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error("circlical logic detected!")}this.lookupChain.push({name:n.name,ast:t,requestingNode:n});var o=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=o}return null}},{key:"_getFunction",value:function(e){return this._isFunction(e)||new Error("Function ".concat(e," not found")),this.functionMap[e]}},{key:"_isFunction",value:function(e){return Boolean(this.functionMap[e])}},{key:"_getNativeFunction",value:function(e){for(var t=0;t<this.nativeFunctions.length;t++)if(this.nativeFunctions[t].name===e)return this.nativeFunctions[t];return null}},{key:"_isNativeFunction",value:function(e){return Boolean(this._getNativeFunction(e))}},{key:"_lookupNativeFunctionReturnType",value:function(e){var t=this._getNativeFunction(e);if(t)return t.returnType;throw new Error("Native function ".concat(e," not found"))}},{key:"lookupFunctionArgumentTypes",value:function(e){return this._isNativeFunction(e)?this._getNativeFunction(e).argumentTypes:this._isFunction(e)?this._getFunction(e).argumentTypes:null}},{key:"lookupFunctionArgumentName",value:function(e,t){return this._getFunction(e).argumentNames[t]}},{key:"lookupFunctionArgumentBitRatio",value:function(e,t){if(!this._isFunction(e))throw new Error("function not found");if(this.rootNode.name===e){var n=this.rootNode.argumentNames.indexOf(t);if(-1!==n)return this.rootNode.argumentBitRatios[n]}var r=this._getFunction(e),i=r.argumentNames.indexOf(t);if(-1===i)throw new Error("argument not found");var a=r.argumentBitRatios[i];if("number"!==typeof a)throw new Error("argument bit ratio not found");return a}},{key:"needsArgumentType",value:function(e,t){return!!this._isFunction(e)&&!this._getFunction(e).argumentTypes[t]}},{key:"assignArgumentType",value:function(e,t,n,r){if(this._isFunction(e)){var i=this._getFunction(e);i.argumentTypes[t]||(i.argumentTypes[t]=n)}}},{key:"assignArgumentBitRatio",value:function(e,t,n,r){var i=this._getFunction(e);if(this._isNativeFunction(n))return null;var a=this._getFunction(n),s=i.argumentNames.indexOf(t);if(-1===s)throw new Error("Argument ".concat(t," not found in arguments from function ").concat(e));var o=i.argumentBitRatios[s];if("number"!==typeof o)throw new Error("Bit ratio for argument ".concat(t," not found in function ").concat(e));a.argumentBitRatios||(a.argumentBitRatios=new Array(a.argumentNames.length));var u=a.argumentBitRatios[s];if("number"===typeof u){if(u!==o)throw new Error("Incompatible bit ratio found at function ".concat(e," at argument ").concat(t));return u}return a.argumentBitRatios[s]=o,o}},{key:"trackFunctionCall",value:function(e,t,n){this.functionNodeDependencies[e]||(this.functionNodeDependencies[e]=new Set,this.functionCalls[e]=[]),this.functionNodeDependencies[e].add(t),this.functionCalls[e].push(n)}},{key:"getKernelResultType",value:function(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}},{key:"getSubKernelResultType",value:function(e){for(var t=this.subKernelNodes[e],n=!1,r=0;r<this.rootNode.functionCalls.length;r++)this.rootNode.functionCalls[r].ast.callee.name===t.name&&(n=!0);if(!n)throw new Error("SubKernel ".concat(t.name," never called by kernel"));return t.returnType||t.getType(t.getJsAST())}},{key:"getReturnTypes",value:function(){for(var e=r({},this.rootNode.name,this.rootNode.getType(this.rootNode.ast)),t=this.traceFunctionCalls(this.rootNode.name),n=0;n<t.length;n++){var i=t[n],a=this.functionMap[i];e[i]=a.getType(a.ast)}return e}}]),e}();t.exports={FunctionBuilder:i}},{}],10:[function(e,t,n){var r=e("acorn"),i=e("../utils").utils,a=e("./function-tracer").FunctionTracer,u=function(){"use strict";function e(t,n){if(s(this,e),!t&&!n.ast)throw new Error("source parameter is missing");if(n=n||{},this.source=t,this.ast=null,this.name="string"===typeof t?n.isRootKernel?"kernel":n.name||i.getFunctionNameFromString(t):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerImplyArgumentBitRatio=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames="string"===typeof this.source?i.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,this.onIstanbulCoverageVariable=null,this.removeIstanbulCoverage=!1,n)for(var r in n)n.hasOwnProperty(r)&&this.hasOwnProperty(r)&&(this[r]=n[r]);this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}return o(e,[{key:"validate",value:function(){if("string"!==typeof this.source&&!this.ast)throw new Error("this.source not a string");if(!this.ast&&!i.isFunctionString(this.source))throw new Error("this.source not a function string");if(!this.name)throw new Error("this.name could not be set");if(this.argumentTypes.length>0&&this.argumentTypes.length!==this.argumentNames.length)throw new Error("argumentTypes count of ".concat(this.argumentTypes.length," exceeds ").concat(this.argumentNames.length));if(this.output.length<1)throw new Error("this.output is not big enough")}},{key:"isIdentifierConstant",value:function(e){return!!this.constants&&this.constants.hasOwnProperty(e)}},{key:"isInput",value:function(e){return"Input"===this.argumentTypes[this.argumentNames.indexOf(e)]}},{key:"pushState",value:function(e){this.states.push(e)}},{key:"popState",value:function(e){if(this.state!==e)throw new Error("Cannot popState ".concat(e," when in ").concat(this.state));this.states.pop()}},{key:"isState",value:function(e){return this.state===e}},{key:"astMemberExpressionUnroll",value:function(e){if("Identifier"===e.type)return e.name;if("ThisExpression"===e.type)return"this";if("MemberExpression"===e.type&&e.object&&e.property)return e.object.hasOwnProperty("name")&&"_"===e.object.name[0]?this.astMemberExpressionUnroll(e.property):this.astMemberExpressionUnroll(e.object)+"."+this.astMemberExpressionUnroll(e.property);if(e.hasOwnProperty("expressions")){var t=e.expressions[0];if("Literal"===t.type&&0===t.value&&2===e.expressions.length)return this.astMemberExpressionUnroll(e.expressions[1])}throw this.astErrorOutput("Unknown astMemberExpressionUnroll",e)}},{key:"getJsAST",value:function(e){if(this.ast)return this.ast;if("object"===typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(null===(e=e||r))throw new Error("Missing JS to AST parser");var t=Object.freeze(e.parse("const parser_".concat(this.name," = ").concat(this.source,";"),{locations:!0})),n=t.body[0].declarations[0].init;if(this.traceFunctionAST(n),!t)throw new Error("Failed to parse JS code");return this.ast=n}},{key:"traceFunctionAST",value:function(e){var t=new a(e),n=t.contexts,r=t.declarations,i=t.functions,s=t.identifiers,o=t.functionCalls;this.contexts=n,this.identifiers=s,this.functionCalls=o,this.functions=i;for(var u=0;u<r.length;u++){var c=r[u],l=c.ast,h=c.inForLoopInit,p=c.inForLoopTest,f=l.init,m=this.getDependencies(f),d=null;if(h&&p)d="Integer";else if(f){var g=this.getType(f);switch(g){case"Integer":case"Float":case"Number":d="MemberExpression"===f.type?g:"Number";break;case"LiteralInteger":d="Number";break;default:d=g}}c.valueType=d,c.dependencies=m,c.isSafe=this.isSafeDependencies(m)}for(var v=0;v<i.length;v++)this.onNestedFunction(i[v])}},{key:"getDeclaration",value:function(e){for(var t=0;t<this.identifiers.length;t++){var n=this.identifiers[t];if(e===n.ast)return n.declaration}return null}},{key:"getVariableType",value:function(e){if("Identifier"!==e.type)throw new Error("ast of ".concat(e.type,' not "Identifier"'));var t=null,n=this.argumentNames.indexOf(e.name);if(-1===n){var r=this.getDeclaration(e);if(r)return r.valueType}else{var i=this.argumentTypes[n];i&&(t=i)}if(!t&&this.strictTypingChecking)throw new Error("Declaration of ".concat(name," not found"));return t}},{key:"getLookupType",value:function(e){if(!c.hasOwnProperty(e))throw new Error("unknown typeLookupMap ".concat(e));return c[e]}},{key:"getConstantType",value:function(e){if(this.constantTypes[e]){var t=this.constantTypes[e];return"Float"===t?"Number":t}throw new Error('Type for constant "'.concat(e,'" not declared'))}},{key:"toString",value:function(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join("").trim()}},{key:"toJSON",value:function(){var e={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:e}}},{key:"getType",value:function(e){if(Array.isArray(e))return this.getType(e[e.length-1]);switch(e.type){case"BlockStatement":return this.getType(e.body);case"ArrayExpression":return"Array(".concat(e.elements.length,")");case"Literal":var t=this.astKey(e);return this.literalTypes[t]?this.literalTypes[t]:Number.isInteger(e.value)?"LiteralInteger":!0===e.value||!1===e.value?"Boolean":"Number";case"AssignmentExpression":return this.getType(e.left);case"CallExpression":if(this.isAstMathFunction(e))return"Number";if(!e.callee||!e.callee.name){if("SequenceExpression"===e.callee.type&&e.callee.expressions[e.callee.expressions.length-1].property.name){var n=e.callee.expressions[e.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(n,e.arguments),this.lookupReturnType(n,e,this)}if("this.color"===this.getVariableSignature(e.callee,!0))return null;throw this.astErrorOutput("Unknown call expression",e)}if(e.callee&&e.callee.name){var r=e.callee.name;return this.inferArgumentTypesIfNeeded(r,e.arguments),this.lookupReturnType(r,e,this)}throw this.astErrorOutput('Unhandled getType Type "'.concat(e.type,'"'),e);case"LogicalExpression":return"Boolean";case"BinaryExpression":switch(e.operator){case"%":case"/":if(this.fixIntegerDivisionAccuracy)return"Number";break;case">":case"<":return"Boolean";case"&":case"|":case"^":case"<<":case">>":case">>>":return"Integer"}var i=this.getType(e.left);if(this.isState("skip-literal-correction"))return i;if("LiteralInteger"===i){var a=this.getType(e.right);return"LiteralInteger"===a?e.left.value%1===0?"Integer":"Float":a}return c[i]||i;case"UpdateExpression":return this.getType(e.argument);case"UnaryExpression":return"~"===e.operator?"Integer":this.getType(e.argument);case"VariableDeclaration":for(var s,o=e.declarations,u=0;u<o.length;u++){var l=o[u];s=this.getType(l)}if(!s)throw this.astErrorOutput("Unable to find type for declaration",e);return s;case"VariableDeclarator":var h=this.getDeclaration(e.id);if(!h)throw this.astErrorOutput("Unable to find declarator",e);if(!h.valueType)throw this.astErrorOutput("Unable to find declarator valueType",e);return h.valueType;case"Identifier":if("Infinity"===e.name)return"Number";if(this.isAstVariable(e)&&"value"===this.getVariableSignature(e))return this.getCheckVariableType(e);var p=this.findIdentifierOrigin(e);return p&&p.init?this.getType(p.init):null;case"ReturnStatement":return this.getType(e.argument);case"MemberExpression":if(this.isAstMathFunction(e)){switch(e.property.name){case"ceil":case"floor":case"round":return"Integer"}return"Number"}if(this.isAstVariable(e)){switch(this.getVariableSignature(e)){case"value[]":return this.getLookupType(this.getCheckVariableType(e.object));case"value[][]":return this.getLookupType(this.getCheckVariableType(e.object.object));case"value[][][]":return this.getLookupType(this.getCheckVariableType(e.object.object.object));case"value[][][][]":return this.getLookupType(this.getCheckVariableType(e.object.object.object.object));case"value.thread.value":case"this.thread.value":return"Integer";case"this.output.value":return this.dynamicOutput?"Integer":"LiteralInteger";case"this.constants.value":return this.getConstantType(e.property.name);case"this.constants.value[]":return this.getLookupType(this.getConstantType(e.object.property.name));case"this.constants.value[][]":return this.getLookupType(this.getConstantType(e.object.object.property.name));case"this.constants.value[][][]":return this.getLookupType(this.getConstantType(e.object.object.object.property.name));case"this.constants.value[][][][]":return this.getLookupType(this.getConstantType(e.object.object.object.object.property.name));case"fn()[]":case"fn()[][]":case"fn()[][][]":return this.getLookupType(this.getType(e.object));case"value.value":if(this.isAstMathVariable(e))return"Number";switch(e.property.name){case"r":case"g":case"b":case"a":return this.getLookupType(this.getCheckVariableType(e.object))}case"[][]":return"Number"}throw this.astErrorOutput("Unhandled getType MemberExpression",e)}throw this.astErrorOutput("Unhandled getType MemberExpression",e);case"ConditionalExpression":return this.getType(e.consequent);case"FunctionDeclaration":case"FunctionExpression":var f=this.findLastReturn(e.body);return f?this.getType(f):null;case"IfStatement":return this.getType(e.consequent);case"SequenceExpression":return this.getType(e.expressions[e.expressions.length-1]);default:throw this.astErrorOutput('Unhandled getType Type "'.concat(e.type,'"'),e)}}},{key:"getCheckVariableType",value:function(e){var t=this.getVariableType(e);if(!t)throw this.astErrorOutput("".concat(e.type," is not defined"),e);return t}},{key:"inferArgumentTypesIfNeeded",value:function(e,t){for(var n=0;n<t.length;n++)if(this.needsArgumentType(e,n)){var r=this.getType(t[n]);if(!r)throw this.astErrorOutput("Unable to infer argument ".concat(n),t[n]);this.assignArgumentType(e,n,r)}}},{key:"isAstMathVariable",value:function(e){return"MemberExpression"===e.type&&e.object&&"Identifier"===e.object.type&&"Math"===e.object.name&&e.property&&"Identifier"===e.property.type&&["E","PI","SQRT2","SQRT1_2","LN2","LN10","LOG2E","LOG10E"].indexOf(e.property.name)>-1}},{key:"isAstMathFunction",value:function(e){return"CallExpression"===e.type&&e.callee&&"MemberExpression"===e.callee.type&&e.callee.object&&"Identifier"===e.callee.object.type&&"Math"===e.callee.object.name&&e.callee.property&&"Identifier"===e.callee.property.type&&["abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","expm1","exp","floor","fround","imul","log","log2","log10","log1p","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].indexOf(e.callee.property.name)>-1}},{key:"isAstVariable",value:function(e){return"Identifier"===e.type||"MemberExpression"===e.type}},{key:"isSafe",value:function(e){return this.isSafeDependencies(this.getDependencies(e))}},{key:"isSafeDependencies",value:function(e){return!e||!e.every||e.every((function(e){return e.isSafe}))}},{key:"getDependencies",value:function(e,t,n){if(t||(t=[]),!e)return null;if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.getDependencies(e[r],t,n);return t}switch(e.type){case"AssignmentExpression":return this.getDependencies(e.left,t,n),this.getDependencies(e.right,t,n),t;case"ConditionalExpression":return this.getDependencies(e.test,t,n),this.getDependencies(e.alternate,t,n),this.getDependencies(e.consequent,t,n),t;case"Literal":t.push({origin:"literal",value:e.value,isSafe:!0!==n&&e.value>-1/0&&e.value<1/0&&!isNaN(e.value)});break;case"VariableDeclarator":return this.getDependencies(e.init,t,n);case"Identifier":var i=this.getDeclaration(e);if(i)t.push({name:e.name,origin:"declaration",isSafe:!n&&this.isSafeDependencies(i.dependencies)});else if(this.argumentNames.indexOf(e.name)>-1)t.push({name:e.name,origin:"argument",isSafe:!1});else if(this.strictTypingChecking)throw new Error('Cannot find identifier origin "'.concat(e.name,'"'));break;case"FunctionDeclaration":return this.getDependencies(e.body.body[e.body.body.length-1],t,n);case"ReturnStatement":return this.getDependencies(e.argument,t);case"BinaryExpression":case"LogicalExpression":return n="/"===e.operator||"*"===e.operator,this.getDependencies(e.left,t,n),this.getDependencies(e.right,t,n),t;case"UnaryExpression":case"UpdateExpression":return this.getDependencies(e.argument,t,n);case"VariableDeclaration":return this.getDependencies(e.declarations,t,n);case"ArrayExpression":return t.push({origin:"declaration",isSafe:!0}),t;case"CallExpression":return t.push({origin:"function",isSafe:!0}),t;case"MemberExpression":var a=this.getMemberExpressionDetails(e);switch(a.signature){case"value[]":this.getDependencies(e.object,t,n);break;case"value[][]":this.getDependencies(e.object.object,t,n);break;case"value[][][]":this.getDependencies(e.object.object.object,t,n);break;case"this.output.value":this.dynamicOutput&&t.push({name:a.name,origin:"output",isSafe:!1})}if(a)return a.property&&this.getDependencies(a.property,t,n),a.xProperty&&this.getDependencies(a.xProperty,t,n),a.yProperty&&this.getDependencies(a.yProperty,t,n),a.zProperty&&this.getDependencies(a.zProperty,t,n),t;case"SequenceExpression":return this.getDependencies(e.expressions,t,n);default:throw this.astErrorOutput("Unhandled type ".concat(e.type," in getDependencies"),e)}return t}},{key:"getVariableSignature",value:function(e,t){if(!this.isAstVariable(e))throw new Error('ast of type "'.concat(e.type,'" is not a variable signature'));if("Identifier"===e.type)return"value";for(var n=[];e;)e.computed?n.push("[]"):"ThisExpression"===e.type?n.unshift("this"):e.property&&e.property.name?"x"===e.property.name||"y"===e.property.name||"z"===e.property.name?n.unshift(t?"."+e.property.name:".value"):"constants"===e.property.name||"thread"===e.property.name||"output"===e.property.name?n.unshift("."+e.property.name):n.unshift(t?"."+e.property.name:".value"):e.name?n.unshift(t?e.name:"value"):e.callee&&e.callee.name?n.unshift(t?e.callee.name+"()":"fn()"):e.elements?n.unshift("[]"):n.unshift("unknown"),e=e.object;var r=n.join("");return t||["value","value[]","value[][]","value[][][]","value[][][][]","value.value","value.value[]","value.value[][]","value.thread.value","this.thread.value","this.output.value","this.constants.value","this.constants.value[]","this.constants.value[][]","this.constants.value[][][]","this.constants.value[][][][]","fn()[]","fn()[][]","fn()[][][]","[][]"].indexOf(r)>-1?r:null}},{key:"build",value:function(){return this.toString().length>0}},{key:"astGeneric",value:function(e,t){if(null===e)throw this.astErrorOutput("NULL ast",e);if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.astGeneric(e[n],t);return t}switch(e.type){case"FunctionDeclaration":return this.astFunctionDeclaration(e,t);case"FunctionExpression":return this.astFunctionExpression(e,t);case"ReturnStatement":return this.astReturnStatement(e,t);case"Literal":return this.astLiteral(e,t);case"BinaryExpression":return this.astBinaryExpression(e,t);case"Identifier":return this.astIdentifierExpression(e,t);case"AssignmentExpression":return this.astAssignmentExpression(e,t);case"ExpressionStatement":return this.astExpressionStatement(e,t);case"EmptyStatement":return this.astEmptyStatement(e,t);case"BlockStatement":return this.astBlockStatement(e,t);case"IfStatement":return this.astIfStatement(e,t);case"SwitchStatement":return this.astSwitchStatement(e,t);case"BreakStatement":return this.astBreakStatement(e,t);case"ContinueStatement":return this.astContinueStatement(e,t);case"ForStatement":return this.astForStatement(e,t);case"WhileStatement":return this.astWhileStatement(e,t);case"DoWhileStatement":return this.astDoWhileStatement(e,t);case"VariableDeclaration":return this.astVariableDeclaration(e,t);case"VariableDeclarator":return this.astVariableDeclarator(e,t);case"ThisExpression":return this.astThisExpression(e,t);case"SequenceExpression":return this.astSequenceExpression(e,t);case"UnaryExpression":return this.astUnaryExpression(e,t);case"UpdateExpression":return this.astUpdateExpression(e,t);case"LogicalExpression":return this.astLogicalExpression(e,t);case"MemberExpression":return this.astMemberExpression(e,t);case"CallExpression":return this.astCallExpression(e,t);case"ArrayExpression":return this.astArrayExpression(e,t);case"DebuggerStatement":return this.astDebuggerStatement(e,t);case"ConditionalExpression":return this.astConditionalExpression(e,t)}throw this.astErrorOutput("Unknown ast type : "+e.type,e)}},{key:"astErrorOutput",value:function(e,t){if("string"!==typeof this.source)return new Error(e);var n=i.getAstString(this.source,t),r=this.source.substr(t.start).split(/\n/),a=r.length>0?r[r.length-1]:0;return new Error("".concat(e," on line ").concat(r.length,", position ").concat(a.length,":\n ").concat(n))}},{key:"astDebuggerStatement",value:function(e,t){return t}},{key:"astConditionalExpression",value:function(e,t){if("ConditionalExpression"!==e.type)throw this.astErrorOutput("Not a conditional expression",e);return t.push("("),this.astGeneric(e.test,t),t.push("?"),this.astGeneric(e.consequent,t),t.push(":"),this.astGeneric(e.alternate,t),t.push(")"),t}},{key:"astFunction",value:function(e,t){throw new Error('"astFunction" not defined on '.concat(this.constructor.name))}},{key:"astFunctionDeclaration",value:function(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}},{key:"astFunctionExpression",value:function(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}},{key:"isChildFunction",value:function(e){for(var t=0;t<this.functions.length;t++)if(this.functions[t]===e)return!0;return!1}},{key:"astReturnStatement",value:function(e,t){return t}},{key:"astLiteral",value:function(e,t){return this.literalTypes[this.astKey(e)]="Number",t}},{key:"astBinaryExpression",value:function(e,t){return t}},{key:"astIdentifierExpression",value:function(e,t){return t}},{key:"astAssignmentExpression",value:function(e,t){return t}},{key:"astExpressionStatement",value:function(e,t){return this.astGeneric(e.expression,t),t.push(";"),t}},{key:"astEmptyStatement",value:function(e,t){return t}},{key:"astBlockStatement",value:function(e,t){return t}},{key:"astIfStatement",value:function(e,t){return t}},{key:"astSwitchStatement",value:function(e,t){return t}},{key:"astBreakStatement",value:function(e,t){return t.push("break;"),t}},{key:"astContinueStatement",value:function(e,t){return t.push("continue;\n"),t}},{key:"astForStatement",value:function(e,t){return t}},{key:"astWhileStatement",value:function(e,t){return t}},{key:"astDoWhileStatement",value:function(e,t){return t}},{key:"astVariableDeclarator",value:function(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push("="),this.astGeneric(e.init,t)),t}},{key:"astThisExpression",value:function(e,t){return t}},{key:"isIstanbulAST",value:function(e){var t=this.getVariableSignature(e);return"value.value[]"===t||"value.value[][]"===t}},{key:"astSequenceExpression",value:function(e,t){for(var n=e.expressions,r=[],i=0;i<n.length;i++){var a=n[i];if(!this.removeIstanbulCoverage||"UpdateExpression"!==a.type||!this.isIstanbulAST(a.argument)){var s=[];this.astGeneric(a,s),r.push(s.join(""))}}return r.length>1?t.push("(",r.join(","),")"):t.push(r[0]),t}},{key:"astUnaryExpression",value:function(e,t){return this.checkAndUpconvertBitwiseUnary(e,t)||(e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator))),t}},{key:"checkAndUpconvertBitwiseUnary",value:function(e,t){}},{key:"astUpdateExpression",value:function(e,t){return this.removeIstanbulCoverage&&(this.getVariableSignature(e.argument),this.isIstanbulAST(e.argument))||(e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator))),t}},{key:"astLogicalExpression",value:function(e,t){return t.push("("),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(")"),t}},{key:"astMemberExpression",value:function(e,t){return t}},{key:"astCallExpression",value:function(e,t){return t}},{key:"astArrayExpression",value:function(e,t){return t}},{key:"getMemberExpressionDetails",value:function(e){if("MemberExpression"!==e.type)throw this.astErrorOutput("Expression ".concat(e.type," not a MemberExpression"),e);var t=null,n=null,r=this.getVariableSignature(e);switch(r){case"value":return null;case"value.thread.value":case"this.thread.value":case"this.output.value":return{signature:r,type:"Integer",name:e.property.name};case"value[]":if("string"!==typeof e.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.name,origin:"user",signature:r,type:this.getVariableType(e.object),xProperty:e.property};case"value[][]":if("string"!==typeof e.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.object.name,origin:"user",signature:r,type:this.getVariableType(e.object.object),yProperty:e.object.property,xProperty:e.property};case"value[][][]":if("string"!==typeof e.object.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(e.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"value[][][][]":if("string"!==typeof e.object.object.object.object.name)throw this.astErrorOutput("Unexpected expression",e);return{name:t=e.object.object.object.object.name,origin:"user",signature:r,type:this.getVariableType(e.object.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"value.value":if("string"!==typeof e.property.name)throw this.astErrorOutput("Unexpected expression",e);if(this.isAstMathVariable(e))return{name:t=e.property.name,origin:"Math",type:"Number",signature:r};switch(e.property.name){case"r":case"g":case"b":case"a":return{name:t=e.object.name,property:e.property.name,origin:"user",signature:r,type:"Number"};default:throw this.astErrorOutput("Unexpected expression",e)}case"this.constants.value":if("string"!==typeof e.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.property.name,!(n=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r};case"this.constants.value[]":if("string"!==typeof e.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.property.name,!(n=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r,xProperty:e.property};case"this.constants.value[][]":if("string"!==typeof e.object.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.object.property.name,!(n=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r,yProperty:e.object.property,xProperty:e.property};case"this.constants.value[][][]":if("string"!==typeof e.object.object.object.property.name)throw this.astErrorOutput("Unexpected expression",e);if(t=e.object.object.object.property.name,!(n=this.getConstantType(t)))throw this.astErrorOutput("Constant has no type",e);return{name:t,type:n,origin:"constants",signature:r,zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case"fn()[]":case"[][]":return{signature:r,property:e.property};case"value.value[]":if(this.removeIstanbulCoverage)return{signature:r};if(this.onIstanbulCoverageVariable)return this.onIstanbulCoverageVariable(e.object.object.name),{signature:r};case"value.value[][]":if(this.removeIstanbulCoverage)return{signature:r};if(this.onIstanbulCoverageVariable)return this.onIstanbulCoverageVariable(e.object.object.object.name),{signature:r};default:throw this.astErrorOutput("Unexpected expression",e)}}},{key:"findIdentifierOrigin",value:function(e){for(var t=[this.ast];t.length>0;){var n=t[0];if("VariableDeclarator"===n.type&&n.id&&n.id.name&&n.id.name===e.name)return n;if(t.shift(),n.argument)t.push(n.argument);else if(n.body)t.push(n.body);else if(n.declarations)t.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)t.push(n[r])}return null}},{key:"findLastReturn",value:function(e){for(var t=[e||this.ast];t.length>0;){var n=t.pop();if("ReturnStatement"===n.type)return n;if("FunctionDeclaration"!==n.type)if(n.argument)t.push(n.argument);else if(n.body)t.push(n.body);else if(n.declarations)t.push(n.declarations);else if(Array.isArray(n))for(var r=0;r<n.length;r++)t.push(n[r]);else n.consequent?t.push(n.consequent):n.cases&&t.push(n.cases)}return null}},{key:"getInternalVariableName",value:function(e){return this._internalVariableNames.hasOwnProperty(e)||(this._internalVariableNames[e]=0),this._internalVariableNames[e]++,1===this._internalVariableNames[e]?e:e+this._internalVariableNames[e]}},{key:"astKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(!e.start||!e.end)throw new Error("AST start and end needed");return"".concat(e.start).concat(t).concat(e.end)}},{key:"state",get:function(){return this.states[this.states.length-1]}}]),e}(),c={Number:"Number",Float:"Float",Integer:"Integer",Array:"Number","Array(2)":"Number","Array(3)":"Number","Array(4)":"Number",Array2D:"Number",Array3D:"Number",Input:"Number",HTMLCanvas:"Array(4)",HTMLImage:"Array(4)",HTMLVideo:"Array(4)",HTMLImageArray:"Array(4)",NumberTexture:"Number",MemoryOptimizedNumberTexture:"Number","Array1D(2)":"Array(2)","Array1D(3)":"Array(3)","Array1D(4)":"Array(4)","Array2D(2)":"Array(2)","Array2D(3)":"Array(3)","Array2D(4)":"Array(4)","Array3D(2)":"Array(2)","Array3D(3)":"Array(3)","Array3D(4)":"Array(4)","ArrayTexture(1)":"Number","ArrayTexture(2)":"Array(2)","ArrayTexture(3)":"Array(3)","ArrayTexture(4)":"Array(4)"};t.exports={FunctionNode:u}},{"../utils":114,"./function-tracer":11,acorn:1}],11:[function(e,t,n){var r=e("../utils").utils;function i(e){return e.length>0?e[e.length-1]:null}var a="trackIdentifiers",u="memberExpression",c="inForLoopInit",l=function(){"use strict";function e(t){s(this,e),this.runningContexts=[],this.functionContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.trackedIdentifiers=null,this.states=[],this.newFunctionContext(),this.scan(t)}return o(e,[{key:"isState",value:function(e){return this.states[this.states.length-1]===e}},{key:"hasState",value:function(e){return this.states.indexOf(e)>-1}},{key:"pushState",value:function(e){this.states.push(e)}},{key:"popState",value:function(e){if(!this.isState(e))throw new Error('Cannot pop the non-active state "'.concat(e,'"'));this.states.pop()}},{key:"newFunctionContext",value:function(){var e={"@contextType":"function"};this.contexts.push(e),this.functionContexts.push(e)}},{key:"newContext",value:function(e){var t=Object.assign({"@contextType":"const/let"},this.currentContext);this.contexts.push(t),this.runningContexts.push(t),e();var n=this.currentFunctionContext;for(var r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=n[r]);return this.runningContexts.pop(),t}},{key:"useFunctionContext",value:function(e){var t=i(this.functionContexts);this.runningContexts.push(t),e(),this.runningContexts.pop()}},{key:"getIdentifiers",value:function(e){var t=this.trackedIdentifiers=[];return this.pushState(a),e(),this.trackedIdentifiers=null,this.popState(a),t}},{key:"getDeclaration",value:function(e){var t=this.currentContext,n=this.currentFunctionContext,r=this.runningContexts,i=t[e]||n[e]||null;if(!i&&t===n&&r.length>0){var a=r[r.length-2];if(a[e])return a[e]}return i}},{key:"scan",value:function(e){var t=this;if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++)this.scan(e[n]);else switch(e.type){case"Program":this.useFunctionContext((function(){t.scan(e.body)}));break;case"BlockStatement":this.newContext((function(){t.scan(e.body)}));break;case"AssignmentExpression":case"LogicalExpression":case"BinaryExpression":this.scan(e.left),this.scan(e.right);break;case"UpdateExpression":if("++"===e.operator){var i=this.getDeclaration(e.argument.name);i&&(i.suggestedType="Integer")}this.scan(e.argument);break;case"UnaryExpression":this.scan(e.argument);break;case"VariableDeclaration":"var"===e.kind?this.useFunctionContext((function(){e.declarations=r.normalizeDeclarations(e),t.scan(e.declarations)})):(e.declarations=r.normalizeDeclarations(e),this.scan(e.declarations));break;case"VariableDeclarator":var s=this.currentContext,o=this.hasState(c),l={ast:e,context:s,name:e.id.name,origin:"declaration",inForLoopInit:o,inForLoopTest:null,assignable:s===this.currentFunctionContext||!o&&!s.hasOwnProperty(e.id.name),suggestedType:null,valueType:null,dependencies:null,isSafe:null};s[e.id.name]||(s[e.id.name]=l),this.declarations.push(l),this.scan(e.id),this.scan(e.init);break;case"FunctionExpression":case"FunctionDeclaration":0===this.runningContexts.length?this.scan(e.body):this.functions.push(e);break;case"IfStatement":this.scan(e.test),this.scan(e.consequent),e.alternate&&this.scan(e.alternate);break;case"ForStatement":var h,p=this.newContext((function(){t.pushState(c),t.scan(e.init),t.popState(c),h=t.getIdentifiers((function(){t.scan(e.test)})),t.scan(e.update),t.newContext((function(){t.scan(e.body)}))}));if(h)for(var f in p)"@contextType"!==f&&h.indexOf(f)>-1&&(p[f].inForLoopTest=!0);break;case"DoWhileStatement":case"WhileStatement":this.newContext((function(){t.scan(e.body),t.scan(e.test)}));break;case"Identifier":this.isState(a)&&this.trackedIdentifiers.push(e.name),this.identifiers.push({context:this.currentContext,declaration:this.getDeclaration(e.name),ast:e});break;case"ReturnStatement":this.returnStatements.push(e),this.scan(e.argument);break;case"MemberExpression":this.pushState(u),this.scan(e.object),this.scan(e.property),this.popState(u);break;case"ExpressionStatement":this.scan(e.expression);break;case"SequenceExpression":this.scan(e.expressions);break;case"CallExpression":this.functionCalls.push({context:this.currentContext,ast:e}),this.scan(e.arguments);break;case"ArrayExpression":this.scan(e.elements);break;case"ConditionalExpression":this.scan(e.test),this.scan(e.alternate),this.scan(e.consequent);break;case"SwitchStatement":this.scan(e.discriminant),this.scan(e.cases);break;case"SwitchCase":this.scan(e.test),this.scan(e.consequent);break;case"ThisExpression":case"Literal":case"DebuggerStatement":case"EmptyStatement":case"BreakStatement":case"ContinueStatement":break;default:throw new Error('unhandled type "'.concat(e.type,'"'))}}},{key:"currentFunctionContext",get:function(){return i(this.functionContexts)}},{key:"currentContext",get:function(){return i(this.runningContexts)}}]),e}();t.exports={FunctionTracer:l}},{"../utils":114}],12:[function(e,t,n){var r=e("gl-wiretap").glWiretap,i=e("../../utils").utils;function a(e){return e.toString().replace("=>","").replace(/^function /,"").replace(/utils[.]/g,"/*utils.*/")}function s(e,t){var n="single"===t.precision?e:"new Float32Array(".concat(e,".buffer)");return t.output[2]?"renderOutput(".concat(n,", ").concat(t.output[0],", ").concat(t.output[1],", ").concat(t.output[2],")"):t.output[1]?"renderOutput(".concat(n,", ").concat(t.output[0],", ").concat(t.output[1],")"):"renderOutput(".concat(n,", ").concat(t.output[0],")")}function o(e,t){var n=e.toArray.toString(),r=!/^function/.test(n),a=i.flattenFunctionToString("".concat(r?"function ":"").concat(n),{findDependency:function(t,n){if("utils"===t)return"const ".concat(n," = ").concat(i[n].toString(),";");if("this"===t)return"".concat(r?"function ":"").concat(e[n].toString());throw new Error("unhandled fromObject")},thisLookup:function(n,r){if("texture"===n)return t;if("context"===n)return r?null:"gl";if("_framebuffer"===n)return"_framebuffer";if(e.hasOwnProperty(n))return JSON.stringify(e[n]);throw new Error("unhandled thisLookup ".concat(n))}});return"() => {\n  let _framebuffer;\n  ".concat(a,"\n  return toArray();\n  }")}function u(e,t,n,r,i){if(null===e)return null;if(null===t)return null;switch(typeof e){case"boolean":case"number":return null}if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)for(var a=0;a<t.length;a++){var s=t[a];if(("HTMLImageArray"===s.type||!s)&&s.uploadValue===e){var o=n[a].indexOf(e);if(-1!==o){var u="uploadValue_".concat(s.name,"[").concat(o,"]");return r.insertVariable(u,e),u}}}for(var c=0;c<t.length;c++){var l=t[c];if(e===l.uploadValue){var h="uploadValue_".concat(l.name);return r.insertVariable(h,l),h}}return null}t.exports={glKernelString:function(e,t,n,c,l){n.built||n.build.apply(n,t),t=t?Array.from(t).map((function(e){switch(typeof e){case"boolean":return new Boolean(e);case"number":return new Number(e);default:return e}})):null;var h=[],p=r(n.context,{useTrackablePrimitives:!0,onReadPixels:function(e){if(L.subKernels){if(f){var t=L.subKernels[m++].property;h.push("    result".concat(isNaN(t)?"."+t:"[".concat(t,"]")," = ").concat(s(e,L),";"))}else h.push("    const result = { result: ".concat(s(e,L)," };")),f=!0;m===L.subKernels.length&&h.push("    return result;")}else e?h.push("    return ".concat(s(e,L),";")):h.push("    return null;")},onUnrecognizedArgumentLookup:function(e){var t=u(e,L.kernelArguments,[],p);if(t)return t;var n=u(e,L.kernelConstants,w?Object.keys(w).map((function(e){return w[e]})):[],p);return n||null}}),f=!1,m=0,d=n.source,g=n.canvas,v=n.output,y=n.pipeline,x=n.graphical,b=n.loopMaxIterations,w=n.constants,S=n.optimizeFloatMemory,T=n.precision,_=n.fixIntegerDivisionAccuracy,A=n.functions,E=n.nativeFunctions,k=n.subKernels,M=n.immutable,N=n.argumentTypes,I=n.constantTypes,C=(n.kernelArguments,n.kernelConstants),D=n.tactic,L=new e(d,{canvas:g,context:p,checkContext:!1,output:v,pipeline:y,graphical:x,loopMaxIterations:b,constants:w,optimizeFloatMemory:S,precision:T,fixIntegerDivisionAccuracy:_,functions:A,nativeFunctions:E,subKernels:k,immutable:M,argumentTypes:N,constantTypes:I,tactic:D}),R=[];if(p.setIndent(2),L.build.apply(L,t),R.push(p.toString()),p.reset(),L.kernelArguments.forEach((function(e,n){switch(e.type){case"Integer":case"Boolean":case"Number":case"Float":case"Array":case"Array(2)":case"Array(3)":case"Array(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":p.insertVariable("uploadValue_".concat(e.name),e.uploadValue);break;case"HTMLImageArray":for(var r=0;r<t[n].length;r++){var i=t[n];p.insertVariable("uploadValue_".concat(e.name,"[").concat(r,"]"),i[r])}break;case"Input":p.insertVariable("uploadValue_".concat(e.name),e.uploadValue);break;case"MemoryOptimizedNumberTexture":case"NumberTexture":case"Array1D(2)":case"Array1D(3)":case"Array1D(4)":case"Array2D(2)":case"Array2D(3)":case"Array2D(4)":case"Array3D(2)":case"Array3D(3)":case"Array3D(4)":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":p.insertVariable("uploadValue_".concat(e.name),t[n].texture);break;default:throw new Error("unhandled kernelArgumentType insertion for glWiretap of type ".concat(e.type))}})),R.push("/** start of injected functions **/"),R.push("function ".concat(a(i.flattenTo))),R.push("function ".concat(a(i.flatten2dArrayTo))),R.push("function ".concat(a(i.flatten3dArrayTo))),R.push("function ".concat(a(i.flatten4dArrayTo))),R.push("function ".concat(a(i.isArray))),L.renderOutput!==L.renderTexture&&L.formatValues&&R.push("  const renderOutput = function ".concat(a(L.formatValues),";")),R.push("/** end of injected functions **/"),R.push("  const innerKernel = function (".concat(L.kernelArguments.map((function(e){return e.varName})).join(", "),") {")),p.setIndent(4),L.run.apply(L,t),L.renderKernels?L.renderKernels():L.renderOutput&&L.renderOutput(),R.push("    /** start setup uploads for kernel values **/"),L.kernelArguments.forEach((function(e){R.push("    "+e.getStringValueHandler().split("\n").join("\n    "))})),R.push("    /** end setup uploads for kernel values **/"),R.push(p.toString()),L.renderOutput===L.renderTexture)if(p.reset(),L.renderKernels){var O=L.renderKernels(),F=p.getContextVariableName(L.texture.texture);R.push("    return {\n      result: {\n        texture: ".concat(F,",\n        type: '").concat(O.result.type,"',\n        toArray: ").concat(o(O.result,F),"\n      },"));for(var P=L.subKernels,U=L.mappedTextures,z=0;z<P.length;z++){var V=U[z],q=P[z],G=O[q.property],B=p.getContextVariableName(V.texture);R.push("\n      ".concat(q.property,": {\n        texture: ").concat(B,",\n        type: '").concat(G.type,"',\n        toArray: ").concat(o(G,B),"\n      },"))}R.push("    };")}else{var K=L.renderOutput(),j=p.getContextVariableName(L.texture.texture);R.push("    return {\n        texture: ".concat(j,",\n        type: '").concat(K.type,"',\n        toArray: ").concat(o(K,j),"\n      };"))}R.push("    ".concat(l?"\n"+l+"    ":"")),R.push(h.join("\n")),R.push("  };"),L.graphical&&(R.push(function(e){var t=e.getPixels.toString(),n=!/^function/.test(t);return i.flattenFunctionToString("".concat(n?"function ":"").concat(t),{findDependency:function(e,t){return"utils"===e?"const ".concat(t," = ").concat(i[t].toString(),";"):null},thisLookup:function(t){if("context"===t)return null;if(e.hasOwnProperty(t))return JSON.stringify(e[t]);throw new Error("unhandled thisLookup ".concat(t))}})}(L)),R.push("  innerKernel.getPixels = getPixels;")),R.push("  return innerKernel;");var H=[];return C.forEach((function(e){H.push("".concat(e.getStringValueHandler()))})),"function kernel(settings) {\n  const { context, constants } = settings;\n  ".concat(H.join(""),"\n  ").concat(c||"","\n").concat(R.join("\n"),"\n}")}}},{"../../utils":114,"gl-wiretap":3}],13:[function(e,t,n){var r=e("../kernel").Kernel,i=e("../../utils").utils,a=e("./texture/array-2-float").GLTextureArray2Float,h=e("./texture/array-2-float-2d").GLTextureArray2Float2D,p=e("./texture/array-2-float-3d").GLTextureArray2Float3D,f=e("./texture/array-3-float").GLTextureArray3Float,m=e("./texture/array-3-float-2d").GLTextureArray3Float2D,d=e("./texture/array-3-float-3d").GLTextureArray3Float3D,g=e("./texture/array-4-float").GLTextureArray4Float,v=e("./texture/array-4-float-2d").GLTextureArray4Float2D,y=e("./texture/array-4-float-3d").GLTextureArray4Float3D,x=e("./texture/float").GLTextureFloat,b=e("./texture/float-2d").GLTextureFloat2D,w=e("./texture/float-3d").GLTextureFloat3D,S=e("./texture/memory-optimized").GLTextureMemoryOptimized,T=e("./texture/memory-optimized-2d").GLTextureMemoryOptimized2D,_=e("./texture/memory-optimized-3d").GLTextureMemoryOptimized3D,A=e("./texture/unsigned").GLTextureUnsigned,E=e("./texture/unsigned-2d").GLTextureUnsigned2D,k=e("./texture/unsigned-3d").GLTextureUnsigned3D,M=e("./texture/graphical").GLTextureGraphical,N=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).transferValues=null,i.formatValues=null,i.TextureConstructor=null,i.renderOutput=null,i.renderRawOutput=null,i.texSize=null,i.translatedSource=null,i.compiledFragmentShader=null,i.compiledVertexShader=null,i.switchingKernels=null,i._textureSwitched=null,i._mappedTextureSwitched=null,i}return o(n,[{key:"setFixIntegerDivisionAccuracy",value:function(e){return this.fixIntegerDivisionAccuracy=e,this}},{key:"setPrecision",value:function(e){return this.precision=e,this}},{key:"setFloatTextures",value:function(e){return i.warnDeprecated("method","setFloatTextures","setOptimizeFloatMemory"),this.floatTextures=e,this}}],[{key:"getIsFloatRead",value:function(){var e=new this("function kernelFunction() {\n      return 1;\n    }",{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:"single",returnType:"Number",tactic:"speed"});e.build(),e.run();var t=e.renderOutput();return e.destroy(!0),1===t[0]}},{key:"getIsIntegerDivisionAccurate",value:function(){var e=new this(function(e,t){return e[this.thread.x]/t[this.thread.x]}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:"Number",precision:"unsigned",tactic:"speed"}),t=[[6,6030401],[3,3991]];e.build.apply(e,t),e.run.apply(e,t);var n=e.renderOutput();return e.destroy(!0),2===n[0]&&1511===n[1]}},{key:"getIsSpeedTacticSupported",value:function(){var e=new this(function(e){return e[this.thread.x]}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[4],returnType:"Number",precision:"unsigned",tactic:"speed"}),t=[[0,1,2,3]];e.build.apply(e,t),e.run.apply(e,t);var n=e.renderOutput();return e.destroy(!0),0===Math.round(n[0])&&1===Math.round(n[1])&&2===Math.round(n[2])&&3===Math.round(n[3])}},{key:"getFeatures",value:function(){var e=this.testContext,t=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:t,kernelMap:t,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),lowFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediumIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),mediumFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT),highFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)})}},{key:"setupFeatureChecks",value:function(){throw new Error('"setupFeatureChecks" not defined on '.concat(this.name))}},{key:"getSignature",value:function(e,t){return e.getVariablePrecisionString()+(t.length>0?":"+t.join(","):"")}},{key:"nativeFunctionArguments",value:function(e){for(var t=[],n=[],r=[],i=/^[a-zA-Z_]/,a=/[a-zA-Z_0-9]/,s=0,o=null,u=null;s<e.length;){var c=e[s],l=e[s+1],h=r.length>0?r[r.length-1]:null;if("FUNCTION_ARGUMENTS"!==h||"/"!==c||"*"!==l)if("MULTI_LINE_COMMENT"!==h||"*"!==c||"/"!==l)if("FUNCTION_ARGUMENTS"!==h||"/"!==c||"/"!==l)if("COMMENT"!==h||"\n"!==c)if(null!==h||"("!==c){if("FUNCTION_ARGUMENTS"===h){if(")"===c){r.pop();break}if("f"===c&&"l"===l&&"o"===e[s+2]&&"a"===e[s+3]&&"t"===e[s+4]&&" "===e[s+5]){r.push("DECLARE_VARIABLE"),u="float",o="",s+=6;continue}if("i"===c&&"n"===l&&"t"===e[s+2]&&" "===e[s+3]){r.push("DECLARE_VARIABLE"),u="int",o="",s+=4;continue}if("v"===c&&"e"===l&&"c"===e[s+2]&&"2"===e[s+3]&&" "===e[s+4]){r.push("DECLARE_VARIABLE"),u="vec2",o="",s+=5;continue}if("v"===c&&"e"===l&&"c"===e[s+2]&&"3"===e[s+3]&&" "===e[s+4]){r.push("DECLARE_VARIABLE"),u="vec3",o="",s+=5;continue}if("v"===c&&"e"===l&&"c"===e[s+2]&&"4"===e[s+3]&&" "===e[s+4]){r.push("DECLARE_VARIABLE"),u="vec4",o="",s+=5;continue}}else if("DECLARE_VARIABLE"===h){if(""===o){if(" "===c){s++;continue}if(!i.test(c))throw new Error("variable name is not expected string")}o+=c,a.test(l)||(r.pop(),n.push(o),t.push(I[u]))}s++}else r.push("FUNCTION_ARGUMENTS"),s++;else r.pop(),s++;else r.push("COMMENT"),s+=2;else r.pop(),s+=2;else r.push("MULTI_LINE_COMMENT"),s+=2}if(r.length>0)throw new Error("GLSL function was not parsable");return{argumentNames:n,argumentTypes:t}}},{key:"nativeFunctionReturnType",value:function(e){return I[e.match(/int|float|vec[2-4]/)[0]]}},{key:"combineKernels",value:function(e,t){e.apply(null,arguments);var n,r=t.texSize,a=r.texSize,s=r.context,o=r.threadDim;if("single"===t.precision){var u=a[0],c=Math.ceil(a[1]/4);n=new Float32Array(u*c*4*4),s.readPixels(0,0,u,4*c,s.RGBA,s.FLOAT,n)}else{var l=new Uint8Array(a[0]*a[1]*4);s.readPixels(0,0,a[0],a[1],s.RGBA,s.UNSIGNED_BYTE,l),n=new Float32Array(l.buffer)}if(n=n.subarray(0,o[0]*o[1]*o[2]),1===t.output.length)return n;if(2===t.output.length)return i.splitArray(n,t.output[0]);if(3===t.output.length){var h=i.splitArray(n,t.output[0]*t.output[1]);return h.map((function(e){return i.splitArray(e,t.output[0])}))}}},{key:"mode",get:function(){return"gpu"}},{key:"testCanvas",get:function(){throw new Error('"testCanvas" not defined on '.concat(this.name))}},{key:"testContext",get:function(){throw new Error('"testContext" not defined on '.concat(this.name))}}]),o(n,[{key:"checkTextureSize",value:function(){var e=this.constructor.features;if(this.texSize[0]>e.maxTextureSize||this.texSize[1]>e.maxTextureSize)throw new Error("Texture size [".concat(this.texSize[0],",").concat(this.texSize[1],"] generated by kernel is larger than supported size [").concat(e.maxTextureSize,",").concat(e.maxTextureSize,"]"))}},{key:"translateSource",value:function(){throw new Error('"translateSource" not defined on '.concat(this.constructor.name))}},{key:"pickRenderStrategy",value:function(e){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=function(e){return e},this.TextureConstructor=M,null;if("unsigned"===this.precision)if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=k,null):this.output[1]>0?(this.TextureConstructor=E,null):(this.TextureConstructor=A,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(e)}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.renderOutput=this.renderValues,this.output[2]>0?(this.TextureConstructor=k,this.formatValues=i.erect3DPackedFloat,null):this.output[1]>0?(this.TextureConstructor=E,this.formatValues=i.erect2DPackedFloat,null):(this.TextureConstructor=A,this.formatValues=i.erectPackedFloat,null);case"Array(2)":case"Array(3)":case"Array(4)":return this.requestFallback(e)}else{if("single"!==this.precision)throw new Error('unhandled precision of "'.concat(this.precision,'"'));if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.optimizeFloatMemory?this.output[2]>0?(this.TextureConstructor=_,null):this.output[1]>0?(this.TextureConstructor=T,null):(this.TextureConstructor=S,null):this.output[2]>0?(this.TextureConstructor=w,null):this.output[1]>0?(this.TextureConstructor=b,null):(this.TextureConstructor=x,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=p,null):this.output[1]>0?(this.TextureConstructor=h,null):(this.TextureConstructor=a,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=d,null):this.output[1]>0?(this.TextureConstructor=m,null):(this.TextureConstructor=f,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=y,null):this.output[1]>0?(this.TextureConstructor=v,null):(this.TextureConstructor=g,null)}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=_,this.formatValues=i.erectMemoryOptimized3DFloat,null):this.output[1]>0?(this.TextureConstructor=T,this.formatValues=i.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=S,this.formatValues=i.erectMemoryOptimizedFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=p,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=h,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=m,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=f,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=y,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=v,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=g,this.formatValues=i.erectArray4,null)}else switch(this.returnType){case"LiteralInteger":case"Float":case"Number":case"Integer":return this.output[2]>0?(this.TextureConstructor=w,this.formatValues=i.erect3DFloat,null):this.output[1]>0?(this.TextureConstructor=b,this.formatValues=i.erect2DFloat,null):(this.TextureConstructor=x,this.formatValues=i.erectFloat,null);case"Array(2)":return this.output[2]>0?(this.TextureConstructor=p,this.formatValues=i.erect3DArray2,null):this.output[1]>0?(this.TextureConstructor=h,this.formatValues=i.erect2DArray2,null):(this.TextureConstructor=a,this.formatValues=i.erectArray2,null);case"Array(3)":return this.output[2]>0?(this.TextureConstructor=d,this.formatValues=i.erect3DArray3,null):this.output[1]>0?(this.TextureConstructor=m,this.formatValues=i.erect2DArray3,null):(this.TextureConstructor=f,this.formatValues=i.erectArray3,null);case"Array(4)":return this.output[2]>0?(this.TextureConstructor=y,this.formatValues=i.erect3DArray4,null):this.output[1]>0?(this.TextureConstructor=v,this.formatValues=i.erect2DArray4,null):(this.TextureConstructor=g,this.formatValues=i.erectArray4,null)}}throw new Error('unhandled return type "'.concat(this.returnType,'"'))}},{key:"getKernelString",value:function(){throw new Error("abstract method call")}},{key:"getMainResultTexture",value:function(){switch(this.returnType){case"LiteralInteger":case"Float":case"Integer":case"Number":return this.getMainResultNumberTexture();case"Array(2)":return this.getMainResultArray2Texture();case"Array(3)":return this.getMainResultArray3Texture();case"Array(4)":return this.getMainResultArray4Texture();default:throw new Error("unhandled returnType type ".concat(this.returnType))}}},{key:"getMainResultKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelNumberTexture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray2Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray3Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultSubKernelArray4Texture",value:function(){throw new Error("abstract method call")}},{key:"getMainResultGraphical",value:function(){throw new Error("abstract method call")}},{key:"getMainResultMemoryOptimizedFloats",value:function(){throw new Error("abstract method call")}},{key:"getMainResultPackedPixels",value:function(){throw new Error("abstract method call")}},{key:"getMainResultString",value:function(){return this.graphical?this.getMainResultGraphical():"single"===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}},{key:"getMainResultNumberTexture",value:function(){return i.linesToString(this.getMainResultKernelNumberTexture())+i.linesToString(this.getMainResultSubKernelNumberTexture())}},{key:"getMainResultArray2Texture",value:function(){return i.linesToString(this.getMainResultKernelArray2Texture())+i.linesToString(this.getMainResultSubKernelArray2Texture())}},{key:"getMainResultArray3Texture",value:function(){return i.linesToString(this.getMainResultKernelArray3Texture())+i.linesToString(this.getMainResultSubKernelArray3Texture())}},{key:"getMainResultArray4Texture",value:function(){return i.linesToString(this.getMainResultKernelArray4Texture())+i.linesToString(this.getMainResultSubKernelArray4Texture())}},{key:"getFloatTacticDeclaration",value:function(){var e=this.getVariablePrecisionString(this.texSize,this.tactic);return"precision ".concat(e," float;\n")}},{key:"getIntTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic,!0)," int;\n")}},{key:"getSampler2DTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2D;\n")}},{key:"getSampler2DArrayTacticDeclaration",value:function(){return"precision ".concat(this.getVariablePrecisionString(this.texSize,this.tactic)," sampler2DArray;\n")}},{key:"renderTexture",value:function(){return this.immutable?this.texture.clone():this.texture}},{key:"readPackedPixelsToUint8Array",value:function(){if("unsigned"!==this.precision)throw new Error('Requires this.precision to be "unsigned"');var e=this.texSize,t=this.context,n=new Uint8Array(e[0]*e[1]*4);return t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,n),n}},{key:"readPackedPixelsToFloat32Array",value:function(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}},{key:"readFloatPixelsToFloat32Array",value:function(){if("single"!==this.precision)throw new Error('Requires this.precision to be "single"');var e=this.texSize,t=this.context,n=e[0],r=e[1],i=new Float32Array(n*r*4);return t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,i),i}},{key:"getPixels",value:function(e){var t=this.context,n=this.output,r=l(n,2),a=r[0],s=r[1],o=new Uint8Array(a*s*4);return t.readPixels(0,0,a,s,t.RGBA,t.UNSIGNED_BYTE,o),new Uint8ClampedArray((e?o:i.flipPixels(o,a,s)).buffer)}},{key:"renderKernelsToArrays",value:function(){for(var e={result:this.renderOutput()},t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=this.mappedTextures[t].toArray();return e}},{key:"renderKernelsToTextures",value:function(){var e={result:this.renderOutput()};if(this.immutable)for(var t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=this.mappedTextures[t].clone();else for(var n=0;n<this.subKernels.length;n++)e[this.subKernels[n].property]=this.mappedTextures[n];return e}},{key:"resetSwitchingKernels",value:function(){var e=this.switchingKernels;return this.switchingKernels=null,e}},{key:"setOutput",value:function(e){var t=this.toKernelOutput(e);if(this.program){if(!this.dynamicOutput)throw new Error("Resizing a kernel with dynamicOutput: false is not possible");var n=[t[0],t[1]||1,t[2]||1],r=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},n),a=this.texSize;if(a){var s=this.getVariablePrecisionString(a,this.tactic),o=this.getVariablePrecisionString(r,this.tactic);if(s!==o)return this.debug&&console.warn("Precision requirement changed, asking GPU instance to recompile"),void this.switchKernels({type:"outputPrecisionMismatch",precision:o,needed:e})}this.output=t,this.threadDim=n,this.texSize=r;var u=this.context;if(u.bindFramebuffer(u.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],u.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this.texture&&this.texture.delete(),this.texture=null,this._setupOutputTexture(),this.mappedTextures&&this.mappedTextures.length>0){for(var c=0;c<this.mappedTextures.length;c++)this.mappedTextures[c].delete();this.mappedTextures=null,this._setupSubOutputTextures()}}else this.output=t;return this}},{key:"renderValues",value:function(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}},{key:"switchKernels",value:function(e){this.switchingKernels?this.switchingKernels.push(e):this.switchingKernels=[e]}},{key:"getVariablePrecisionString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.texSize,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tactic,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t){if(!this.constructor.features.isSpeedTacticSupported)return"highp";var r=this.constructor.features[n?"lowIntPrecision":"lowFloatPrecision"],i=this.constructor.features[n?"mediumIntPrecision":"mediumFloatPrecision"],a=this.constructor.features[n?"highIntPrecision":"highFloatPrecision"],s=Math.log2(e[0]*e[1]);if(s<=r.rangeMax)return"lowp";if(s<=i.rangeMax)return"mediump";if(s<=a.rangeMax)return"highp";throw new Error("The required size exceeds that of the ability of your system")}switch(t){case"speed":return"lowp";case"balanced":return"mediump";case"precision":return"highp";default:throw new Error('Unknown tactic "'.concat(t,'" use "speed", "balanced", "precision", or empty for auto'))}}},{key:"updateTextureArgumentRefs",value:function(e,t){if(this.immutable)if(this.texture.texture===t.texture){var n=e.prevArg;n&&(1===n.texture._refs&&(this.texture.delete(),this.texture=n.clone(),this._textureSwitched=!0),n.delete()),e.prevArg=t.clone()}else if(this.mappedTextures&&this.mappedTextures.length>0)for(var r=this.mappedTextures,i=0;i<r.length;i++){var a=r[i];if(a.texture===t.texture){var s=e.prevArg;return s&&(1===s.texture._refs&&(a.delete(),r[i]=s.clone(),this._mappedTextureSwitched[i]=!0),s.delete()),void(e.prevArg=t.clone())}}}},{key:"onActivate",value:function(e){if(this._textureSwitched=!0,this.texture=e.texture,this.mappedTextures){for(var t=0;t<this.mappedTextures.length;t++)this._mappedTextureSwitched[t]=!0;this.mappedTextures=e.mappedTextures}}},{key:"initCanvas",value:function(){}}]),n}(r),I={int:"Integer",float:"Number",vec2:"Array(2)",vec3:"Array(3)",vec4:"Array(4)"};t.exports={GLKernel:N}},{"../../utils":114,"../kernel":36,"./texture/array-2-float":16,"./texture/array-2-float-2d":14,"./texture/array-2-float-3d":15,"./texture/array-3-float":19,"./texture/array-3-float-2d":17,"./texture/array-3-float-3d":18,"./texture/array-4-float":22,"./texture/array-4-float-2d":20,"./texture/array-4-float-3d":21,"./texture/float":25,"./texture/float-2d":23,"./texture/float-3d":24,"./texture/graphical":26,"./texture/memory-optimized":30,"./texture/memory-optimized-2d":28,"./texture/memory-optimized-3d":29,"./texture/unsigned":33,"./texture/unsigned-2d":31,"./texture/unsigned-3d":32}],14:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(2)",r}return o(n,[{key:"toArray",value:function(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray2Float2D:i}},{"../../../utils":114,"./float":25}],15:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(2)",r}return o(n,[{key:"toArray",value:function(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray2Float3D:i}},{"../../../utils":114,"./float":25}],16:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(2)",r}return o(n,[{key:"toArray",value:function(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray2Float:i}},{"../../../utils":114,"./float":25}],17:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(3)",r}return o(n,[{key:"toArray",value:function(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray3Float2D:i}},{"../../../utils":114,"./float":25}],18:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(3)",r}return o(n,[{key:"toArray",value:function(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray3Float3D:i}},{"../../../utils":114,"./float":25}],19:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(3)",r}return o(n,[{key:"toArray",value:function(){return r.erectArray3(this.renderValues(),this.output[0])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray3Float:i}},{"../../../utils":114,"./float":25}],20:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(4)",r}return o(n,[{key:"toArray",value:function(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray4Float2D:i}},{"../../../utils":114,"./float":25}],21:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(4)",r}return o(n,[{key:"toArray",value:function(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray4Float3D:i}},{"../../../utils":114,"./float":25}],22:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(4)",r}return o(n,[{key:"toArray",value:function(){return r.erectArray4(this.renderValues(),this.output[0])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureArray4Float:i}},{"../../../utils":114,"./float":25}],23:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(1)",r}return o(n,[{key:"toArray",value:function(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureFloat2D:i}},{"../../../utils":114,"./float":25}],24:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(1)",r}return o(n,[{key:"toArray",value:function(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureFloat3D:i}},{"../../../utils":114,"./float":25}],25:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(1)",r}return o(n,[{key:"textureType",get:function(){return this.context.FLOAT}}]),o(n,[{key:"renderRawOutput",value:function(){var e=this.context,t=this.size;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);var n=new Float32Array(t[0]*t[1]*4);return e.readPixels(0,0,t[0],t[1],e.RGBA,e.FLOAT,n),n}},{key:"renderValues",value:function(){return this._deleted?null:this.renderRawOutput()}},{key:"toArray",value:function(){return r.erectFloat(this.renderValues(),this.output[0])}}]),n}(e("./index").GLTexture);t.exports={GLTextureFloat:i}},{"../../../utils":114,"./index":27}],26:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="ArrayTexture(4)",r}return o(n,[{key:"toArray",value:function(){return this.renderValues()}}]),n}(e("./unsigned").GLTextureUnsigned);t.exports={GLTextureGraphical:r}},{"./unsigned":33}],27:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"clone",value:function(){return new this.constructor(this)}},{key:"beforeMutate",value:function(){return this.texture._refs>1&&(this.newTexture(),!0)}},{key:"cloneTexture",value:function(){this.texture._refs--;var e=this.context,t=this.size,n=this.texture;this.kernel.debug&&console.warn("cloning internal texture"),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer()),i(e,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var r=e.createTexture();i(e,r),e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,t[0],t[1],0,this.textureFormat,this.textureType,null),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,t[0],t[1]),r._refs=1,this.texture=r}},{key:"newTexture",value:function(){this.texture._refs--;var e=this.context,t=this.size;this.kernel.debug&&console.warn("new internal texture");var n=e.createTexture();i(e,n),e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,t[0],t[1],0,this.textureFormat,this.textureType,null),n._refs=1,this.texture=n}},{key:"clear",value:function(){if(this.texture._refs){this.texture._refs--;var e=this.context,t=this.texture=e.createTexture();i(e,t);var n=this.size;t._refs=1,e.texImage2D(e.TEXTURE_2D,0,this.internalFormat,n[0],n[1],0,this.textureFormat,this.textureType,null)}var r=this.context,a=this.texture;r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer()),r.bindTexture(r.TEXTURE_2D,a),i(r,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}},{key:"delete",value:function(){this._deleted||(this._deleted=!0,this.texture._refs&&(this.texture._refs--,this.texture._refs)||(this.context.deleteTexture(this.texture),0===this.texture._refs&&this._framebuffer&&(this.context.deleteFramebuffer(this._framebuffer),this._framebuffer=null)))}},{key:"framebuffer",value:function(){return this._framebuffer||(this._framebuffer=this.context.createFramebuffer()),this._framebuffer.width=this.size[0],this._framebuffer.height=this.size[1],this._framebuffer}},{key:"textureType",get:function(){throw new Error('"textureType" not implemented on '.concat(this.name))}}]),n}(e("../../../texture").Texture);function i(e,t){e.activeTexture(e.TEXTURE15),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}t.exports={GLTexture:r}},{"../../../texture":113}],28:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="MemoryOptimizedNumberTexture",r}return o(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureMemoryOptimized2D:i}},{"../../../utils":114,"./float":25}],29:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="MemoryOptimizedNumberTexture",r}return o(n,[{key:"toArray",value:function(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureMemoryOptimized3D:i}},{"../../../utils":114,"./float":25}],30:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="MemoryOptimizedNumberTexture",r}return o(n,[{key:"toArray",value:function(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}]),n}(e("./float").GLTextureFloat);t.exports={GLTextureMemoryOptimized:i}},{"../../../utils":114,"./float":25}],31:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="NumberTexture",r}return o(n,[{key:"toArray",value:function(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}]),n}(e("./unsigned").GLTextureUnsigned);t.exports={GLTextureUnsigned2D:i}},{"../../../utils":114,"./unsigned":33}],32:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="NumberTexture",r}return o(n,[{key:"toArray",value:function(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}]),n}(e("./unsigned").GLTextureUnsigned);t.exports={GLTextureUnsigned3D:i}},{"../../../utils":114,"./unsigned":33}],33:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).type="NumberTexture",r}return o(n,[{key:"textureType",get:function(){return this.context.UNSIGNED_BYTE}}]),o(n,[{key:"renderRawOutput",value:function(){var e=this.context,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);var n=new Uint8Array(this.size[0]*this.size[1]*4);return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.UNSIGNED_BYTE,n),n}},{key:"renderValues",value:function(){return this._deleted?null:new Float32Array(this.renderRawOutput().buffer)}},{key:"toArray",value:function(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}]),n}(e("./index").GLTexture);t.exports={GLTextureUnsigned:i}},{"../../../utils":114,"./index":27}],34:[function(e,t,n){var r=e("gl"),l=e("../web-gl/kernel").WebGLKernel,h=e("../gl/kernel-string").glKernelString,p=null,f=null,m=null,d=null,g=null,v=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"initCanvas",value:function(){return{}}},{key:"initContext",value:function(){return r(2,2,{preserveDrawingBuffer:!0})}},{key:"initExtensions",value:function(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:this.context.getExtension("STACKGL_destroy_context"),OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers")}}},{key:"build",value:function(){a(i(n.prototype),"build",this).apply(this,arguments),this.fallbackRequested||this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}},{key:"destroyExtensions",value:function(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toString",value:function(){var e="const gl = context || require('gl')(1, 1);\n",t="    if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n";return h(this.constructor,arguments,this,e,t)}},{key:"setOutput",value:function(e){return a(i(n.prototype),"setOutput",this).call(this,e),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1]),this}}],[{key:"setupFeatureChecks",value:function(){if(f=null,d=null,"function"===typeof r)try{if(!(m=r(2,2,{preserveDrawingBuffer:!0}))||!m.getExtension)return;d={STACKGL_resize_drawingbuffer:m.getExtension("STACKGL_resize_drawingbuffer"),STACKGL_destroy_context:m.getExtension("STACKGL_destroy_context"),OES_texture_float:m.getExtension("OES_texture_float"),OES_texture_float_linear:m.getExtension("OES_texture_float_linear"),OES_element_index_uint:m.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:m.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:m.getExtension("WEBGL_color_buffer_float")},g=this.getFeatures()}catch(e){console.warn(e)}}},{key:"isContextMatch",value:function(e){try{return"ANGLE"===e.getParameter(e.RENDERER)}catch(t){return!1}}},{key:"getIsTextureFloat",value:function(){return Boolean(d.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(d.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return d.WEBGL_draw_buffers?m.getParameter(d.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return m.getParameter(m.MAX_TEXTURE_SIZE)}},{key:"destroyContext",value:function(e){var t=e.getExtension("STACKGL_destroy_context");t&&t.destroy&&t.destroy()}},{key:"isSupported",get:function(){return null!==p?p:(this.setupFeatureChecks(),p=null!==m)}},{key:"testCanvas",get:function(){return f}},{key:"testContext",get:function(){return m}},{key:"features",get:function(){return g}}]),n}(l);t.exports={HeadlessGLKernel:v}},{"../gl/kernel-string":12,"../web-gl/kernel":70,gl:2}],35:[function(e,t,n){var r=function(){"use strict";function e(t,n){s(this,e);var r=n.name,i=n.kernel,a=n.context,o=n.checkContext,u=n.onRequestContextHandle,c=n.onUpdateValueMismatch,l=n.origin,h=n.strictIntegers,p=n.type,f=n.tactic;if(!r)throw new Error("name not set");if(!p)throw new Error("type not set");if(!l)throw new Error("origin not set");if("user"!==l&&"constants"!==l)throw new Error('origin must be "user" or "constants" value is "'.concat(l,'"'));if(!u)throw new Error("onRequestContextHandle is not set");this.name=r,this.origin=l,this.tactic=f,this.varName="constants"===l?"constants.".concat(r):r,this.kernel=i,this.strictIntegers=h,this.type=t.type||p,this.size=t.size||null,this.index=null,this.context=a,this.checkContext=null===o||void 0===o||o,this.contextHandle=null,this.onRequestContextHandle=u,this.onUpdateValueMismatch=c,this.forceUploadEachRun=null}return o(e,[{key:"getSource",value:function(){throw new Error('"getSource" not defined on '.concat(this.constructor.name))}},{key:"updateValue",value:function(e){throw new Error('"updateValue" not defined on '.concat(this.constructor.name))}},{key:"id",get:function(){return"".concat(this.origin,"_").concat(name)}}]),e}();t.exports={KernelValue:r}},{}],36:[function(e,t,n){var r=e("../utils").utils,i=e("../input").Input,a=function(){"use strict";function e(t,n){if(s(this,e),"object"!==typeof t){if("string"!==typeof t)throw new Error("source not a string");if(!r.isFunctionString(t))throw new Error("source not a function string")}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames="string"===typeof t?r.getArgumentNamesFromString(t):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.forceUploadKernelConstants=null,this.source=t,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!1,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.injectedNative=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.tactic=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.onIstanbulCoverageVariable=null,this.removeIstanbulCoverage=!1,this.built=!1,this.signature=null}return o(e,null,[{key:"isContextMatch",value:function(e){throw new Error('"isContextMatch" not implemented on '.concat(this.name))}},{key:"getFeatures",value:function(){throw new Error('"getFeatures" not implemented on '.concat(this.name))}},{key:"destroyContext",value:function(e){throw new Error('"destroyContext" called on '.concat(this.name))}},{key:"nativeFunctionArguments",value:function(){throw new Error('"nativeFunctionArguments" called on '.concat(this.name))}},{key:"nativeFunctionReturnType",value:function(){throw new Error('"nativeFunctionReturnType" called on '.concat(this.name))}},{key:"combineKernels",value:function(){throw new Error('"combineKernels" called on '.concat(this.name))}},{key:"isSupported",get:function(){throw new Error('"isSupported" not implemented on '.concat(this.name))}}]),o(e,[{key:"mergeSettings",value:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.hasOwnProperty(t)){switch(t){case"output":if(!Array.isArray(e.output)){this.setOutput(e.output);continue}break;case"functions":this.functions=[];for(var n=0;n<e.functions.length;n++)this.addFunction(e.functions[n]);continue;case"graphical":e[t]&&!e.hasOwnProperty("precision")&&(this.precision="unsigned"),this[t]=e[t];continue;case"removeIstanbulCoverage":null!==e[t]&&(this[t]=e[t]);continue;case"nativeFunctions":if(!e.nativeFunctions)continue;this.nativeFunctions=[];for(var r=0;r<e.nativeFunctions.length;r++){var i=e.nativeFunctions[r],a=i.name,s=i.source;this.addNativeFunction(a,s,i)}continue}this[t]=e[t]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(e))}},{key:"build",value:function(){throw new Error('"build" not defined on '.concat(this.constructor.name))}},{key:"run",value:function(){throw new Error('"run" not defined on '.concat(this.constructor.name))}},{key:"initCanvas",value:function(){throw new Error('"initCanvas" not defined on '.concat(this.constructor.name))}},{key:"initContext",value:function(){throw new Error('"initContext" not defined on '.concat(this.constructor.name))}},{key:"initPlugins",value:function(e){throw new Error('"initPlugins" not defined on '.concat(this.constructor.name))}},{key:"addFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.name&&e.source&&e.argumentTypes&&"returnType"in e)this.functions.push(e);else if("settings"in e&&"source"in e)this.functions.push(this.functionToIGPUFunction(e.source,e.settings));else{if("string"!==typeof e&&"function"!==typeof e)throw new Error("function not properly defined");this.functions.push(this.functionToIGPUFunction(e,t))}return this}},{key:"addNativeFunction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.argumentTypes?u(n.argumentTypes):this.constructor.nativeFunctionArguments(t)||{},i=r.argumentTypes,a=r.argumentNames;return this.nativeFunctions.push({name:e,source:t,settings:n,argumentTypes:i,argumentNames:a,returnType:n.returnType||this.constructor.nativeFunctionReturnType(t)}),this}},{key:"setupArguments",value:function(e){if(this.kernelArguments=[],this.argumentTypes)for(var t=0;t<this.argumentTypes.length;t++)this.kernelArguments.push({type:this.argumentTypes[t]});else if(!this.argumentTypes){this.argumentTypes=[];for(var n=0;n<e.length;n++){var a=r.getVariableType(e[n],this.strictIntegers),s="Integer"===a?"Number":a;this.argumentTypes.push(s),this.kernelArguments.push({type:s})}}this.argumentSizes=new Array(e.length),this.argumentBitRatios=new Int32Array(e.length);for(var o=0;o<e.length;o++){var u=e[o];this.argumentSizes[o]=u.constructor===i?u.size:null,this.argumentBitRatios[o]=this.getBitRatio(u)}if(this.argumentNames.length!==e.length)throw new Error("arguments are miss-aligned")}},{key:"setupConstants",value:function(){this.kernelConstants=[];var e=null===this.constantTypes;if(e&&(this.constantTypes={}),this.constantBitRatios={},this.constants)for(var t in this.constants){if(e){var n=r.getVariableType(this.constants[t],this.strictIntegers);this.constantTypes[t]=n,this.kernelConstants.push({name:t,type:n})}else this.kernelConstants.push({name:t,type:this.constantTypes[t]});this.constantBitRatios[t]=this.getBitRatio(this.constants[t])}}},{key:"setOptimizeFloatMemory",value:function(e){return this.optimizeFloatMemory=e,this}},{key:"toKernelOutput",value:function(e){return e.hasOwnProperty("x")?e.hasOwnProperty("y")?e.hasOwnProperty("z")?[e.x,e.y,e.z]:[e.x,e.y]:[e.x]:e}},{key:"setOutput",value:function(e){return this.output=this.toKernelOutput(e),this}},{key:"setDebug",value:function(e){return this.debug=e,this}},{key:"setGraphical",value:function(e){return this.graphical=e,this.precision="unsigned",this}},{key:"setLoopMaxIterations",value:function(e){return this.loopMaxIterations=e,this}},{key:"setConstants",value:function(e){return this.constants=e,this}},{key:"setConstantTypes",value:function(e){return this.constantTypes=e,this}},{key:"setFunctions",value:function(e){for(var t=0;t<e.length;t++)this.addFunction(e[t]);return this}},{key:"setNativeFunctions",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.name,i=n.source;this.addNativeFunction(r,i,n)}return this}},{key:"setInjectedNative",value:function(e){return this.injectedNative=e,this}},{key:"setPipeline",value:function(e){return this.pipeline=e,this}},{key:"setPrecision",value:function(e){return this.precision=e,this}},{key:"setDimensions",value:function(e){return r.warnDeprecated("method","setDimensions","setOutput"),this.output=e,this}},{key:"setOutputToTexture",value:function(e){return r.warnDeprecated("method","setOutputToTexture","setPipeline"),this.pipeline=e,this}},{key:"setImmutable",value:function(e){return this.immutable=e,this}},{key:"setCanvas",value:function(e){return this.canvas=e,this}},{key:"setStrictIntegers",value:function(e){return this.strictIntegers=e,this}},{key:"setDynamicOutput",value:function(e){return this.dynamicOutput=e,this}},{key:"setHardcodeConstants",value:function(e){return r.warnDeprecated("method","setHardcodeConstants"),this.setDynamicOutput(e),this.setDynamicArguments(e),this}},{key:"setDynamicArguments",value:function(e){return this.dynamicArguments=e,this}},{key:"setUseLegacyEncoder",value:function(e){return this.useLegacyEncoder=e,this}},{key:"setWarnVarUsage",value:function(e){return r.warnDeprecated("method","setWarnVarUsage"),this}},{key:"getCanvas",value:function(){return r.warnDeprecated("method","getCanvas"),this.canvas}},{key:"getWebGl",value:function(){return r.warnDeprecated("method","getWebGl"),this.context}},{key:"setContext",value:function(e){return this.context=e,this}},{key:"setArgumentTypes",value:function(e){if(Array.isArray(e))this.argumentTypes=e;else for(var t in this.argumentTypes=[],e)if(e.hasOwnProperty(t)){var n=this.argumentNames.indexOf(t);if(-1===n)throw new Error("unable to find argument ".concat(t));this.argumentTypes[n]=e[t]}return this}},{key:"setTactic",value:function(e){return this.tactic=e,this}},{key:"requestFallback",value:function(e){if(!this.onRequestFallback)throw new Error('"onRequestFallback" not defined on '.concat(this.constructor.name));return this.fallbackRequested=!0,this.onRequestFallback(e)}},{key:"validateSettings",value:function(){throw new Error('"validateSettings" not defined on '.concat(this.constructor.name))}},{key:"addSubKernel",value:function(e){if(null===this.subKernels&&(this.subKernels=[]),!e.source)throw new Error('subKernel missing "source" property');if(!e.property&&isNaN(e.property))throw new Error('subKernel missing "property" property');if(!e.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(e),this}},{key:"destroy",value:function(e){throw new Error('"destroy" called on '.concat(this.constructor.name))}},{key:"getBitRatio",value:function(e){if("single"===this.precision)return 4;if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"getPixels",value:function(e){throw new Error('"getPixels" called on '.concat(this.constructor.name))}},{key:"checkOutput",value:function(){if(!this.output||!r.isArray(this.output))throw new Error("kernel.output not an array");if(this.output.length<1)throw new Error("kernel.output is empty, needs at least 1 value");for(var e=0;e<this.output.length;e++)if(isNaN(this.output[e])||this.output[e]<1)throw new Error("".concat(this.constructor.name,".output[").concat(e,"] incorrectly defined as `").concat(this.output[e],"`, needs to be numeric, and greater than 0"))}},{key:"prependString",value:function(e){throw new Error('"prependString" called on '.concat(this.constructor.name))}},{key:"hasPrependString",value:function(e){throw new Error('"hasPrependString" called on '.concat(this.constructor.name))}},{key:"toJSON",value:function(){return{settings:{output:this.output,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((function(e){return e.name})):null,returnType:this.returnType}}}},{key:"buildSignature",value:function(e){var t=this.constructor;this.signature=t.getSignature(this,t.getArgumentTypes(this,e))}},{key:"functionToIGPUFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof e&&"function"!==typeof e)throw new Error("source not a string or function");var n="string"===typeof e?e:e.toString(),i=[];return i=Array.isArray(t.argumentTypes)?t.argumentTypes:"object"===typeof t.argumentTypes?r.getArgumentNamesFromString(n).map((function(e){return t.argumentTypes[e]}))||[]:t.argumentTypes||[],{name:r.getFunctionNameFromString(n)||null,source:n,argumentTypes:i,returnType:t.returnType||null}}},{key:"onActivate",value:function(e){}}],[{key:"getArgumentTypes",value:function(e,t){for(var n=new Array(t.length),i=0;i<t.length;i++){var a=t[i],s=e.argumentTypes[i];if(a.type)n[i]=a.type;else switch(s){case"Number":case"Integer":case"Float":case"ArrayTexture(1)":n[i]=r.getVariableType(a);break;default:n[i]=s}}return n}},{key:"getSignature",value:function(e,t){throw new Error('"getSignature" not implemented on '.concat(this.name))}}]),e}();function u(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++){var i=t[r];n.push(e[i])}return{argumentTypes:n,argumentNames:t}}t.exports={Kernel:a}},{"../input":110,"../utils":114}],37:[function(e,t,n){var r="__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nvarying vec2 vTexCoord;\n\nfloat acosh(float x) {\n  return log(x + sqrt(x * x - 1.0));\n}\n\nfloat sinh(float x) {\n  return (pow(".concat(Math.E,", x) - pow(").concat(Math.E,", -x)) / 2.0;\n}\n\nfloat asinh(float x) {\n  return log(x + sqrt(x * x + 1.0));\n}\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat atanh(float x) {\n  x = (x + 1.0) / (x - 1.0);\n  if (x < 0.0) {\n    return 0.5 * log(-x);\n  }\n  return 0.5 * log(x);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat cosh(float x) {\n  return (pow(").concat(Math.E,", x) + pow(").concat(Math.E,", -x)) / 2.0; \n}\n\nfloat expm1(float x) {\n  return pow(").concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat tanh(float x) {\n  float e = exp(2.0 * x);\n  return (e - 1.0) / (e + 1.0);\n}\n\nfloat trunc(float x) {\n  if (x >= 0.0) {\n    return floor(x); \n  } else {\n    return ceil(x);\n  }\n}\n\nvec4 _round(vec4 x) {\n  return floor(x + 0.5);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x / y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(_round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(_round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;\n  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;\n  return 0.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  if (channel == 0) return texel.r * 255.0;\n  if (channel == 1) return texel.g * 255.0;\n  if (channel == 2) return texel.b * 255.0;\n  if (channel == 3) return texel.a * 255.0;\n  return 0.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return texel.r;\n  if (channel == 1) return texel.g;\n  if (channel == 2) return texel.b;\n  if (channel == 3) return texel.a;\n  return 0.0;\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture2D(tex, st / vec2(texSize));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture2D(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n  \n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture2D(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture2D(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nvoid color(sampler2D image) {\n  actualColor = texture2D(image, vTexCoord);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");t.exports={fragmentShader:r}},{}],38:[function(e,t,n){var r=e("../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),i=t.call(this,e,r),r&&r.hasOwnProperty("fixIntegerDivisionAccuracy")&&(i.fixIntegerDivisionAccuracy=r.fixIntegerDivisionAccuracy),i}return o(n,[{key:"astConditionalExpression",value:function(e,t){if("ConditionalExpression"!==e.type)throw this.astErrorOutput("Not a conditional expression",e);var n=this.getType(e.consequent),r=this.getType(e.alternate);return null===n&&null===r?(t.push("if ("),this.astGeneric(e.test,t),t.push(") {"),this.astGeneric(e.consequent,t),t.push(";"),t.push("} else {"),this.astGeneric(e.alternate,t),t.push(";"),t.push("}"),t):(t.push("("),this.astGeneric(e.test,t),t.push("?"),this.astGeneric(e.consequent,t),t.push(":"),this.astGeneric(e.alternate,t),t.push(")"),t)}},{key:"astFunction",value:function(e,t){if(this.isRootKernel)t.push("void");else{this.returnType||this.findLastReturn()&&(this.returnType=this.getType(e.body),"LiteralInteger"===this.returnType&&(this.returnType="Number"));var n=this.returnType;if(n){var i=a[n];if(!i)throw new Error("unknown type ".concat(n));t.push(i)}else t.push("void")}if(t.push(" "),t.push(this.name),t.push("("),!this.isRootKernel)for(var s=0;s<this.argumentNames.length;++s){var o=this.argumentNames[s];s>0&&t.push(", ");var u=this.argumentTypes[this.argumentNames.indexOf(o)];if(!u)throw this.astErrorOutput("Unknown argument ".concat(o," type"),e);"LiteralInteger"===u&&(this.argumentTypes[s]=u="Number");var c=a[u];if(!c)throw this.astErrorOutput("Unexpected expression",e);var l=r.sanitizeName(o);"sampler2D"===c||"sampler2DArray"===c?t.push("".concat(c," user_").concat(l,",ivec2 user_").concat(l,"Size,ivec3 user_").concat(l,"Dim")):t.push("".concat(c," user_").concat(l))}t.push(") {\n");for(var h=0;h<e.body.body.length;++h)this.astGeneric(e.body.body[h],t),t.push("\n");return t.push("}\n"),t}},{key:"astReturnStatement",value:function(e,t){if(!e.argument)throw this.astErrorOutput("Unexpected return statement",e);this.pushState("skip-literal-correction");var n=this.getType(e.argument);this.popState("skip-literal-correction");var r=[];switch(this.returnType||(this.returnType="LiteralInteger"===n||"Integer"===n?"Number":n),this.returnType){case"LiteralInteger":case"Number":case"Float":switch(n){case"Integer":r.push("float("),this.astGeneric(e.argument,r),r.push(")");break;case"LiteralInteger":this.castLiteralToFloat(e.argument,r),"Integer"===this.getType(e)&&(r.unshift("float("),r.push(")"));break;default:this.astGeneric(e.argument,r)}break;case"Integer":switch(n){case"Float":case"Number":this.castValueToInteger(e.argument,r);break;case"LiteralInteger":this.castLiteralToInteger(e.argument,r);break;default:this.astGeneric(e.argument,r)}break;case"Array(4)":case"Array(3)":case"Array(2)":case"Input":this.astGeneric(e.argument,r);break;default:throw this.astErrorOutput("unhandled return type ".concat(this.returnType),e)}return this.isRootKernel?(t.push("kernelResult = ".concat(r.join(""),";")),t.push("return;")):this.isSubKernel?(t.push("subKernelResult_".concat(this.name," = ").concat(r.join(""),";")),t.push("return subKernelResult_".concat(this.name,";"))):t.push("return ".concat(r.join(""),";")),t}},{key:"astLiteral",value:function(e,t){if(isNaN(e.value))throw this.astErrorOutput("Non-numeric literal not supported : "+e.value,e);var n=this.astKey(e);return Number.isInteger(e.value)?this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",t.push("".concat(e.value))):(this.isState("casting-to-float")||this.isState("building-float"),this.literalTypes[n]="Number",t.push("".concat(e.value,".0"))):this.isState("casting-to-integer")||this.isState("building-integer")?(this.literalTypes[n]="Integer",t.push(Math.round(e.value))):(this.literalTypes[n]="Number",t.push("".concat(e.value))),t}},{key:"astBinaryExpression",value:function(e,t){if(this.checkAndUpconvertOperator(e,t))return t;if(this.fixIntegerDivisionAccuracy&&"/"===e.operator){switch(t.push("divWithIntCheck("),this.pushState("building-float"),this.getType(e.left)){case"Integer":this.castValueToFloat(e.left,t);break;case"LiteralInteger":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(", "),this.getType(e.right)){case"Integer":this.castValueToFloat(e.right,t);break;case"LiteralInteger":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t)}return this.popState("building-float"),t.push(")"),t}t.push("(");var n=this.getType(e.left)||"Number",r=this.getType(e.right)||"Number";if(!n||!r)throw this.astErrorOutput("Unhandled binary expression",e);var i=n+" & "+r;switch(i){case"Integer & Integer":this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-integer");break;case"Number & Float":case"Float & Number":case"Float & Float":case"Number & Number":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-float");break;case"LiteralInteger & LiteralInteger":this.isState("casting-to-integer")||this.isState("building-integer")?(this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-integer")):(this.pushState("building-float"),this.castLiteralToFloat(e.left,t),t.push(l[e.operator]||e.operator),this.castLiteralToFloat(e.right,t),this.popState("building-float"));break;case"Integer & Float":case"Integer & Number":if((">"===e.operator||"<"===e.operator&&"Literal"===e.right.type)&&!Number.isInteger(e.right.value)){this.pushState("building-float"),this.castValueToFloat(e.left,t),t.push(l[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-float");break}if(this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.pushState("casting-to-integer"),"Literal"===e.right.type){var a=[];if(this.astGeneric(e.right,a),"Integer"!==this.getType(e.right))throw this.astErrorOutput("Unhandled binary expression with literal",e);t.push(a.join(""))}else t.push("int("),this.astGeneric(e.right,t),t.push(")");this.popState("casting-to-integer"),this.popState("building-integer");break;case"Integer & LiteralInteger":this.pushState("building-integer"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.castLiteralToInteger(e.right,t),this.popState("building-integer");break;case"Number & Integer":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.castValueToFloat(e.right,t),this.popState("building-float");break;case"Float & LiteralInteger":case"Number & LiteralInteger":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.castLiteralToFloat(e.right,t),this.popState("building-float");break;case"LiteralInteger & Float":case"LiteralInteger & Number":this.isState("casting-to-integer")?(this.pushState("building-integer"),this.castLiteralToInteger(e.left,t),t.push(l[e.operator]||e.operator),this.castValueToInteger(e.right,t),this.popState("building-integer")):(this.pushState("building-float"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.pushState("casting-to-float"),this.astGeneric(e.right,t),this.popState("casting-to-float"),this.popState("building-float"));break;case"LiteralInteger & Integer":this.pushState("building-integer"),this.castLiteralToInteger(e.left,t),t.push(l[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-integer");break;case"Boolean & Boolean":this.pushState("building-boolean"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.astGeneric(e.right,t),this.popState("building-boolean");break;case"Float & Integer":this.pushState("building-float"),this.astGeneric(e.left,t),t.push(l[e.operator]||e.operator),this.castValueToFloat(e.right,t),this.popState("building-float");break;default:throw this.astErrorOutput("Unhandled binary expression between ".concat(i),e)}return t.push(")"),t}},{key:"checkAndUpconvertOperator",value:function(e,t){var n=this.checkAndUpconvertBitwiseOperators(e,t);if(n)return n;var r={"%":this.fixIntegerDivisionAccuracy?"integerCorrectionModulo":"modulo","**":"pow"}[e.operator];if(!r)return null;switch(t.push(r),t.push("("),this.getType(e.left)){case"Integer":this.castValueToFloat(e.left,t);break;case"LiteralInteger":this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(","),this.getType(e.right)){case"Integer":this.castValueToFloat(e.right,t);break;case"LiteralInteger":this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}},{key:"checkAndUpconvertBitwiseOperators",value:function(e,t){var n={"&":"bitwiseAnd","|":"bitwiseOr","^":"bitwiseXOR","<<":"bitwiseZeroFillLeftShift",">>":"bitwiseSignedRightShift",">>>":"bitwiseZeroFillRightShift"}[e.operator];if(!n)return null;switch(t.push(n),t.push("("),this.getType(e.left)){case"Number":case"Float":this.castValueToInteger(e.left,t);break;case"LiteralInteger":this.castLiteralToInteger(e.left,t);break;default:this.astGeneric(e.left,t)}switch(t.push(","),this.getType(e.right)){case"Number":case"Float":this.castValueToInteger(e.right,t);break;case"LiteralInteger":this.castLiteralToInteger(e.right,t);break;default:this.astGeneric(e.right,t)}return t.push(")"),t}},{key:"checkAndUpconvertBitwiseUnary",value:function(e,t){var n={"~":"bitwiseNot"}[e.operator];if(!n)return null;switch(t.push(n),t.push("("),this.getType(e.argument)){case"Number":case"Float":this.castValueToInteger(e.argument,t);break;case"LiteralInteger":this.castLiteralToInteger(e.argument,t);break;default:this.astGeneric(e.argument,t)}return t.push(")"),t}},{key:"castLiteralToInteger",value:function(e,t){return this.pushState("casting-to-integer"),this.astGeneric(e,t),this.popState("casting-to-integer"),t}},{key:"castLiteralToFloat",value:function(e,t){return this.pushState("casting-to-float"),this.astGeneric(e,t),this.popState("casting-to-float"),t}},{key:"castValueToInteger",value:function(e,t){return this.pushState("casting-to-integer"),t.push("int("),this.astGeneric(e,t),t.push(")"),this.popState("casting-to-integer"),t}},{key:"castValueToFloat",value:function(e,t){return this.pushState("casting-to-float"),t.push("float("),this.astGeneric(e,t),t.push(")"),this.popState("casting-to-float"),t}},{key:"astIdentifierExpression",value:function(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);var n=this.getType(e),i=r.sanitizeName(e.name);return"Infinity"===e.name?t.push("3.402823466e+38"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?t.push("bool(user_".concat(i,")")):t.push("user_".concat(i)),t}},{key:"astForStatement",value:function(e,t){if("ForStatement"!==e.type)throw this.astErrorOutput("Invalid for statement",e);var n=[],r=[],i=[],a=[],s=null;if(e.init){var o=e.init.declarations;o.length>1&&(s=!1),this.astGeneric(e.init,n);for(var u=0;u<o.length;u++)o[u].init&&"Literal"!==o[u].init.type&&(s=!1)}else s=!1;if(e.test?this.astGeneric(e.test,r):s=!1,e.update?this.astGeneric(e.update,i):s=!1,e.body&&(this.pushState("loop-body"),this.astGeneric(e.body,a),this.popState("loop-body")),null===s&&(s=this.isSafe(e.init)&&this.isSafe(e.test)),s){var c=n.join(""),l=";"!==c[c.length-1];t.push("for (".concat(c).concat(l?";":"").concat(r.join(""),";").concat(i.join(""),"){\n")),t.push(a.join("")),t.push("}\n")}else{var h=this.getInternalVariableName("safeI");n.length>0&&t.push(n.join(""),"\n"),t.push("for (int ".concat(h,"=0;").concat(h,"<LOOP_MAX;").concat(h,"++){\n")),r.length>0&&t.push("if (!".concat(r.join(""),") break;\n")),t.push(a.join("")),t.push("\n".concat(i.join(""),";")),t.push("}\n")}return t}},{key:"astWhileStatement",value:function(e,t){if("WhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);var n=this.getInternalVariableName("safeI");return t.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),t.push("if (!"),this.astGeneric(e.test,t),t.push(") break;\n"),this.astGeneric(e.body,t),t.push("}\n"),t}},{key:"astDoWhileStatement",value:function(e,t){if("DoWhileStatement"!==e.type)throw this.astErrorOutput("Invalid while statement",e);var n=this.getInternalVariableName("safeI");return t.push("for (int ".concat(n,"=0;").concat(n,"<LOOP_MAX;").concat(n,"++){\n")),this.astGeneric(e.body,t),t.push("if (!"),this.astGeneric(e.test,t),t.push(") break;\n"),t.push("}\n"),t}},{key:"astAssignmentExpression",value:function(e,t){if("%="===e.operator)this.astGeneric(e.left,t),t.push("="),t.push("mod("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")");else{if("**="!==e.operator){var n=this.getType(e.left),r=this.getType(e.right);return this.astGeneric(e.left,t),t.push(e.operator),"Integer"!==n&&"Integer"===r?(t.push("float("),this.astGeneric(e.right,t),t.push(")")):this.astGeneric(e.right,t),t}this.astGeneric(e.left,t),t.push("="),t.push("pow("),this.astGeneric(e.left,t),t.push(","),this.astGeneric(e.right,t),t.push(")")}}},{key:"astBlockStatement",value:function(e,t){if(this.isState("loop-body")){this.pushState("block-body");for(var n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);this.popState("block-body")}else{t.push("{\n");for(var r=0;r<e.body.length;r++)this.astGeneric(e.body[r],t);t.push("}\n")}return t}},{key:"astVariableDeclaration",value:function(e,t){var n=e.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput("Unexpected expression",e);for(var i=[],s=null,o=[],u=[],c=0;c<n.length;c++){var l=n[c],h=l.init,p=this.getDeclaration(l.id),f=this.getType(l.init),m=f;"LiteralInteger"===m&&(m="Integer"===p.suggestedType?"Integer":"Number");var d=a[m];if(!d)throw this.astErrorOutput("Markup type ".concat(d," not handled"),e);var g=[];if("Integer"===f&&"Integer"===m){if(p.valueType="Number",0===c||null===s)g.push("float ");else if(m!==s)throw new Error("Unhandled declaration");s=m,g.push("user_".concat(r.sanitizeName(l.id.name),"=")),g.push("float("),this.astGeneric(h,g),g.push(")")}else p.valueType=m,0===c||null===s?g.push("".concat(d," ")):m!==s&&(o.push(u.join(",")),u=[],g.push("".concat(d," "))),s=m,g.push("user_".concat(r.sanitizeName(l.id.name),"=")),"Number"===f&&"Integer"===m?h.left&&"Literal"===h.left.type?this.astGeneric(h,g):(g.push("int("),this.astGeneric(h,g),g.push(")")):"LiteralInteger"===f&&"Integer"===m?this.castLiteralToInteger(h,g):this.astGeneric(h,g);u.push(g.join(""))}return u.length>0&&o.push(u.join(",")),i.push(o.join(";")),t.push(i.join("")),t.push(";"),t}},{key:"astIfStatement",value:function(e,t){return t.push("if ("),this.astGeneric(e.test,t),t.push(")"),"BlockStatement"===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(" {\n"),this.astGeneric(e.consequent,t),t.push("\n}\n")),e.alternate&&(t.push("else "),"BlockStatement"===e.alternate.type||"IfStatement"===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(" {\n"),this.astGeneric(e.alternate,t),t.push("\n}\n"))),t}},{key:"astSwitchStatement",value:function(e,t){if("SwitchStatement"!==e.type)throw this.astErrorOutput("Invalid switch statement",e);var n=e.discriminant,r=e.cases,i=this.getType(n),a="switchDiscriminant".concat(this.astKey(e,"_"));switch(i){case"Float":case"Number":t.push("float ".concat(a," = ")),this.astGeneric(n,t),t.push(";\n");break;case"Integer":t.push("int ".concat(a," = ")),this.astGeneric(n,t),t.push(";\n")}if(1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,t),t;for(var s=!1,o=[],u=!1,c=!1,l=0;l<r.length;l++){if(r[l].test){if(0!==l&&c?s?(t.push("".concat(a," == ")),s=!1):t.push(" else if (".concat(a," == ")):(c=!0,t.push("if (".concat(a," == "))),"Integer"===i)switch(this.getType(r[l].test)){case"Number":case"Float":this.castValueToInteger(r[l].test,t);break;case"LiteralInteger":this.castLiteralToInteger(r[l].test,t)}else{if("Float"!==i)throw new Error("unhanlded");switch(this.getType(r[l].test)){case"LiteralInteger":this.castLiteralToFloat(r[l].test,t);break;case"Integer":this.castValueToFloat(r[l].test,t)}}if(!r[l].consequent||0===r[l].consequent.length){s=!0,t.push(" || ");continue}t.push(") {\n")}else{if(r.length>l+1){u=!0,this.astGeneric(r[l].consequent,o);continue}t.push(" else {\n")}this.astGeneric(r[l].consequent,t),t.push("\n}")}return u&&(t.push(" else {"),t.push(o.join("")),t.push("}")),t}},{key:"astThisExpression",value:function(e,t){return t.push("this"),t}},{key:"astMemberExpression",value:function(e,t){var n=this.getMemberExpressionDetails(e),i=n.property,a=n.name,s=n.signature,o=n.origin,u=n.type,c=n.xProperty,l=n.yProperty,h=n.zProperty;switch(s){case"value.thread.value":case"this.thread.value":if("x"!==a&&"y"!==a&&"z"!==a)throw this.astErrorOutput("Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`",e);return t.push("threadId.".concat(a)),t;case"this.output.value":if(this.dynamicOutput)switch(a){case"x":this.isState("casting-to-float")?t.push("float(uOutputDim.x)"):t.push("uOutputDim.x");break;case"y":this.isState("casting-to-float")?t.push("float(uOutputDim.y)"):t.push("uOutputDim.y");break;case"z":this.isState("casting-to-float")?t.push("float(uOutputDim.z)"):t.push("uOutputDim.z");break;default:throw this.astErrorOutput("Unexpected expression",e)}else switch(a){case"x":this.isState("casting-to-integer")?t.push(this.output[0]):t.push(this.output[0],".0");break;case"y":this.isState("casting-to-integer")?t.push(this.output[1]):t.push(this.output[1],".0");break;case"z":this.isState("casting-to-integer")?t.push(this.output[2]):t.push(this.output[2],".0");break;default:throw this.astErrorOutput("Unexpected expression",e)}return t;case"value":throw this.astErrorOutput("Unexpected expression",e);case"value[]":case"value[][]":case"value[][][]":case"value[][][][]":case"value.value":if("Math"===o)return t.push(Math[a]),t;var p=r.sanitizeName(a);switch(i){case"r":return t.push("user_".concat(p,".r")),t;case"g":return t.push("user_".concat(p,".g")),t;case"b":return t.push("user_".concat(p,".b")),t;case"a":return t.push("user_".concat(p,".a")),t}break;case"this.constants.value":if("undefined"===typeof c)switch(u){case"Array(2)":case"Array(3)":case"Array(4)":return t.push("constants_".concat(r.sanitizeName(a))),t}case"this.constants.value[]":case"this.constants.value[][]":case"this.constants.value[][][]":case"this.constants.value[][][][]":break;case"fn()[]":return this.astCallExpression(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(i)),t.push("]"),t;case"[][]":return this.astArrayExpression(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(i)),t.push("]"),t;case"value.value[]":case"value.value[][]":if(this.removeIstanbulCoverage)return t;default:throw this.astErrorOutput("Unexpected expression",e)}if(!1===e.computed)switch(u){case"Number":case"Integer":case"Float":case"Boolean":return t.push("".concat(o,"_").concat(r.sanitizeName(a))),t}var f="".concat(o,"_").concat(r.sanitizeName(a));switch(u){case"Array(2)":case"Array(3)":case"Array(4)":this.astGeneric(e.object,t),t.push("["),t.push(this.memberExpressionPropertyMarkup(c)),t.push("]");break;case"HTMLImageArray":t.push("getImage3D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"ArrayTexture(1)":t.push("getFloatFromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"Array1D(2)":case"Array2D(2)":case"Array3D(2)":t.push("getMemoryOptimizedVec2(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"ArrayTexture(2)":t.push("getVec2FromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"Array1D(3)":case"Array2D(3)":case"Array3D(3)":t.push("getMemoryOptimizedVec3(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"ArrayTexture(3)":t.push("getVec3FromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"Array1D(4)":case"Array2D(4)":case"Array3D(4)":t.push("getMemoryOptimizedVec4(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"ArrayTexture(4)":case"HTMLCanvas":case"HTMLImage":case"HTMLVideo":t.push("getVec4FromSampler2D(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;case"NumberTexture":case"Array":case"Array2D":case"Array3D":case"Array4D":case"Input":case"Number":case"Float":case"Integer":if("single"===this.precision)t.push("getMemoryOptimized32(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");else{var m="user"===o?this.lookupFunctionArgumentBitRatio(this.name,a):this.constantBitRatios[a];switch(m){case 1:t.push("get8(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, "));break;case 2:t.push("get16(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, "));break;case 4:case 0:t.push("get32(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, "));break;default:throw new Error("unhandled bit ratio of ".concat(m))}this.memberExpressionXYZ(c,l,h,t),t.push(")")}break;case"MemoryOptimizedNumberTexture":t.push("getMemoryOptimized32(".concat(f,", ").concat(f,"Size, ").concat(f,"Dim, ")),this.memberExpressionXYZ(c,l,h,t),t.push(")");break;default:throw new Error('unhandled member expression "'.concat(u,'"'))}return t}},{key:"astCallExpression",value:function(e,t){if(!e.callee)throw this.astErrorOutput("Unknown CallExpression",e);var n=null,i=this.isAstMathFunction(e);if(!(n=i||e.callee.object&&"ThisExpression"===e.callee.object.type?e.callee.property.name:"SequenceExpression"!==e.callee.type||"Literal"!==e.callee.expressions[0].type||isNaN(e.callee.expressions[0].raw)?e.callee.name:e.callee.expressions[1].property.name))throw this.astErrorOutput("Unhandled function, couldn't find name",e);switch(n){case"pow":n="_pow";break;case"round":n="_round"}if(this.calledFunctions.indexOf(n)<0&&this.calledFunctions.push(n),"random"===n&&this.plugins&&this.plugins.length>0)for(var a=0;a<this.plugins.length;a++){var s=this.plugins[a];if("Math.random()"===s.functionMatch&&s.functionReplace)return t.push(s.functionReplace),t}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,e.arguments),t.push(n),t.push("("),i)for(var o=0;o<e.arguments.length;++o){var u=e.arguments[o],c=this.getType(u);switch(o>0&&t.push(", "),c){case"Integer":this.castValueToFloat(u,t);break;default:this.astGeneric(u,t)}}else for(var l=this.lookupFunctionArgumentTypes(n)||[],h=0;h<e.arguments.length;++h){var p=e.arguments[h],f=l[h];h>0&&t.push(", ");var m=this.getType(p);switch(f||(this.triggerImplyArgumentType(n,h,m,this),f=m),m){case"Boolean":this.astGeneric(p,t);continue;case"Number":case"Float":if("Integer"===f){t.push("int("),this.astGeneric(p,t),t.push(")");continue}if("Number"===f||"Float"===f){this.astGeneric(p,t);continue}if("LiteralInteger"===f){this.castLiteralToFloat(p,t);continue}break;case"Integer":if("Number"===f||"Float"===f){t.push("float("),this.astGeneric(p,t),t.push(")");continue}if("Integer"===f){this.astGeneric(p,t);continue}break;case"LiteralInteger":if("Integer"===f){this.castLiteralToInteger(p,t);continue}if("Number"===f||"Float"===f){this.castLiteralToFloat(p,t);continue}if("LiteralInteger"===f){this.astGeneric(p,t);continue}break;case"Array(2)":case"Array(3)":case"Array(4)":if(f===m){if("Identifier"===p.type)t.push("user_".concat(r.sanitizeName(p.name)));else{if("ArrayExpression"!==p.type&&"MemberExpression"!==p.type&&"CallExpression"!==p.type)throw this.astErrorOutput("Unhandled argument type ".concat(p.type),e);this.astGeneric(p,t)}continue}break;case"HTMLCanvas":case"HTMLImage":case"HTMLImageArray":case"HTMLVideo":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":case"Array":case"Input":if(f===m){if("Identifier"!==p.type)throw this.astErrorOutput("Unhandled argument type ".concat(p.type),e);this.triggerImplyArgumentBitRatio(this.name,p.name,n,h);var d=r.sanitizeName(p.name);t.push("user_".concat(d,",user_").concat(d,"Size,user_").concat(d,"Dim"));continue}}throw this.astErrorOutput("Unhandled argument combination of ".concat(m," and ").concat(f,' for argument named "').concat(p.name,'"'),e)}return t.push(")"),t}},{key:"astArrayExpression",value:function(e,t){var n=e.elements.length;t.push("vec"+n+"(");for(var r=0;r<n;++r){r>0&&t.push(", ");var i=e.elements[r];this.astGeneric(i,t)}return t.push(")"),t}},{key:"memberExpressionXYZ",value:function(e,t,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),", "):r.push("0, "),t?r.push(this.memberExpressionPropertyMarkup(t),", "):r.push("0, "),r.push(this.memberExpressionPropertyMarkup(e)),r}},{key:"memberExpressionPropertyMarkup",value:function(e){if(!e)throw new Error("Property not set");var t=[];switch(this.getType(e)){case"Number":case"Float":this.castValueToInteger(e,t);break;case"LiteralInteger":this.castLiteralToInteger(e,t);break;default:this.astGeneric(e,t)}return t.join("")}}]),n}(e("../function-node").FunctionNode),a={Array:"sampler2D","Array(2)":"vec2","Array(3)":"vec3","Array(4)":"vec4",Array2D:"sampler2D",Array3D:"sampler2D",Boolean:"bool",Float:"float",Input:"sampler2D",Integer:"int",Number:"float",LiteralInteger:"float",NumberTexture:"sampler2D",MemoryOptimizedNumberTexture:"sampler2D","ArrayTexture(1)":"sampler2D","ArrayTexture(2)":"sampler2D","ArrayTexture(3)":"sampler2D","ArrayTexture(4)":"sampler2D",HTMLVideo:"sampler2D",HTMLCanvas:"sampler2D",HTMLImage:"sampler2D",HTMLImageArray:"sampler2DArray"},l={"===":"==","!==":"!="};t.exports={WebGLFunctionNode:i}},{"../../utils":114,"../function-node":10}],39:[function(e,t,n){var r=e("./kernel-value/boolean").WebGLKernelValueBoolean,i=e("./kernel-value/float").WebGLKernelValueFloat,a=e("./kernel-value/integer").WebGLKernelValueInteger,s=e("./kernel-value/html-image").WebGLKernelValueHTMLImage,o=e("./kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage,u=e("./kernel-value/html-video").WebGLKernelValueHTMLVideo,c=e("./kernel-value/dynamic-html-video").WebGLKernelValueDynamicHTMLVideo,l=e("./kernel-value/single-input").WebGLKernelValueSingleInput,h=e("./kernel-value/dynamic-single-input").WebGLKernelValueDynamicSingleInput,p=e("./kernel-value/unsigned-input").WebGLKernelValueUnsignedInput,f=e("./kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput,m=e("./kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture,d=e("./kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture,g=e("./kernel-value/number-texture").WebGLKernelValueNumberTexture,v=e("./kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture,y=e("./kernel-value/single-array").WebGLKernelValueSingleArray,x=e("./kernel-value/dynamic-single-array").WebGLKernelValueDynamicSingleArray,b=e("./kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI,w=e("./kernel-value/dynamic-single-array1d-i").WebGLKernelValueDynamicSingleArray1DI,S=e("./kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI,T=e("./kernel-value/dynamic-single-array2d-i").WebGLKernelValueDynamicSingleArray2DI,_=e("./kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI,A=e("./kernel-value/dynamic-single-array3d-i").WebGLKernelValueDynamicSingleArray3DI,E=e("./kernel-value/single-array2").WebGLKernelValueSingleArray2,k=e("./kernel-value/single-array3").WebGLKernelValueSingleArray3,M=e("./kernel-value/single-array4").WebGLKernelValueSingleArray4,N=e("./kernel-value/unsigned-array").WebGLKernelValueUnsignedArray,I={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:e("./kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray,"Array(2)":!1,"Array(3)":!1,"Array(4)":!1,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:f,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:d,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:!1,HTMLVideo:c},static:{Boolean:r,Float:i,Integer:a,Array:N,"Array(2)":!1,"Array(3)":!1,"Array(4)":!1,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:p,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:m,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:!1,HTMLVideo:u}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:x,"Array(2)":E,"Array(3)":k,"Array(4)":M,"Array1D(2)":w,"Array1D(3)":w,"Array1D(4)":w,"Array2D(2)":T,"Array2D(3)":T,"Array2D(4)":T,"Array3D(2)":A,"Array3D(3)":A,"Array3D(4)":A,Input:h,NumberTexture:v,"ArrayTexture(1)":v,"ArrayTexture(2)":v,"ArrayTexture(3)":v,"ArrayTexture(4)":v,MemoryOptimizedNumberTexture:d,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:!1,HTMLVideo:c},static:{Boolean:r,Float:i,Integer:a,Array:y,"Array(2)":E,"Array(3)":k,"Array(4)":M,"Array1D(2)":b,"Array1D(3)":b,"Array1D(4)":b,"Array2D(2)":S,"Array2D(3)":S,"Array2D(4)":S,"Array3D(2)":_,"Array3D(3)":_,"Array3D(4)":_,Input:l,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:m,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:!1,HTMLVideo:u}}};t.exports={lookupKernelValueType:function(e,t,n,r){if(!e)throw new Error("type missing");if(!t)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(e=r.type);var i=I[n][t];if(!1===i[e])return null;if(void 0===i[e])throw new Error("Could not find a KernelValue for ".concat(e));return i[e]},kernelValueMaps:I}},{"./kernel-value/boolean":41,"./kernel-value/dynamic-html-image":42,"./kernel-value/dynamic-html-video":43,"./kernel-value/dynamic-memory-optimized-number-texture":44,"./kernel-value/dynamic-number-texture":45,"./kernel-value/dynamic-single-array":46,"./kernel-value/dynamic-single-array1d-i":47,"./kernel-value/dynamic-single-array2d-i":48,"./kernel-value/dynamic-single-array3d-i":49,"./kernel-value/dynamic-single-input":50,"./kernel-value/dynamic-unsigned-array":51,"./kernel-value/dynamic-unsigned-input":52,"./kernel-value/float":53,"./kernel-value/html-image":54,"./kernel-value/html-video":55,"./kernel-value/integer":57,"./kernel-value/memory-optimized-number-texture":58,"./kernel-value/number-texture":59,"./kernel-value/single-array":60,"./kernel-value/single-array1d-i":61,"./kernel-value/single-array2":62,"./kernel-value/single-array2d-i":63,"./kernel-value/single-array3":64,"./kernel-value/single-array3d-i":65,"./kernel-value/single-array4":66,"./kernel-value/single-input":67,"./kernel-value/unsigned-array":68,"./kernel-value/unsigned-input":69}],40:[function(e,t,n){var r=e("./index").WebGLKernelValue,i=e("../../../input").Input,a=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"checkSize",value:function(e,t){if(this.kernel.validate){var n=this.kernel.constructor.features.maxTextureSize;if(e>n||t>n)throw e>t?new Error("Argument texture width of ".concat(e," larger than maximum size of ").concat(n," for your GPU")):e<t?new Error("Argument texture height of ".concat(t," larger than maximum size of ").concat(n," for your GPU")):new Error("Argument texture height and width of ".concat(t," larger than maximum size of ").concat(n," for your GPU"))}}},{key:"setup",value:function(){this.requestTexture(),this.setupTexture(),this.defineTexture()}},{key:"requestTexture",value:function(){this.texture=this.onRequestTexture()}},{key:"defineTexture",value:function(){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}},{key:"setupTexture",value:function(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+"Dim",this.sizeId=this.id+"Size"}},{key:"getBitRatio",value:function(e){if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===i)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4}}},{key:"destroy",value:function(){this.prevArg&&this.prevArg.delete(),this.context.deleteTexture(this.texture)}}]),n}(r);t.exports={WebGLKernelArray:a}},{"../../../input":110,"./index":56}],41:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).uploadValue=e,i}return o(n,[{key:"getSource",value:function(e){return"constants"===this.origin?"const bool ".concat(this.id," = ").concat(e,";\n"):"uniform bool ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}]),n}(e("./index").WebGLKernelValue);t.exports={WebGLKernelValueBoolean:r}},{"../../../utils":114,"./index":56}],42:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){var t=e.width,r=e.height;this.checkSize(t,r),this.dimensions=[t,r,1],this.textureSize=[t,r],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./html-image").WebGLKernelValueHTMLImage);t.exports={WebGLKernelValueDynamicHTMLImage:l}},{"../../../utils":114,"./html-image":54}],43:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("./dynamic-html-image").WebGLKernelValueDynamicHTMLImage);t.exports={WebGLKernelValueDynamicHTMLVideo:r}},{"./dynamic-html-image":42}],44:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.dimensions=e.dimensions,this.checkSize(e.size[0],e.size[1]),this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);t.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:l}},{"../../../utils":114,"./memory-optimized-number-texture":58}],45:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.dimensions=e.dimensions,this.checkSize(e.size[0],e.size[1]),this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./number-texture").WebGLKernelValueNumberTexture);t.exports={WebGLKernelValueDynamicNumberTexture:l}},{"../../../utils":114,"./number-texture":59}],46:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./single-array").WebGLKernelValueSingleArray);t.exports={WebGLKernelValueDynamicSingleArray:l}},{"../../../utils":114,"./single-array":60}],47:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./single-array1d-i").WebGLKernelValueSingleArray1DI);t.exports={WebGLKernelValueDynamicSingleArray1DI:l}},{"../../../utils":114,"./single-array1d-i":61}],48:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./single-array2d-i").WebGLKernelValueSingleArray2DI);t.exports={WebGLKernelValueDynamicSingleArray2DI:l}},{"../../../utils":114,"./single-array2d-i":63}],49:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./single-array3d-i").WebGLKernelValueSingleArray3DI);t.exports={WebGLKernelValueDynamicSingleArray3DI:l}},{"../../../utils":114,"./single-array3d-i":65}],50:[function(e,t,n){var r=e("../../../utils").utils,h=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){var t=l(e.size,3),s=t[0],o=t[1],u=t[2];this.dimensions=new Int32Array([s||1,o||1,u||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./single-input").WebGLKernelValueSingleInput);t.exports={WebGLKernelValueDynamicSingleInput:h}},{"../../../utils":114,"./single-input":67}],51:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var t=this.getTransferArrayType(e);this.preUploadValue=new t(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./unsigned-array").WebGLKernelValueUnsignedArray);t.exports={WebGLKernelValueDynamicUnsignedArray:l}},{"../../../utils":114,"./unsigned-array":68}],52:[function(e,t,n){var r=e("../../../utils").utils,h=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){var t=l(e.size,3),s=t[0],o=t[1],u=t[2];this.dimensions=new Int32Array([s||1,o||1,u||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.checkSize(this.textureSize[0],this.textureSize[1]);var c=this.getTransferArrayType(e.value);this.preUploadValue=new c(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./unsigned-input").WebGLKernelValueUnsignedInput);t.exports={WebGLKernelValueDynamicUnsignedInput:h}},{"../../../utils":114,"./unsigned-input":69}],53:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).uploadValue=e,i}return o(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(e){return"constants"===this.origin?Number.isInteger(e)?"const float ".concat(this.id," = ").concat(e,".0;\n"):"const float ".concat(this.id," = ").concat(e,";\n"):"uniform float ".concat(this.id,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform1f(this.id,this.uploadValue=e)}}]),n}(e("./index").WebGLKernelValue);t.exports={WebGLKernelValueFloat:r}},{"../../../utils":114,"./index":56}],54:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;s(this,n),i=t.call(this,e,r);var a=e.width,o=e.height;return i.checkSize(a,o),i.dimensions=[a,o,1],i.textureSize=[a,o],i.uploadValue=e,i}return o(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueHTMLImage:i}},{"../../../utils":114,"./array":40}],55:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("./html-image").WebGLKernelValueHTMLImage);t.exports={WebGLKernelValueHTMLVideo:r}},{"./html-image":54}],56:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).dimensionsId=null,i.sizeId=null,i.initialValueConstructor=e.constructor,i.onRequestTexture=r.onRequestTexture,i.onRequestIndex=r.onRequestIndex,i.uploadValue=null,i.textureSize=null,i.bitRatio=null,i.prevArg=null,i}return o(n,[{key:"setup",value:function(){}},{key:"getTransferArrayType",value:function(e){if(Array.isArray(e[0]))return this.getTransferArrayType(e[0]);switch(e.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return e.constructor}return console.warn("Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros"),e.constructor}},{key:"getStringValueHandler",value:function(){throw new Error('"getStringValueHandler" not implemented on '.concat(this.constructor.name))}},{key:"getVariablePrecisionString",value:function(){return this.kernel.getVariablePrecisionString(this.textureSize||void 0,this.tactic||void 0)}},{key:"destroy",value:function(){}},{key:"id",get:function(){return"".concat(this.origin,"_").concat(r.sanitizeName(this.name))}}]),n}(e("../../kernel-value").KernelValue);t.exports={WebGLKernelValue:i}},{"../../../utils":114,"../../kernel-value":35}],57:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).uploadValue=e,i}return o(n,[{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(e){return"constants"===this.origin?"const int ".concat(this.id," = ").concat(parseInt(e),";\n"):"uniform int ".concat(this.id,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}]),n}(e("./index").WebGLKernelValue);t.exports={WebGLKernelValueInteger:r}},{"../../../utils":114,"./index":56}],58:[function(e,t,n){var r=e("../../../utils").utils,i=e("./array").WebGLKernelArray,a="Source and destination textures are the same.  Use immutable = true and manually cleanup kernel output texture memory with texture.delete()",h=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;s(this,n),i=t.call(this,e,r);var a=l(e.size,2),o=a[0],u=a[1];return i.checkSize(o,u),i.dimensions=e.dimensions,i.textureSize=e.size,i.uploadValue=e.texture,i.forceUploadEachRun=!0,i}return o(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){if(this.checkContext&&e.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var t=this.kernel,n=this.context;if(t.pipeline)if(t.immutable)t.updateTextureArgumentRefs(this,e);else{if(t.texture.texture===e.texture)throw new Error(a);if(t.mappedTextures)for(var r=t.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===e.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(i);t.exports={WebGLKernelValueMemoryOptimizedNumberTexture:h,sameError:a}},{"../../../utils":114,"./array":40}],59:[function(e,t,n){var r=e("../../../utils").utils,i=e("./array").WebGLKernelArray,a=e("./memory-optimized-number-texture").sameError,h=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;s(this,n),i=t.call(this,e,r);var a=l(e.size,2),o=a[0],u=a[1];i.checkSize(o,u);var c=e.size,h=e.dimensions;return i.bitRatio=i.getBitRatio(e),i.dimensions=h,i.textureSize=c,i.uploadValue=e.texture,i.forceUploadEachRun=!0,i}return o(n,[{key:"setup",value:function(){this.setupTexture()}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,".texture;\n")}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){if(this.checkContext&&e.context!==this.context)throw new Error("Value ".concat(this.name," (").concat(this.type,") must be from same context"));var t=this.kernel,n=this.context;if(t.pipeline)if(t.immutable)t.updateTextureArgumentRefs(this,e);else{if(t.texture.texture===e.texture)throw new Error(a);if(t.mappedTextures)for(var r=t.mappedTextures,i=0;i<r.length;i++)if(r[i].texture===e.texture)throw new Error(a)}n.activeTexture(this.contextHandle),n.bindTexture(n.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(i);t.exports={WebGLKernelValueNumberTexture:h}},{"../../../utils":114,"./array":40,"./memory-optimized-number-texture":58}],60:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,i){var a;return s(this,n),(a=t.call(this,e,i)).bitRatio=4,a.dimensions=r.getDimensions(e,!0),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return o(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueSingleArray:i}},{"../../../utils":114,"./array":40}],61:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).bitRatio=4,i.setShape(e),i}return o(n,[{key:"setShape",value:function(e){var t=r.getDimensions(e,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],1,1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flatten2dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueSingleArray1DI:i}},{"../../../utils":114,"./array":40}],62:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).uploadValue=e,i}return o(n,[{key:"getSource",value:function(e){return"constants"===this.origin?"const vec2 ".concat(this.id," = vec2(").concat(e[0],",").concat(e[1],");\n"):"uniform vec2 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform2fv(this.id,this.uploadValue=e)}}]),n}(e("./index").WebGLKernelValue);t.exports={WebGLKernelValueSingleArray2:r}},{"../../../utils":114,"./index":56}],63:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).bitRatio=4,i.setShape(e),i}return o(n,[{key:"setShape",value:function(e){var t=r.getDimensions(e,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],t[2],1]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flatten3dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueSingleArray2DI:i}},{"../../../utils":114,"./array":40}],64:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).uploadValue=e,i}return o(n,[{key:"getSource",value:function(e){return"constants"===this.origin?"const vec3 ".concat(this.id," = vec3(").concat(e[0],",").concat(e[1],",").concat(e[2],");\n"):"uniform vec3 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform3fv(this.id,this.uploadValue=e)}}]),n}(e("./index").WebGLKernelValue);t.exports={WebGLKernelValueSingleArray3:r}},{"../../../utils":114,"./index":56}],65:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).bitRatio=4,i.setShape(e),i}return o(n,[{key:"setShape",value:function(e){var t=r.getDimensions(e,!0);this.textureSize=r.getMemoryOptimizedFloatTextureSize(t,this.bitRatio),this.dimensions=new Int32Array([t[1],t[2],t[3]]),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength)}},{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,", uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flatten4dArrayTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueSingleArray3DI:i}},{"../../../utils":114,"./array":40}],66:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).uploadValue=e,i}return o(n,[{key:"getSource",value:function(e){return"constants"===this.origin?"const vec4 ".concat(this.id," = vec4(").concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(e[3],");\n"):"uniform vec4 ".concat(this.id,";\n")}},{key:"getStringValueHandler",value:function(){return"constants"===this.origin?"":"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform4fv(this.id,this.uploadValue=e)}}]),n}(e("./index").WebGLKernelValue);t.exports={WebGLKernelValueSingleArray4:r}},{"../../../utils":114,"./index":56}],67:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,i){var a;s(this,n),(a=t.call(this,e,i)).bitRatio=4;var o=l(e.size,3),u=o[0],c=o[1],h=o[2];return a.dimensions=new Int32Array([u||1,c||1,h||1]),a.textureSize=r.getMemoryOptimizedFloatTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*a.bitRatio,a.checkSize(a.textureSize[0],a.textureSize[1]),a.uploadValue=new Float32Array(a.uploadArrayLength),a}return o(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const uploadValue_".concat(this.name," = new Float32Array(").concat(this.uploadArrayLength,")"),"flattenTo(".concat(this.varName,".value, uploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueSingleInput:i}},{"../../../utils":114,"./array":40}],68:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,i){var a;return s(this,n),(a=t.call(this,e,i)).bitRatio=a.getBitRatio(e),a.dimensions=r.getDimensions(e,!0),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(e),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return o(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,", preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueUnsignedArray:i}},{"../../../utils":114,"./array":40}],69:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,i){var a;s(this,n),(a=t.call(this,e,i)).bitRatio=a.getBitRatio(e);var o=l(e.size,3),u=o[0],c=o[1],h=o[2];return a.dimensions=new Int32Array([u||1,c||1,h||1]),a.textureSize=r.getMemoryOptimizedPackedTextureSize(a.dimensions,a.bitRatio),a.uploadArrayLength=a.textureSize[0]*a.textureSize[1]*(4/a.bitRatio),a.checkSize(a.textureSize[0],a.textureSize[1]),a.TranserArrayType=a.getTransferArrayType(e.value),a.preUploadValue=new a.TranserArrayType(a.uploadArrayLength),a.uploadValue=new Uint8Array(a.preUploadValue.buffer),a}return o(n,[{key:"getStringValueHandler",value:function(){return r.linesToString(["const preUploadValue_".concat(this.name," = new ").concat(this.TranserArrayType.name,"(").concat(this.uploadArrayLength,")"),"const uploadValue_".concat(this.name," = new Uint8Array(preUploadValue_").concat(this.name,".buffer)"),"flattenTo(".concat(this.varName,".value, preUploadValue_").concat(this.name,")")])}},{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"ivec2 ".concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"ivec3 ".concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e.value,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(value.constructor)}}]),n}(e("./array").WebGLKernelArray);t.exports={WebGLKernelValueUnsignedInput:i}},{"../../../utils":114,"./array":40}],70:[function(e,t,n){var r=e("../gl/kernel").GLKernel,l=e("../function-builder").FunctionBuilder,h=e("./function-node").WebGLFunctionNode,p=e("../../utils").utils,f=e("../../plugins/math-random-uniformly-distributed"),m=e("./fragment-shader").fragmentShader,d=e("./vertex-shader").vertexShader,g=e("../gl/kernel-string").glKernelString,v=e("./kernel-value-maps").lookupKernelValueType,y=null,x=null,b=null,w=null,S=null,T=[f],_=[],A={},E=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).program=null,i.pipeline=r.pipeline,i.endianness=p.systemEndianness(),i.extensions={},i.argumentTextureCount=0,i.constantTextureCount=0,i.fragShader=null,i.vertShader=null,i.drawBuffersMap=null,i.maxTexSize=null,i.onRequestSwitchKernel=null,i.removeIstanbulCoverage=!0,i.texture=null,i.mappedTextures=null,i.mergeSettings(e.settings||r),i.threadDim=null,i.framebuffer=null,i.buffer=null,i.textureCache=[],i.programUniformLocationCache={},i.uniform1fCache={},i.uniform1iCache={},i.uniform2fCache={},i.uniform2fvCache={},i.uniform2ivCache={},i.uniform3fvCache={},i.uniform3ivCache={},i.uniform4fvCache={},i.uniform4ivCache={},i}return o(n,null,[{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?x=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(x=new OffscreenCanvas(0,0)),x&&(b=x.getContext("webgl")||x.getContext("experimental-webgl"))&&b.getExtension&&(w={OES_texture_float:b.getExtension("OES_texture_float"),OES_texture_float_linear:b.getExtension("OES_texture_float_linear"),OES_element_index_uint:b.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:b.getExtension("WEBGL_draw_buffers")},S=this.getFeatures())}},{key:"isContextMatch",value:function(e){return"undefined"!==typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext}},{key:"getIsTextureFloat",value:function(){return Boolean(w.OES_texture_float)}},{key:"getIsDrawBuffers",value:function(){return Boolean(w.WEBGL_draw_buffers)}},{key:"getChannelCount",value:function(){return w.WEBGL_draw_buffers?b.getParameter(w.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}},{key:"getMaxTextureSize",value:function(){return b.getParameter(b.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(e,t,n,r){return v(e,t,n,r)}},{key:"isSupported",get:function(){return null!==y?y:(this.setupFeatureChecks(),y=this.isContextMatch(b))}},{key:"testCanvas",get:function(){return x}},{key:"testContext",get:function(){return b}},{key:"features",get:function(){return S}},{key:"fragmentShader",get:function(){return m}},{key:"vertexShader",get:function(){return d}}]),o(n,[{key:"initCanvas",value:function(){if("undefined"!==typeof document){var e=document.createElement("canvas");return e.width=2,e.height=2,e}if("undefined"!==typeof OffscreenCanvas)return new OffscreenCanvas(0,0)}},{key:"initContext",value:function(){var e={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e)}},{key:"initPlugins",value:function(e){var t=[],n=this.source;if("string"===typeof n)for(var r=0;r<T.length;r++){var i=T[r];n.match(i.functionMatch)&&t.push(i)}else if("object"===typeof n&&e.pluginNames)for(var a=function(n){var r=T[n];e.pluginNames.some((function(e){return e===r.name}))&&t.push(r)},s=0;s<T.length;s++)a(s);return t}},{key:"initExtensions",value:function(){this.extensions={OES_texture_float:this.context.getExtension("OES_texture_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear"),OES_element_index_uint:this.context.getExtension("OES_element_index_uint"),WEBGL_draw_buffers:this.context.getExtension("WEBGL_draw_buffers"),WEBGL_color_buffer_float:this.context.getExtension("WEBGL_color_buffer_float")}}},{key:"validateSettings",value:function(e){if(this.validate){var t=this.constructor.features;if(!0===this.optimizeFloatMemory&&!t.isTextureFloat)throw new Error("Float textures are not supported");if("single"===this.precision&&!t.isFloatRead)throw new Error("Single precision not supported");if(!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision=t.isFloatRead?"single":"unsigned"),this.subKernels&&this.subKernels.length>0&&!this.extensions.WEBGL_draw_buffers)throw new Error("could not instantiate draw buffers extension");if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error("Auto output only supported for kernels with only one input");var n=p.getVariableType(e[0],this.strictIntegers);switch(n){case"Array":this.output=p.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=e[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"precision"===this.precision&&(this.precision="unsigned",console.warn("Cannot use graphical mode and single precision at the same time")),void(this.texSize=p.clone(this.output))}null===this.precision&&t.isTextureFloat&&(this.precision="single"),this.texSize=p.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=p.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"updateMaxTexSize",value:function(){var e=this.texSize,t=this.canvas;if(null===this.maxTexSize){var n=_.indexOf(t);-1===n&&(n=_.length,_.push(t),A[n]=[e[0],e[1]]),this.maxTexSize=A[n]}this.maxTexSize[0]<e[0]&&(this.maxTexSize[0]=e[0]),this.maxTexSize[1]<e[1]&&(this.maxTexSize[1]=e[1])}},{key:"setupArguments",value:function(e){var t=this;this.kernelArguments=[],this.argumentTextureCount=0;var n=null===this.argumentTypes;if(n&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],e.length<this.argumentNames.length)throw new Error("not enough arguments for kernel");if(e.length>this.argumentNames.length)throw new Error("too many arguments for kernel");for(var r=this.context,i=0,a=function(){return t.createTexture()},s=function(){return i++},o=function(e){t.switchKernels({type:"argumentMismatch",needed:e})},u=function(){return r.TEXTURE0+t.constantTextureCount+t.argumentTextureCount++},c=0;c<e.length;c++){var l=e[c],h=this.argumentNames[c],f=void 0;n?(f=p.getVariableType(l,this.strictIntegers),this.argumentTypes.push(f)):f=this.argumentTypes[c];var m=this.constructor.lookupKernelValueType(f,this.dynamicArguments?"dynamic":"static",this.precision,e[c]);if(null===m)return this.requestFallback(e);var d=new m(l,{name:h,type:f,tactic:this.tactic,origin:"user",context:r,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:a,onRequestIndex:s,onUpdateValueMismatch:o,onRequestContextHandle:u});this.kernelArguments.push(d),d.setup(),this.argumentSizes.push(d.textureSize),this.argumentBitRatios[c]=d.bitRatio}}},{key:"createTexture",value:function(){var e=this.context.createTexture();return this.textureCache.push(e),e}},{key:"setupConstants",value:function(e){var t=this,n=this.context;this.kernelConstants=[],this.forceUploadKernelConstants=[];var r=null===this.constantTypes;r&&(this.constantTypes={}),this.constantBitRatios={};var i=0;for(var a in this.constants){var s=this.constants[a],o=void 0;r?(o=p.getVariableType(s,this.strictIntegers),this.constantTypes[a]=o):o=this.constantTypes[a];var u=this.constructor.lookupKernelValueType(o,"static",this.precision,s);if(null===u)return this.requestFallback(e);var c=new u(s,{name:a,type:o,tactic:this.tactic,origin:"constants",context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:function(){return t.createTexture()},onRequestIndex:function(){return i++},onRequestContextHandle:function(){return n.TEXTURE0+t.constantTextureCount++}});this.constantBitRatios[a]=c.bitRatio,this.kernelConstants.push(c),c.setup(),c.forceUploadEachRun&&this.forceUploadKernelConstants.push(c)}}},{key:"build",value:function(){if(!this.built&&(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),!this.fallbackRequested&&(this.setupArguments(arguments),!this.fallbackRequested))){this.updateMaxTexSize(),this.translateSource();var e=this.pickRenderStrategy(arguments);if(e)return e;var t=this.texSize,n=this.context,r=this.canvas;n.enable(n.SCISSOR_TEST),this.pipeline&&this.precision,n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1];for(var i=this.threadDim=Array.from(this.output);i.length<3;)i.push(1);var a=this.getVertexShader(arguments),s=n.createShader(n.VERTEX_SHADER);n.shaderSource(s,a),n.compileShader(s),this.vertShader=s;var o=this.getFragmentShader(arguments),u=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(u,o),n.compileShader(u),this.fragShader=u,this.debug&&(console.log("GLSL Shader Output:"),console.log(o)),!n.getShaderParameter(s,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(s));if(!n.getShaderParameter(u,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(u));var c=this.program=n.createProgram();n.attachShader(c,s),n.attachShader(c,u),n.linkProgram(c),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=t[0],this.framebuffer.height=t[1];var l=new Float32Array([-1,-1,1,-1,-1,1,1,1]),h=new Float32Array([0,0,1,0,0,1,1,1]),p=l.byteLength,f=this.buffer;f?n.bindBuffer(n.ARRAY_BUFFER,f):(f=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,f),n.bufferData(n.ARRAY_BUFFER,l.byteLength+h.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,l),n.bufferSubData(n.ARRAY_BUFFER,p,h);var m=n.getAttribLocation(this.program,"aPos");n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,0,0);var d=n.getAttribLocation(this.program,"aTexCoord");n.enableVertexAttribArray(d),n.vertexAttribPointer(d,2,n.FLOAT,!1,0,p),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);var g=0;for(var v in n.useProgram(this.program),this.constants)this.kernelConstants[g++].updateValue(this.constants[v]);this._setupOutputTexture(),null!==this.subKernels&&this.subKernels.length>0&&(this._mappedTextureSwitched={},this._setupSubOutputTextures()),this.buildSignature(arguments),this.built=!0}}},{key:"translateSource",value:function(){var e=l.fromKernel(this,h,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=e.getPrototypeString("kernel"),this.setupReturnTypes(e)}},{key:"setupReturnTypes",value:function(e){if(this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&this.subKernels.length>0)for(var t=0;t<this.subKernels.length;t++){var n=this.subKernels[t];n.returnType||(n.returnType=e.getSubKernelResultType(t))}}},{key:"run",value:function(){var e=this.kernelArguments,t=this.texSize,n=this.forceUploadKernelConstants,r=this.context;r.useProgram(this.program),r.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv("uOutputDim",new Int32Array(this.threadDim)),this.setUniform2iv("uTexSize",t)),this.setUniform2f("ratio",t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]);for(var i=0;i<n.length;i++){var a=n[i];if(a.updateValue(this.constants[a.name]),this.switchingKernels)return}for(var s=0;s<e.length;s++)if(e[s].updateValue(arguments[s]),this.switchingKernels)return;if(this.plugins)for(var o=0;o<this.plugins.length;o++){var u=this.plugins[o];u.onBeforeRun&&u.onBeforeRun(this)}if(this.graphical)return this.pipeline?(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),r.drawArrays(r.TRIANGLE_STRIP,0,4),this.immutable?this.texture.clone():this.texture):(r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindFramebuffer(r.FRAMEBUFFER,null),void r.drawArrays(r.TRIANGLE_STRIP,0,4));r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),this.immutable&&this._replaceOutputTexture(),null!==this.subKernels&&(this.immutable&&this._replaceSubOutputTextures(),this.drawBuffers()),r.drawArrays(r.TRIANGLE_STRIP,0,4)}},{key:"drawBuffers",value:function(){this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)}},{key:"getInternalFormat",value:function(){return this.context.RGBA}},{key:"getTextureFormat",value:function(){var e=this.context;switch(this.getInternalFormat()){case e.RGBA:return e.RGBA;default:throw new Error("Unknown internal format")}}},{key:"_replaceOutputTexture",value:function(){if(this.texture.beforeMutate()||this._textureSwitched){var e=this.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0),this._textureSwitched=!1}}},{key:"_setupOutputTexture",value:function(){var e=this.context,t=this.texSize;if(this.texture)e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0);else{var n=this.createTexture();e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var r=this.getInternalFormat();"single"===this.precision?e.texImage2D(e.TEXTURE_2D,0,r,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,r,t[0],t[1],0,r,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),this.texture=new this.TextureConstructor({texture:n,size:t,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_replaceSubOutputTextures",value:function(){for(var e=this.context,t=0;t<this.mappedTextures.length;t++){var n=this.mappedTextures[t];(n.beforeMutate()||this._mappedTextureSwitched[t])&&(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t+1,e.TEXTURE_2D,n.texture,0),this._mappedTextureSwitched[t]=!1)}}},{key:"_setupSubOutputTextures",value:function(){var e=this.context;if(this.mappedTextures)for(var t=0;t<this.subKernels.length;t++)e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t+1,e.TEXTURE_2D,this.mappedTextures[t].texture,0);else{var n=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+r+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),"single"===this.precision?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n[0],n[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n[0],n[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+r+1,e.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"setUniform1f",value:function(e,t){if(!this.uniform1fCache.hasOwnProperty(e)||t!==this.uniform1fCache[e]){this.uniform1fCache[e]=t;var n=this.getUniformLocation(e);this.context.uniform1f(n,t)}}},{key:"setUniform1i",value:function(e,t){if(!this.uniform1iCache.hasOwnProperty(e)||t!==this.uniform1iCache[e]){this.uniform1iCache[e]=t;var n=this.getUniformLocation(e);this.context.uniform1i(n,t)}}},{key:"setUniform2f",value:function(e,t,n){if(this.uniform2fCache.hasOwnProperty(e)){var r=this.uniform2fCache[e];if(t===r[0]&&n===r[1])return}this.uniform2fCache[e]=[t,n];var i=this.getUniformLocation(e);this.context.uniform2f(i,t,n)}},{key:"setUniform2fv",value:function(e,t){if(this.uniform2fvCache.hasOwnProperty(e)){var n=this.uniform2fvCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2fvCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform2fv(r,t)}},{key:"setUniform2iv",value:function(e,t){if(this.uniform2ivCache.hasOwnProperty(e)){var n=this.uniform2ivCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2ivCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform2iv(r,t)}},{key:"setUniform3fv",value:function(e,t){if(this.uniform3fvCache.hasOwnProperty(e)){var n=this.uniform3fvCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3fvCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform3fv(r,t)}},{key:"setUniform3iv",value:function(e,t){if(this.uniform3ivCache.hasOwnProperty(e)){var n=this.uniform3ivCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3ivCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform3iv(r,t)}},{key:"setUniform4fv",value:function(e,t){if(this.uniform4fvCache.hasOwnProperty(e)){var n=this.uniform4fvCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3])return}this.uniform4fvCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform4fv(r,t)}},{key:"setUniform4iv",value:function(e,t){if(this.uniform4ivCache.hasOwnProperty(e)){var n=this.uniform4ivCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3])return}this.uniform4ivCache[e]=t;var r=this.getUniformLocation(e);this.context.uniform4iv(r,t)}},{key:"getUniformLocation",value:function(e){return this.programUniformLocationCache.hasOwnProperty(e)?this.programUniformLocationCache[e]:this.programUniformLocationCache[e]=this.context.getUniformLocation(this.program,e)}},{key:"_getFragShaderArtifactMap",value:function(e){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),INJECTED_NATIVE:this._getInjectedNative(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(e),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString(),FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getVertShaderArtifactMap",value:function(e){return{FLOAT_TACTIC_DECLARATION:this.getFloatTacticDeclaration(),INT_TACTIC_DECLARATION:this.getIntTacticDeclaration(),SAMPLER_2D_TACTIC_DECLARATION:this.getSampler2DTacticDeclaration(),SAMPLER_2D_ARRAY_TACTIC_DECLARATION:this.getSampler2DArrayTacticDeclaration()}}},{key:"_getHeaderString",value:function(){return null!==this.subKernels?"#extension GL_EXT_draw_buffers : require\n":""}},{key:"_getLoopMaxString",value:function(){return this.loopMaxIterations?" ".concat(parseInt(this.loopMaxIterations),";\n"):" 1000;\n"}},{key:"_getPluginsString",value:function(){var e=this;return this.plugins?this.plugins.map((function(t){return t.source&&e.source.match(t.functionMatch)?t.source:""})).join("\n"):"\n"}},{key:"_getConstantsString",value:function(){var e=[],t=this.threadDim,n=this.texSize;return this.dynamicOutput?e.push("uniform ivec3 uOutputDim","uniform ivec2 uTexSize"):e.push("ivec3 uOutputDim = ivec3(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")"),"ivec2 uTexSize = ivec2(".concat(n[0],", ").concat(n[1],")")),p.linesToString(e)}},{key:"_getTextureCoordinate",value:function(){var e=this.subKernels;return null===e||e.length<1?"varying vec2 vTexCoord;\n":"out vec2 vTexCoord;\n"}},{key:"_getDecode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getEncode32EndiannessString",value:function(){return"LE"===this.endianness?"":"  texel.rgba = texel.abgr;\n"}},{key:"_getDivideWithIntegerCheckString",value:function(){return this.fixIntegerDivisionAccuracy?"float divWithIntCheck(float x, float y) {\n  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {\n    return float(int(x) / int(y));\n  }\n  return x / y;\n}\n\nfloat integerCorrectionModulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -(number - (divisor * floor(divWithIntCheck(number, divisor))));\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return number - (divisor * floor(divWithIntCheck(number, divisor)));\n}":""}},{key:"_getMainArgumentsString",value:function(e){for(var t=[],n=this.argumentNames,r=0;r<n.length;r++)t.push(this.kernelArguments[r].getSource(e[r]));return t.join("")}},{key:"_getInjectedNative",value:function(){return this.injectedNative||""}},{key:"_getMainConstantsString",value:function(){var e=[],t=this.constants;if(t){var n=0;for(var r in t)this.constants.hasOwnProperty(r)&&e.push(this.kernelConstants[n++].getSource(this.constants[r]))}return e.join("")}},{key:"getKernelResultDeclaration",value:function(){switch(this.returnType){case"Array(2)":return"vec2 kernelResult";case"Array(3)":return"vec3 kernelResult";case"Array(4)":return"vec4 kernelResult";case"LiteralInteger":case"Float":case"Number":case"Integer":return"float kernelResult";default:if(this.graphical)return"float kernelResult";throw new Error('unrecognized output type "'.concat(this.returnType,'"'))}}},{key:"getKernelString",value:function(){var e=[this.getKernelResultDeclaration()],t=this.subKernels;if(null!==t)switch(this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<t.length;n++){var r=t[n];e.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"))}break;case"Array(2)":for(var i=0;i<t.length;i++)e.push("vec2 subKernelResult_".concat(t[i].name));break;case"Array(3)":for(var a=0;a<t.length;a++)e.push("vec3 subKernelResult_".concat(t[a].name));break;case"Array(4)":for(var s=0;s<t.length;s++)e.push("vec4 subKernelResult_".concat(t[s].name))}return p.linesToString(e)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return p.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragColor = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return p.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var e=[];if(!this.subKernels)return"";for(var t=0;t<this.subKernels.length;t++)"Integer"===this.subKernels[t].returnType?e.push("  gl_FragData[".concat(t+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[t].name,"))")):e.push("  gl_FragData[".concat(t+1,"] = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[t].name,")"));return p.linesToString(e)}},{key:"getMainResultMemoryOptimizedFloats",value:function(){var e=["  index *= 4"];switch(this.returnType){case"Number":case"Integer":case"Float":for(var t=["r","g","b","a"],n=0;n<t.length;n++){var r=t[n];this.getMainResultKernelMemoryOptimizedFloats(e,r),this.getMainResultSubKernelMemoryOptimizedFloats(e,r),n+1<t.length&&e.push("  index += 1")}break;default:throw new Error("optimized output only usable with Numbers, ".concat(this.returnType," specified"))}return p.linesToString(e)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(e,t){e.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0].".concat(t," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(e,t){if(!this.subKernels)return e;for(var n=0;n<this.subKernels.length;n++)"Integer"===this.subKernels[n].returnType?e.push("  gl_FragData[".concat(n+1,"].").concat(t," = float(subKernelResult_").concat(this.subKernels[n].name,")")):e.push("  gl_FragData[".concat(n+1,"].").concat(t," = subKernelResult_").concat(this.subKernels[n].name))}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t){var n=this.subKernels[t];"Integer"===n.returnType?e.push("  gl_FragData[".concat(t+1,"][0] = float(subKernelResult_").concat(n.name,")")):e.push("  gl_FragData[".concat(t+1,"][0] = subKernelResult_").concat(n.name))}return e}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t)e.push("  gl_FragData[".concat(t+1,"][0] = subKernelResult_").concat(this.subKernels[t].name,"[0]"),"  gl_FragData[".concat(t+1,"][1] = subKernelResult_").concat(this.subKernels[t].name,"[1]"));return e}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0][0] = kernelResult[0]","  gl_FragData[0][1] = kernelResult[1]","  gl_FragData[0][2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t)e.push("  gl_FragData[".concat(t+1,"][0] = subKernelResult_").concat(this.subKernels[t].name,"[0]"),"  gl_FragData[".concat(t+1,"][1] = subKernelResult_").concat(this.subKernels[t].name,"[1]"),"  gl_FragData[".concat(t+1,"][2] = subKernelResult_").concat(this.subKernels[t].name,"[2]"));return e}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  gl_FragData[0] = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var e=[];if(!this.subKernels)return e;switch(this.returnType){case"Number":case"Float":case"Integer":for(var t=0;t<this.subKernels.length;++t)"Integer"===this.subKernels[t].returnType?e.push("  gl_FragData[".concat(t+1,"] = float(subKernelResult_").concat(this.subKernels[t].name,")")):e.push("  gl_FragData[".concat(t+1,"] = subKernelResult_").concat(this.subKernels[t].name));break;case"Array(2)":for(var n=0;n<this.subKernels.length;++n)e.push("  gl_FragData[".concat(n+1,"][0] = subKernelResult_").concat(this.subKernels[n].name,"[0]"),"  gl_FragData[".concat(n+1,"][1] = subKernelResult_").concat(this.subKernels[n].name,"[1]"));break;case"Array(3)":for(var r=0;r<this.subKernels.length;++r)e.push("  gl_FragData[".concat(r+1,"][0] = subKernelResult_").concat(this.subKernels[r].name,"[0]"),"  gl_FragData[".concat(r+1,"][1] = subKernelResult_").concat(this.subKernels[r].name,"[1]"),"  gl_FragData[".concat(r+1,"][2] = subKernelResult_").concat(this.subKernels[r].name,"[2]"));break;case"Array(4)":for(var i=0;i<this.subKernels.length;++i)e.push("  gl_FragData[".concat(i+1,"][0] = subKernelResult_").concat(this.subKernels[i].name,"[0]"),"  gl_FragData[".concat(i+1,"][1] = subKernelResult_").concat(this.subKernels[i].name,"[1]"),"  gl_FragData[".concat(i+1,"][2] = subKernelResult_").concat(this.subKernels[i].name,"[2]"),"  gl_FragData[".concat(i+1,"][3] = subKernelResult_").concat(this.subKernels[i].name,"[3]"))}return e}},{key:"replaceArtifacts",value:function(e,t){return e.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z]*[0-9]?)*)__;\n/g,(function(e,n){if(t.hasOwnProperty(n))return t[n];throw"unhandled artifact ".concat(n)}))}},{key:"getFragmentShader",value:function(e){return null!==this.compiledFragmentShader?this.compiledFragmentShader:this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e))}},{key:"getVertexShader",value:function(e){return null!==this.compiledVertexShader?this.compiledVertexShader:this.compiledVertexShader=this.replaceArtifacts(this.constructor.vertexShader,this._getVertShaderArtifactMap(e))}},{key:"toString",value:function(){var e=p.linesToString(["const gl = context"]);return g(this.constructor,arguments,this,e)}},{key:"destroy",value:function(e){if(this.context){if(this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer),this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program),this.texture){this.texture.delete();var t=this.textureCache.indexOf(this.texture.texture);t>-1&&this.textureCache.splice(t,1),this.texture=null}if(this.mappedTextures&&this.mappedTextures.length){for(var n=0;n<this.mappedTextures.length;n++){var r=this.mappedTextures[n];r.delete();var i=this.textureCache.indexOf(r.texture);i>-1&&this.textureCache.splice(i,1)}this.mappedTextures=null}if(this.kernelArguments)for(var a=0;a<this.kernelArguments.length;a++)this.kernelArguments[a].destroy();if(this.kernelConstants)for(var s=0;s<this.kernelConstants.length;s++)this.kernelConstants[s].destroy();for(;this.textureCache.length>0;){var o=this.textureCache.pop();this.context.deleteTexture(o)}if(e){var u=_.indexOf(this.canvas);u>=0&&(_[u]=null,A[u]=null)}if(this.destroyExtensions(),delete this.context,delete this.canvas,this.gpu){var c=this.gpu.kernels.indexOf(this);-1!==c&&this.gpu.kernels.splice(c,1)}}}},{key:"destroyExtensions",value:function(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}},{key:"toJSON",value:function(){var e=a(i(n.prototype),"toJSON",this).call(this);return e.functionNodes=l.fromKernel(this,h).toJSON(),e.settings.threadDim=this.threadDim,e}}],[{key:"destroyContext",value:function(e){var t=e.getExtension("WEBGL_lose_context");t&&t.loseContext()}}]),n}(r);t.exports={WebGLKernel:E}},{"../../plugins/math-random-uniformly-distributed":112,"../../utils":114,"../function-builder":9,"../gl/kernel":13,"../gl/kernel-string":12,"./fragment-shader":37,"./function-node":38,"./kernel-value-maps":39,"./vertex-shader":71}],71:[function(e,t,n){t.exports={vertexShader:"__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nattribute vec2 aPos;\nattribute vec2 aTexCoord;\n\nvarying vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"}},{}],72:[function(e,t,n){var r="#version 300 es\n__HEADER__;\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n__SAMPLER_2D_ARRAY_TACTIC_DECLARATION__;\n\nconst int LOOP_MAX = __LOOP_MAX__;\n\n__PLUGINS__;\n__CONSTANTS__;\n\nin vec2 vTexCoord;\n\nfloat atan2(float v1, float v2) {\n  if (v1 == 0.0 || v2 == 0.0) return 0.0;\n  return atan(v1 / v2);\n}\n\nfloat cbrt(float x) {\n  if (x >= 0.0) {\n    return pow(x, 1.0 / 3.0);\n  } else {\n    return -pow(x, 1.0 / 3.0);\n  }\n}\n\nfloat expm1(float x) {\n  return pow(".concat(Math.E,", x) - 1.0; \n}\n\nfloat fround(highp float x) {\n  return x;\n}\n\nfloat imul(float v1, float v2) {\n  return float(int(v1) * int(v2));\n}\n\nfloat log10(float x) {\n  return log2(x) * (1.0 / log2(10.0));\n}\n\nfloat log1p(float x) {\n  return log(1.0 + x);\n}\n\nfloat _pow(float v1, float v2) {\n  if (v2 == 0.0) return 1.0;\n  return pow(v1, v2);\n}\n\nfloat _round(float x) {\n  return floor(x + 0.5);\n}\n\n\nconst int BIT_COUNT = 32;\nint modi(int x, int y) {\n  return x - y * (x / y);\n}\n\nint bitwiseOr(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseXOR(int a, int b) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 || b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseAnd(int a, int b) {\n  int result = 0;\n  int n = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {\n      result += n;\n    }\n    a = a / 2;\n    b = b / 2;\n    n = n * 2;\n    if(!(a > 0 && b > 0)) {\n      break;\n    }\n  }\n  return result;\n}\nint bitwiseNot(int a) {\n  int result = 0;\n  int n = 1;\n  \n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (modi(a, 2) == 0) {\n      result += n;    \n    }\n    a = a / 2;\n    n = n * 2;\n  }\n  return result;\n}\nint bitwiseZeroFillLeftShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n *= 2;\n  }\n\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nint bitwiseSignedRightShift(int num, int shifts) {\n  return int(floor(float(num) / pow(2.0, float(shifts))));\n}\n\nint bitwiseZeroFillRightShift(int n, int shift) {\n  int maxBytes = BIT_COUNT;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (maxBytes >= n) {\n      break;\n    }\n    maxBytes *= 2;\n  }\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= shift) {\n      break;\n    }\n    n /= 2;\n  }\n  int result = 0;\n  int byteVal = 1;\n  for (int i = 0; i < BIT_COUNT; i++) {\n    if (i >= maxBytes) break;\n    if (modi(n, 2) > 0) { result += byteVal; }\n    n = int(n / 2);\n    byteVal *= 2;\n  }\n  return result;\n}\n\nvec2 integerMod(vec2 x, float y) {\n  vec2 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec3 integerMod(vec3 x, float y) {\n  vec3 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nvec4 integerMod(vec4 x, vec4 y) {\n  vec4 res = floor(mod(x, y));\n  return res * step(1.0 - floor(y), -res);\n}\n\nfloat integerMod(float x, float y) {\n  float res = floor(mod(x, y));\n  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);\n}\n\nint integerMod(int x, int y) {\n  return x - (y * int(x/y));\n}\n\n__DIVIDE_WITH_INTEGER_CHECK__;\n\n// Here be dragons!\n// DO NOT OPTIMIZE THIS CODE\n// YOU WILL BREAK SOMETHING ON SOMEBODY'S MACHINE\n// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME\nconst vec2 MAGIC_VEC = vec2(1.0, -256.0);\nconst vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);\nconst vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536\nfloat decode32(vec4 texel) {\n  __DECODE32_ENDIANNESS__;\n  texel *= 255.0;\n  vec2 gte128;\n  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;\n  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;\n  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);\n  float res = exp2(round(exponent));\n  texel.b = texel.b - 128.0 * gte128.x;\n  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;\n  res *= gte128.y * -2.0 + 1.0;\n  return res;\n}\n\nfloat decode16(vec4 texel, int index) {\n  int channel = integerMod(index, 2);\n  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;\n}\n\nfloat decode8(vec4 texel, int index) {\n  int channel = integerMod(index, 4);\n  return texel[channel] * 255.0;\n}\n\nvec4 legacyEncode32(float f) {\n  float F = abs(f);\n  float sign = f < 0.0 ? 1.0 : 0.0;\n  float exponent = floor(log2(F));\n  float mantissa = (exp2(-exponent) * F);\n  // exponent += floor(log2(mantissa));\n  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;\n  texel.rg = integerMod(texel.rg, 256.0);\n  texel.b = integerMod(texel.b, 128.0);\n  texel.a = exponent*0.5 + 63.5;\n  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;\n  texel = floor(texel);\n  texel *= 0.003921569; // 1/255\n  __ENCODE32_ENDIANNESS__;\n  return texel;\n}\n\n// https://github.com/gpujs/gpu.js/wiki/Encoder-details\nvec4 encode32(float value) {\n  if (value == 0.0) return vec4(0, 0, 0, 0);\n\n  float exponent;\n  float mantissa;\n  vec4  result;\n  float sgn;\n\n  sgn = step(0.0, -value);\n  value = abs(value);\n\n  exponent = floor(log2(value));\n\n  mantissa = value*pow(2.0, -exponent)-1.0;\n  exponent = exponent+127.0;\n  result   = vec4(0,0,0,0);\n\n  result.a = floor(exponent/2.0);\n  exponent = exponent - result.a*2.0;\n  result.a = result.a + 128.0*sgn;\n\n  result.b = floor(mantissa * 128.0);\n  mantissa = mantissa - result.b / 128.0;\n  result.b = result.b + exponent*128.0;\n\n  result.g = floor(mantissa*32768.0);\n  mantissa = mantissa - result.g/32768.0;\n\n  result.r = floor(mantissa*8388608.0);\n  return result/255.0;\n}\n// Dragons end here\n\nint index;\nivec3 threadId;\n\nivec3 indexTo3D(int idx, ivec3 texDim) {\n  int z = int(idx / (texDim.x * texDim.y));\n  idx -= z * int(texDim.x * texDim.y);\n  int y = int(idx / texDim.x);\n  int x = int(integerMod(idx, texDim.x));\n  return ivec3(x, y, z);\n}\n\nfloat get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return decode32(texel);\n}\n\nfloat get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 2;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));\n  return decode16(texel, index);\n}\n\nfloat get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int w = texSize.x * 4;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));\n  return decode8(texel, index);\n}\n\nfloat getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + (texDim.x * (y + (texDim.y * z)));\n  int channel = integerMod(index, 4);\n  index = index / 4;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  index = index / 4;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return texel[channel];\n}\n\nvec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, st / vec2(texSize));\n}\n\nvec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  return texture(tex, vec3(st / vec2(texSize), z));\n}\n\nfloat getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return result[0];\n}\n\nvec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec2(result[0], result[1]);\n}\n\nvec2 getMemoryOptimizedVec2(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  index = index / 2;\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  if (channel == 0) return vec2(texel.r, texel.g);\n  if (channel == 1) return vec2(texel.b, texel.a);\n  return vec2(0.0, 0.0);\n}\n\nvec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);\n  return vec3(result[0], result[1], result[2]);\n}\n\nvec3 getMemoryOptimizedVec3(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int fieldIndex = 3 * (x + texDim.x * (y + texDim.y * z));\n  int vectorIndex = fieldIndex / 4;\n  int vectorOffset = fieldIndex - vectorIndex * 4;\n  int readY = vectorIndex / texSize.x;\n  int readX = vectorIndex - readY * texSize.x;\n  vec4 tex1 = texture(tex, (vec2(readX, readY) + 0.5) / vec2(texSize));\n\n  if (vectorOffset == 0) {\n    return tex1.xyz;\n  } else if (vectorOffset == 1) {\n    return tex1.yzw;\n  } else {\n    readX++;\n    if (readX >= texSize.x) {\n      readX = 0;\n      readY++;\n    }\n    vec4 tex2 = texture(tex, vec2(readX, readY) / vec2(texSize));\n    if (vectorOffset == 2) {\n      return vec3(tex1.z, tex1.w, tex2.x);\n    } else {\n      return vec3(tex1.w, tex2.x, tex2.y);\n    }\n  }\n}\n\nvec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  return getImage2D(tex, texSize, texDim, z, y, x);\n}\n\nvec4 getMemoryOptimizedVec4(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {\n  int index = x + texDim.x * (y + texDim.y * z);\n  int channel = integerMod(index, 2);\n  int w = texSize.x;\n  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;\n  vec4 texel = texture(tex, st / vec2(texSize));\n  return vec4(texel.r, texel.g, texel.b, texel.a);\n}\n\nvec4 actualColor;\nvoid color(float r, float g, float b, float a) {\n  actualColor = vec4(r,g,b,a);\n}\n\nvoid color(float r, float g, float b) {\n  color(r,g,b,1.0);\n}\n\nfloat modulo(float number, float divisor) {\n  if (number < 0.0) {\n    number = abs(number);\n    if (divisor < 0.0) {\n      divisor = abs(divisor);\n    }\n    return -mod(number, divisor);\n  }\n  if (divisor < 0.0) {\n    divisor = abs(divisor);\n  }\n  return mod(number, divisor);\n}\n\n__INJECTED_NATIVE__;\n__MAIN_CONSTANTS__;\n__MAIN_ARGUMENTS__;\n__KERNEL__;\n\nvoid main(void) {\n  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;\n  __MAIN_RESULT__;\n}");t.exports={fragmentShader:r}},{}],73:[function(e,t,n){var r=e("../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"astIdentifierExpression",value:function(e,t){if("Identifier"!==e.type)throw this.astErrorOutput("IdentifierExpression - not an Identifier",e);var n=this.getType(e),i=r.sanitizeName(e.name);return"Infinity"===e.name?t.push("intBitsToFloat(2139095039)"):"Boolean"===n&&this.argumentNames.indexOf(i)>-1?t.push("bool(user_".concat(i,")")):t.push("user_".concat(i)),t}}]),n}(e("../web-gl/function-node").WebGLFunctionNode);t.exports={WebGL2FunctionNode:i}},{"../../utils":114,"../web-gl/function-node":38}],74:[function(e,t,n){var r=e("./kernel-value/boolean").WebGL2KernelValueBoolean,i=e("./kernel-value/float").WebGL2KernelValueFloat,a=e("./kernel-value/integer").WebGL2KernelValueInteger,s=e("./kernel-value/html-image").WebGL2KernelValueHTMLImage,o=e("./kernel-value/dynamic-html-image").WebGL2KernelValueDynamicHTMLImage,u=e("./kernel-value/html-image-array").WebGL2KernelValueHTMLImageArray,c=e("./kernel-value/dynamic-html-image-array").WebGL2KernelValueDynamicHTMLImageArray,l=e("./kernel-value/html-video").WebGL2KernelValueHTMLVideo,h=e("./kernel-value/dynamic-html-video").WebGL2KernelValueDynamicHTMLVideo,p=e("./kernel-value/single-input").WebGL2KernelValueSingleInput,f=e("./kernel-value/dynamic-single-input").WebGL2KernelValueDynamicSingleInput,m=e("./kernel-value/unsigned-input").WebGL2KernelValueUnsignedInput,d=e("./kernel-value/dynamic-unsigned-input").WebGL2KernelValueDynamicUnsignedInput,g=e("./kernel-value/memory-optimized-number-texture").WebGL2KernelValueMemoryOptimizedNumberTexture,v=e("./kernel-value/dynamic-memory-optimized-number-texture").WebGL2KernelValueDynamicMemoryOptimizedNumberTexture,y=e("./kernel-value/number-texture").WebGL2KernelValueNumberTexture,x=e("./kernel-value/dynamic-number-texture").WebGL2KernelValueDynamicNumberTexture,b=e("./kernel-value/single-array").WebGL2KernelValueSingleArray,w=e("./kernel-value/dynamic-single-array").WebGL2KernelValueDynamicSingleArray,S=e("./kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI,T=e("./kernel-value/dynamic-single-array1d-i").WebGL2KernelValueDynamicSingleArray1DI,_=e("./kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI,A=e("./kernel-value/dynamic-single-array2d-i").WebGL2KernelValueDynamicSingleArray2DI,E=e("./kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI,k=e("./kernel-value/dynamic-single-array3d-i").WebGL2KernelValueDynamicSingleArray3DI,M=e("./kernel-value/single-array2").WebGL2KernelValueSingleArray2,N=e("./kernel-value/single-array3").WebGL2KernelValueSingleArray3,I=e("./kernel-value/single-array4").WebGL2KernelValueSingleArray4,C=e("./kernel-value/unsigned-array").WebGL2KernelValueUnsignedArray,D={unsigned:{dynamic:{Boolean:r,Integer:a,Float:i,Array:e("./kernel-value/dynamic-unsigned-array").WebGL2KernelValueDynamicUnsignedArray,"Array(2)":!1,"Array(3)":!1,"Array(4)":!1,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:d,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:v,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:c,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:C,"Array(2)":!1,"Array(3)":!1,"Array(4)":!1,"Array1D(2)":!1,"Array1D(3)":!1,"Array1D(4)":!1,"Array2D(2)":!1,"Array2D(3)":!1,"Array2D(4)":!1,"Array3D(2)":!1,"Array3D(3)":!1,"Array3D(4)":!1,Input:m,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:v,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:u,HTMLVideo:l}},single:{dynamic:{Boolean:r,Integer:a,Float:i,Array:w,"Array(2)":M,"Array(3)":N,"Array(4)":I,"Array1D(2)":T,"Array1D(3)":T,"Array1D(4)":T,"Array2D(2)":A,"Array2D(3)":A,"Array2D(4)":A,"Array3D(2)":k,"Array3D(3)":k,"Array3D(4)":k,Input:f,NumberTexture:x,"ArrayTexture(1)":x,"ArrayTexture(2)":x,"ArrayTexture(3)":x,"ArrayTexture(4)":x,MemoryOptimizedNumberTexture:v,HTMLCanvas:o,HTMLImage:o,HTMLImageArray:c,HTMLVideo:h},static:{Boolean:r,Float:i,Integer:a,Array:b,"Array(2)":M,"Array(3)":N,"Array(4)":I,"Array1D(2)":S,"Array1D(3)":S,"Array1D(4)":S,"Array2D(2)":_,"Array2D(3)":_,"Array2D(4)":_,"Array3D(2)":E,"Array3D(3)":E,"Array3D(4)":E,Input:p,NumberTexture:y,"ArrayTexture(1)":y,"ArrayTexture(2)":y,"ArrayTexture(3)":y,"ArrayTexture(4)":y,MemoryOptimizedNumberTexture:g,HTMLCanvas:s,HTMLImage:s,HTMLImageArray:u,HTMLVideo:l}}};t.exports={kernelValueMaps:D,lookupKernelValueType:function(e,t,n,r){if(!e)throw new Error("type missing");if(!t)throw new Error("dynamic missing");if(!n)throw new Error("precision missing");r.type&&(e=r.type);var i=D[n][t];if(!1===i[e])return null;if(void 0===i[e])throw new Error("Could not find a KernelValue for ".concat(e));return i[e]}}},{"./kernel-value/boolean":75,"./kernel-value/dynamic-html-image":77,"./kernel-value/dynamic-html-image-array":76,"./kernel-value/dynamic-html-video":78,"./kernel-value/dynamic-memory-optimized-number-texture":79,"./kernel-value/dynamic-number-texture":80,"./kernel-value/dynamic-single-array":81,"./kernel-value/dynamic-single-array1d-i":82,"./kernel-value/dynamic-single-array2d-i":83,"./kernel-value/dynamic-single-array3d-i":84,"./kernel-value/dynamic-single-input":85,"./kernel-value/dynamic-unsigned-array":86,"./kernel-value/dynamic-unsigned-input":87,"./kernel-value/float":88,"./kernel-value/html-image":90,"./kernel-value/html-image-array":89,"./kernel-value/html-video":91,"./kernel-value/integer":92,"./kernel-value/memory-optimized-number-texture":93,"./kernel-value/number-texture":94,"./kernel-value/single-array":95,"./kernel-value/single-array1d-i":96,"./kernel-value/single-array2":97,"./kernel-value/single-array2d-i":98,"./kernel-value/single-array3":99,"./kernel-value/single-array3d-i":100,"./kernel-value/single-array4":101,"./kernel-value/single-input":102,"./kernel-value/unsigned-array":103,"./kernel-value/unsigned-input":104}],75:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("../../web-gl/kernel-value/boolean").WebGLKernelValueBoolean);t.exports={WebGL2KernelValueBoolean:r}},{"../../web-gl/kernel-value/boolean":41}],76:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2DArray ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){var t=e[0],r=t.width,s=t.height;this.checkSize(r,s),this.dimensions=[r,s,e.length],this.textureSize=[r,s],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("./html-image-array").WebGL2KernelValueHTMLImageArray);t.exports={WebGL2KernelValueDynamicHTMLImageArray:l}},{"../../../utils":114,"./html-image-array":89}],77:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}}]),n}(e("../../web-gl/kernel-value/dynamic-html-image").WebGLKernelValueDynamicHTMLImage);t.exports={WebGL2KernelValueDynamicHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-html-image":42}],78:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("./dynamic-html-image").WebGL2KernelValueDynamicHTMLImage);t.exports={WebGL2KernelValueDynamicHTMLVideo:r}},{"../../../utils":114,"./dynamic-html-image":77}],79:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){return r.linesToString(["uniform sampler2D ".concat(this.id),"uniform ivec2 ".concat(this.sizeId),"uniform ivec3 ".concat(this.dimensionsId)])}}]),n}(e("../../web-gl/kernel-value/dynamic-memory-optimized-number-texture").WebGLKernelValueDynamicMemoryOptimizedNumberTexture);t.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-memory-optimized-number-texture":44}],80:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}}]),n}(e("../../web-gl/kernel-value/dynamic-number-texture").WebGLKernelValueDynamicNumberTexture);t.exports={WebGL2KernelValueDynamicNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-number-texture":45}],81:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("../../web-gl2/kernel-value/single-array").WebGL2KernelValueSingleArray);t.exports={WebGL2KernelValueDynamicSingleArray:l}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array":95}],82:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("../../web-gl2/kernel-value/single-array1d-i").WebGL2KernelValueSingleArray1DI);t.exports={WebGL2KernelValueDynamicSingleArray1DI:l}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array1d-i":96}],83:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("../../web-gl2/kernel-value/single-array2d-i").WebGL2KernelValueSingleArray2DI);t.exports={WebGL2KernelValueDynamicSingleArray2DI:l}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array2d-i":98}],84:[function(e,t,n){var r=e("../../../utils").utils,l=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){this.setShape(e),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("../../web-gl2/kernel-value/single-array3d-i").WebGL2KernelValueSingleArray3DI);t.exports={WebGL2KernelValueDynamicSingleArray3DI:l}},{"../../../utils":114,"../../web-gl2/kernel-value/single-array3d-i":100}],85:[function(e,t,n){var r=e("../../../utils").utils,h=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}},{key:"updateValue",value:function(e){var t=l(e.size,3),s=t[0],o=t[1],u=t[2];this.dimensions=new Int32Array([s||1,o||1,u||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.checkSize(this.textureSize[0],this.textureSize[1]),this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),a(i(n.prototype),"updateValue",this).call(this,e)}}]),n}(e("../../web-gl2/kernel-value/single-input").WebGL2KernelValueSingleInput);t.exports={WebGL2KernelValueDynamicSingleInput:h}},{"../../../utils":114,"../../web-gl2/kernel-value/single-input":102}],86:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}}]),n}(e("../../web-gl/kernel-value/dynamic-unsigned-array").WebGLKernelValueDynamicUnsignedArray);t.exports={WebGL2KernelValueDynamicUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-array":51}],87:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"uniform ".concat(e," ivec2 ").concat(this.sizeId),"uniform ".concat(e," ivec3 ").concat(this.dimensionsId)])}}]),n}(e("../../web-gl/kernel-value/dynamic-unsigned-input").WebGLKernelValueDynamicUnsignedInput);t.exports={WebGL2KernelValueDynamicUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/dynamic-unsigned-input":52}],88:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("../../web-gl/kernel-value/float").WebGLKernelValueFloat);t.exports={WebGL2KernelValueFloat:r}},{"../../../utils":114,"../../web-gl/kernel-value/float":53}],89:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).checkSize(e[0].width,e[0].height),i.dimensions=[e[0].width,e[0].height,e.length],i.textureSize=[e[0].width,e[0].height],i}return o(n,[{key:"defineTexture",value:function(){var e=this.context;e.activeTexture(this.contextHandle),e.bindTexture(e.TEXTURE_2D_ARRAY,this.texture),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D_ARRAY,e.TEXTURE_MIN_FILTER,e.NEAREST)}},{key:"getStringValueHandler",value:function(){return"const uploadValue_".concat(this.name," = ").concat(this.varName,";\n")}},{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2DArray ").concat(this.id),"".concat(e," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(e," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){var t=this.context;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage3D(t.TEXTURE_2D_ARRAY,0,t.RGBA,e[0].width,e[0].height,e.length,0,t.RGBA,t.UNSIGNED_BYTE,null);for(var n=0;n<e.length;n++)t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,n,e[n].width,e[n].height,1,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e[n]);this.kernel.setUniform1i(this.id,this.index)}}]),n}(e("../../web-gl/kernel-value/array").WebGLKernelArray);t.exports={WebGL2KernelValueHTMLImageArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/array":40}],90:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"".concat(e," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(e," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(e("../../web-gl/kernel-value/html-image").WebGLKernelValueHTMLImage);t.exports={WebGL2KernelValueHTMLImage:i}},{"../../../utils":114,"../../web-gl/kernel-value/html-image":54}],91:[function(e,t,n){e("../../../utils").utils;var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("./html-image").WebGL2KernelValueHTMLImage);t.exports={WebGL2KernelValueHTMLVideo:r}},{"../../../utils":114,"./html-image":90}],92:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(e){var t=this.getVariablePrecisionString();return"constants"===this.origin?"const ".concat(t," int ").concat(this.id," = ").concat(parseInt(e),";\n"):"uniform ".concat(t," int ").concat(this.id,";\n")}},{key:"updateValue",value:function(e){"constants"!==this.origin&&this.kernel.setUniform1i(this.id,this.uploadValue=e)}}]),n}(e("../../web-gl/kernel-value/integer").WebGLKernelValueInteger);t.exports={WebGL2KernelValueInteger:r}},{"../../web-gl/kernel-value/integer":57}],93:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.id,t=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,s=this.getVariablePrecisionString();return r.linesToString(["uniform sampler2D ".concat(e),"".concat(s," ivec2 ").concat(t," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(s," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(e("../../web-gl/kernel-value/memory-optimized-number-texture").WebGLKernelValueMemoryOptimizedNumberTexture);t.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/memory-optimized-number-texture":58}],94:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.id,t=this.sizeId,n=this.textureSize,i=this.dimensionsId,a=this.dimensions,s=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(s," sampler2D ").concat(e),"".concat(s," ivec2 ").concat(t," = ivec2(").concat(n[0],", ").concat(n[1],")"),"".concat(s," ivec3 ").concat(i," = ivec3(").concat(a[0],", ").concat(a[1],", ").concat(a[2],")")])}}]),n}(e("../../web-gl/kernel-value/number-texture").WebGLKernelValueNumberTexture);t.exports={WebGL2KernelValueNumberTexture:i}},{"../../../utils":114,"../../web-gl/kernel-value/number-texture":59}],95:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"".concat(e," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(e," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("../../web-gl/kernel-value/single-array").WebGLKernelValueSingleArray);t.exports={WebGL2KernelValueSingleArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array":60}],96:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("../../web-gl/kernel-value/single-array1d-i").WebGLKernelValueSingleArray1DI);t.exports={WebGL2KernelValueSingleArray1DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array1d-i":61}],97:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("../../web-gl/kernel-value/single-array2").WebGLKernelValueSingleArray2);t.exports={WebGL2KernelValueSingleArray2:r}},{"../../web-gl/kernel-value/single-array2":62}],98:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("../../web-gl/kernel-value/single-array2d-i").WebGLKernelValueSingleArray2DI);t.exports={WebGL2KernelValueSingleArray2DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array2d-i":63}],99:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("../../web-gl/kernel-value/single-array3").WebGLKernelValueSingleArray3);t.exports={WebGL2KernelValueSingleArray3:r}},{"../../web-gl/kernel-value/single-array3":64}],100:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"updateValue",value:function(e){if(e.constructor===this.initialValueConstructor){var t=this.context;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}else this.onUpdateValueMismatch(e.constructor)}}]),n}(e("../../web-gl/kernel-value/single-array3d-i").WebGLKernelValueSingleArray3DI);t.exports={WebGL2KernelValueSingleArray3DI:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-array3d-i":65}],101:[function(e,t,n){var r=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return n}(e("../../web-gl/kernel-value/single-array4").WebGLKernelValueSingleArray4);t.exports={WebGL2KernelValueSingleArray4:r}},{"../../web-gl/kernel-value/single-array4":66}],102:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"".concat(e," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(e," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}},{key:"updateValue",value:function(e){var t=this.context;r.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}]),n}(e("../../web-gl/kernel-value/single-input").WebGLKernelValueSingleInput);t.exports={WebGL2KernelValueSingleInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/single-input":67}],103:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"".concat(e," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(e," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(e("../../web-gl/kernel-value/unsigned-array").WebGLKernelValueUnsignedArray);t.exports={WebGL2KernelValueUnsignedArray:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-array":68}],104:[function(e,t,n){var r=e("../../../utils").utils,i=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"getSource",value:function(){var e=this.getVariablePrecisionString();return r.linesToString(["uniform ".concat(e," sampler2D ").concat(this.id),"".concat(e," ivec2 ").concat(this.sizeId," = ivec2(").concat(this.textureSize[0],", ").concat(this.textureSize[1],")"),"".concat(e," ivec3 ").concat(this.dimensionsId," = ivec3(").concat(this.dimensions[0],", ").concat(this.dimensions[1],", ").concat(this.dimensions[2],")")])}}]),n}(e("../../web-gl/kernel-value/unsigned-input").WebGLKernelValueUnsignedInput);t.exports={WebGL2KernelValueUnsignedInput:i}},{"../../../utils":114,"../../web-gl/kernel-value/unsigned-input":69}],105:[function(e,t,n){var r=e("../web-gl/kernel").WebGLKernel,l=e("./function-node").WebGL2FunctionNode,h=e("../function-builder").FunctionBuilder,p=e("../../utils").utils,f=e("./fragment-shader").fragmentShader,m=e("./vertex-shader").vertexShader,d=e("./kernel-value-maps").lookupKernelValueType,g=null,v=null,y=null,x=null,b=function(e){"use strict";u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return o(n,[{key:"initContext",value:function(){return this.canvas.getContext("webgl2",{alpha:!1,depth:!1,antialias:!1})}},{key:"initExtensions",value:function(){this.extensions={EXT_color_buffer_float:this.context.getExtension("EXT_color_buffer_float"),OES_texture_float_linear:this.context.getExtension("OES_texture_float_linear")}}},{key:"validateSettings",value:function(e){if(this.validate){var t=this.constructor.features;if("single"===this.precision&&!t.isFloatRead)throw new Error("Float texture outputs are not supported");if(this.graphical||null!==this.precision||(this.precision=t.isFloatRead?"single":"unsigned"),null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error("Auto output only supported for kernels with only one input");var n=p.getVariableType(e[0],this.strictIntegers);switch(n){case"Array":this.output=p.getDimensions(n);break;case"NumberTexture":case"MemoryOptimizedNumberTexture":case"ArrayTexture(1)":case"ArrayTexture(2)":case"ArrayTexture(3)":case"ArrayTexture(4)":this.output=e[0].output;break;default:throw new Error("Auto output not supported for input type: "+n)}}if(this.graphical){if(2!==this.output.length)throw new Error("Output must have 2 dimensions on graphical mode");return"single"===this.precision&&(console.warn("Cannot use graphical mode and single precision at the same time"),this.precision="unsigned"),void(this.texSize=p.clone(this.output))}!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision="single"),this.texSize=p.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output),this.checkTextureSize()}else this.texSize=p.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}},{key:"translateSource",value:function(){var e=h.fromKernel(this,l,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});this.translatedSource=e.getPrototypeString("kernel"),this.setupReturnTypes(e)}},{key:"drawBuffers",value:function(){this.context.drawBuffers(this.drawBuffersMap)}},{key:"getTextureFormat",value:function(){var e=this.context;switch(this.getInternalFormat()){case e.R32F:return e.RED;case e.RG32F:return e.RG;case e.RGBA32F:case e.RGBA:return e.RGBA;default:throw new Error("Unknown internal format")}}},{key:"getInternalFormat",value:function(){var e=this.context;if("single"===this.precision){if(this.pipeline)switch(this.returnType){case"Number":case"Float":case"Integer":return this.optimizeFloatMemory?e.RGBA32F:e.R32F;case"Array(2)":return e.RG32F;case"Array(3)":case"Array(4)":return e.RGBA32F;default:throw new Error("Unhandled return type")}return e.RGBA32F}return e.RGBA}},{key:"_setupOutputTexture",value:function(){var e=this.context;if(this.texture)e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0);else{e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer);var t=e.createTexture(),n=this.texSize;e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var r=this.getInternalFormat();"single"===this.precision?e.texStorage2D(e.TEXTURE_2D,1,r,n[0],n[1]):e.texImage2D(e.TEXTURE_2D,0,r,n[0],n[1],0,r,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.texture=new this.TextureConstructor({texture:t,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this})}}},{key:"_setupSubOutputTextures",value:function(){var e=this.context;if(this.mappedTextures)for(var t=0;t<this.subKernels.length;t++)e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t+1,e.TEXTURE_2D,this.mappedTextures[t].texture,0);else{var n=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.mappedTextures=[];for(var r=0;r<this.subKernels.length;r++){var i=this.createTexture();this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+r+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+r),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);var a=this.getInternalFormat();"single"===this.precision?e.texStorage2D(e.TEXTURE_2D,1,a,n[0],n[1]):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n[0],n[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+r+1,e.TEXTURE_2D,i,0),this.mappedTextures.push(new this.TextureConstructor({texture:i,size:n,dimensions:this.threadDim,output:this.output,context:this.context,internalFormat:this.getInternalFormat(),textureFormat:this.getTextureFormat(),kernel:this}))}}}},{key:"_getHeaderString",value:function(){return""}},{key:"_getTextureCoordinate",value:function(){var e=this.subKernels,t=this.getVariablePrecisionString(this.texSize,this.tactic);return null===e||e.length<1?"in ".concat(t," vec2 vTexCoord;\n"):"out ".concat(t," vec2 vTexCoord;\n")}},{key:"_getMainArgumentsString",value:function(e){for(var t=[],n=this.argumentNames,r=0;r<n.length;r++)t.push(this.kernelArguments[r].getSource(e[r]));return t.join("")}},{key:"getKernelString",value:function(){var e=[this.getKernelResultDeclaration()],t=this.subKernels;if(null!==t)switch(e.push("layout(location = 0) out vec4 data0"),this.returnType){case"Number":case"Float":case"Integer":for(var n=0;n<t.length;n++){var r=t[n];e.push("Integer"===r.returnType?"int subKernelResult_".concat(r.name," = 0"):"float subKernelResult_".concat(r.name," = 0.0"),"layout(location = ".concat(n+1,") out vec4 data").concat(n+1))}break;case"Array(2)":for(var i=0;i<t.length;i++)e.push("vec2 subKernelResult_".concat(t[i].name),"layout(location = ".concat(i+1,") out vec4 data").concat(i+1));break;case"Array(3)":for(var a=0;a<t.length;a++)e.push("vec3 subKernelResult_".concat(t[a].name),"layout(location = ".concat(a+1,") out vec4 data").concat(a+1));break;case"Array(4)":for(var s=0;s<t.length;s++)e.push("vec4 subKernelResult_".concat(t[s].name),"layout(location = ".concat(s+1,") out vec4 data").concat(s+1))}else e.push("out vec4 data0");return p.linesToString(e)+this.translatedSource}},{key:"getMainResultGraphical",value:function(){return p.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = actualColor"])}},{key:"getMainResultPackedPixels",value:function(){switch(this.returnType){case"LiteralInteger":case"Number":case"Integer":case"Float":return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error('packed output only usable with Numbers, "'.concat(this.returnType,'" specified'))}}},{key:"getMainResultKernelPackedPixels",value:function(){return p.linesToString(["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = ".concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(kernelResult)")])}},{key:"getMainResultSubKernelPackedPixels",value:function(){var e=[];if(!this.subKernels)return"";for(var t=0;t<this.subKernels.length;t++)"Integer"===this.subKernels[t].returnType?e.push("  data".concat(t+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(float(subKernelResult_").concat(this.subKernels[t].name,"))")):e.push("  data".concat(t+1," = ").concat(this.useLegacyEncoder?"legacyEncode32":"encode32","(subKernelResult_").concat(this.subKernels[t].name,")"));return p.linesToString(e)}},{key:"getMainResultKernelMemoryOptimizedFloats",value:function(e,t){e.push("  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0.".concat(t," = kernelResult"))}},{key:"getMainResultSubKernelMemoryOptimizedFloats",value:function(e,t){if(!this.subKernels)return e;for(var n=0;n<this.subKernels.length;n++){var r=this.subKernels[n];"Integer"===r.returnType?e.push("  data".concat(n+1,".").concat(t," = float(subKernelResult_").concat(r.name,")")):e.push("  data".concat(n+1,".").concat(t," = subKernelResult_").concat(r.name))}}},{key:"getMainResultKernelNumberTexture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult"]}},{key:"getMainResultSubKernelNumberTexture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t){var n=this.subKernels[t];"Integer"===n.returnType?e.push("  data".concat(t+1,"[0] = float(subKernelResult_").concat(n.name,")")):e.push("  data".concat(t+1,"[0] = subKernelResult_").concat(n.name))}return e}},{key:"getMainResultKernelArray2Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]"]}},{key:"getMainResultSubKernelArray2Texture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t){var n=this.subKernels[t];e.push("  data".concat(t+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(t+1,"[1] = subKernelResult_").concat(n.name,"[1]"))}return e}},{key:"getMainResultKernelArray3Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0[0] = kernelResult[0]","  data0[1] = kernelResult[1]","  data0[2] = kernelResult[2]"]}},{key:"getMainResultSubKernelArray3Texture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t){var n=this.subKernels[t];e.push("  data".concat(t+1,"[0] = subKernelResult_").concat(n.name,"[0]"),"  data".concat(t+1,"[1] = subKernelResult_").concat(n.name,"[1]"),"  data".concat(t+1,"[2] = subKernelResult_").concat(n.name,"[2]"))}return e}},{key:"getMainResultKernelArray4Texture",value:function(){return["  threadId = indexTo3D(index, uOutputDim)","  kernel()","  data0 = kernelResult"]}},{key:"getMainResultSubKernelArray4Texture",value:function(){var e=[];if(!this.subKernels)return e;for(var t=0;t<this.subKernels.length;++t)e.push("  data".concat(t+1," = subKernelResult_").concat(this.subKernels[t].name));return e}},{key:"destroyExtensions",value:function(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}},{key:"toJSON",value:function(){var e=a(i(n.prototype),"toJSON",this).call(this);return e.functionNodes=h.fromKernel(this,l).toJSON(),e.settings.threadDim=this.threadDim,e}}],[{key:"setupFeatureChecks",value:function(){"undefined"!==typeof document?v=document.createElement("canvas"):"undefined"!==typeof OffscreenCanvas&&(v=new OffscreenCanvas(0,0)),v&&(y=v.getContext("webgl2"))&&y.getExtension&&(y.getExtension("EXT_color_buffer_float"),y.getExtension("OES_texture_float_linear"),x=this.getFeatures())}},{key:"isContextMatch",value:function(e){return"undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext}},{key:"getFeatures",value:function(){var e=this.testContext;return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isSpeedTacticSupported:this.getIsSpeedTacticSupported(),kernelMap:!0,isTextureFloat:!0,isDrawBuffers:!0,channelCount:this.getChannelCount(),maxTextureSize:this.getMaxTextureSize(),lowIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT),lowFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT),mediumIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT),mediumFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT),highIntPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT),highFloatPrecision:e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT)})}},{key:"getIsTextureFloat",value:function(){return!0}},{key:"getChannelCount",value:function(){return y.getParameter(y.MAX_DRAW_BUFFERS)}},{key:"getMaxTextureSize",value:function(){return y.getParameter(y.MAX_TEXTURE_SIZE)}},{key:"lookupKernelValueType",value:function(e,t,n,r){return d(e,t,n,r)}},{key:"isSupported",get:function(){return null!==g?g:(this.setupFeatureChecks(),g=this.isContextMatch(y))}},{key:"testCanvas",get:function(){return v}},{key:"testContext",get:function(){return y}},{key:"features",get:function(){return x}},{key:"fragmentShader",get:function(){return f}},{key:"vertexShader",get:function(){return m}}]),n}(r);t.exports={WebGL2Kernel:b}},{"../../utils":114,"../function-builder":9,"../web-gl/kernel":70,"./fragment-shader":72,"./function-node":73,"./kernel-value-maps":74,"./vertex-shader":106}],106:[function(e,t,n){t.exports={vertexShader:"#version 300 es\n__FLOAT_TACTIC_DECLARATION__;\n__INT_TACTIC_DECLARATION__;\n__SAMPLER_2D_TACTIC_DECLARATION__;\n\nin vec2 aPos;\nin vec2 aTexCoord;\n\nout vec2 vTexCoord;\nuniform vec2 ratio;\n\nvoid main(void) {\n  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);\n  vTexCoord = aTexCoord;\n}"}},{}],107:[function(e,t,n){var r=e("./index"),i=r.GPU;for(var a in r)r.hasOwnProperty(a)&&"GPU"!==a&&(i[a]=r[a]);function s(e){e.GPU||Object.defineProperty(e,"GPU",{get:function(){return i}})}"undefined"!==typeof window&&s(window),"undefined"!==typeof self&&s(self),t.exports=r},{"./index":109}],108:[function(e,t,n){var r=e("gpu-mock.js").gpuMock,i=e("./utils").utils,a=(e("./backend/kernel").Kernel,e("./backend/cpu/kernel").CPUKernel),u=e("./backend/headless-gl/kernel").HeadlessGLKernel,c=e("./backend/web-gl2/kernel").WebGL2Kernel,l=e("./backend/web-gl/kernel").WebGLKernel,h=e("./kernel-run-shortcut").kernelRunShortcut,p=[u,c,l],f=["gpu","cpu"],m={headlessgl:u,webgl2:c,webgl:l},d=!0,g=function(){"use strict";function e(t){if(s(this,e),t=t||{},this.canvas=t.canvas||null,this.context=t.context||null,this.mode=t.mode,this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.injectedNative=null,this.onIstanbulCoverageVariable=t.onIstanbulCoverageVariable||null,this.removeIstanbulCoverage=t.hasOwnProperty("removeIstanbulCoverage")?t.removeIstanbulCoverage:null,"dev"!==this.mode){if(this.chooseKernel(),t.functions)for(var n=0;n<t.functions.length;n++)this.addFunction(t.functions[n]);if(t.nativeFunctions)for(var r in t.nativeFunctions)if(t.nativeFunctions.hasOwnProperty(r)){var i=t.nativeFunctions[r],a=i.name,o=i.source;this.addNativeFunction(a,o,i)}}}return o(e,null,[{key:"disableValidation",value:function(){d=!1}},{key:"enableValidation",value:function(){d=!0}},{key:"isGPUSupported",get:function(){return p.some((function(e){return e.isSupported}))}},{key:"isKernelMapSupported",get:function(){return p.some((function(e){return e.isSupported&&e.features.kernelMap}))}},{key:"isOffscreenCanvasSupported",get:function(){return"undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas||"undefined"!==typeof importScripts}},{key:"isWebGLSupported",get:function(){return l.isSupported}},{key:"isWebGL2Supported",get:function(){return c.isSupported}},{key:"isHeadlessGLSupported",get:function(){return u.isSupported}},{key:"isCanvasSupported",get:function(){return"undefined"!==typeof HTMLCanvasElement}},{key:"isGPUHTMLImageArraySupported",get:function(){return c.isSupported}},{key:"isSinglePrecisionSupported",get:function(){return p.some((function(e){return e.isSupported&&e.features.isFloatRead&&e.features.isTextureFloat}))}}]),o(e,[{key:"chooseKernel",value:function(){if(!this.Kernel){var e=null;if(this.context){for(var t=0;t<p.length;t++){var n=p[t];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error("Kernel type ".concat(n.name," not supported"));e=n;break}}if(null===e)throw new Error("unknown Context")}else if(this.mode){if(this.mode in m)d&&!m[this.mode].isSupported||(e=m[this.mode]);else if("gpu"===this.mode){for(var r=0;r<p.length;r++)if(p[r].isSupported){e=p[r];break}}else"cpu"===this.mode&&(e=a);if(!e)throw new Error('A requested mode of "'.concat(this.mode,'" and is not supported'))}else{for(var i=0;i<p.length;i++)if(p[i].isSupported){e=p[i];break}e||(e=a)}this.mode||(this.mode=e.mode),this.Kernel=e}}},{key:"createKernel",value:function(e,t){if("undefined"===typeof e)throw new Error("Missing source parameter");if("object"!==typeof e&&!i.isFunction(e)&&"string"!==typeof e)throw new Error("source parameter not a function");var n=this.kernels;if("dev"===this.mode){var s=r(e,v(t));return n.push(s),s}e="function"===typeof e?e.toString():e;var o={},u=v(t)||{};function c(t){console.warn("Falling back to CPU");var n=new a(e,{argumentTypes:f.argumentTypes,constantTypes:f.constantTypes,graphical:f.graphical,loopMaxIterations:f.loopMaxIterations,constants:f.constants,dynamicOutput:f.dynamicOutput,dynamicArgument:f.dynamicArguments,output:f.output,precision:f.precision,pipeline:f.pipeline,immutable:f.immutable,optimizeFloatMemory:f.optimizeFloatMemory,fixIntegerDivisionAccuracy:f.fixIntegerDivisionAccuracy,functions:f.functions,nativeFunctions:f.nativeFunctions,injectedNative:f.injectedNative,subKernels:f.subKernels,strictIntegers:f.strictIntegers,debug:f.debug});n.build.apply(n,t);var r=n.run.apply(n,t);return f.replaceKernel(n),r}t&&"object"===typeof t.argumentTypes&&(u.argumentTypes=Object.keys(t.argumentTypes).map((function(e){return t.argumentTypes[e]})));var l=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,injectedNative:this.injectedNative,onIstanbulCoverageVariable:this.onIstanbulCoverageVariable,removeIstanbulCoverage:this.removeIstanbulCoverage,gpu:this,validate:d,onRequestFallback:c,onRequestSwitchKernel:function t(r,i,a){a.debug&&console.warn("Switching kernels");var s=null;if(a.signature&&!o[a.signature]&&(o[a.signature]=a),a.dynamicOutput)for(var u=r.length-1;u>=0;u--){var l=r[u];"outputPrecisionMismatch"===l.type&&(s=l.needed)}var h=a.constructor,p=h.getArgumentTypes(a,i),m=h.getSignature(a,p),g=o[m];if(g)return g.onActivate(a),g;var v=o[m]=new h(e,{argumentTypes:p,constantTypes:a.constantTypes,graphical:a.graphical,loopMaxIterations:a.loopMaxIterations,constants:a.constants,dynamicOutput:a.dynamicOutput,dynamicArgument:a.dynamicArguments,context:a.context,canvas:a.canvas,output:s||a.output,precision:a.precision,pipeline:a.pipeline,immutable:a.immutable,optimizeFloatMemory:a.optimizeFloatMemory,fixIntegerDivisionAccuracy:a.fixIntegerDivisionAccuracy,functions:a.functions,nativeFunctions:a.nativeFunctions,injectedNative:a.injectedNative,subKernels:a.subKernels,strictIntegers:a.strictIntegers,debug:a.debug,gpu:a.gpu,validate:d,returnType:a.returnType,onIstanbulCoverageVariable:a.onIstanbulCoverageVariable,removeIstanbulCoverage:a.removeIstanbulCoverage,tactic:a.tactic,onRequestFallback:c,onRequestSwitchKernel:t,texture:a.texture,mappedTextures:a.mappedTextures,drawBuffersMap:a.drawBuffersMap});return v.build.apply(v,i),f.replaceKernel(v),n.push(v),v}},u),p=new this.Kernel(e,l),f=h(p);return this.canvas||(this.canvas=p.canvas),this.context||(this.context=p.context),n.push(p),f}},{key:"createKernelMap",value:function(){var e,t,n=typeof arguments[arguments.length-2];if("function"===n||"string"===n?(e=arguments[arguments.length-2],t=arguments[arguments.length-1]):e=arguments[arguments.length-1],"dev"!==this.mode&&(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&f.indexOf(this.mode)<0)throw new Error("kernelMap not supported on ".concat(this.Kernel.name));var r=v(t);if(t&&"object"===typeof t.argumentTypes&&(r.argumentTypes=Object.keys(t.argumentTypes).map((function(e){return t.argumentTypes[e]}))),Array.isArray(arguments[0])){r.subKernels=[];for(var a=arguments[0],s=0;s<a.length;s++){var o=a[s].toString(),u=i.getFunctionNameFromString(o);r.subKernels.push({name:u,source:o,property:s})}}else{r.subKernels=[];var c=arguments[0];for(var l in c)if(c.hasOwnProperty(l)){var h=c[l].toString(),p=i.getFunctionNameFromString(h);r.subKernels.push({name:p||l,source:h,property:l})}}return this.createKernel(e,r)}},{key:"combineKernels",value:function(){var e=arguments[0],t=arguments[arguments.length-1];if("cpu"===e.kernel.constructor.mode)return t;for(var n=arguments[0].canvas,r=arguments[0].context,i=arguments.length-1,a=0;a<i;a++)arguments[a].setCanvas(n).setContext(r).setPipeline(!0);return function(){var e=t.apply(this,arguments);return e.toArray?e.toArray():e}}},{key:"setFunctions",value:function(e){return this.functions=e,this}},{key:"setNativeFunctions",value:function(e){return this.nativeFunctions=e,this}},{key:"addFunction",value:function(e,t){return this.functions.push({source:e,settings:t}),this}},{key:"addNativeFunction",value:function(e,t,n){if(this.kernels.length>0)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');return this.nativeFunctions.push(Object.assign({name:e,source:t},n)),this}},{key:"injectNative",value:function(e){return this.injectedNative=e,this}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){e.kernels||t(),setTimeout((function(){try{for(var r=0;r<e.kernels.length;r++)e.kernels[r].destroy(!0);var i=e.kernels[0];i&&(i.kernel&&(i=i.kernel),i.constructor.destroyContext&&i.constructor.destroyContext(e.context))}catch(a){n(a)}t()}),0)}))}}]),e}();function v(e){if(!e)return{};var t=Object.assign({},e);return e.hasOwnProperty("floatOutput")&&(i.warnDeprecated("setting","floatOutput","precision"),t.precision=e.floatOutput?"single":"unsigned"),e.hasOwnProperty("outputToTexture")&&(i.warnDeprecated("setting","outputToTexture","pipeline"),t.pipeline=Boolean(e.outputToTexture)),e.hasOwnProperty("outputImmutable")&&(i.warnDeprecated("setting","outputImmutable","immutable"),t.immutable=Boolean(e.outputImmutable)),e.hasOwnProperty("floatTextures")&&(i.warnDeprecated("setting","floatTextures","optimizeFloatMemory"),t.optimizeFloatMemory=Boolean(e.floatTextures)),t}t.exports={GPU:g,kernelOrder:p,kernelTypes:f}},{"./backend/cpu/kernel":8,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/kernel":70,"./backend/web-gl2/kernel":105,"./kernel-run-shortcut":111,"./utils":114,"gpu-mock.js":4}],109:[function(e,t,n){var r=e("./gpu").GPU,i=e("./alias").alias,a=e("./utils").utils,s=e("./input"),o=s.Input,u=s.input,c=e("./texture").Texture,l=e("./backend/function-builder").FunctionBuilder,h=e("./backend/function-node").FunctionNode,p=e("./backend/cpu/function-node").CPUFunctionNode,f=e("./backend/cpu/kernel").CPUKernel,m=e("./backend/headless-gl/kernel").HeadlessGLKernel,d=e("./backend/web-gl/function-node").WebGLFunctionNode,g=e("./backend/web-gl/kernel").WebGLKernel,v=e("./backend/web-gl/kernel-value-maps").kernelValueMaps,y=e("./backend/web-gl2/function-node").WebGL2FunctionNode,x=e("./backend/web-gl2/kernel").WebGL2Kernel,b=e("./backend/web-gl2/kernel-value-maps").kernelValueMaps,w=e("./backend/gl/kernel").GLKernel,S=e("./backend/kernel").Kernel,T=e("./backend/function-tracer").FunctionTracer,_=e("./plugins/math-random-uniformly-distributed");t.exports={alias:i,CPUFunctionNode:p,CPUKernel:f,GPU:r,FunctionBuilder:l,FunctionNode:h,HeadlessGLKernel:m,Input:o,input:u,Texture:c,utils:a,WebGL2FunctionNode:y,WebGL2Kernel:x,webGL2KernelValueMaps:b,WebGLFunctionNode:d,WebGLKernel:g,webGLKernelValueMaps:v,GLKernel:w,Kernel:S,FunctionTracer:T,plugins:{mathRandom:_}}},{"./alias":5,"./backend/cpu/function-node":6,"./backend/cpu/kernel":8,"./backend/function-builder":9,"./backend/function-node":10,"./backend/function-tracer":11,"./backend/gl/kernel":13,"./backend/headless-gl/kernel":34,"./backend/kernel":36,"./backend/web-gl/function-node":38,"./backend/web-gl/kernel":70,"./backend/web-gl/kernel-value-maps":39,"./backend/web-gl2/function-node":73,"./backend/web-gl2/kernel":105,"./backend/web-gl2/kernel-value-maps":74,"./gpu":108,"./input":110,"./plugins/math-random-uniformly-distributed":112,"./texture":113,"./utils":114}],110:[function(e,t,n){var r=function(){"use strict";function t(e,n){s(this,t),this.value=e,Array.isArray(n)?this.size=n:(this.size=new Int32Array(3),n.z?this.size=new Int32Array([n.x,n.y,n.z]):n.y?this.size=new Int32Array([n.x,n.y]):this.size=new Int32Array([n.x]));var r=l(this.size,3),i=r[0],a=r[1],o=r[2];if(o){if(this.value.length!==i*a*o)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," * ").concat(o," = ").concat(a*i*o))}else if(a){if(this.value.length!==i*a)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i," * ").concat(a," = ").concat(a*i))}else if(this.value.length!==i)throw new Error("Input size ".concat(this.value.length," does not match ").concat(i))}return o(t,[{key:"toArray",value:function(){var t=e("./utils").utils,n=l(this.size,3),r=n[0],i=n[1],a=n[2];return a?t.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i,a):i?t.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),r,i):this.value}}]),t}();t.exports={Input:r,input:function(e,t){return new r(e,t)}}},{"./utils":114}],111:[function(e,t,n){var r=e("./utils").utils;function i(e,t){if(t.kernel)t.kernel=e;else{for(var n=r.allPropertiesOf(e),i=function(r){var i=n[r];if("_"===i[0]&&"_"===i[1])return"continue";"function"===typeof e[i]?"add"===i.substring(0,3)||"set"===i.substring(0,3)?t[i]=function(){return t.kernel[i].apply(t.kernel,arguments),t}:t[i]=function(){return t.kernel[i].apply(t.kernel,arguments)}:(t.__defineGetter__(i,(function(){return t.kernel[i]})),t.__defineSetter__(i,(function(e){t.kernel[i]=e})))},a=0;a<n.length;a++)i(a);t.kernel=e}}t.exports={kernelRunShortcut:function(e){var t=function(){return e.build.apply(e,arguments),(t=function(){var t=e.run.apply(e,arguments);if(e.switchingKernels){var r=e.resetSwitchingKernels(),i=e.onRequestSwitchKernel(r,arguments,e);n.kernel=e=i,t=i.run.apply(i,arguments)}return e.renderKernels?e.renderKernels():e.renderOutput?e.renderOutput():t}).apply(e,arguments)},n=function(){return t.apply(e,arguments)};return n.exec=function(){var e=arguments,n=this;return new Promise((function(r,i){try{r(t.apply(n,e))}catch(a){i(a)}}))},n.replaceKernel=function(t){i(e=t,n)},i(e,n),n}}},{"./utils":114}],112:[function(e,t,n){var r={name:"math-random-uniformly-distributed",onBeforeRun:function(e){e.setUniform1f("randomSeed1",Math.random()),e.setUniform1f("randomSeed2",Math.random())},functionMatch:"Math.random()",functionReplace:"nrand(vTexCoord)",functionReturnType:"Number",source:"// https://www.shadertoy.com/view/4t2SDh\n//note: uniformly distributed, normalized rand, [0,1]\nhighp float randomSeedShift = 1.0;\nhighp float slide = 1.0;\nuniform highp float randomSeed1;\nuniform highp float randomSeed2;\n\nhighp float nrand(highp vec2 n) {\n  highp float result = fract(sin(dot((n.xy + 1.0) * vec2(randomSeed1 * slide, randomSeed2 * randomSeedShift), vec2(12.9898, 78.233))) * 43758.5453);\n  randomSeedShift = result;\n  if (randomSeedShift > 0.5) {\n    slide += 0.00009; \n  } else {\n    slide += 0.0009;\n  }\n  return result;\n}"};t.exports=r},{}],113:[function(e,t,n){var r=function(){"use strict";function e(t){s(this,e);var n=t.texture,r=t.size,i=t.dimensions,a=t.output,o=t.context,u=t.type,c=void 0===u?"NumberTexture":u,l=t.kernel,h=t.internalFormat,p=t.textureFormat;if(!a)throw new Error('settings property "output" required.');if(!o)throw new Error('settings property "context" required.');if(!n)throw new Error('settings property "texture" required.');if(!l)throw new Error('settings property "kernel" required.');this.texture=n,n._refs?n._refs++:n._refs=1,this.size=r,this.dimensions=i,this.output=a,this.context=o,this.kernel=l,this.type=c,this._deleted=!1,this.internalFormat=h,this.textureFormat=p}return o(e,[{key:"toArray",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clone",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"delete",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}},{key:"clear",value:function(){throw new Error("Not implemented on ".concat(this.constructor.name))}}]),e}();t.exports={Texture:r}},{}],114:[function(e,t,n){var r=e("acorn"),i=e("./input").Input,a=e("./texture").Texture,s=/function ([^(]*)/,o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,u=/([^\s,]+)/g,c={systemEndianness:function(){return m},getSystemEndianness:function(){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239===n[0])return"LE";if(222===n[0])return"BE";throw new Error("unknown endianness")},isFunction:function(e){return"function"===typeof e},isFunctionString:function(e){return"string"===typeof e&&"function"===e.slice(0,"function".length).toLowerCase()},getFunctionNameFromString:function(e){var t=s.exec(e);return t&&0!==t.length?t[1].trim():null},getFunctionBodyFromString:function(e){return e.substring(e.indexOf("{")+1,e.lastIndexOf("}"))},getArgumentNamesFromString:function(e){var t=e.replace(o,""),n=t.slice(t.indexOf("(")+1,t.indexOf(")")).match(u);return null===n&&(n=[]),n},clone:function(e){if(null===e||"object"!==typeof e||e.hasOwnProperty("isActiveClone"))return e;var t=e.constructor();for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,t[n]=c.clone(e[n]),delete e.isActiveClone);return t},isArray:function(e){return!isNaN(e.length)},getVariableType:function(e,t){if(c.isArray(e))return e.length>0&&"IMG"===e[0].nodeName?"HTMLImageArray":"Array";switch(e.constructor){case Boolean:return"Boolean";case Number:return t&&Number.isInteger(e)?"Integer":"Float";case a:return e.type;case i:return"Input"}switch(e.nodeName){case"IMG":case"CANVAS":return"HTMLImage";case"VIDEO":return"HTMLVideo"}return e.hasOwnProperty("type")?e.type:"Unknown"},getKernelTextureSize:function(e,t){var n=l(t,3),r=n[0],i=n[1],a=(r||1)*(i||1)*(n[2]||1);return e.optimizeFloatMemory&&"single"===e.precision&&(r=a=Math.ceil(a/4)),i>1&&r*i===a?new Int32Array([r,i]):c.closestSquareDimensions(a)},closestSquareDimensions:function(e){for(var t=Math.sqrt(e),n=Math.ceil(t),r=Math.floor(t);n*r<e;)n--,r=Math.ceil(e/n);return new Int32Array([r,Math.ceil(e/r)])},getMemoryOptimizedFloatTextureSize:function(e,t){var n=c.roundTo((e[0]||1)*(e[1]||1)*(e[2]||1)*(e[3]||1),4)/t;return c.closestSquareDimensions(n)},getMemoryOptimizedPackedTextureSize:function(e,t){var n=l(e,3),r=n[0],i=n[1],a=n[2],s=c.roundTo((r||1)*(i||1)*(a||1),4)/(4/t);return c.closestSquareDimensions(s)},roundTo:function(e,t){return Math.floor((e+t-1)/t)*t},getDimensions:function(e,t){var n;if(c.isArray(e)){for(var r=[],s=e;c.isArray(s);)r.push(s.length),s=s[0];n=r.reverse()}else if(e instanceof a)n=e.output;else{if(!(e instanceof i))throw new Error("Unknown dimensions of ".concat(e));n=e.size}if(t)for(n=Array.from(n);n.length<3;)n.push(1);return new Int32Array(n)},flatten2dArrayTo:function(e,t){for(var n=0,r=0;r<e.length;r++)t.set(e[r],n),n+=e[r].length},flatten3dArrayTo:function(e,t){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)t.set(e[r][i],n),n+=e[r][i].length},flatten4dArrayTo:function(e,t){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)for(var a=0;a<e[r][i].length;a++)t.set(e[r][i][a],n),n+=e[r][i][a].length},flattenTo:function(e,t){c.isArray(e[0])?c.isArray(e[0][0])?c.isArray(e[0][0][0])?c.flatten4dArrayTo(e,t):c.flatten3dArrayTo(e,t):c.flatten2dArrayTo(e,t):t.set(e)},splitArray:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(new e.constructor(e.buffer,4*r+e.byteOffset,t));return n},getAstString:function(e,t){var n=Array.isArray(e)?e:e.split(/\r?\n/g),r=t.loc.start,i=t.loc.end,a=[];if(r.line===i.line)a.push(n[r.line-1].substring(r.column,i.column));else{a.push(n[r.line-1].slice(r.column));for(var s=r.line;s<i.line;s++)a.push(n[s]);a.push(n[i.line-1].slice(0,i.column))}return a.join("\n")},allPropertiesOf:function(e){var t=[];do{t.push.apply(t,Object.getOwnPropertyNames(e))}while(e=Object.getPrototypeOf(e));return t},linesToString:function(e){return e.length>0?e.join(";\n")+";\n":"\n"},warnDeprecated:function(e,t,n){n?console.warn("You are using a deprecated ".concat(e,' "').concat(t,'". It has been replaced with "').concat(n,'". Fixing, but please upgrade as it will soon be removed.')):console.warn("You are using a deprecated ".concat(e,' "').concat(t,'". It has been removed. Fixing, but please upgrade as it will soon be removed.'))},flipPixels:function(e,t,n){for(var r=n/2|0,i=4*t,a=new Uint8ClampedArray(4*t),s=e.slice(0),o=0;o<r;++o){var u=o*i,c=(n-o-1)*i;a.set(s.subarray(u,u+i)),s.copyWithin(u,c,c+i),s.set(a,c)}return s},erectPackedFloat:function(e,t){return e.subarray(0,t)},erect2DPackedFloat:function(e,t,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*t,s=a+t;r[i]=e.subarray(a,s)}return r},erect3DPackedFloat:function(e,t,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var s=new Array(n),o=0;o<n;o++){var u=a*n*t+o*t,c=u+t;s[o]=e.subarray(u,c)}i[a]=s}return i},erectMemoryOptimizedFloat:function(e,t){return e.subarray(0,t)},erectMemoryOptimized2DFloat:function(e,t,n){for(var r=new Array(n),i=0;i<n;i++){var a=i*t;r[i]=e.subarray(a,a+t)}return r},erectMemoryOptimized3DFloat:function(e,t,n,r){for(var i=new Array(r),a=0;a<r;a++){for(var s=new Array(n),o=0;o<n;o++){var u=a*n*t+o*t;s[o]=e.subarray(u,u+t)}i[a]=s}return i},erectFloat:function(e,t){for(var n=new Float32Array(t),r=0,i=0;i<t;i++)n[i]=e[r],r+=4;return n},erect2DFloat:function(e,t,n){for(var r=new Array(n),i=0,a=0;a<n;a++){for(var s=new Float32Array(t),o=0;o<t;o++)s[o]=e[i],i+=4;r[a]=s}return r},erect3DFloat:function(e,t,n,r){for(var i=new Array(r),a=0,s=0;s<r;s++){for(var o=new Array(n),u=0;u<n;u++){for(var c=new Float32Array(t),l=0;l<t;l++)c[l]=e[a],a+=4;o[u]=c}i[s]=o}return i},erectArray2:function(e,t){for(var n=new Array(t),r=4*t,i=0,a=0;a<r;a+=4)n[i++]=e.subarray(a,a+2);return n},erect2DArray2:function(e,t,n){for(var r=new Array(n),i=4*t,a=0;a<n;a++){for(var s=new Array(t),o=a*i,u=0,c=0;c<i;c+=4)s[u++]=e.subarray(c+o,c+o+2);r[a]=s}return r},erect3DArray2:function(e,t,n,r){for(var i=4*t,a=new Array(r),s=0;s<r;s++){for(var o=new Array(n),u=0;u<n;u++){for(var c=new Array(t),l=s*i*n+u*i,h=0,p=0;p<i;p+=4)c[h++]=e.subarray(p+l,p+l+2);o[u]=c}a[s]=o}return a},erectArray3:function(e,t){for(var n=new Array(t),r=4*t,i=0,a=0;a<r;a+=4)n[i++]=e.subarray(a,a+3);return n},erect2DArray3:function(e,t,n){for(var r=4*t,i=new Array(n),a=0;a<n;a++){for(var s=new Array(t),o=a*r,u=0,c=0;c<r;c+=4)s[u++]=e.subarray(c+o,c+o+3);i[a]=s}return i},erect3DArray3:function(e,t,n,r){for(var i=4*t,a=new Array(r),s=0;s<r;s++){for(var o=new Array(n),u=0;u<n;u++){for(var c=new Array(t),l=s*i*n+u*i,h=0,p=0;p<i;p+=4)c[h++]=e.subarray(p+l,p+l+3);o[u]=c}a[s]=o}return a},erectArray4:function(e,t){for(var n=new Array(e),r=4*t,i=0,a=0;a<r;a+=4)n[i++]=e.subarray(a,a+4);return n},erect2DArray4:function(e,t,n){for(var r=4*t,i=new Array(n),a=0;a<n;a++){for(var s=new Array(t),o=a*r,u=0,c=0;c<r;c+=4)s[u++]=e.subarray(c+o,c+o+4);i[a]=s}return i},erect3DArray4:function(e,t,n,r){for(var i=4*t,a=new Array(r),s=0;s<r;s++){for(var o=new Array(n),u=0;u<n;u++){for(var c=new Array(t),l=s*i*n+u*i,h=0,p=0;p<i;p+=4)c[h++]=e.subarray(p+l,p+l+4);o[u]=c}a[s]=o}return a},flattenFunctionToString:function(e,t){var n=t.findDependency,i=t.thisLookup,a=(t.doNotDefine,t.flattened);a||(a=t.flattened={});var s=r.parse(e),o=[],u=0,l=function e(t){if(Array.isArray(t)){for(var r=[],a=0;a<t.length;a++)r.push(e(t[a]));return r.join("")}switch(t.type){case"Program":return e(t.body)+("VariableDeclaration"===t.body[0].type?";":"");case"FunctionDeclaration":return"function ".concat(t.id.name,"(").concat(t.params.map(e).join(", "),") ").concat(e(t.body));case"BlockStatement":var s=[];u+=2;for(var l=0;l<t.body.length;l++){var h=e(t.body[l]);h&&s.push(" ".repeat(u)+h,";\n")}return u-=2,"{\n".concat(s.join(""),"}");case"VariableDeclaration":var p=c.normalizeDeclarations(t).map(e).filter((function(e){return null!==e}));return p.length<1?"":"".concat(t.kind," ").concat(p.join(","));case"VariableDeclarator":return t.init.object&&"ThisExpression"===t.init.object.type?i(t.init.property.name,!0)?"".concat(t.id.name," = ").concat(e(t.init)):null:"".concat(t.id.name," = ").concat(e(t.init));case"CallExpression":if("subarray"===t.callee.property.name)return"".concat(e(t.callee.object),".").concat(e(t.callee.property),"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")");if("gl"===t.callee.object.name||"context"===t.callee.object.name)return"".concat(e(t.callee.object),".").concat(e(t.callee.property),"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")");if("ThisExpression"===t.callee.object.type)return o.push(n("this",t.callee.property.name)),"".concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")");if(t.callee.object.name){var f=n(t.callee.object.name,t.callee.property.name);return null===f?"".concat(t.callee.object.name,".").concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")"):(o.push(f),"".concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")"))}if("MemberExpression"===t.callee.object.type)return"".concat(e(t.callee.object),".").concat(t.callee.property.name,"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")");throw new Error("unknown ast.callee");case"ReturnStatement":return"return ".concat(e(t.argument));case"BinaryExpression":return"(".concat(e(t.left)).concat(t.operator).concat(e(t.right),")");case"UnaryExpression":return t.prefix?"".concat(t.operator," ").concat(e(t.argument)):"".concat(e(t.argument)," ").concat(t.operator);case"ExpressionStatement":return"".concat(e(t.expression));case"SequenceExpression":return"(".concat(e(t.expressions),")");case"ArrowFunctionExpression":return"(".concat(t.params.map(e).join(", "),") => ").concat(e(t.body));case"Literal":return t.raw;case"Identifier":return t.name;case"MemberExpression":return"ThisExpression"===t.object.type?i(t.property.name):t.computed?"".concat(e(t.object),"[").concat(e(t.property),"]"):e(t.object)+"."+e(t.property);case"ThisExpression":return"this";case"NewExpression":return"new ".concat(e(t.callee),"(").concat(t.arguments.map((function(t){return e(t)})).join(", "),")");case"ForStatement":return"for (".concat(e(t.init),";").concat(e(t.test),";").concat(e(t.update),") ").concat(e(t.body));case"AssignmentExpression":return"".concat(e(t.left)).concat(t.operator).concat(e(t.right));case"UpdateExpression":return"".concat(e(t.argument)).concat(t.operator);case"IfStatement":return"if (".concat(e(t.test),") ").concat(e(t.consequent));case"ThrowStatement":return"throw ".concat(e(t.argument));case"ObjectPattern":return t.properties.map(e).join(", ");case"ArrayPattern":return t.elements.map(e).join(", ");case"DebuggerStatement":return"debugger;";case"ConditionalExpression":return"".concat(e(t.test),"?").concat(e(t.consequent),":").concat(e(t.alternate));case"Property":if("init"===t.kind)return e(t.key)}throw new Error("unhandled ast.type of ".concat(t.type))}(s);if(o.length>0){for(var h=[],p=0;p<o.length;p++){var f=o[p];a[f]||(a[f]=!0),h.push(c.flattenFunctionToString(f,t)+"\n")}return h.join("")+l}return l},normalizeDeclarations:function(e){if("VariableDeclaration"!==e.type)throw new Error('Ast is not of type "VariableDeclaration"');for(var t=[],n=0;n<e.declarations.length;n++){var r=e.declarations[n];if(r.id&&"ObjectPattern"===r.id.type&&r.id.properties)for(var i=r.id.properties,a=0;a<i.length;a++){var s=i[a];if("ObjectPattern"===s.value.type&&s.value.properties)for(var o=0;o<s.value.properties.length;o++){var u=s.value.properties[o];if("Property"!==u.type)throw new Error("unexpected state");t.push({type:"VariableDeclarator",id:{type:"Identifier",name:u.key.name},init:{type:"MemberExpression",object:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:s.key.name},computed:!1},property:{type:"Identifier",name:u.key.name},computed:!1}})}else{if("Identifier"!==s.value.type)throw new Error("unexpected state");t.push({type:"VariableDeclarator",id:{type:"Identifier",name:s.value&&s.value.name?s.value.name:s.key.name},init:{type:"MemberExpression",object:r.init,property:{type:"Identifier",name:s.key.name},computed:!1}})}}else if(r.id&&"ArrayPattern"===r.id.type&&r.id.elements)for(var c=r.id.elements,l=0;l<c.length;l++){var h=c[l];if("Identifier"!==h.type)throw new Error("unexpected state");t.push({type:"VariableDeclarator",id:{type:"Identifier",name:h.name},init:{type:"MemberExpression",object:r.init,property:{type:"Literal",value:l,raw:l.toString(),start:h.start,end:h.end},computed:!0}})}else t.push(r)}return t},splitHTMLImageToRGB:function(e,t){var n=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].r}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),r=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].g}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),i=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].b}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),a=e.createKernel((function(e){return 255*e[this.thread.y][this.thread.x].a}),{output:[t.width,t.height],precision:"unsigned",argumentTypes:{a:"HTMLImage"}}),s=[n(t),r(t),i(t),a(t)];return s.rKernel=n,s.gKernel=r,s.bKernel=i,s.aKernel=a,s.gpu=e,s},splitRGBAToCanvases:function(e,t,n,r){var i=e.createKernel((function(e){var t=e[this.thread.y][this.thread.x];this.color(t.r/255,0,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});i(t);var a=e.createKernel((function(e){var t=e[this.thread.y][this.thread.x];this.color(0,t.g/255,0,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});a(t);var s=e.createKernel((function(e){var t=e[this.thread.y][this.thread.x];this.color(0,0,t.b/255,255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});s(t);var o=e.createKernel((function(e){var t=e[this.thread.y][this.thread.x];this.color(255,255,255,t.a/255)}),{output:[n,r],graphical:!0,argumentTypes:{v:"Array2D(4)"}});return o(t),[i.canvas,a.canvas,s.canvas,o.canvas]},getMinifySafeName:function(e){try{var t=r.parse("const value = ".concat(e.toString())).body[0].declarations[0].init;return t.body.name||t.body.body[0].argument.name}catch(n){throw new Error("Unrecognized function type.  Please use `() => yourFunctionVariableHere` or function() { return yourFunctionVariableHere; }")}},sanitizeName:function(e){return h.test(e)&&(e=e.replace(h,"S_S")),p.test(e)?e=e.replace(p,"U_U"):f.test(e)&&(e=e.replace(f,"u_u")),e}},h=/\$/,p=/__/,f=/_/,m=c.getSystemEndianness();t.exports={utils:c}},{"./input":110,"./texture":113,acorn:1}]},{},[107])(107)},function(e,t,n){var r;!function(i){"use strict";var a,s,o,u=9e15,c="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},f=!0,m="[DecimalError] Invalid argument: ",d=Math.floor,g=Math.pow,v=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,y=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,x=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,b=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,w=1e7,S=l.length-1,T=h.length-1,_={name:"[object Decimal]"};function A(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=F(n)),a+=r;(n=7-(r=(s=e[t])+"").length)&&(a+=F(n))}else if(0===s)return"0";for(;s%10===0;)s/=10;return a+s}function E(e,t,n){if(e!==~~e||e<t||e>n)throw Error(m+e)}function k(e,t,n,r){var i,a,s,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=g(10,7-t),o=e[i]%a|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),s=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):s=(n<4&&o+1==a||n>3&&o+1==a/2)&&(e[i+1]/a/100|0)==g(10,t-2)-1||(o==a/2||0==o)&&0==(e[i+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),s=(r||n<4)&&9999==o||!r&&n>3&&4999==o):s=((r||n<4)&&o+1==a||!r&&n>3&&o+1==a/2)&&(e[i+1]/a/1e3|0)==g(10,t-3)-1,s}function M(e,t,n){for(var r,i,a=[0],s=0,o=e.length;s<o;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=c.indexOf(e.charAt(s++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}_.absoluteValue=_.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),I(e)},_.ceil=function(){return I(new this.constructor(this),this.e+1,2)},_.comparedTo=_.cmp=function(e){var t,n,r,i,a=this,s=a.d,o=(e=new a.constructor(e)).d,u=a.s,c=e.s;if(!s||!o)return u&&c?u!==c?u:s===o?0:!s^u<0?1:-1:NaN;if(!s[0]||!o[0])return s[0]?u:o[0]?-c:0;if(u!==c)return u;if(a.e!==e.e)return a.e>e.e^u<0?1:-1;for(t=0,n=(r=s.length)<(i=o.length)?r:i;t<n;++t)if(s[t]!==o[t])return s[t]>o[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1},_.cosine=_.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?(n=Math.ceil(i/3),r=(1/H(4,n)).toString()):(n=16,r="2.3283064365386962890625e-10");e.precision+=n,t=j(e,1,t.times(r),new e(1));for(var a=n;a--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(r,W(r,n)),r.precision=e,r.rounding=t,I(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},_.cubeRoot=_.cbrt=function(){var e,t,n,r,i,a,s,o,u,c,l=this,h=l.constructor;if(!l.isFinite()||l.isZero())return new h(l);for(f=!1,(a=l.s*g(l.s*l,1/3))&&Math.abs(a)!=1/0?r=new h(a.toString()):(n=A(l.d),(a=((e=l.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=g(n,1/3),e=d((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(n=a==1/0?"5e"+e:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=l.s),s=(e=h.precision)+3;;)if(c=(u=(o=r).times(o).times(o)).plus(l),r=N(c.plus(l).times(o),c.plus(u),s+2,1),A(o.d).slice(0,s)===(n=A(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(I(r,e+1,1),t=!r.times(r).times(r).eq(l));break}if(!i&&(I(o,e+1,0),o.times(o).times(o).eq(l))){r=o;break}s+=4,i=1}return f=!0,I(r,e,h.rounding,t)},_.decimalPlaces=_.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-d(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},_.dividedBy=_.div=function(e){return N(this,new this.constructor(e))},_.dividedToIntegerBy=_.divToInt=function(e){var t=this.constructor;return I(N(this,new t(e),0,1,1),t.precision,t.rounding)},_.equals=_.eq=function(e){return 0===this.cmp(e)},_.floor=function(){return I(new this.constructor(this),this.e+1,3)},_.greaterThan=_.gt=function(e){return this.cmp(e)>0},_.greaterThanOrEqualTo=_.gte=function(e){var t=this.cmp(e);return 1==t||0===t},_.hyperbolicCosine=_.cosh=function(){var e,t,n,r,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(a.e,a.sd())+4,s.rounding=1,(i=a.d.length)<32?t=(1/H(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=j(s,1,a.times(t),new s(1),!0);for(var u,c=e,l=new s(8);c--;)u=a.times(a),a=o.minus(u.times(l.minus(u.times(l))));return I(a,s.precision=n,s.rounding=r,!0)},_.hyperbolicSine=_.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=j(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=j(a,2,i=i.times(1/H(5,e)),i,!0);for(var s,o=new a(5),u=new a(16),c=new a(20);e--;)s=i.times(i),i=i.times(o.plus(s.times(u.times(s).plus(c))))}return a.precision=t,a.rounding=n,I(i,t,n,!0)},_.hyperbolicTangent=_.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,N(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},_.inverseCosine=_.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?R(n,i,a):new n(0):new n(NaN):t.isZero()?R(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=R(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},_.inverseHyperbolicCosine=_.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,f=!1,n=n.times(n).minus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},_.inverseHyperbolicSine=_.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,f=!1,n=n.times(n).plus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln())},_.inverseHyperbolicTangent=_.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?I(new a(i),e,t,!0):(a.precision=n=r-i.e,i=N(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},_.inverseSine=_.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=R(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},_.inverseTangent=_.atan=function(){var e,t,n,r,i,a,s,o,u,c=this,l=c.constructor,h=l.precision,p=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=T)return(s=R(l,h+4,p).times(.25)).s=c.s,s}else{if(!c.s)return new l(NaN);if(h+4<=T)return(s=R(l,h+4,p).times(.5)).s=c.s,s}for(l.precision=o=h+10,l.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(f=!1,t=Math.ceil(o/7),r=1,u=c.times(c),s=new l(c),i=c;-1!==e;)if(i=i.times(u),a=s.minus(i.div(r+=2)),i=i.times(u),void 0!==(s=a.plus(i.div(r+=2))).d[t])for(e=t;s.d[e]===a.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),f=!0,I(s,l.precision=h,l.rounding=p,!0)},_.isFinite=function(){return!!this.d},_.isInteger=_.isInt=function(){return!!this.d&&d(this.e/7)>this.d.length-2},_.isNaN=function(){return!this.s},_.isNegative=_.isNeg=function(){return this.s<0},_.isPositive=_.isPos=function(){return this.s>0},_.isZero=function(){return!!this.d&&0===this.d[0]},_.lessThan=_.lt=function(e){return this.cmp(e)<0},_.lessThanOrEqualTo=_.lte=function(e){return this.cmp(e)<1},_.logarithm=_.log=function(e){var t,n,r,i,a,s,o,u,c=this.constructor,l=c.precision,h=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new c(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=1!==i}if(f=!1,s=q(this,o=l+5),r=t?L(c,o+10):q(e,o),k((u=N(s,r,o,1)).d,i=l,h))do{if(s=q(this,o+=10),r=t?L(c,o+10):q(e,o),u=N(s,r,o,1),!a){+A(u.d).slice(i+1,i+15)+1==1e14&&(u=I(u,l+1,0));break}}while(k(u.d,i+=10,h));return f=!0,I(u,l,h)},_.minus=_.sub=function(e){var t,n,r,i,a,s,o,u,c,l,h,p,m=this,g=m.constructor;if(e=new g(e),!m.d||!e.d)return m.s&&e.s?m.d?e.s=-e.s:e=new g(e.d||m.s!==e.s?m:NaN):e=new g(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(c=m.d,p=e.d,o=g.precision,u=g.rounding,!c[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!c[0])return new g(3===u?-0:0);e=new g(m)}return f?I(e,o,u):e}if(n=d(e.e/7),l=d(m.e/7),c=c.slice(),a=l-n){for((h=a<0)?(t=c,a=-a,s=p.length):(t=p,n=l,s=c.length),a>(r=Math.max(Math.ceil(o/7),s)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((h=(r=c.length)<(s=p.length))&&(s=r),r=0;r<s;r++)if(c[r]!=p[r]){h=c[r]<p[r];break}a=0}for(h&&(t=c,c=p,p=t,e.s=-e.s),s=c.length,r=p.length-s;r>0;--r)c[s++]=0;for(r=p.length;r>a;){if(c[--r]<p[r]){for(i=r;i&&0===c[--i];)c[i]=w-1;--c[i],c[r]+=w}c[r]-=p[r]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(e.d=c,e.e=D(c,n),f?I(e,o,u):e):new g(3===u?-0:0)},_.modulo=_.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?I(new r(n),r.precision,r.rounding):(f=!1,9==r.modulo?(t=N(n,e.abs(),0,3,1)).s*=e.s:t=N(n,e,0,r.modulo,1),t=t.times(e),f=!0,n.minus(t))},_.naturalExponential=_.exp=function(){return V(this)},_.naturalLogarithm=_.ln=function(){return q(this)},_.negated=_.neg=function(){var e=new this.constructor(this);return e.s=-e.s,I(e)},_.plus=_.add=function(e){var t,n,r,i,a,s,o,u,c,l,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new p(e.d||h.s===e.s?h:NaN)):e=new p(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=h.d,l=e.d,o=p.precision,u=p.rounding,!c[0]||!l[0])return l[0]||(e=new p(h)),f?I(e,o,u):e;if(a=d(h.e/7),r=d(e.e/7),c=c.slice(),i=a-r){for(i<0?(n=c,i=-i,s=l.length):(n=l,r=a,s=c.length),i>(s=(a=Math.ceil(o/7))>s?a+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=c.length)-(i=l.length)<0&&(i=s,n=l,l=c,c=n),t=0;i;)t=(c[--i]=c[i]+l[i]+t)/w|0,c[i]%=w;for(t&&(c.unshift(t),++r),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=D(c,r),f?I(e,o,u):e},_.precision=_.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(m+e);return n.d?(t=O(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},_.round=function(){var e=this,t=e.constructor;return I(new t(e),e.e+1,t.rounding)},_.sine=_.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return j(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/H(5,n)),t=j(e,2,t,t);for(var i,a=new e(5),s=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(s.times(i).minus(o))));return t}(r,W(r,n)),r.precision=e,r.rounding=t,I(o>2?n.neg():n,e,t,!0)):new r(NaN)},_.squareRoot=_.sqrt=function(){var e,t,n,r,i,a,s=this,o=s.d,u=s.e,c=s.s,l=s.constructor;if(1!==c||!o||!o[0])return new l(!c||c<0&&(!o||o[0])?NaN:o?s:1/0);for(f=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=A(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(t),u=d((u+1)/2)-(u<0||u%2),r=new l(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new l(c.toString()),n=(u=l.precision)+3;;)if(r=(a=r).plus(N(s,a,n+2,1)).times(.5),A(a.d).slice(0,n)===(t=A(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(I(r,u+1,1),e=!r.times(r).eq(s));break}if(!i&&(I(a,u+1,0),a.times(a).eq(s))){r=a;break}n+=4,i=1}return f=!0,I(r,u,l.rounding,e)},_.tangent=_.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=N(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,I(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},_.times=_.mul=function(e){var t,n,r,i,a,s,o,u,c,l=this,h=l.constructor,p=l.d,m=(e=new h(e)).d;if(e.s*=l.s,!p||!p[0]||!m||!m[0])return new h(!e.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:p&&m?0*e.s:e.s/0);for(n=d(l.e/7)+d(e.e/7),(u=p.length)<(c=m.length)&&(a=p,p=m,m=a,s=u,u=c,c=s),a=[],r=s=u+c;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=u+r;i>r;)o=a[i]+m[r]*p[i-r-1]+t,a[i--]=o%w|0,t=o/w|0;a[i]=(a[i]+t)%w|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=D(a,n),f?I(e,h.precision,h.rounding):e},_.toBinary=function(e,t){return X(this,2,e,t)},_.toDecimalPlaces=_.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(E(e,0,1e9),void 0===t?t=r.rounding:E(t,0,8),I(n,e+n.e+1,t))},_.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=C(r,!0):(E(e,0,1e9),void 0===t?t=i.rounding:E(t,0,8),n=C(r=I(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},_.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?n=C(i):(E(e,0,1e9),void 0===t?t=a.rounding:E(t,0,8),n=C(r=I(new a(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},_.toFraction=function(e){var t,n,r,i,a,s,o,u,c,l,h,p,d=this,v=d.d,y=d.constructor;if(!v)return new y(d);if(c=n=new y(1),r=u=new y(0),s=(a=(t=new y(r)).e=O(v)-d.e-1)%7,t.d[0]=g(10,s<0?7+s:s),null==e)e=a>0?t:c;else{if(!(o=new y(e)).isInt()||o.lt(c))throw Error(m+o);e=o.gt(t)?a>0?t:c:o}for(f=!1,o=new y(A(v)),l=y.precision,y.precision=a=7*v.length*2;h=N(o,t,0,1,1),1!=(i=n.plus(h.times(r))).cmp(e);)n=r,r=i,i=c,c=u.plus(h.times(i)),u=i,i=t,t=o.minus(h.times(i)),o=i;return i=N(e.minus(n),r,0,1,1),u=u.plus(i.times(c)),n=n.plus(i.times(r)),u.s=c.s=d.s,p=N(c,r,a,1).minus(d).abs().cmp(N(u,n,a,1).minus(d).abs())<1?[c,r]:[u,n],y.precision=l,f=!0,p},_.toHexadecimal=_.toHex=function(e,t){return X(this,16,e,t)},_.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:E(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(f=!1,n=N(n,e,0,t,1).times(e),f=!0,I(n)):(e.s=n.s,n=e),n},_.toNumber=function(){return+this},_.toOctal=function(e,t){return X(this,8,e,t)},_.toPower=_.pow=function(e){var t,n,r,i,a,s,o=this,u=o.constructor,c=+(e=new u(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new u(g(+o,c));if((o=new u(o)).eq(1))return o;if(r=u.precision,a=u.rounding,e.eq(1))return I(o,r,a);if((t=d(e.e/7))>=e.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=P(u,o,n,r),e.s<0?new u(1).div(i):I(i,r,a);if((s=o.s)<0){if(t<e.d.length-1)return new u(NaN);if(0==(1&e.d[t])&&(s=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=s,o}return(t=0!=(n=g(+o,c))&&isFinite(n)?new u(n+"").e:d(c*(Math.log("0."+A(o.d))/Math.LN10+o.e+1)))>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(f=!1,u.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=V(e.times(q(o,r+n)),r)).d&&k((i=I(i,r+5,1)).d,r,a)&&(t=r+10,+A((i=I(V(e.times(q(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=I(i,r+1,0))),i.s=s,f=!0,u.rounding=a,I(i,r,a))},_.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=C(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(E(e,1,1e9),void 0===t?t=i.rounding:E(t,0,8),n=C(r=I(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},_.toSignificantDigits=_.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(E(e,1,1e9),void 0===t?t=n.rounding:E(t,0,8)),I(new n(this),e,t)},_.toString=function(){var e=this,t=e.constructor,n=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},_.truncated=_.trunc=function(){return I(new this.constructor(this),this.e+1,1)},_.valueOf=_.toJSON=function(){var e=this,t=e.constructor,n=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var N=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+i,e[a]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o,u,c){var l,h,p,f,m,g,v,y,x,b,S,T,_,A,E,k,M,N,C,D,L=r.constructor,R=r.s==i.s?1:-1,O=r.d,F=i.d;if(!O||!O[0]||!F||!F[0])return new L(r.s&&i.s&&(O?!F||O[0]!=F[0]:F)?O&&0==O[0]||!F?0*R:R/0:NaN);for(c?(m=1,h=r.e-i.e):(c=w,m=7,h=d(r.e/m)-d(i.e/m)),C=F.length,M=O.length,b=(x=new L(R)).d=[],p=0;F[p]==(O[p]||0);p++);if(F[p]>(O[p]||0)&&h--,null==a?(A=a=L.precision,o=L.rounding):A=u?a+(r.e-i.e)+1:a,A<0)b.push(1),g=!0;else{if(A=A/m+2|0,p=0,1==C){for(f=0,F=F[0],A++;(p<M||f)&&A--;p++)E=f*c+(O[p]||0),b[p]=E/F|0,f=E%F|0;g=f||p<M}else{for((f=c/(F[0]+1)|0)>1&&(F=e(F,f,c),O=e(O,f,c),C=F.length,M=O.length),k=C,T=(S=O.slice(0,C)).length;T<C;)S[T++]=0;(D=F.slice()).unshift(0),N=F[0],F[1]>=c/2&&++N;do{f=0,(l=t(F,S,C,T))<0?(_=S[0],C!=T&&(_=_*c+(S[1]||0)),(f=_/N|0)>1?(f>=c&&(f=c-1),1==(l=t(v=e(F,f,c),S,y=v.length,T=S.length))&&(f--,n(v,C<y?D:F,y,c))):(0==f&&(l=f=1),v=F.slice()),(y=v.length)<T&&v.unshift(0),n(S,v,T,c),-1==l&&(l=t(F,S,C,T=S.length))<1&&(f++,n(S,C<T?D:F,T,c)),T=S.length):0===l&&(f++,S=[0]),b[p++]=f,l&&S[0]?S[T++]=O[k]||0:(S=[O[k]],T=1)}while((k++<M||void 0!==S[0])&&A--);g=void 0!==S[0]}b[0]||b.shift()}if(1==m)x.e=h,s=g;else{for(p=1,f=b[0];f>=10;f/=10)p++;x.e=p+h*m-1,I(x,u?a+x.e+1:a,o,g)}return x}}();function I(e,t,n,r){var i,a,s,o,u,c,l,h,p,m=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(i=1,o=h[0];o>=10;o/=10)i++;if((a=t-i)<0)a+=7,s=t,u=(l=h[p=0])/g(10,i-s-1)%10|0;else if((p=Math.ceil((a+1)/7))>=(o=h.length)){if(!r)break e;for(;o++<=p;)h.push(0);l=u=0,i=1,s=(a%=7)-7+1}else{for(l=o=h[p],i=1;o>=10;o/=10)i++;u=(s=(a%=7)-7+i)<0?0:l/g(10,i-s-1)%10|0}if(r=r||t<0||void 0!==h[p+1]||(s<0?l:l%g(10,i-s-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):u>5||5==u&&(4==n||r||6==n&&(a>0?s>0?l/g(10,i-s):0:h[p-1])%10&1||n==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(t-=e.e+1,h[0]=g(10,(7-t%7)%7),e.e=-t||0):h[0]=e.e=0,e;if(0==a?(h.length=p,o=1,p--):(h.length=p+1,o=g(10,7-a),h[p]=s>0?(l/g(10,i-s)%g(10,s)|0)*o:0),c)for(;;){if(0==p){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(e.e++,h[0]==w&&(h[0]=1));break}if(h[p]+=o,h[p]!=w)break;h[p--]=0,o=1}for(a=h.length;0===h[--a];)h.pop()}return f&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function C(e,t,n){if(!e.isFinite())return G(e);var r,i=e.e,a=A(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+F(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+F(-i-1)+a,n&&(r=n-s)>0&&(a+=F(r))):i>=s?(a+=F(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+F(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=F(r))),a}function D(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function L(e,t,n){if(t>S)throw f=!0,n&&(e.precision=n),Error("[DecimalError] Precision limit exceeded");return I(new e(l),t,1,!0)}function R(e,t,n){if(t>T)throw Error("[DecimalError] Precision limit exceeded");return I(new e(h),t,n,!0)}function O(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function F(e){for(var t="";e--;)t+="0";return t}function P(e,t,n,r){var i,a=new e(1),s=Math.ceil(r/7+4);for(f=!1;;){if(n%2&&Z((a=a.times(t)).d,s)&&(i=!0),0===(n=d(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}Z((t=t.times(t)).d,s)}return f=!0,a}function U(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function V(e,t){var n,r,i,a,s,o,u,c=0,l=0,h=0,p=e.constructor,m=p.rounding,d=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(f=!1,u=d):u=t,o=new p(.03125);e.e>-2;)e=e.times(o),h+=5;for(u+=r=Math.log(g(2,h))/Math.LN10*2+5|0,n=a=s=new p(1),p.precision=u;;){if(a=I(a.times(e),u,1),n=n.times(++l),A((o=s.plus(N(a,n,u,1))).d).slice(0,u)===A(s.d).slice(0,u)){for(i=h;i--;)s=I(s.times(s),u,1);if(null!=t)return p.precision=d,s;if(!(c<3&&k(s.d,u-r,m,c)))return I(s,p.precision=d,m,f=!0);p.precision=u+=10,n=a=o=new p(1),l=0,c++}s=o}}function q(e,t){var n,r,i,a,s,o,u,c,l,h,p,m=1,d=e,g=d.d,v=d.constructor,y=v.rounding,x=v.precision;if(d.s<0||!g||!g[0]||!d.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=d.s?NaN:g?0:d);if(null==t?(f=!1,l=x):l=t,v.precision=l+=10,r=(n=A(g)).charAt(0),!(Math.abs(a=d.e)<15e14))return c=L(v,l+2,x).times(a+""),d=q(new v(r+"."+n.slice(1)),l-10).plus(c),v.precision=x,null==t?I(d,x,y,f=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=A((d=d.times(e)).d)).charAt(0),m++;for(a=d.e,r>1?(d=new v("0."+n),a++):d=new v(r+"."+n.slice(1)),h=d,u=s=d=N(d.minus(1),d.plus(1),l,1),p=I(d.times(d),l,1),i=3;;){if(s=I(s.times(p),l,1),A((c=u.plus(N(s,new v(i),l,1))).d).slice(0,l)===A(u.d).slice(0,l)){if(u=u.times(2),0!==a&&(u=u.plus(L(v,l+2,x).times(a+""))),u=N(u,new v(m),l,1),null!=t)return v.precision=x,u;if(!k(u.d,l-10,y,o))return I(u,v.precision=x,y,f=!0);v.precision=l+=10,c=s=d=N(h.minus(1),h.plus(1),l,1),p=I(d.times(d),l,1),i=o=1}u=c,i+=2}}function G(e){return String(e.s*e.s/0)}function B(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),f&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function K(e,t){var n,r,i,s,o,u,c,l,h;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(y.test(t))n=16,t=t.toLowerCase();else if(v.test(t))n=2;else{if(!x.test(t))throw Error(m+t);n=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(u=(t=t.replace(".","")).length)-s,i=P(r,new r(n),s,2*s)),s=h=(l=M(t,n,w)).length-1;0===l[s];--s)l.pop();return s<0?new r(0*e.s):(e.e=D(l,h),e.d=l,f=!1,o&&(e=N(e,i,4*u)),c&&(e=e.times(Math.abs(c)<54?g(2,c):a.pow(2,c))),f=!0,e)}function j(e,t,n,r,i){var a,s,o,u,c=e.precision,l=Math.ceil(c/7);for(f=!1,u=n.times(n),o=new e(r);;){if(s=N(o.times(u),new e(t++*t++),c,1),o=i?r.plus(s):r.minus(s),r=N(s.times(u),new e(t++*t++),c,1),void 0!==(s=o.plus(r)).d[l]){for(a=l;s.d[a]===o.d[a]&&a--;);if(-1==a)break}a=o,o=r,r=s,s=a}return f=!0,s.d.length=l+1,s}function H(e,t){for(var n=e;--t;)n*=e;return n}function W(e,t){var n,r=t.s<0,i=R(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return o=r?4:1,t;if((n=t.divToInt(i)).isZero())o=r?3:2;else{if((t=t.minus(n.times(i))).lte(a))return o=U(n)?r?2:3:r?4:1,t;o=U(n)?r?1:4:r?3:2}return t.minus(i).abs()}function X(e,t,n,r){var i,a,o,u,l,h,p,f,m,d=e.constructor,g=void 0!==n;if(g?(E(n,1,1e9),void 0===r?r=d.rounding:E(r,0,8)):(n=d.precision,r=d.rounding),e.isFinite()){for(g?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(p=C(e)).indexOf("."))>=0&&(p=p.replace(".",""),(m=new d(1)).e=p.length-o,m.d=M(C(m),10,i),m.e=m.d.length),a=l=(f=M(p,10,i)).length;0==f[--l];)f.pop();if(f[0]){if(o<0?a--:((e=new d(e)).d=f,e.e=a,f=(e=N(e,m,n,r,0,i)).d,a=e.e,h=s),o=f[n],u=i/2,h=h||void 0!==f[n+1],h=r<4?(void 0!==o||h)&&(0===r||r===(e.s<0?3:2)):o>u||o===u&&(4===r||h||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,h)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,p="";o<l;o++)p+=c.charAt(f[o]);if(g){if(l>1)if(16==t||8==t){for(o=16==t?4:3,--l;l%o;l++)p+="0";for(l=(f=M(p,i,t)).length;!f[l-1];--l);for(o=1,p="1.";o<l;o++)p+=c.charAt(f[o])}else p=p.charAt(0)+"."+p.slice(1);p=p+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)p="0"+p;p="0."+p}else if(++a>l)for(a-=l;a--;)p+="0";else a<l&&(p=p.slice(0,a)+"."+p.slice(a))}else p=g?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=G(e);return e.s<0?"-"+p:p}function Z(e,t){if(e.length>t)return e.length=t,!0}function Y(e){return new this(e).abs()}function J(e){return new this(e).acos()}function Q(e){return new this(e).acosh()}function $(e,t){return new this(e).plus(t)}function ee(e){return new this(e).asin()}function te(e){return new this(e).asinh()}function ne(e){return new this(e).atan()}function re(e){return new this(e).atanh()}function ie(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?R(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=R(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(N(e,t,a,1)),t=R(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(N(e,t,a,1)):(n=R(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ae(e){return new this(e).cbrt()}function se(e){return I(e=new this(e),e.e+1,2)}function oe(e){if(!e||"object"!==typeof e)throw Error("[DecimalError] Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,1e9,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!(d(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(m+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(m+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[n]=!0}else this[n]=!1}return this}function ue(e){return new this(e).cos()}function ce(e){return new this(e).cosh()}function le(e,t){return new this(e).div(t)}function he(e){return new this(e).exp()}function pe(e){return I(e=new this(e),e.e+1,3)}function fe(){var e,t,n=new this(0);for(f=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return f=!0,new this(1/0);n=t}return f=!0,n.sqrt()}function me(e){return e instanceof a||e&&"[object Decimal]"===e.name||!1}function de(e){return new this(e).ln()}function ge(e,t){return new this(e).log(t)}function ve(e){return new this(e).log(2)}function ye(e){return new this(e).log(10)}function xe(){return z(this,arguments,"lt")}function be(){return z(this,arguments,"gt")}function we(e,t){return new this(e).mod(t)}function Se(e,t){return new this(e).mul(t)}function Te(e,t){return new this(e).pow(t)}function _e(e){var t,n,r,i,a=0,s=new this(1),o=[];if(void 0===e?e=this.precision:E(e,1,1e9),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(t=crypto.randomBytes(r*=4);a<r;)(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(i%1e7),a+=4);a=r/4}else for(;a<r;)o[a++]=1e7*Math.random()|0;for(e%=7,(r=o[--a])&&e&&(i=g(10,7-e),o[a]=(r/i|0)*i);0===o[a];a--)o.pop();if(a<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=7)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return s.e=n,s.d=o,s}function Ae(e){return I(e=new this(e),e.e+1,this.rounding)}function Ee(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function ke(e){return new this(e).sin()}function Me(e){return new this(e).sinh()}function Ne(e){return new this(e).sqrt()}function Ie(e,t){return new this(e).sub(t)}function Ce(e){return new this(e).tan()}function De(e){return new this(e).tanh()}function Le(e){return I(e=new this(e),e.e+1,1)}(a=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,e instanceof a)return i.s=e.s,void(f?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(f?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):B(i,e.toString())}if("string"!==r)throw Error(m+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),b.test(e)?B(i,e):K(i,e)}if(a.prototype=_,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=oe,a.clone=e,a.isDecimal=me,a.abs=Y,a.acos=J,a.acosh=Q,a.add=$,a.asin=ee,a.asinh=te,a.atan=ne,a.atanh=re,a.atan2=ie,a.cbrt=ae,a.ceil=se,a.cos=ue,a.cosh=ce,a.div=le,a.exp=he,a.floor=pe,a.hypot=fe,a.ln=de,a.log=ge,a.log10=ye,a.log2=ve,a.max=xe,a.min=be,a.mod=we,a.mul=Se,a.pow=Te,a.random=_e,a.round=Ae,a.sign=Ee,a.sin=ke,a.sinh=Me,a.sqrt=Ne,a.sub=Ie,a.tan=Ce,a.tanh=De,a.trunc=Le,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(p)).default=a.Decimal=a,l=new a(l),h=new a(h),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var i=r(2);r(7),r(6),function(){var e=i.getCore(),t=e.PARSER,r=e.Algebra,a=e.Calculus,s=a.integration.decompose_arg,o=e.Utils.evaluate,u=e.Utils.remove,c=e.Utils.format,l=e.Utils.build,h=e.Symbol,p=e.Utils.isSymbol,f=e.Utils.variables,m=e.groups.S,d=e.groups.PL,g=e.groups.CB,v=e.groups.CP,y=e.groups.FN,x=e.Settings,b=e.Utils.range,w=e.Utils.isArray;function S(t,n){if(n.isConstant()&&t.isConstant()&&!t.equals(n)||t.equals(e.Settings.IMAGINARY)||n.equals(e.Settings.IMAGINARY))throw new e.exceptions.NerdamerValueError(t.toString()+" does not equal "+n.toString());this.LHS=t,this.RHS=n}e.Settings.SOLVE_RADIUS=1e3,e.Settings.ROOTS_PER_SIDE=10,e.Settings.make_pi_conversions=!0,e.Settings.STEP_SIZE=.1,e.Settings.MAX_NEWTON_ITERATIONS=200,e.Settings.MAX_NON_LINEAR_TRIES=12,e.Settings.NON_LINEAR_JUMP_AT=50,e.Settings.NON_LINEAR_JUMP_SIZE=100,e.Settings.NON_LINEAR_START=.01,e.Settings.NEWTON_SLICES=200,e.Settings.NEWTON_EPSILON=2*Number.EPSILON,e.Settings.SOLUTION_PROXIMITY=1e-14,e.Settings.FILTER_SOLUTIONS=!0,e.Settings.MAX_SOLVE_DEPTH=10,e.Symbol.prototype.hasTrig=function(){return this.containsFunction(["cos","sin","tan","cot","csc","sec"])},e.Symbol.prototype.hasNegativeTerms=function(){if(this.isComposite())for(var e in this.symbols){var t=this.symbols[e];if(t.group===d&&t.hasNegativeTerms()||this.symbols[e].power.lessThan(0))return!0}return!1},S.prototype={toString:function(){return this.LHS.toString()+"="+this.RHS.toString()},text:function(e){return this.LHS.text(e)+"="+this.RHS.text(e)},toLHS:function(e){var n;n=(e="undefined"===typeof e)?this.removeDenom():this.clone();var r=t.subtract(n.LHS,n.RHS);return e?t.expand(r):r},removeDenom:function(){var e=this.LHS.clone(),n=this.RHS.clone(),r=t.multiply(e.getDenom(),n.getDenom());if(e=t.expand(t.multiply(e,r.clone())),(n=t.expand(t.multiply(n,r))).group===v&&n.group!==v){var i=e;e=n,n=i}if(e.group===g){i=new h(e.multiplier);var a=n.clone();e.each((function(e){e.power.lessThan(0)?a=t.divide(a,e):i=t.multiply(i,e)})),e=i,n=a}else if(e.group===v)for(var s in e.symbols){var o=e.symbols[s];if(o.group===g)for(var u in o.symbols){var c=o.symbols[u];if(c.power.lessThan(0))return new S(t.expand(t.multiply(c.clone().toLinear(),e)),t.expand(t.multiply(c.clone().toLinear(),n)))}}return new S(e,n)},clone:function(){return new S(this.LHS.clone(),this.RHS.clone())},sub:function(e,t){var n=this.clone();return n.LHS=n.LHS.sub(e.clone(),t.clone()),n.RHS=n.RHS.sub(e.clone(),t.clone()),n},isZero:function(){return e.Utils.evaluate(this.toLHS()).equals(0)},latex:function(e){return[this.LHS.latex(e),this.RHS.latex(e)].join("=")}},t.equals=function(e,t){return new S(e,t)},e.Expression.prototype.equals=function(t){return t instanceof e.Expression&&(t=t.symbol),new S(this.symbol,t)},e.Expression.prototype.solveFor=function(t){var n;if(this.symbol instanceof S){if(this.symbol.LHS.isConstant()&&this.symbol.RHS.equals(t))return new e.Expression(this.symbol.LHS);if(this.symbol.RHS.isConstant()&&this.symbol.LHS.equals(t))return new e.Expression(this.symbol.RHS);n=this.symbol.toLHS()}else n=this.symbol;return E(n,t).map((function(t){return new e.Expression(t)}))},e.Expression.prototype.expand=function(){if(this.symbol instanceof S){var n=this.symbol.clone();return n.RHS=t.expand(n.RHS),n.LHS=t.expand(n.LHS),new e.Expression(n)}return new e.Expression(t.expand(this.symbol))},e.Expression.prototype.variables=function(){return this.symbol instanceof S?e.Utils.arrayUnique(f(this.symbol.LHS).concat(f(this.symbol.RHS))):f(this.symbol)},e.Matrix.jacobian=function(t,n){var r=new e.Matrix;return n||(n=A.getSystemVariables(t)),n.forEach((function(n,i){t.forEach((function(t,a){var s=e.Calculus.diff(t.clone(),n);r.set(a,i,s)}))})),r},e.Matrix.prototype.max=function(){var e=new h(0);return this.each((function(t){var n=t.abs();n.gt(e)&&(e=n)})),e},e.Matrix.cMatrix=function(n,r){var i=new e.Matrix;return r.forEach((function(e,r){i.set(r,0,t.parse(n))})),i};var T=function(e,n){return t.equals(e,n)};e.Equation=S;var _=e.Utils.checkAll=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!1;return!0},A=e.Solve={version:"2.0.3",solutions:[],solve:function(t,n){var r=E(t,String(n));return new e.Vector(r)},toLHS:function(e,n){if(p(e))return e;if(!(e instanceof S)){var r=e.split("=");r[1]=r[1]||"0",e=new S(t.parse(r[0]),t.parse(r[1]))}return e.toLHS(n)},getSystemVariables:function(t){vars=f(t[0],null,null,!0);for(var n=1,r=t.length;n<r;n++)vars=vars.concat(f(t[n]));return vars=e.Utils.arrayUnique(vars).sort(),vars},solveNonLinearSystem:function(r,i,a){if(i<0)return[];a="undefined"===typeof a?e.Settings.NON_LINEAR_START:a;var s=e.Settings.MAX_NON_LINEAR_TRIES,o=Math.floor(s/2);i="undefined"===typeof i?s:i;var u,c,h,p,f,m,d,g,v=e.Settings.NON_LINEAR_JUMP_AT,y=e.Settings.NON_LINEAR_JUMP_SIZE,x=!0,b=function(e,t){return e.map((function(e,n){return Number(t.get(n,0))}))},w=A.getSystemVariables(r),S=e.Matrix.jacobian(r,w,(function(e){return l(e,w)}),!0),T=e.Settings.MAX_NEWTON_ITERATIONS,_=r.map((function(e){return l(e,w)})),E=S.map((function(e){return l(e,w)}),!0);p=e.Matrix.cMatrix(0,w);var k=e.Matrix.cMatrix(a,w);h=0;do{if(h>T)break;u=b(w,k),d=k.clone(),_.forEach((function(e,t){k.set(t,0,e.apply(null,u))}));var M=new e.Matrix;if(E.each((function(e,t,n){var r=e.apply(null,u);M.set(t,n,r)})),M=M.invert(),g=(c=t.multiply(M,k).negate()).subtract(p,(function(e){return t.parse(Number(e))})),p=d.add(c,(function(e){return t.parse(Number(e))})),k=p,h>=v&&f>1){i===o&&(a=0);var N=i>o?1:-1;return n=i%Math.floor(o)+1,a+=N*n*y,A.solveNonLinearSystem(r,--i,a)}if(m=f,h++,f=g.max(),Number(f)===Number(m))break}while(Number(f)>=Number.EPSILON);return x?A.systemSolutions(k,w,!0,(function(t){return e.Utils.round(Number(t),14)})):[]},systemSolutions:function(n,r,i,a){var s=e.Settings.SOLUTIONS_AS_OBJECT?{}:[];return n.each((function(n,o){var u=(i?t.expand(n):n).valueOf();a&&(u=a.call(n,u));var c=r[o];e.Settings.SOLUTIONS_AS_OBJECT?s[c]=u:s.push([c,u])})),s},solveSystem:function(n,a){for(var o=0;o<n.length;o++)n[o]=A.toLHS(n[o]);var c,l=n.length,p=new e.Matrix,f=new e.Matrix,m=!1;if("undefined"===typeof a){if(!r.allLinear(n))return A.solveNonLinearSystem(n);c=A.getSystemVariables(n);for(o=0;o<c.length;o++)i.setVar(c[o],"delete");for(o=0;o<l;o++){for(var d=n[o],g=0;g<l;g++){var v=c[g],y=[];d.each((function(e){e.contains(v)&&(y=y.concat(e.coeffs()))}));var x=e.Utils.arraySum(y);p.set(o,g,x)}var b=d.clone();c.map((function(e){b=b.stripVar(e,!0)})),f.set(o,0,b.negate())}}else for(c=a,m=!0,o=0;o<l;o++){f.set(o,0,new h(0));for(d=t.expand(n[o]).collectSymbols(),g=0;g<a.length;g++){p.set(o,g,new h(0));v=a[g];for(var w=0;w<d.length;w++){for(var S=d[w],T=!1,_=0;_<a.length;_++)S.contains(a[_])&&(T&&e.err("Multiple variables found for term "+S),T=!0);if(S.contains(v)){var E=s(u(d,w),v);p.set(o,g,t.add(p.get(o,g),E[0]))}}}for(w=0;w<d.length;w++)f.set(o,0,t.add(f.get(o,0),d[w]))}if(p.determinant().equals(0))throw new e.exceptions.SolveError("System does not have a distinct solution");var k=(p=p.invert()).multiply(f);return e.Utils.isArray(a)&&k.each((function(e){return e.negate()})),A.systemSolutions(k,c,m)},quad:function(e,n,r){var i=t.subtract(t.pow(n.clone(),h(2)),t.multiply(t.multiply(r.clone(),e.clone()),h(4))),a=t.pow(i,h(.5));return[t.parse(t.divide(t.add(n.clone().negate(),a.clone()),t.multiply(new h(2),r.clone()))),t.parse(t.divide(t.subtract(n.clone().negate(),a.clone()),t.multiply(new h(2),r.clone())))]},cubic:function(n,r,i,a){var s=a.text(),o=i.text(),u=r.text(),l=n.text(),h=t.parse(c("({1})^2-3*({0})*({2})",s,o,u)),p=t.parse(c("((2*({1})^3-9*({0})*({1})*({2})+27*({0})^2*({3}))^2-4*(({1})^2-3*({0})*({2}))^3)^(1/2)",s,o,u,l)),m=t.parse(c("((1/2)*(({4})+2*({1})^3-9*({0})*({1})*({2})+27*({0})^2*({3})))^(1/3)",s,o,u,l,p)),d={};f(m).map((function(e){d[e]=1}));var g=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(m,d)}));return 0===Number(h)&&0===Number(g)&&(m=t.parse(c("((1/2)*(-({4})+2*({1})^3-9*({0})*({1})*({2})+27*({0})^2*({3})))^(1/3)",s,o,u,l,p))),["-(b/(3*a))-C/(3*a)-(((b^2-3*a*c))/(3*a*C))","-(b/(3*a))+(C*(1+i*sqrt(3)))/(6*a)+((1-i*sqrt(3))*(b^2-3*a*c))/(6*a*C)".replace(/i/g,e.Settings.IMAGINARY),"-(b/(3*a))+(C*(1-i*sqrt(3)))/(6*a)+((1+i*sqrt(3))*(b^2-3*a*c))/(6*a*C)".replace(/i/g,e.Settings.IMAGINARY)].map((function(e,s){var o={a:a.clone(),b:i.clone(),c:r.clone(),d:n.clone(),C:m.clone()};return t.parse(e,o)}))},quartic:function(n,r,i,a,s){var o,u,l,h,p,d={};return e.Utils.arrayUnique(f(s).concat(f(a)).concat(f(i)).concat(f(r)).concat(f(n))).map((function(e){d[e]=1})),s=s.toString(),a=a.toString(),i=i.toString(),r=r.toString(),n=n.toString(),o=t.parse(c("(8*({0})*({2})-3*({1})^2)/(8*({0})^2)",s,a,i)).toString(),u=t.parse(c("(({1})^3-4*({0})*({1})*({2})+8*({0})^2*({3}))/(8*({0})^3)",s,a,i,r)).toString(),l=t.parse(c("12*({0})*({4})-3*({1})*({3})+({2})^2",s,a,i,r,n)).toString(),h=t.parse(c("2*({2})^3-9*({1})*({2})*({3})+27*({1})^2*({4})+27*({0})*({3})^2-72*({0})*({2})*({4})",s,a,i,r,n)).toString(),p=t.parse(c("((({1})+(({1})^2-4*({0})^3)^(1/2))/2)^(1/3)",l,h)).toString(),m=t.parse(c("(1/2)*(-(2/3)*({1})+(1/(3*({0}))*(({2})+(({3})/({2})))))^(1/2)",s,o,p,l)).toString(),[t.parse(c("-(({1})/(4*({0})))-({4})+(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",s,a,o,u,m)),t.parse(c("-(({1})/(4*({0})))-({4})-(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",s,a,o,u,m)),t.parse(c("-(({1})/(4*({0})))+({4})+(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",s,a,o,u,m)),t.parse(c("-(({1})/(4*({0})))+({4})-(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",s,a,o,u,m))]},divideAndConquer:function(t,n){var r=[],i=e.Algebra.Factor.factor(t);return i.group===g&&i.each((function(e){e=h.unwrapPARENS(e),r=r.concat(E(e,n))})),r},csolve:function(n,r){return e.Utils.block("IGNORE_E",(function(){var i,a,s,o,u,l,p,f;if(f=[],(i=e.Utils.decompose_fn(n,r,!0)).x.group===m){var d,g;a=t.parse(i.x.power),s=Number(a),o=t.pow(t.divide(i.b.negate(),i.a),a.invert()),l=(u=h.toPolarFormArray(o))[0],u[1],p=l.toString(),a.toString();for(var v=0;v<s;v++)g=c("({0})*e^(2*{1}*pi*{2}*{3})",p,v,a,e.Settings.IMAGINARY),d=t.parse(g),f.push(d)}return f}),!0)},getPoints:function(t,n,r){n=n||.01,r=r||[];var i=l(t),a=Math.round(0),s=i(a),o=s/Math.abs(s),u=e.Settings.ROOTS_PER_SIDE,c=u;r.push(Math.floor(a/2)),r.push(Math.abs(a)),r.push(a),t.each((function(t){t.containsFunction(e.Settings.LOG)&&r.push(.1)}));var h=b(-e.Settings.SOLVE_RADIUS,a,n),p=b(a,e.Settings.SOLVE_RADIUS,n),f=function(e,t){for(var n,a,s,u=[],c=0,l=e.length;c<l;c++)n=e[c],s=(a=i(n))/Math.abs(a),isNaN(a)||!isFinite(a)||u.length>t||(s!==o&&u.push(n),o=s);r=r.concat(u)};return f(h,c),f(p,u),r},Newton:function(t,n,r){var i,a=e.Settings.MAX_NEWTON_ITERATIONS,s=0,o=t;do{var u=n(o);if(0===o&&0===u){i=0;break}if(++s>a)return;i=o-u/r(o);var c=Math.abs(i-o);o=i}while(c>x.NEWTON_EPSILON);if(Math.abs(n(i))<=1e-13)return i},rewrite:function(n,r,i){if(r=r||new h(0),n.isComposite()&&n.isLinear()){var a=[],s=[];n.each((function(e){"sqrt"===(e=e.clone()).fname&&e.contains(i)?a.push(e):s.push(e)}),!0),1===a.length&&(r=t.expand(t.pow(t.subtract(r,e.Utils.arraySum(s)),new h(2))),n=t.expand(t.pow(h.unwrapSQRT(a[0]),new h(2))))}else n=h.unwrapSQRT(t.expand(n));var o=0,u=n.length;if(n.group===v&&n.contains(i)&&n.isLinear()){n.distributeMultiplier();var c=new h(0);return n.each((function(e){e.contains(i)?(o++,c=t.add(c,e.clone())):r=t.subtract(r,e.clone())})),n=c,o!==u?A.rewrite(n,r,i):[n,r]}if(n.group===g&&n.contains(i)&&n.isLinear()){if(n.multiplier.lessThan(0)&&(n.multiplier=n.multiplier.multiply(new e.Frac(-1)),r.multiplier=r.multiplier.multiply(new e.Frac(-1))),r.equals(0))return new h(0);c=new h(1);return n.each((function(e){e.contains(i)?c=t.multiply(c,e.clone()):r=t.divide(r,e.clone())})),n=c,A.rewrite(n,r,i)}if(!n.isLinear()&&n.contains(i)){var l=t.parse(n.power.clone().invert());return n=t.pow(n,l.clone()),r=t.pow(t.expand(r),l.clone()),A.rewrite(n,r,i)}if(n.group===y||n.group===m||n.group===d)return[n,r]},sqrtSolve:function(e,n){var r=new h(0),i=new h(0);if(e.isComposite()&&(e.each((function(e){"sqrt"===e.fname&&e.contains(n)?r=t.add(r,e.clone()):i=t.add(i,e.clone())})),!r.equals(0))){var a=t.expand(t.multiply(t.parse(e.multiplier),t.subtract(t.pow(i,new h(2)),t.pow(r,new h(2))))),s=E(a,n);return s=s.filter((function(t){if(t.isImaginary())return t;var r={};return r[n]=t,o(e,r).equals(0)?t:void 0}))}}},E=function n(i,o,u,c){if(c=c||0,c++>x.MAX_SOLVE_DEPTH)return u;if(i instanceof S){if(i.isZero())return[new h(0)];if(i.LHS.equals(o)&&!i.RHS.contains(o))return[i.RHS];if(i.RHS.equals(o)&&!i.LHS.contains(o))return[i.LHS]}if(i instanceof e.Vector&&(i=i.elements),o=o||"x",w(i))return A.solveSystem.apply(void 0,arguments);u=u||[];var f={},b=function n(r,i){var a=p(r);if(!(void 0===r||"number"===typeof r&&isNaN(r)))if(w(r))r.map((function(e){n(e)}));else if("null"!==r.valueOf()){if(a||(r=t.parse(r)),e.Settings.make_pi_conversions&&i){var s=t.divide(r.clone(),new h(Math.PI)),o=s.multiplier,c=Math.abs(o.num),l=Math.abs(o.den);c<10&&l<10&&(r=t.multiply(s,new h("pi")))}var m=r.toString();f[m]||u.push(r),f[m]=!0}};if(i.group===m&&i.contains(o))return b(new h(0)),u;if(i.group===g){var T=String(o);return i.each((function(e){e.contains(T)&&n(e,o,u)})),u}i.group===y&&"sqrt"===i.fname&&(i=t.pow(h.unwrapSQRT(i),new h(2)));var E=(e.Utils.isSymbol(i)?i:A.toLHS(i,!1)).getNum(),k=e.Utils.variables(E),M=k.length;if(e.Utils.isInt(E.power)&&E.power>0&&(E=t.parse(E).toLinear()),E.group===m||E.group===g&&E.contains(o))return[new h(0)];var N,I={},C=function n(r){var i=(r=t.expand(r)).clone();if(r.symbols)for(var a in r.symbols){var u=r.symbols[a],c=u.getDenom();if(!c.isConstant(!0)&&r.isComposite()){var l=new h(0);return r.each((function(e){l=t.add(l,t.multiply(e,c.clone()))})),n(t.multiply(t.parse(r.multiplier),l))}var f=s(u,o),m=f[1].fname===e.Settings.SQRT,g=h.unwrapSQRT(f[1]),v=g.power.clone();if(!p(v)&&!v.equals(.5))if(v.den.gt(1)){if(m)return r=t.subtract(r,u.clone()),n(r=t.add(r,t.multiply(f[0].clone(),g)));var y=I[v.den];I[v.den]=y?y++:1}else{if(-1===v.sign()){var x=t.parse(o+"^"+Math.abs(v));return r.each((function(e,n){e.contains(o)&&(r.symbols[n]=t.multiply(e,x.clone()))})),I={},n(t.parse(r))}if(u.group===d){var b=e.Utils.arrayMin(e.Utils.keys(u.symbols));if(b<0){x=t.parse(o+"^"+Math.abs(b));var w=new h(0);return i.each((function(e){w=t.add(w,t.multiply(e.clone(),x.clone()))}),!0),w}}}}return r},D=function(e){var n=new h(0),r=new h(0);return e.each((function(e){e.contains(o,!0)?n=t.add(n,e.clone()):r=t.subtract(r,e.clone())})),[n,r]};if(A.inverseFunctionSolve=function(e,n,r){var i=s(n.args[0],o);if(i[1].group===m)return t.divide(t.symfunction(e,[t.divide(r,t.parse(n.multiplier))]),i[0])},(E=C(E)).equals(0))return[E];var L=e.Utils.keys(I);if(1===L.length&&(N=L[0],E.each((function(n,r){if(n.contains(o)){var i=s(n,o),a=i[1],u=a.power;u.den.gt(1)&&(a.power=u.multiply(new e.Frac(N)),E.symbols[r]=t.multiply(a,i[0]))}})),E=t.parse(E)),b(A.sqrtSolve(E,o)),1===M)if(E.isPoly(!0)){var R=new e.Algebra.Classes.Factors;if(e.Algebra.Factor.factor(E,R),R.getNumberSymbolics()>1)for(var O in R.factors)b(n(R.factors[O],o));else{var F=(Y=e.Utils.getCoeffs(E,o)).length-1,P=!1;if(k[0]===o){if(_(Y,(function(t){return t.group!==e.groups.N}))){var U=e.Algebra.proots(E);_(U,(function(t){return!e.Utils.isInt(t)}))&&(P=!0,U.map((function(e){b(new h(e))})))}if(!P)if((i=t.parse(i))instanceof e.Equation&&(i=i.toLHS()),1===F)b(t.divide(Y[0],Y[1].negate()));else if(2===F)b(t.expand(A.quad.apply(void 0,Y)));else if(3===F){u=[];var z=e.Algebra.Factor.factor(i);(u=z.equals(i)?[]:n(z,o)).length>0?b(u):b(A.cubic.apply(void 0,Y))}else r.proots(E).map(b)}}}else try{for(var V=E.hasTrig(),q=A.getPoints(E,.1),G=A.getPoints(E,.05),B=A.getPoints(E,.01),K=e.Utils.arrayUnique(q.concat(G).concat(B)).sort((function(e,t){return e-t})),j=l(E.clone()),H=a.diff(E.clone()),W=l(H),X=0;X<K.length;X++){var Z=K[X];b(A.Newton(Z,j,W),V)}u.sort()}catch(ae){console.log(ae)}else if(!E.hasFunc(o)&&E.isComposite())try{if((z=e.Algebra.Factor.factor(E.clone())).group===g)z.each((function(e){b(n(e,o))}));else{var Y,J=(Y=e.Utils.getCoeffs(E,o)).length;switch(F=J-1){case 0:var Q=(re=D(E))[0],$=re[1];Q.group===e.groups.EX&&b(t.parse(e.Utils.format(e.Settings.LOG+"(({0})/({2}))/"+e.Settings.LOG+"({1})",$,Q.value,Q.multiplier)));break;case 1:b(t.divide(Y[0],Y[1].negate()));break;case 2:b(A.quad.apply(void 0,Y));break;case 3:b(A.cubic.apply(void 0,Y));break;case 4:b(A.quartic.apply(void 0,Y));break;default:b(A.csolve(E,o)),0===u.length&&b(A.divideAndConquer(E,o))}0===u.length&&b(n(z,o,u,c))}}catch(ae){}else try{var ee=A.rewrite(E,null,o);Q=ee[0],$=ee[1];if(Q.group===y)if("abs"===Q.fname)b([$.clone(),$.negate()]);else if("sin"===Q.fname)b(A.inverseFunctionSolve("asin",Q,$));else if("cos"===Q.fname)b(A.inverseFunctionSolve("acos",Q,$));else if("tan"===Q.fname)b(A.inverseFunctionSolve("atan",Q,$));else if(Q.fname===e.Settings.LOG){var te=s(Q.args[0],o);if((O=te[1]).group===m){E=new S(O,$=t.divide(t.subtract(t.pow(Q.args.length>1?Q.args[1]:new h("e"),t.divide($,t.parse(Q.multiplier))),te[3]),te[0])).toLHS();b(n(E,o))}}else b(t.subtract(Q,$));else{var ne=new S(Q,$).toLHS();if(ne.equals(E))throw new Error("Stopping. No stop condition exists");b(n(ne,o))}}catch(se){try{if(E.group===g)b(0);else if(E.group===v){var re;Q=(re=D(E))[0],$=re[1];if(Q.group===e.groups.EX&&Q.value===o){var ie=Q.power.clone().invert();b(t.pow($,ie))}}}catch(se){}}return N&&(u=u.map((function(e){return t.pow(e,new h(N))}))),u};i.register([{name:"solveEquations",parent:"nerdamer",numargs:-1,visible:!0,build:function(){return E}},{name:"solve",parent:"Solve",numargs:2,visible:!0,build:function(){return e.Solve.solve}},{name:"setEquation",parent:"Solve",visible:!0,build:function(){return T}}]),i.api()}()},function(e,t,n){var r=n(2);n(7),n(6),function(){"use strict";var e=r.getCore(),t=e.PARSER,n=e.Symbol,i=e.Utils.format,a=e.Utils.isVector,s=e.Utils.isArray,o=(e.Vector,e.groups.S),u=(e.groups.EX,e.groups.CP),c=e.groups.CB,l=e.groups.FN;e.Settings.Laplace_integration_depth=40,n.prototype.findFunction=function(e){if(this.group===l&&this.fname===e)return this.clone();var t;if(this.symbols)for(var n in this.symbols)if(t=this.symbols[n].findFunction(e))break;return t};var h=e.Extra={version:"1.4.1",LaPlace:{transform:function(r,a,s){r=r.clone(),a=a.toString();var u,p=(r=n.unwrapSQRT(r,!0)).stripVar(a),f=r.group;if((r=t.divide(r,p.clone())).isConstant()||!r.contains(a,!0))u=t.parse(i("({0})/({1})",r,s));else if(f===o&&e.Utils.isInt(r.power)){var m=String(r.power);u=t.parse(i("factorial({0})/({1})^({0}+1)",m,s))}else if(r.group===o&&r.power.equals(.5))u=t.parse(i("sqrt(pi)/(2*({0})^(3/2))",s));else if(r.isComposite())u=new n(0),r.each((function(e){u=t.add(u,h.LaPlace.transform(e,a,s))}),!0);else if(!r.isE()||r.power.group!==o&&r.power.group!==c){if(r.group!==l||-1===["sin","cos","sinh","cosh"].indexOf(r.fname)||r.args[0].group!==o&&r.args[0].group!==c){var d=e.Settings.integration_depth<e.Settings.Laplace_integration_depth;if(d){var g=e.Settings.integration_depth;e.Settings.integration_depth=e.Settings.Laplace_integration_depth}e.Utils.block("PARSE2NUMBER",(function(){var i=a,o=r.sub(a,i),c=t.parse("e^(-"+s+"*"+i+")*"+o);if((u=e.Calculus.integrate(c,i)).hasIntegral())return t.symfunction("laplace",arguments);u=u.sub(a,0),u=(u=t.expand(t.multiply(u,new n(-1)))).sub(i,a)}),!1),u=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(u)}),!0),d&&(e.Settings.integration_depth=g)}else{v=r.args[0].stripVar(a);switch(r.fname){case"sin":u=t.parse(i("({0})/(({1})^2+({0})^2)",v,s));break;case"cos":u=t.parse(i("({1})/(({1})^2+({0})^2)",v,s));break;case"sinh":u=t.parse(i("({0})/(({1})^2-({0})^2)",v,s));break;case"cosh":u=t.parse(i("({1})/(({1})^2-({0})^2)",v,s))}}}else{var v=r.power.stripVar(a);u=t.parse(i("1/(({1})-({0}))",v,s))}return t.multiply(u,p)},inverse:function(r,a,s){var l=r.clone();return e.Utils.block("POSITIVE_MULTIPLIERS",(function(){if(r.group===c&&(r=e.Algebra.PartFrac.partfrac(t.expand(r),a)),r.group===o||r.group===c||r.isComposite()){var p,f,m,d,g,v,y,x,b,w=function(){(d=t.multiply(d,p)).multiplier=d.multiplier.multiply(r.multiplier),d=t.divide(d,g.a)};if(v=r.multiplier.clone(),r.toUnitMultiplier(),p=r.getNum(),(f=r.getDenom().toUnitMultiplier()).group===u?(y=f.power.clone(),f.toLinear()):y=new e.Frac(1),m=a.toString(),g=e.Utils.decompose_fn(f,m,!0),e.Utils.decompose_fn(t.expand(p.clone()),m,!0),p.multiplier=p.multiplier.multiply(v),(f.group===o||f.group===c)&&g.x.value===m&&g.b.equals(0)&&e.Utils.isInt(g.x.power))b=g.x.power-1,x=e.Math2.factorial(b),d=t.divide(t.pow(s,new n(b)),new n(x)),w();else if(f.group===u&&y.equals(1)){if(g.x.isLinear()&&!p.contains(m))s=t.divide(s,g.a.clone()),d=t.parse(i("(({0})^({3}-1)*e^(-(({2})*({0}))/({1})))/(({3}-1)!*({1})^({3}))",s,g.a,g.b,y)),w();else if(g.x.group===o&&g.x.power.equals(2))if(p.contains(m)){var S=new n(1);if(p.group===c){var T=new n(1);p.each((function(e){e.contains(m)?T=t.multiply(T,e):S=t.multiply(S,e)})),p=T}var _,A,E,k,M,N,I,C,D,L,R=e.Utils.decompose_fn(p,m,!0);if(_=R.a,A=R.b,E=_.containsFunction("sin"),M=_.containsFunction("cos"),k=A.containsFunction("cos"),N=A.containsFunction("sin"),R.x.value===m&&R.x.isLinear()&&!(E&&k||M||N))d=t.parse(i("(({1})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})",s,R.a,g.a,g.b));else if(E&&k)if(I=_.findFunction("sin"),C=A.findFunction("cos"),I.args[0].equals(C.args[0])&&!I.args[0].contains(m))O=t.divide(A,C.toUnitMultiplier()).toString(),D=I.args[0].toString(),F=g.b,L=t.divide(_,I.toUnitMultiplier()),P="(({1})*({2})*cos({3})*sin(sqrt({4})*({0})))/sqrt({4})+({1})*sin({3})*({5})*cos(sqrt({4})*({0}))",d=t.parse(i(P,s,S,O,D,F,L))}else d=t.parse(i("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/sqrt(({2})*({3}))",s,p,g.a,g.b))}else if(g.x.power.num&&g.x.power.num.equals(3)&&g.x.power.den.equals(2)&&p.contains("sqrt(pi)")&&!p.contains(m)&&p.isLinear()){var O=t.divide(p.clone(),t.parse("sqrt(pi)"));d=t.parse(i("(2*({2})*sqrt({0}))/({1})",s,g.a,O,p))}else if(y.equals(2)&&g.x.power.equals(2)){var F,P;if(p.contains(m))if((R=e.Utils.decompose_fn(t.expand(p.clone()),m,!0)).x.isComposite()){var U=[],z=p.collectSymbols((function(t){t=n.unwrapPARENS(t);var r=e.Utils.decompose_fn(t,m,!0);return r.symbol=t,r})).sort((function(e,t){var n;return n=e.x.value!==m?0:e.x.power,(t.x.value!==m?0:t.x.power)-n}));S=new n(-1);for(var V=0;V<z.length;V++){var q=z[V];q.x.value===m?U.push(q):S=t.multiply(S,q.symbol)}U[0].x.power.equals(2)&&U[1].x.power.equals(1)&&U[1].b.equals(0)&&!U[0].b.equals(0)&&(O=U[0].a.negate(),P="-(({1})*({2})*({5})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})^2*sqrt(({4})*({5})))-(({1})*({3})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})*sqrt(({4})*({5})))+(({1})*({2})*cos((sqrt(({4})*({5}))*({0}))/({4})))/({4})^2",d=t.parse(i(P,s,S,O,U[0].b,g.a,g.b)))}else R.x.isLinear()?(S=t.divide(R.a,new n(2)),P="(({1})*({0})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))",d=t.parse(i(P,s,S,g.a,g.b))):R.x.power.equals(2)&&(R.b.equals(0)?(S=t.divide(R.a,new n(2)),P="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",d=t.parse(i(P,s,S,g.a,g.b))):(S=t.divide(R.a,new n(2)),F=R.b.negate(),P="-((({2})*({4})-2*({1})*({3}))*sin((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3})*sqrt(({2})*({3})))+(({4})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3}))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",d=t.parse(i(P,s,S,g.a,g.b,F))));else S=t.divide(p,new n(2)),P="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({3})*sqrt(({2})*({3})))-(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*({3}))",d=t.parse(i(P,s,S,g.a,g.b))}else r.isComposite()&&(d=new n(0),r.each((function(e){d=t.add(d,h.LaPlace.inverse(e,a,s))}),!0))}return d||(d=t.symfunction("ilt",[l,a,s])),d}),!0)}},Statistics:{frequencyMap:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n].toString();t[i]||(t[i]=0),t[i]++}return t},sort:function(e){return e.sort((function(e,n){return e.isConstant()&&n.isConstant()||t.error("Unable to sort! All values must be numeric"),e.multiplier.subtract(n.multiplier)}))},count:function(e){return new n(e.length)},sum:function(e,r){for(var i=new n(0),a=0,s=e.length;a<s;a++){var o=e[a].clone();i=r?t.add(t.pow(t.subtract(o,r.clone()),new n(2)),i):t.add(o,i)}return i},mean:function(){var e=[].slice.call(arguments);return a(e[0])?h.Statistics.mean.apply(this,e[0].elements):t.divide(h.Statistics.sum(e),h.Statistics.count(e))},median:function(){var n,r=[].slice.call(arguments);if(a(r[0]))return h.Statistics.median.apply(this,r[0].elements);try{var i=h.Statistics.sort(r),s=r.length;if(e.Utils.even(s)){var o=s/2;n=h.Statistics.mean(i[o-1],i[o])}else n=i[Math.floor(s/2)]}catch(u){n=t.symfunction("median",r)}return n},mode:function(){var n,r=[].slice.call(arguments);if(a(r[0]))return h.Statistics.mode.apply(this,r[0].elements);var i=h.Statistics.frequencyMap(r);if(1===e.Utils.keys(i).length)n=r[0];else{var o={};for(var u in i){var c=i[u];if(c in o){var l=o[c];s(l)?l.push(u):o[c]=[u,o[c]]}else o[c]=u}var p=o[Math.max.apply(null,e.Utils.keys(o))];n=s(p)?t.symfunction("mode",p.sort()):t.parse(p)}return n},gVariance:function(e,n){var r=h.Statistics.mean.apply(h.Statistics,n),i=h.Statistics.sum(n,r);return t.multiply(e,i)},variance:function(){var e=[].slice.call(arguments);if(a(e[0]))return h.Statistics.variance.apply(this,e[0].elements);var r=t.divide(new n(1),h.Statistics.count(e));return h.Statistics.gVariance(r,e)},sampleVariance:function(){var e=[].slice.call(arguments);if(a(e[0]))return h.Statistics.sampleVariance.apply(this,e[0].elements);var r=t.divide(new n(1),t.subtract(h.Statistics.count(e),new n(1)));return h.Statistics.gVariance(r,e)},standardDeviation:function(){var e=[].slice.call(arguments);return a(e[0])?h.Statistics.standardDeviation.apply(this,e[0].elements):t.pow(h.Statistics.variance.apply(h.Statistics,e),new n(.5))},sampleStandardDeviation:function(){var e=[].slice.call(arguments);return a(e[0])?h.Statistics.sampleStandardDeviation.apply(this,e[0].elements):t.pow(h.Statistics.sampleVariance.apply(h.Statistics,e),new n(.5))},zScore:function(e,n,r){return t.divide(t.subtract(e,n),r)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};r.register([{name:"laplace",visible:!0,numargs:3,build:function(){return h.LaPlace.transform}},{name:"ilt",visible:!0,numargs:3,build:function(){return h.LaPlace.inverse}},{name:"mean",visible:!0,numargs:-1,build:function(){return h.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return h.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return h.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return h.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return h.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return h.Statistics.sampleStandardDeviation}},{name:"stdev",visible:!0,numargs:-1,build:function(){return h.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return h.Statistics.zScore}}]),r.api()}()},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(19);function i(t,n,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},function(e,t,n){var r=n(8);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(23);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(8),i=n(25),a=n(26);e.exports=function(e){return function(){var t,n=r(e);if(i()){var s=r(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return a(this,t)}}},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(27),i=n(28);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(30),i=n(31),a=n(32),s=n(34);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||s()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}},function(e,t,n){var r=n(33);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Mat",(function(){return Ri})),n.d(r,"mat2csv",(function(){return Gi})),n.d(r,"csv2mat",(function(){return Bi})),n.d(r,"mat2json",(function(){return Ki})),n.d(r,"json2mat",(function(){return ji})),n.d(r,"Scalar",(function(){return Hi}));var i={};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e,t,n){return(h=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function p(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(i),n.d(i,"Sym",(function(){return na})),n.d(i,"Mat",(function(){return Ri})),n.d(i,"Scalar",(function(){return Hi})),n.d(i,"_Mat",(function(){return r})),n.d(i,"mat",(function(){return oa})),n.d(i,"sym",(function(){return ua})),n.d(i,"scalar",(function(){return ca})),n.d(i,"diff",(function(){return la})),n.d(i,"integrate",(function(){return ha})),n.d(i,"csv2mat",(function(){return pa})),n.d(i,"mat2csv",(function(){return fa})),n.d(i,"json2mat",(function(){return ma})),n.d(i,"mat2json",(function(){return da})),n.d(i,"sin",(function(){return ga})),n.d(i,"cos",(function(){return va})),n.d(i,"abs",(function(){return ya})),n.d(i,"acos",(function(){return xa})),n.d(i,"acosh",(function(){return ba})),n.d(i,"sign",(function(){return wa})),n.d(i,"sqrt",(function(){return Sa})),n.d(i,"trunc",(function(){return Ta})),n.d(i,"floor",(function(){return _a})),n.d(i,"ceil",(function(){return Aa})),n.d(i,"exp",(function(){return Ea})),n.d(i,"log",(function(){return ka})),n.d(i,"asin",(function(){return Ma})),n.d(i,"asinh",(function(){return Na})),n.d(i,"atan",(function(){return Ia})),n.d(i,"atanh",(function(){return Ca})),n.d(i,"tan",(function(){return Da})),n.d(i,"tanh",(function(){return La})),n.d(i,"pow",(function(){return Ra})),n.d(i,"round",(function(){return Oa})),n.d(i,"Ns",(function(){return Fa})),n.d(i,"ones",(function(){return Pa})),n.d(i,"zeros",(function(){return Ua})),n.d(i,"diag",(function(){return za})),n.d(i,"eye",(function(){return Va})),n.d(i,"random",(function(){return qa})),n.d(i,"range",(function(){return Ga})),n.d(i,"chol",(function(){return Ba})),n.d(i,"qr",(function(){return Ka})),n.d(i,"lu",(function(){return ja})),n.d(i,"tic",(function(){return Wa})),n.d(i,"toc",(function(){return Xa})),n.d(i,"_OUTPUT_ITEMS_LIST_",(function(){return Za})),n.d(i,"print",(function(){return Ya})),n.d(i,"draw",(function(){return Ja})),n.d(i,"plot2D",(function(){return Qa})),n.d(i,"plot2DLine",(function(){return $a})),n.d(i,"plot3D",(function(){return es})),n.d(i,"plot3DMesh",(function(){return ts})),n.d(i,"tex",(function(){return ns})),n.d(i,"formulaTex",(function(){return rs})),n.d(i,"markdown",(function(){return is}));var f=Symbol("Comlink.proxy"),m=Symbol("Comlink.endpoint"),d=Symbol("Comlink.releaseProxy"),g=Symbol("Comlink.thrown"),v=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},y=new Map([["proxy",{canHandle:function(e){return v(e)&&e[f]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return x(e,n),[r,[r]]},deserialize:function(e){return e.start(),function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,a=new Proxy(r,{get:function(r,s){if(w(i),s===d)return function(){return M(t,{type:5,path:n.map((function(e){return e.toString()}))}).then((function(){b(t),i=!0}))};if("then"===s){if(0===n.length)return{then:function(){return a}};var o=M(t,{type:0,path:n.map((function(e){return e.toString()}))}).then(k);return o.then.bind(o)}return e(t,[].concat(p(n),[s]))},set:function(e,r,a){w(i);var s=o(E(a),2),u=s[0],c=s[1];return M(t,{type:1,path:[].concat(p(n),[r]).map((function(e){return e.toString()})),value:u},c).then(k)},apply:function(r,a,s){w(i);var u=n[n.length-1];if(u===m)return M(t,{type:4}).then(k);if("bind"===u)return e(t,n.slice(0,-1));var c=o(S(s),2),l=c[0],h=c[1];return M(t,{type:2,path:n.map((function(e){return e.toString()})),argumentList:l},h).then(k)},construct:function(e,r){w(i);var a=o(S(r),2),s=a[0],u=a[1];return M(t,{type:3,path:n.map((function(e){return e.toString()})),argumentList:s},u).then(k)}});return a}(e,[],t);var t}}],["throw",{canHandle:function(e){return v(e)&&g in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;t.addEventListener("message",(function n(r){if(r&&r.data){var i,a=Object.assign({path:[]},r.data),s=a.id,c=a.type,l=a.path,f=(r.data.argumentList||[]).map(k);try{var m=l.slice(0,-1).reduce((function(e,t){return e[t]}),e),d=l.reduce((function(e,t){return e[t]}),e);switch(c){case 0:i=d;break;case 1:m[l.slice(-1)[0]]=k(r.data.value),i=!0;break;case 2:i=d.apply(m,f);break;case 3:var v;i=A(h(d,p(f)));break;case 4:var y=new MessageChannel,w=y.port1,S=y.port2;x(e,S),i=_(w,[w]);break;case 5:i=void 0}}catch(v){i=u({value:v},g,0)}Promise.resolve(i).catch((function(e){return u({value:e},g,0)})).then((function(e){var r=o(E(e),2),i=r[0],a=r[1];t.postMessage(Object.assign(Object.assign({},i),{id:s}),a),5===c&&(t.removeEventListener("message",n),b(t))}))}})),t.start&&t.start()}function b(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function w(e){if(e)throw new Error("Proxy has been released and is not useable")}function S(e){var t,n=e.map(E);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var T=new WeakMap;function _(e,t){return T.set(e,t),e}function A(e){return Object.assign(e,u({},f,!0))}function E(e){var t,n=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=s(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}(y);try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1];if(a.canHandle(e)){var u=o(a.serialize(e),2);return[{type:3,name:i,value:u[0]},u[1]]}}}catch(c){n.e(c)}finally{n.f()}return[{type:0,value:e},T.get(e)||[]]}function k(e){switch(e.type){case 3:return y.get(e.name).deserialize(e.value);case 0:return e.value}}function M(e,t,n){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)}))}var N=n(5),I=n.n(N);function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),e}var R=n(11),O={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){return"number"===typeof e}function U(e){return e&&!0===e.constructor.prototype.isBigNumber||!1}function z(e){return e&&"object"===F(e)&&!0===Object.getPrototypeOf(e).isComplex||!1}function V(e){return e&&"object"===F(e)&&!0===Object.getPrototypeOf(e).isFraction||!1}function q(e){return e&&!0===e.constructor.prototype.isUnit||!1}function G(e){return"string"===typeof e}var B=Array.isArray;function K(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function j(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function H(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function W(e){return e&&!0===e.constructor.prototype.isRange||!1}function X(e){return e&&!0===e.constructor.prototype.isIndex||!1}function Z(e){return"boolean"===typeof e}function Y(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function J(e){return e&&!0===e.constructor.prototype.isHelp||!1}function Q(e){return"function"===typeof e}function $(e){return e instanceof Date}function ee(e){return e instanceof RegExp}function te(e){return!(!e||"object"!==F(e)||e.constructor!==Object||z(e)||V(e))}function ne(e){return null===e}function re(e){return void 0===e}function ie(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function ae(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function se(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function oe(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function ue(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function ce(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function le(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function he(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function pe(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function fe(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function me(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function de(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function ge(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function ve(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function ye(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function xe(e){return e&&!0===e.constructor.prototype.isChain||!1}function be(e){var t=F(e);return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":U(e)?"BigNumber":z(e)?"Complex":V(e)?"Fraction":K(e)?"Matrix":q(e)?"Unit":X(e)?"Index":W(e)?"Range":Y(e)?"ResultSet":fe(e)?e.type:xe(e)?"Chain":J(e)?"Help":"Object":"function"===t?"Function":t}function we(e){return(we="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e){var t=we(e);if("number"===t||"string"===t||"boolean"===t||null===e||void 0===e)return e;if("function"===typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return Se(e)}));if(e instanceof Date)return new Date(e.valueOf());if(U(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Te(e,Se)}function Te(e,t){var n={};for(var r in e)Ee(e,r)&&(n[r]=t(e[r]));return n}function _e(e,t){for(var n in t)Ee(t,n)&&(e[n]=t[n]);return e}function Ae(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!Ae(e[r],t[r]))return!1;return!0}if("function"===typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!Ae(e[n],t[n]))return!1;for(n in t)if(!(n in e)||!Ae(e[n],t[n]))return!1;return!0}return e===t}function Ee(e,t){return e&&Object.hasOwnProperty.call(e,t)}var ke=["Matrix","Array"],Me=["number","BigNumber","Fraction"];function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ie=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(O)};function Ce(e){return"boolean"===typeof e||!!isFinite(e)&&e===Math.round(e)}Ne(Ie,O,{MATRIX_OPTIONS:ke,NUMBER_OPTIONS:Me});var De=Math.sign||function(e){return e>0?1:e<0?-1:0},Le=Math.log2||function(e){return Math.log(e)/Math.LN2},Re=Math.log10||function(e){return Math.log(e)/Math.LN10},Oe=(Math.log1p,Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t}),Fe=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function Pe(e,t){if("function"===typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var n,r="auto";switch(t&&(t.notation&&(r=t.notation),P(t)?n=t:P(t.precision)&&(n=t.precision)),r){case"fixed":return ze(e,n);case"exponential":return Ve(e,n);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=qe(Ue(e),t),r=n.exponent,i=n.coefficients,a=r%3===0?r:r<0?r-3-r%3:r-r%3;if(P(t))for(;t>i.length||r-a+1>i.length;)i.push(0);else for(var s=Math.abs(r-a)-(i.length-1),o=0;o<s;o++)i.push(0);var u=Math.abs(r-a),c=1;for(;u>0;)c++,u--;var l=i.slice(c).join(""),h=P(t)&&l.length||l.match(/[1-9]/)?"."+l:"",p=i.slice(0,c).join("")+h+"e"+(r>=0?"+":"")+a.toString();return n.sign+p}(e,n);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=n&&void 0!==n.lowerExp?n.lowerExp:-3,i=n&&void 0!==n.upperExp?n.upperExp:5,a=Ue(e),s=t?qe(a,t):a;if(s.exponent<r||s.exponent>=i)return Ve(e,t);var o=s.coefficients,u=s.exponent;o.length<t&&(o=o.concat(Ge(t-o.length))),o=o.concat(Ge(u-o.length+1+(o.length<t?t-o.length:0))),o=Ge(-u).concat(o);var c=u>0?u:0;return c<o.length-1&&o.splice(c+1,0,"."),s.sign+o.join("")}(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}function Ue(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),a=r.indexOf(".");i+=-1!==a?a-1:r.length-1;var s=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===s.length&&(s.push(0),i++),{sign:n,coefficients:s,exponent:i}}function ze(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Ue(e),r="number"===typeof t?qe(n,n.exponent+1+t):n,i=r.coefficients,a=r.exponent+1,s=a+(t||0);return i.length<s&&(i=i.concat(Ge(s-i.length))),a<0&&(i=Ge(1-a).concat(i),a=1),a<i.length&&i.splice(a,0,0===a?"0.":"."),r.sign+i.join("")}function Ve(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=Ue(e),r=t?qe(n,t):n,i=r.coefficients,a=r.exponent;i.length<t&&(i=i.concat(Ge(t-i.length)));var s=i.shift();return r.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function qe(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function Ge(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}var Be=Number.EPSILON||2220446049250313e-31;function Ke(e,t,n){if(null===n||void 0===n)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var r=Math.abs(e-t);return r<Be||r<=Math.max(Math.abs(e),Math.abs(t))*n}return!1}var je=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},He=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},We=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},Xe=(Math.cosh,Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2});Math.tanh;function Ze(e,t){if("function"===typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var n,r="auto";switch(void 0!==t&&(t.notation&&(r=t.notation),"number"===typeof t?n=t:t.precision&&(n=t.precision)),r){case"fixed":return function(e,t){return e.toFixed(t)}(e,n);case"exponential":return Ye(e,n);case"engineering":return function(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),a=i.toPrecision(t);-1!==a.indexOf("e")&&(a=i.toString());return a+"e"+(n>=0?"+":"")+r.toString()}(e,n);case"auto":var i=t&&void 0!==t.lowerExp?t.lowerExp:-3,a=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var s=e.toSignificantDigits(n),o=s.e;return(o>=i&&o<a?s.toFixed():Ye(e,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", or "fixed".')}}function Ye(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function Je(e){return(Je="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return"number"===typeof e?Pe(e,t):U(e)?Ze(e,t):function(e){return e&&"object"===Je(e)&&"number"===typeof e.s&&"number"===typeof e.n&&"number"===typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?function e(t,n){if(Array.isArray(t)){for(var r="[",i=t.length,a=0;a<i;a++)0!==a&&(r+=", "),r+=e(t[a],n);return r+="]"}return Qe(t,n)}(e,t):G(e)?'"'+e+'"':"function"===typeof e?e.syntax?String(e.syntax):"function":e&&"object"===Je(e)?"function"===typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((function(n){return'"'+n+'": '+Qe(e[n],t)})).join(", ")+"}":String(e)}function $e(e,t,n){if(!(this instanceof $e))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function et(e,t,n){if(!(this instanceof et))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function tt(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function nt(e,t){if(0===t.length){if(Array.isArray(e))throw new $e(e.length,0)}else!function e(t,n,r){var i,a=t.length;if(a!==n[r])throw new $e(a,n[r]);if(r<n.length-1){var s=r+1;for(i=0;i<a;i++){var o=t[i];if(!Array.isArray(o))throw new $e(n.length-1,n.length,"<");e(t[i],n,s)}}else for(i=0;i<a;i++)if(Array.isArray(t[i]))throw new $e(n.length+1,n.length,">")}(e,t,0)}function rt(e,t){if(!P(e)||!Ce(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"===typeof t&&e>=t)throw new et(e,t)}function it(e,t,n){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!P(e)||!Ce(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qe(t)+")")})),function e(t,n,r,i){var a,s,o=t.length,u=n[r],c=Math.min(o,u);if(t.length=u,r<n.length-1){var l=r+1;for(a=0;a<c;a++)s=t[a],Array.isArray(s)||(s=[s],t[a]=s),e(s,n,l,i);for(a=c;a<u;a++)s=[],t[a]=s,e(s,n,l,i)}else{for(a=0;a<c;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];for(a=c;a<u;a++)t[a]=i}}(e,t,0,void 0!==n?n:0),e}function at(e,t){var n,r=ot(e);function i(e){return e.reduce((function(e,t){return e*t}))}if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new $e(0,i(tt(e)),"!=");for(var a=1,s=0;s<t.length;s++)a*=t[s];if(r.length!==a)throw new $e(i(t),i(tt(e)),"!=");try{n=function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var a=t[i];n=[];for(var s=r.length/a,o=0;o<s;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}(r,t)}catch(o){if(o instanceof $e)throw new $e(i(t),i(tt(e)),"!=");throw o}return n}function st(e,t,n,r){var i=r||tt(e);if(n)for(var a=0;a<n;a++)e=[e],i.unshift(1);for(e=function e(t,n,r){var i,a;if(Array.isArray(t)){var s=r+1;for(i=0,a=t.length;i<a;i++)t[i]=e(t[i],n,s)}else for(var o=r;o<n;o++)t=[t];return t}(e,t,0);i.length<t;)i.push(1);return e}function ot(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function ut(e,t){for(var n,r=0,i=0;i<e.length;i++){var a=e[i],s=Array.isArray(a);if(0===i&&s&&(r=a.length),s&&a.length!==r)return;var o=s?ut(a,t):t(a);if(void 0===n)n=o;else if(n!==o)return"mixed"}return n}function ct(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],a=e[i];void 0!==a&&(n[i]=a)}return n}(r,t.map(lt));return function(e,t,n){if(!t.filter((function(e){return!function(e){return e&&"?"===e[0]}(e)})).every((function(e){return void 0!==n[e]}))){var r=t.filter((function(e){return void 0===n[e]}));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(r.map((function(e){return'"'.concat(e,'"')})).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function lt(e){return e&&"?"===e[0]?e.slice(1):e}$e.prototype=new RangeError,$e.prototype.constructor=RangeError,$e.prototype.name="DimensionError",$e.prototype.isDimensionError=!0,et.prototype=new RangeError,et.prototype.constructor=RangeError,et.prototype.name="IndexError",et.prototype.isIndexError=!0;var ht=n(1),pt=n.n(ht);function ft(e){return(ft="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mt=ct("Complex",[],(function(){return pt.a.prototype.type="Complex",pt.a.prototype.isComplex=!0,pt.a.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},pt.a.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},pt.a.prototype.format=function(e){var t=this.im,n=this.re,r=Pe(this.re,e),i=Pe(this.im,e),a=P(e)?e:e?e.precision:null;if(null!==a){var s=Math.pow(10,-a);Math.abs(n/t)<s&&(n=0),Math.abs(t/n)<s&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},pt.a.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"===ft(t))return pt()(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(P(n)){if(q(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),P(r))return new pt.a({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},pt.a.prototype.valueOf=pt.a.prototype.toString,pt.a.fromJSON=function(e){return new pt.a(e)},pt.a.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},pt.a}),{isClass:!0});function dt(e){return(dt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){return function n(){"object"!==dt(n.cache)&&(n.cache={});for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=t?t(r):JSON.stringify(r);return a in n.cache||(n.cache[a]=e.apply(e,r)),n.cache[a]}}gt((function(e){return new e(1).exp()}),yt),gt((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),yt);var vt=gt((function(e){return e.acos(-1)}),yt);gt((function(e){return vt(e).times(2)}),yt);function yt(e){return e[0].precision}Math.PI,Math.PI,Math.E;var xt=n(12),bt=n.n(xt),wt=ct("BigNumber",["?on","config"],(function(e){var t=e.on,n=e.config,r=bt.a.clone({precision:n.precision});return r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r}),{isClass:!0}),St=ct("Matrix",[],(function(){function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0});Tt("fineStructure",.0072973525693),Tt("weakMixingAngle",.2229),Tt("efimovFactor",22.7),Tt("sackurTetrode",-1.16487052358);function Tt(e,t){return ct(e,["config","BigNumber"],(function(e){var n=e.config,r=e.BigNumber;return"BigNumber"===n.number?new r(t):t}))}var _t=n(3),At=n.n(_t),Et=ct("Fraction",[],(function(){return At.a.prototype.type="Fraction",At.a.prototype.isFraction=!0,At.a.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},At.a.fromJSON=function(e){return new At.a(e)},At.a}),{isClass:!0}),kt=ct("DenseMatrix",["Matrix"],(function(e){var t=e.Matrix;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!G(t))throw new Error("Invalid datatype: "+t);if(K(e))"DenseMatrix"===e.type?(this._data=Se(e._data),this._size=Se(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&B(e.data)&&B(e.size))this._data=e.data,this._size=e.size,nt(this._data,this._size),this._datatype=t||e.datatype;else if(B(e))this._data=function e(t){for(var n=0,r=t.length;n<r;n++){var i=t[n];B(i)?t[n]=e(i):i&&!0===i.isMatrix&&(t[n]=e(i.valueOf()))}return t}(e),this._size=tt(this._data),nt(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+be(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t){if(!X(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r=t.size();if(r.length!==e._size.length)throw new $e(r.length,e._size.length);for(var i=t.min(),a=t.max(),s=0,o=e._size.length;s<o;s++)rt(i[s],e._size[s]),rt(a[s],e._size[s]);return new n(function e(t,n,r,i){var a=i===r-1,s=n.dimension(i);return a?s.map((function(e){return rt(e,t.length),t[e]})).valueOf():s.map((function(a){rt(a,t.length);var s=t[a];return e(s,n,r,i+1)})).valueOf()}(e._data,t,r.length,0),e._datatype)}function i(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),o=t.isScalar();if(K(n)?(i=n.size(),n=n.valueOf()):i=tt(n),o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(a.length<e._size.length)throw new $e(a.length,e._size.length,"<");if(i.length<a.length){for(var u=0,c=0;1===a[u]&&1===i[u];)u++;for(;1===a[u];)c++,u++;n=st(n,a.length,c,i)}if(!Ae(a,i))throw new $e(a,i,">");s(e,t.max().map((function(e){return e+1})),r);var l=a.length;!function e(t,n,r,i,a){var s=a===i-1,o=n.dimension(a);s?o.forEach((function(e,n){rt(e),t[e]=r[n[0]]})):o.forEach((function(s,o){rt(s),e(t[s],n,r[o[0]],i,a+1)}))}(e._data,t,n,l,0)}return e}function a(e,t,n){if(0===t.length){for(var r=e._data;B(r);)r=r[0];return r}return e._size=t.slice(0),e._data=it(e._data,e._size,n),e}function s(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var s=0,o=t.length;s<o;s++)t[s]>r[s]&&(r[s]=t[s],i=!0);i&&a(e,r,n)}return n.prototype=new t,n.prototype.createDenseMatrix=function(e,t){return new n(e,t)},n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return ut(this._data,be)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,n){switch(arguments.length){case 1:return r(this,e);case 2:case 3:return i(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){if(!B(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new $e(e.length,this._size.length);for(var t=0;t<e.length;t++)rt(e[t],this._size[t]);for(var n=this._data,r=0,i=e.length;r<i;r++){var a=e[r];rt(a,n.length),n=n[a]}return n},n.prototype.set=function(e,t,n){if(!B(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new $e(e.length,this._size.length,"<");var r,i,a;s(this,e.map((function(e){return e+1})),n);var o=this._data;for(r=0,i=e.length-1;r<i;r++)rt(a=e[r],o.length),o=o[a];return rt(a=e[e.length-1],o.length),o[a]=t,this},n.prototype.resize=function(e,t,n){if(!B(e))throw new TypeError("Array expected");return a(n?this.clone():this,e,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;return n._data=at(n._data,e),n._size=e.slice(0),n},n.prototype.clone=function(){return new n({data:Se(this._data),size:Se(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(e){var t=this,r=function n(r,i){return B(r)?r.map((function(e,t){return n(e,i.concat(t))})):e(r,i,t)}(this._data,[]);return new n(r,void 0!==this._datatype?ut(r,be):void 0)},n.prototype.forEach=function(e){var t=this;!function n(r,i){B(r)?r.forEach((function(e,t){n(e,i.concat(t))})):e(r,i,t)}(this._data,[])},n.prototype.toArray=function(){return Se(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return Qe(this._data,e)},n.prototype.toString=function(){return Qe(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(U(e)&&(e=e.toNumber()),!P(e)||!Ce(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],a=this._size[1],s=Math.min(i-r,a-t),o=[],u=0;u<s;u++)o[u]=this._data[u+r][u+t];return new n({data:o,size:[s],datatype:this._datatype})},n.diagonal=function(e,t,r,i){if(!B(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(U(e)&&(e=e.toNumber()),!P(e)||!Ce(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(U(r)&&(r=r.toNumber()),!P(r)||!Ce(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a,s=r>0?r:0,o=r<0?-r:0,u=e[0],c=e[1],l=Math.min(u-o,c-s);if(B(t)){if(t.length!==l)throw new Error("Invalid value array length");a=function(e){return t[e]}}else if(K(t)){var h=t.size();if(1!==h.length||h[0]!==l)throw new Error("Invalid matrix length");a=function(e){return t.get([e])}}else a=function(){return t};i||(i=U(a(0))?a(0).mul(0):0);var p=[];if(e.length>0){p=it(p,e,i);for(var f=0;f<l;f++)p[f+o][f+s]=a(f)}return new n({data:p,size:[u,c]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!P(e)||!Ce(e)||!P(t)||!Ce(t))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return rt(e,this._size[0]),rt(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0}),Mt=n(9),Nt=n.n(Mt),It=function(){return It=Nt.a.create,Nt.a},Ct=ct("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var t=e.BigNumber,n=e.Complex,r=e.DenseMatrix,i=e.Fraction,a=It();return a.types=[{name:"number",test:P},{name:"Complex",test:z},{name:"BigNumber",test:U},{name:"Fraction",test:V},{name:"Unit",test:q},{name:"string",test:G},{name:"Chain",test:xe},{name:"Array",test:B},{name:"Matrix",test:K},{name:"DenseMatrix",test:j},{name:"SparseMatrix",test:H},{name:"Range",test:W},{name:"Index",test:X},{name:"boolean",test:Z},{name:"ResultSet",test:Y},{name:"Help",test:J},{name:"function",test:Q},{name:"Date",test:$},{name:"RegExp",test:ee},{name:"null",test:ne},{name:"undefined",test:re},{name:"AccessorNode",test:ie},{name:"ArrayNode",test:ae},{name:"AssignmentNode",test:se},{name:"BlockNode",test:oe},{name:"ConditionalNode",test:ue},{name:"ConstantNode",test:ce},{name:"FunctionNode",test:he},{name:"FunctionAssignmentNode",test:le},{name:"IndexNode",test:pe},{name:"Node",test:fe},{name:"ObjectNode",test:me},{name:"OperatorNode",test:de},{name:"ParenthesisNode",test:ge},{name:"RangeNode",test:ve},{name:"SymbolNode",test:ye},{name:"Object",test:te}],a.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||Dt(e),function(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||Lt(e),new n(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return n||Lt(e),new n(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||Lt(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||Rt(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||Dt(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||Rt(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||Lt(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||Dt(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||Rt(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],a}));function Dt(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Lt(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Rt(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function Ot(e,t,n){return e&&"function"===typeof e.map?e.map((function(e){return Ot(e,t,n)})):t(e)}var Ft="number";function Pt(e){return e<0}function Ut(e){return e>0}function zt(e){return 0===e}function Vt(e){return Number.isNaN(e)}Pt.signature=Ft,Ut.signature=Ft,zt.signature=Ft,Vt.signature=Ft;function qt(e,t,n){if(null===n||void 0===n)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var r=e.minus(t).abs();if(r.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return r.lte(i.times(n))}return!1}var Gt=ct("equalScalar",["typed","config"],(function(e){var t=e.typed,n=e.config,r=t("equalScalar",{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return Ke(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||qt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n){return Ke(e.re,t.re,n)&&Ke(e.im,t.im,n)}(e,t,n.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return r(e.value,t.value)}});return r})),Bt=(ct("equalScalar",["typed","config"],(function(e){var t=e.typed,n=e.config;return t("equalScalar",{"number, number":function(e,t){return Ke(e,t,n.epsilon)}})})),ct("number",["typed"],(function(e){var t=(0,e.typed)("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=Number(e);if(isNaN(t))throw new SyntaxError('String "'+e+'" is no valid number');return t},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return Ot(e,t)}});return t.fromJSON=function(e){return parseFloat(e.value)},t}))),Kt=ct("complex",["typed","Complex"],(function(e){var t=e.typed,n=e.Complex,r=t("complex",{"":function(){return n.ZERO},number:function(e){return new n(e,0)},"number, number":function(e,t){return new n(e,t)},"BigNumber, BigNumber":function(e,t){return new n(e.toNumber(),t.toNumber())},Fraction:function(e){return new n(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return n(e)},null:function(e){return n(0)},Object:function(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(e){return Ot(e,r)}});return r})),jt="number, number";function Ht(e){return Math.abs(e)}function Wt(e,t){return e+t}function Xt(e,t){return e*t}function Zt(e){return-e}function Yt(e){return e}function Jt(e){return Oe(e)}function Qt(e){return Math.ceil(e)}function $t(e){return e*e*e}function en(e){return Math.exp(e)}function tn(e){return Fe(e)}function nn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Parameters in function gcd must be integer numbers");for(var n;0!==t;)n=e%t,e=t,t=n;return e<0?-e:e}function rn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,r=e*t;0!==t;)t=e%(n=t),e=n;return Math.abs(r/e)}function an(e){return Math.log(e)}function sn(e){return Re(e)}function on(e){return Le(e)}function un(e,t){if(t>0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor")}function cn(e,t){var n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!==1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?1/0:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r}function ln(e){return De(e)}function hn(e){return e*e}function pn(e,t){var n,r,i,a=0,s=1,o=1,u=0;if(!Ce(e)||!Ce(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(r=Math.floor(e/t))*t,n=a,a=s-r*a,s=n,n=o,o=u-r*o,u=n,e=t,t=i;return e<0?[-e,-s,-u]:[e,e?s:0,u]}function fn(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function mn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(ze(e,t))}Ht.signature="number",Wt.signature=jt,Xt.signature=jt,Zt.signature="number",Yt.signature="number",Jt.signature="number",Qt.signature="number",$t.signature="number",en.signature="number",tn.signature="number",nn.signature=jt,rn.signature=jt,an.signature="number",sn.signature="number",on.signature="number",un.signature=jt,cn.signature=jt,ln.signature="number",hn.signature="number",pn.signature=jt,fn.signature=jt,mn.signature=jt;var dn=ct("multiplyScalar",["typed"],(function(e){var t=(0,e.typed)("multiplyScalar",{"number, number":Xt,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,n){var r=n.clone();return r.value=null===r.value?r._normalize(e):t(r.value,e),r},"Unit, number | Fraction | BigNumber | Complex":function(e,n){var r=e.clone();return r.value=null===r.value?r._normalize(n):t(r.value,n),r},"Unit, Unit":function(e,t){return e.multiply(t)}});return t})),gn=ct("sign",["typed","BigNumber","Fraction","complex"],(function(e){var t=e.typed,n=e.BigNumber,r=e.complex,i=e.Fraction,a=t("sign",{number:ln,Complex:function(e){return 0===e.im?r(ln(e.re)):e.sign()},BigNumber:function(e){return new n(e.cmp(0))},Fraction:function(e){return new i(e.s,1)},"Array | Matrix":function(e){return Ot(e,a,!0)},Unit:function(e){return a(e.value)}});return a}));var vn="number, number";function yn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Integers expected in function bitAnd");return e&t}function xn(e){if(!Ce(e))throw new Error("Integer expected in function bitNot");return~e}function bn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Integers expected in function bitOr");return e|t}function wn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Integers expected in function bitXor");return e^t}function Sn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Integers expected in function leftShift");return e<<t}function Tn(e,t){if(!Ce(e)||!Ce(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function _n(e,t){if(!Ce(e)||!Ce(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}yn.signature=vn,xn.signature="number",bn.signature=vn,wn.signature=vn,Sn.signature=vn,Tn.signature=vn,_n.signature=vn;function An(e){return!e}function En(e,t){return!(!e&&!t)}function kn(e,t){return!!e!==!!t}function Mn(e,t){return!(!e||!t)}An.signature="number",En.signature="number, number",kn.signature="number, number",Mn.signature="number, number";Math.pow(2,53);function Nn(e){return je(e)}function In(e){return Math.atan(1/e)}function Cn(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function Dn(e){return Math.asin(1/e)}function Ln(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function Rn(e){return Math.acos(1/e)}function On(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t)}function Fn(e){return He(e)}function Pn(e){return We(e)}function Un(e){return 1/Math.tan(e)}function zn(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function Vn(e){return 1/Math.sin(e)}function qn(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*De(e)}function Gn(e){return 1/Math.cos(e)}function Bn(e){return 2/(Math.exp(e)+Math.exp(-e))}function Kn(e){return Xe(e)}Nn.signature="number",In.signature="number",Cn.signature="number",Dn.signature="number",Ln.signature="number",Rn.signature="number",On.signature="number",Fn.signature="number",Pn.signature="number",Un.signature="number",zn.signature="number",Vn.signature="number",qn.signature="number",Gn.signature="number",Bn.signature="number",Kn.signature="number";function jn(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return jn(e,n)*jn(n+1,t)}function Hn(e,t){if(!Ce(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ce(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");var n=e-t;return t<n?jn(n+1,e)/jn(1,t):jn(t+1,e)/jn(1,n)}Hn.signature="number, number";n(10);var Wn=ct("fraction",["typed","Fraction"],(function(e){var t=e.typed,n=e.Fraction,r=t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},Fraction:function(e){return e},Object:function(e){return new n(e)},"Array | Matrix":function(e){return Ot(e,r)}});return r})),Xn=ct("unaryMinus",["typed"],(function(e){var t=(0,e.typed)("unaryMinus",{number:Zt,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var n=e.clone();return n.value=t(e.value),n},"Array | Matrix":function(e){return Ot(e,t,!0)}});return t})),Zn=ct("addScalar",["typed"],(function(e){var t=(0,e.typed)("addScalar",{"number, number":Wt,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,n){if(null===e.value||void 0===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===n.value||void 0===n.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(n))throw new Error("Units do not match");var r=e.clone();return r.value=t(r.value,n.value),r.fixPrefix=!1,r}});return t})),Yn=ct("sqrt",["config","typed","Complex"],(function(e){var t=e.config,n=e.typed,r=e.Complex,i=n("sqrt",{number:a,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():a(e.toNumber())},"Array | Matrix":function(e){return Ot(e,i,!0)},Unit:function(e){return e.pow(.5)}});function a(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt()}return i})),Jn=ct("conj",["typed"],(function(e){var t=(0,e.typed)("conj",{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return Ot(e,t)}});return t}));var Qn=ct("SparseMatrix",["typed","equalScalar","Matrix"],(function(e){var t=e.typed,n=e.equalScalar,r=e.Matrix;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!G(t))throw new Error("Invalid datatype: "+t);if(K(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?Se(t._values):void 0,e._index=Se(t._index),e._ptr=Se(t._ptr),e._size=Se(t._size),e._datatype=n||t._datatype):a(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&B(e.index)&&B(e.ptr)&&B(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(B(e))a(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+be(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function a(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var a=r.length,s=0,o=n,u=0;if(G(i)&&(o=t.find(n,[i,i])||n,u=t.convert(0,i)),a>0){var c=0;do{e._ptr.push(e._index.length);for(var l=0;l<a;l++){var h=r[l];if(B(h)){if(0===c&&s<h.length&&(s=h.length),c<h.length){var p=h[c];o(p,u)||(e._values.push(p),e._index.push(l))}}else 0===c&&s<1&&(s=1),o(h,u)||(e._values.push(h),e._index.push(l))}c++}while(c<s)}e._ptr.push(e._index.length),e._size=[a,s]}function s(e,t){if(!X(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,a,s,o=t.size();if(o.length!==e._size.length)throw new $e(o.length,e._size.length);var u=t.min(),c=t.max();for(n=0,r=e._size.length;n<r;n++)rt(u[n],e._size[n]),rt(c[n],e._size[n]);var l=e._values,h=e._index,p=e._ptr,f=t.dimension(0),m=t.dimension(1),d=[],g=[];f.forEach((function(e,t){g[e]=t[0],d[e]=!0}));var v=l?[]:void 0,y=[],x=[];return m.forEach((function(e){for(x.push(y.length),a=p[e],s=p[e+1];a<s;a++)n=h[a],!0===d[n]&&(y.push(g[n]),v&&v.push(l[a]))})),x.push(y.length),new i({values:v,index:y,ptr:x,size:o,datatype:e._datatype})}function o(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),s=t.isScalar();if(K(n)?(i=n.size(),n=n.toArray()):i=tt(n),s){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==a.length&&2!==a.length)throw new $e(a.length,e._size.length,"<");if(i.length<a.length){for(var o=0,u=0;1===a[o]&&1===i[o];)o++;for(;1===a[o];)u++,o++;n=st(n,a.length,u,i)}if(!Ae(a,i))throw new $e(a,i,">");for(var c=t.min()[0],l=t.min()[1],h=i[0],p=i[1],f=0;f<h;f++)for(var m=0;m<p;m++){var d=n[f][m];e.set([f+c,m+l],d,r)}}return e}function u(e,t,n,r){if(n-t===0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function c(e,t,n,r,i,a,s){i.splice(e,0,r),a.splice(e,0,t);for(var o=n+1;o<s.length;o++)s[o]++}function l(e,r,i,a){var s=a||0,o=n,u=0;G(e._datatype)&&(o=t.find(n,[e._datatype,e._datatype])||n,u=t.convert(0,e._datatype),s=t.convert(s,e._datatype));var c,l,h,p=!o(s,u),f=e._size[0],m=e._size[1];if(i>m){for(l=m;l<i;l++)if(e._ptr[l]=e._values.length,p)for(c=0;c<f;c++)e._values.push(s),e._index.push(c);e._ptr[i]=e._values.length}else i<m&&(e._ptr.splice(i+1,m-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(m=i,r>f){if(p){var d=0;for(l=0;l<m;l++){e._ptr[l]=e._ptr[l]+d,h=e._ptr[l+1]+d;var g=0;for(c=f;c<r;c++,g++)e._values.splice(h+g,0,s),e._index.splice(h+g,0,c),d++}e._ptr[m]=e._values.length}}else if(r<f){var v=0;for(l=0;l<m;l++){e._ptr[l]=e._ptr[l]-v;var y=e._ptr[l],x=e._ptr[l+1]-v;for(h=y;h<x;h++)(c=e._index[h])>r-1&&(e._values.splice(h,1),e._index.splice(h,1),v++)}e._ptr[l]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function h(e,t,n,r,i){var a,s,o=r[0],u=r[1],c=[];for(a=0;a<o;a++)for(c[a]=[],s=0;s<u;s++)c[a][s]=0;for(s=0;s<u;s++)for(var l=n[s],h=n[s+1],p=l;p<h;p++)c[a=t[p]][s]=e?i?Se(e[p]):e[p]:1;return c}return i.prototype=new r,i.prototype.createSparseMatrix=function(e,t){return new i(e,t)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return ut(this._values,be)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,e);case 2:case 3:return o(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!B(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new $e(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];rt(t,this._size[0]),rt(n,this._size[1]);var r=u(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},i.prototype.set=function(e,r,i){if(!B(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new $e(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=e[0],s=e[1],o=this._size[0],h=this._size[1],p=n,f=0;G(this._datatype)&&(p=t.find(n,[this._datatype,this._datatype])||n,f=t.convert(0,this._datatype)),(a>o-1||s>h-1)&&(l(this,Math.max(a+1,o),Math.max(s+1,h),i),o=this._size[0],h=this._size[1]),rt(a,o),rt(s,h);var m=u(a,this._ptr[s],this._ptr[s+1],this._index);return m<this._ptr[s+1]&&this._index[m]===a?p(r,f)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var a=t+1;a<i.length;a++)i[a]--}(m,s,this._values,this._index,this._ptr):this._values[m]=r:c(m,a,s,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,n){if(!B(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");return e.forEach((function(t){if(!P(t)||!Ce(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qe(e)+")")})),l(n?this.clone():this,e[0],e[1],t)},i.prototype.reshape=function(e,t){if(!B(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(e.forEach((function(t){if(!P(t)||!Ce(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qe(e)+")")})),this._size[0]*this._size[1]!==e[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var r=[],i=0;i<n._ptr.length;i++)for(var a=0;a<n._ptr[i+1]-n._ptr[i];a++)r.push(i);for(var s=n._values.slice(),o=n._index.slice(),l=0;l<n._index.length;l++){var h=o[l],p=r[l],f=h*n._size[1]+p;r[l]=f%e[1],o[l]=Math.floor(f/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var m=0;m<n._ptr.length;m++)n._ptr[m]=0;for(var d=0;d<s.length;d++){var g=o[d],v=r[d],y=s[d];c(u(g,n._ptr[v],n._ptr[v+1],n._index),g,v,y,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?Se(this._values):void 0,index:Se(this._index),ptr:Se(this._ptr),size:Se(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var a=this;return function(e,r,a,s,o,u,c){var l=[],h=[],p=[],f=n,m=0;G(e._datatype)&&(f=t.find(n,[e._datatype,e._datatype])||n,m=t.convert(0,e._datatype));for(var d=function(e,t,n){e=u(e,t,n),f(e,m)||(l.push(e),h.push(t))},g=s;g<=o;g++){p.push(l.length);var v=e._ptr[g],y=e._ptr[g+1];if(c)for(var x=v;x<y;x++){var b=e._index[x];b>=r&&b<=a&&d(e._values[x],b-r,g-s)}else{for(var w={},S=v;S<y;S++){var T=e._index[S];w[T]=e._values[S]}for(var _=r;_<=a;_++){var A=_ in w?w[_]:0;d(A,_-r,g-s)}}}return p.push(l.length),new i({values:l,index:h,ptr:p,size:[a-r+1,o-s+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,n,r){return e(t,[n,r],a)}),r)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this._size[0],r=this._size[1],i=0;i<r;i++){var a=this._ptr[i],s=this._ptr[i+1];if(t)for(var o=a;o<s;o++){var u=this._index[o];e(this._values[o],[u,i],this)}else{for(var c={},l=a;l<s;l++){c[this._index[l]]=this._values[l]}for(var h=0;h<n;h++){e(h in c?c[h]:0,[h,i],this)}}}},i.prototype.toArray=function(){return h(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return h(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+Qe(t,e)+" x "+Qe(n,e)+"] density: "+Qe(r,e)+"\n",a=0;a<n;a++)for(var s=this._ptr[a],o=this._ptr[a+1],u=s;u<o;u++){i+="\n    ("+Qe(this._index[u],e)+", "+Qe(a,e)+") ==> "+(this._values?Qe(this._values[u],e):"X")}return i},i.prototype.toString=function(){return Qe(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(U(e)&&(e=e.toNumber()),!P(e)||!Ce(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[0],a=this._size[1],s=Math.min(r-n,a-t),o=[],u=[],c=[];c[0]=0;for(var l=t;l<a&&o.length<s;l++)for(var h=this._ptr[l],p=this._ptr[l+1],f=h;f<p;f++){var m=this._index[f];if(m===l-t+n){o.push(this._values[f]),u[o.length-1]=m-n;break}}return c.push(o.length),new i({values:o,index:u,ptr:c,size:[s,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,r,a,s,o){if(!B(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(U(e)&&(e=e.toNumber()),!P(e)||!Ce(e)||e<1)throw new Error("Size values must be positive integers");return e})),a){if(U(a)&&(a=a.toNumber()),!P(a)||!Ce(a))throw new TypeError("The parameter k must be an integer number")}else a=0;var u=n,c=0;G(o)&&(u=t.find(n,[o,o])||n,c=t.convert(0,o));var l,h=a>0?a:0,p=a<0?-a:0,f=e[0],m=e[1],d=Math.min(f-p,m-h);if(B(r)){if(r.length!==d)throw new Error("Invalid value array length");l=function(e){return r[e]}}else if(K(r)){var g=r.size();if(1!==g.length||g[0]!==d)throw new Error("Invalid matrix length");l=function(e){return r.get([e])}}else l=function(){return r};for(var v=[],y=[],x=[],b=0;b<m;b++){x.push(v.length);var w=b-h;if(w>=0&&w<d){var S=l(w);u(S,c)||(y.push(w+p),v.push(S))}}return x.push(v.length),new i({values:v,index:y,ptr:x,size:[f,m]})},i.prototype.swapRows=function(e,t){if(!P(e)||!Ce(e)||!P(t)||!Ce(t))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return rt(e,this._size[0]),rt(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,n,r,i){for(var a=r[e],s=r[e+1],o=a;o<s;o++)i(n[o],t[o])},i._swapRows=function(e,t,n,r,i,a){for(var s=0;s<n;s++){var o=a[s],c=a[s+1],l=u(e,o,c,i),h=u(t,o,c,i);if(l<c&&h<c&&i[l]===e&&i[h]===t){if(r){var p=r[l];r[l]=r[h],r[h]=p}}else if(l<c&&i[l]===e&&(h>=c||i[h]!==t)){var f=r?r[l]:void 0;i.splice(h,0,t),r&&r.splice(h,0,f),i.splice(h<=l?l+1:l,1),r&&r.splice(h<=l?l+1:l,1)}else if(h<c&&i[h]===t&&(l>=c||i[l]!==e)){var m=r?r[h]:void 0;i.splice(l,0,e),r&&r.splice(l,0,m),i.splice(l<=h?h+1:h,1),r&&r.splice(l<=h?h+1:h,1)}}},i}),{isClass:!0}),$n=ct("matrix",["typed","Matrix","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=(e.Matrix,e.DenseMatrix),r=e.SparseMatrix;return t("matrix",{"":function(){return i([])},string:function(e){return i([],e)},"string, string":function(e,t){return i([],e,t)},Array:function(e){return i(e)},Matrix:function(e){return i(e,e.storage())},"Array | Matrix, string":i,"Array | Matrix, string, string":i});function i(e,t,i){if("dense"===t||"default"===t||void 0===t)return new n(e,i);if("sparse"===t)return new r(e,i);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),er=ct("algorithm01",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var a=e._data,s=e._size,o=e._datatype,u=n._values,c=n._index,l=n._ptr,h=n._size,p=n._datatype;if(s.length!==h.length)throw new $e(s.length,h.length);if(s[0]!==h[0]||s[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m,d=s[0],g=s[1],v="string"===typeof o&&o===p?o:void 0,y=v?t.find(r,[v,v]):r,x=[];for(f=0;f<d;f++)x[f]=[];var b=[],w=[];for(m=0;m<g;m++){for(var S=m+1,T=l[m],_=l[m+1],A=T;A<_;A++)b[f=c[A]]=i?y(u[A],a[f][m]):y(a[f][m],u[A]),w[f]=S;for(f=0;f<d;f++)w[f]===S?x[f][m]=b[f]:x[f][m]=a[f][m]}return e.createDenseMatrix({data:x,size:[d,g],datatype:v})}})),tr=ct("algorithm10",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,a){var s=e._values,o=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,p=c[0],f=c[1],m=i;"string"===typeof l&&(h=l,r=t.convert(r,h),m=t.find(i,[h,h]));for(var d=[],g=[],v=[],y=0;y<f;y++){for(var x=y+1,b=u[y],w=u[y+1],S=b;S<w;S++){var T=o[S];g[T]=s[S],v[T]=x}for(var _=0;_<p;_++)0===y&&(d[_]=[]),v[_]===x?d[_][y]=a?m(r,g[_]):m(g[_],r):d[_][y]=r}return new n({data:d,size:[p,f],datatype:h})}})),nr=ct("algorithm13",["typed"],(function(e){var t=e.typed;return function(e,n,r){var i,a=e._data,s=e._size,o=e._datatype,u=n._data,c=n._size,l=n._datatype,h=[];if(s.length!==c.length)throw new $e(s.length,c.length);for(var p=0;p<s.length;p++){if(s[p]!==c[p])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");h[p]=s[p]}var f=r;"string"===typeof o&&o===l&&(i=o,f=t.find(r,[i,i]));var m=h.length>0?function e(t,n,r,i,a,s){var o=[];if(n===r.length-1)for(var u=0;u<i;u++)o[u]=t(a[u],s[u]);else for(var c=0;c<i;c++)o[c]=e(t,n+1,r,r[n+1],a[c],s[c]);return o}(f,0,h,h[0],a,u):[];return e.createDenseMatrix({data:m,size:h,datatype:i})}})),rr=ct("algorithm14",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var a,s=e._data,o=e._size,u=e._datatype,c=r;"string"===typeof u&&(a=u,n=t.convert(n,a),c=t.find(r,[a,a]));var l=o.length>0?function e(t,n,r,i,a,s,o){var u=[];if(n===r.length-1)for(var c=0;c<i;c++)u[c]=o?t(s,a[c]):t(a[c],s);else for(var l=0;l<i;l++)u[l]=e(t,n+1,r,r[n+1],a[l],s,o);return u}(c,0,o,o[0],s,n,i):[];return e.createDenseMatrix({data:l,size:Se(o),datatype:a})}})),ir=ct("algorithm03",["typed"],(function(e){var t=e.typed;return function(e,n,r,i){var a=e._data,s=e._size,o=e._datatype,u=n._values,c=n._index,l=n._ptr,h=n._size,p=n._datatype;if(s.length!==h.length)throw new $e(s.length,h.length);if(s[0]!==h[0]||s[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m=s[0],d=s[1],g=0,v=r;"string"===typeof o&&o===p&&(f=o,g=t.convert(0,f),v=t.find(r,[f,f]));for(var y=[],x=0;x<m;x++)y[x]=[];for(var b=[],w=[],S=0;S<d;S++){for(var T=S+1,_=l[S],A=l[S+1],E=_;E<A;E++){var k=c[E];b[k]=i?v(u[E],a[k][S]):v(a[k][S],u[E]),w[k]=T}for(var M=0;M<m;M++)w[M]===T?y[M][S]=b[M]:y[M][S]=i?v(g,a[M][S]):v(a[M][S],g)}return e.createDenseMatrix({data:y,size:[m,d],datatype:f})}})),ar=ct("algorithm05",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i){var a=e._values,s=e._index,o=e._ptr,u=e._size,c=e._datatype,l=r._values,h=r._index,p=r._ptr,f=r._size,m=r._datatype;if(u.length!==f.length)throw new $e(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var d,g=u[0],v=u[1],y=n,x=0,b=i;"string"===typeof c&&c===m&&(d=c,y=t.find(n,[d,d]),x=t.convert(0,d),b=t.find(i,[d,d]));var w,S,T,_,A=a&&l?[]:void 0,E=[],k=[],M=A?[]:void 0,N=A?[]:void 0,I=[],C=[];for(S=0;S<v;S++){k[S]=E.length;var D=S+1;for(T=o[S],_=o[S+1];T<_;T++)w=s[T],E.push(w),I[w]=D,M&&(M[w]=a[T]);for(T=p[S],_=p[S+1];T<_;T++)I[w=h[T]]!==D&&E.push(w),C[w]=D,N&&(N[w]=l[T]);if(A)for(T=k[S];T<E.length;){var L=I[w=E[T]],R=C[w];if(L===D||R===D){var O=b(L===D?M[w]:x,R===D?N[w]:x);y(O,x)?E.splice(T,1):(A.push(O),T++)}}}return k[v]=E.length,e.createSparseMatrix({values:A,index:E,ptr:k,size:[g,v],datatype:d})}})),sr=ct("algorithm11",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return function(e,r,i,a){var s=e._values,o=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,p=c[0],f=c[1],m=n,d=0,g=i;"string"===typeof l&&(h=l,m=t.find(n,[h,h]),d=t.convert(0,h),r=t.convert(r,h),g=t.find(i,[h,h]));for(var v=[],y=[],x=[],b=0;b<f;b++){x[b]=y.length;for(var w=u[b],S=u[b+1],T=w;T<S;T++){var _=o[T],A=a?g(r,s[T]):g(s[T],r);m(A,d)||(y.push(_),v.push(A))}}return x[f]=y.length,e.createSparseMatrix({values:v,index:y,ptr:x,size:[p,f],datatype:h})}})),or=ct("algorithm12",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,r,i,a){var s=e._values,o=e._index,u=e._ptr,c=e._size,l=e._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,p=c[0],f=c[1],m=i;"string"===typeof l&&(h=l,r=t.convert(r,h),m=t.find(i,[h,h]));for(var d=[],g=[],v=[],y=0;y<f;y++){for(var x=y+1,b=u[y],w=u[y+1],S=b;S<w;S++){var T=o[S];g[T]=s[S],v[T]=x}for(var _=0;_<p;_++)0===y&&(d[_]=[]),v[_]===x?d[_][y]=a?m(r,g[_]):m(g[_],r):d[_][y]=a?m(r,0):m(0,r)}return new n({data:d,size:[p,f],datatype:h})}})),ur=ct("algorithm07",["typed","DenseMatrix"],(function(e){var t=e.typed,n=e.DenseMatrix;return function(e,i,a){var s=e._size,o=e._datatype,u=i._size,c=i._datatype;if(s.length!==u.length)throw new $e(s.length,u.length);if(s[0]!==u[0]||s[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+u+")");var l,h,p,f=s[0],m=s[1],d=0,g=a;"string"===typeof o&&o===c&&(l=o,d=t.convert(0,l),g=t.find(a,[l,l]));var v=[];for(h=0;h<f;h++)v[h]=[];var y=[],x=[],b=[],w=[];for(p=0;p<m;p++){var S=p+1;for(r(e,p,b,y,S),r(i,p,w,x,S),h=0;h<f;h++){var T=b[h]===S?y[h]:d,_=w[h]===S?x[h]:d;v[h][p]=g(T,_)}}return new n({data:v,size:[f,m],datatype:l})};function r(e,t,n,r,i){for(var a=e._values,s=e._index,o=e._ptr,u=o[t],c=o[t+1];u<c;u++){var l=s[u];n[l]=i,r[l]=a[u]}}}));var cr=ct("identity",["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.BigNumber,a=e.DenseMatrix,s=e.SparseMatrix;return t("identity",{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(e){return r(e)},"number | BigNumber":function(e){return u(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return u(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return u(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return u(e,t,n)},Array:function(e){return o(e)},"Array, string":function(e,t){return o(e,t)},Matrix:function(e){return o(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return o(e.valueOf(),t)}});function o(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return u(e[0],e[0],t);case 2:return u(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function u(e,t,n){var r=U(e)||U(t)?i:null;if(U(e)&&(e=e.toNumber()),U(t)&&(t=t.toNumber()),!Ce(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!Ce(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var o=r?new i(1):1,u=r?new r(0):0,c=[e,t];if(n){if("sparse"===n)return s.diagonal(c,o,0,u);if("dense"===n)return a.diagonal(c,o,0,u);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var l=it([],c,u),h=e<t?e:t,p=0;p<h;p++)l[p][p]=o;return l}}));function lr(){throw new Error('No "bignumber" implementation available')}function hr(){throw new Error('No "fraction" implementation available')}function pr(){throw new Error('No "matrix" implementation available')}var fr=ct("size",["typed","config","?matrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix;return t("size",{Matrix:function(e){return e.create(e.size())},Array:tt,string:function(e){return"Array"===n.matrix?[e.length]:r([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:r?r([]):pr()}})}));var mr=ct("zeros",["typed","config","matrix","BigNumber"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.BigNumber;return t("zeros",{"":function(){return"Array"===n.matrix?a([]):a([],"default")},"...number | BigNumber | string":function(e){if("string"===typeof e[e.length-1]){var t=e.pop();return a(e,t)}return"Array"===n.matrix?a(e):a(e,"default")},Array:a,Matrix:function(e){var t=e.storage();return a(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){U(e)&&(t=!0,r[n]=e.toNumber())})),t}(e)?new i(0):0;if(function(e){e.forEach((function(e){if("number"!==typeof e||!Ce(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var a=r(t);return e.length>0?a.resize(e,n):a}var s=[];return e.length>0?it(s,e,n):s}}));var dr=ct("smaller",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,a=ir({typed:t}),s=ur({typed:t,DenseMatrix:i}),o=or({typed:t,DenseMatrix:i}),u=nr({typed:t}),c=rr({typed:t}),l=t("smaller",{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!Ke(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!qt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return l(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return o(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(r(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,l,!0).valueOf()}});return l})),gr=ct("larger",["typed","config","matrix","DenseMatrix"],(function(e){var t=e.typed,n=e.config,r=e.matrix,i=e.DenseMatrix,a=ir({typed:t}),s=ur({typed:t,DenseMatrix:i}),o=or({typed:t,DenseMatrix:i}),u=nr({typed:t}),c=rr({typed:t}),l=t("larger",{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!Ke(e,t,n.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!qt(e,t,n.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return l(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,l)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,l,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,l,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,l)},"Array, Array":function(e,t){return l(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return l(r(e),t)},"Matrix, Array":function(e,t){return l(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,l,!1)},"DenseMatrix, any":function(e,t){return c(e,t,l,!1)},"any, SparseMatrix":function(e,t){return o(t,e,l,!0)},"any, DenseMatrix":function(e,t){return c(t,e,l,!0)},"Array, any":function(e,t){return c(r(e),t,l,!1).valueOf()},"any, Array":function(e,t){return c(r(t),e,l,!0).valueOf()}});return l}));ct("unequal",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})}));var vr=ct("FibonacciHeap",["smaller","larger"],(function(e){var t=e.smaller,n=e.larger,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function a(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,a=e.degree,o=e.child;a>0;){var u=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=u,a--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var a,o=Math.floor(Math.log(i)*r)+1,u=new Array(o),c=0,l=e;if(l)for(c++,l=l.right;l!==e;)c++,l=l.right;for(;c>0;){for(var h=l.degree,p=l.right;a=u[h];){if(n(l.key,a.key)){var f=a;a=l,l=f}s(a,l),u[h]=null,h++}u[h]=l,l=p,c--}e=null;for(var m=0;m<o;m++)(a=u[m])&&(e?(a.left.right=a.right,a.right.left=a.left,a.left=e,a.right=e.right,e.right=a,a.right.left=a,t(a.key,e.key)&&(e=a)):e=a);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=r;var i=n.parent;i&&t(n.key,i.key)&&(a(e,n,i),function e(t,n){var r=n.parent;if(!r)return;n.mark?(a(t,n,r),e(r)):n.mark=!0}(e,i));t(n.key,e.key)&&(e=n);return e}(this._minimum,e,-1),this.extractMinimum()};var s=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),yr=ct("dot",["typed","addScalar","multiplyScalar","conj","size"],(function(e){var t=e.typed,n=e.addScalar,r=e.multiplyScalar,i=e.conj,a=e.size;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,a){var u=s(e,a),c=K(e)?e._data:e,l=K(e)?e._datatype:void 0,h=K(a)?a._data:a,p=K(a)?a._datatype:void 0,f=2===o(e).length,m=2===o(a).length,d=n,g=r;if(l&&p&&l===p&&"string"===typeof l){var v=l;d=t.find(n,[v,v]),g=t.find(r,[v,v])}if(!f&&!m){for(var y=g(i(c[0]),h[0]),x=1;x<u;x++)y=d(y,g(i(c[x]),h[x]));return y}if(!f&&m){for(var b=g(i(c[0]),h[0][0]),w=1;w<u;w++)b=d(b,g(i(c[w]),h[w][0]));return b}if(f&&!m){for(var S=g(i(c[0][0]),h[0]),T=1;T<u;T++)S=d(S,g(i(c[T][0]),h[T]));return S}if(f&&m){for(var _=g(i(c[0][0]),h[0][0]),A=1;A<u;A++)_=d(_,g(i(c[A][0]),h[A][0]));return _}},"SparseMatrix, SparseMatrix":function(e,t){s(e,t);var i=e._index,a=e._values,o=t._index,u=t._values,c=0,l=n,h=r,p=0,f=0;for(;p<i.length&&f<o.length;){var m=i[p],d=o[f];m<d?p++:m>d?f++:m===d&&(c=l(c,h(a[p],u[f])),p++,f++)}return c}});function s(e,t){var n,r,i=o(e),a=o(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===a.length)r=a[0];else{if(2!==a.length||1!==a[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+a.join(", ")+")");r=a[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function o(e){return K(e)?e.size():a(e)}})),xr=ct("isZero",["typed"],(function(e){var t=(0,e.typed)("isZero",{number:zt,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return t(e.value)},"Array | Matrix":function(e){return Ot(e,t)}});return t})),br=ct("abs",["typed"],(function(e){var t=(0,e.typed)("abs",{number:Ht,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return Ot(e,t,!0)},Unit:function(e){return e.abs()}});return t})),wr=ct("multiply",["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(function(e){var t=e.typed,n=e.matrix,r=e.addScalar,i=e.multiplyScalar,a=e.equalScalar,s=e.dot,o=sr({typed:t,equalScalar:a}),u=rr({typed:t}),c=t("multiply",_e({"Array, Array":function(e,t){l(tt(e),tt(t));var r=c(n(e),n(t));return K(r)?r.valueOf():r},"Matrix, Matrix":function(e,n){var a=e.size(),o=n.size();return l(a,o),1===a.length?1===o.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return s(e,t)}(e,n,a[0]):function(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var a,s=e._data,o=e._size,u=e._datatype,c=n._data,l=n._size,h=n._datatype,p=o[0],f=l[1],m=r,d=i;u&&h&&u===h&&"string"===typeof u&&(a=u,m=t.find(r,[a,a]),d=t.find(i,[a,a]));for(var g=[],v=0;v<f;v++){for(var y=d(s[0],c[0][v]),x=1;x<p;x++)y=m(y,d(s[x],c[x][v]));g[v]=y}return e.createDenseMatrix({data:g,size:[f],datatype:a})}(e,n)}(e,n):1===o.length?h(e,n):p(e,n)},"Matrix, Array":function(e,t){return c(e,n(t))},"Array, Matrix":function(e,t){return c(n(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return o(e,t,i,!1)},"DenseMatrix, any":function(e,t){return u(e,t,i,!1)},"any, SparseMatrix":function(e,t){return o(t,e,i,!0)},"any, DenseMatrix":function(e,t){return u(t,e,i,!0)},"Array, any":function(e,t){return u(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(e,t,n){for(var r=c(e,t),i=0;i<n.length;i++)r=c(r,n[i]);return r}},i.signatures));function l(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var a,s=e._data,o=e._size,u=e._datatype,c=n._data,l=n._datatype,h=o[0],p=o[1],f=r,m=i;u&&l&&u===l&&"string"===typeof u&&(a=u,f=t.find(r,[a,a]),m=t.find(i,[a,a]));for(var d=[],g=0;g<h;g++){for(var v=s[g],y=m(v[0],c[0]),x=1;x<p;x++)y=f(y,m(v[x],c[x]));d[g]=y}return e.createDenseMatrix({data:d,size:[h],datatype:a})},"SparseMatrix, any":function(e,n){var s=e._values,o=e._index,u=e._ptr,c=e._datatype;if(!s)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,h=n._data,p=n._datatype,f=e._size[0],m=n._size[0],d=[],g=[],v=[],y=r,x=i,b=a,w=0;c&&p&&c===p&&"string"===typeof c&&(l=c,y=t.find(r,[l,l]),x=t.find(i,[l,l]),b=t.find(a,[l,l]),w=t.convert(0,l));var S=[],T=[];v[0]=0;for(var _=0;_<m;_++){var A=h[_];if(!b(A,w))for(var E=u[_],k=u[_+1],M=E;M<k;M++){var N=o[M];T[N]?S[N]=y(S[N],x(A,s[M])):(T[N]=!0,g.push(N),S[N]=x(A,s[M]))}}for(var I=g.length,C=0;C<I;C++){var D=g[C];d[C]=S[D]}return v[1]=g.length,e.createSparseMatrix({values:d,index:g,ptr:v,size:[f,1],datatype:l})}}),p=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var a,s=e._data,o=e._size,u=e._datatype,c=n._data,l=n._size,h=n._datatype,p=o[0],f=o[1],m=l[1],d=r,g=i;u&&h&&u===h&&"string"===typeof u&&(a=u,d=t.find(r,[a,a]),g=t.find(i,[a,a]));for(var v=[],y=0;y<p;y++){var x=s[y];v[y]=[];for(var b=0;b<m;b++){for(var w=g(x[0],c[0][b]),S=1;S<f;S++)w=d(w,g(x[S],c[S][b]));v[y][b]=w}}return e.createDenseMatrix({data:v,size:[p,m],datatype:a})},"DenseMatrix, SparseMatrix":function(e,n){var s=e._data,o=e._size,u=e._datatype,c=n._values,l=n._index,h=n._ptr,p=n._size,f=n._datatype;if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var m,d=o[0],g=p[1],v=r,y=i,x=a,b=0;u&&f&&u===f&&"string"===typeof u&&(m=u,v=t.find(r,[m,m]),y=t.find(i,[m,m]),x=t.find(a,[m,m]),b=t.convert(0,m));for(var w=[],S=[],T=[],_=n.createSparseMatrix({values:w,index:S,ptr:T,size:[d,g],datatype:m}),A=0;A<g;A++){T[A]=S.length;var E=h[A],k=h[A+1];if(k>E)for(var M=0,N=0;N<d;N++){for(var I=N+1,C=void 0,D=E;D<k;D++){var L=l[D];M!==I?(C=y(s[N][L],c[D]),M=I):C=v(C,y(s[N][L],c[D]))}M!==I||x(C,b)||(S.push(N),w.push(C))}}return T[g]=S.length,_},"SparseMatrix, DenseMatrix":function(e,n){var s=e._values,o=e._index,u=e._ptr,c=e._datatype;if(!s)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var l,h=n._data,p=n._datatype,f=e._size[0],m=n._size[0],d=n._size[1],g=r,v=i,y=a,x=0;c&&p&&c===p&&"string"===typeof c&&(l=c,g=t.find(r,[l,l]),v=t.find(i,[l,l]),y=t.find(a,[l,l]),x=t.convert(0,l));for(var b=[],w=[],S=[],T=e.createSparseMatrix({values:b,index:w,ptr:S,size:[f,d],datatype:l}),_=[],A=[],E=0;E<d;E++){S[E]=w.length;for(var k=E+1,M=0;M<m;M++){var N=h[M][E];if(!y(N,x))for(var I=u[M],C=u[M+1],D=I;D<C;D++){var L=o[D];A[L]!==k?(A[L]=k,w.push(L),_[L]=v(N,s[D])):_[L]=g(_[L],v(N,s[D]))}}for(var R=S[E],O=w.length,F=R;F<O;F++){var P=w[F];b[F]=_[P]}}return S[d]=w.length,T},"SparseMatrix, SparseMatrix":function(e,n){var a,s=e._values,o=e._index,u=e._ptr,c=e._datatype,l=n._values,h=n._index,p=n._ptr,f=n._datatype,m=e._size[0],d=n._size[1],g=s&&l,v=r,y=i;c&&f&&c===f&&"string"===typeof c&&(a=c,v=t.find(r,[a,a]),y=t.find(i,[a,a]));for(var x,b,w,S,T,_,A,E,k=g?[]:void 0,M=[],N=[],I=e.createSparseMatrix({values:k,index:M,ptr:N,size:[m,d],datatype:a}),C=g?[]:void 0,D=[],L=0;L<d;L++){N[L]=M.length;var R=L+1;for(T=p[L],_=p[L+1],S=T;S<_;S++)if(E=h[S],g)for(b=u[E],w=u[E+1],x=b;x<w;x++)A=o[x],D[A]!==R?(D[A]=R,M.push(A),C[A]=y(l[S],s[x])):C[A]=v(C[A],y(l[S],s[x]));else for(b=u[E],w=u[E+1],x=b;x<w;x++)A=o[x],D[A]!==R&&(D[A]=R,M.push(A));if(g)for(var O=N[L],F=M.length,P=O;P<F;P++){var U=M[P];k[P]=C[U]}}return N[d]=M.length,I}});return c}));function Sr(e,t,n,r){if(!(this instanceof Sr))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(void 0!==r&&null!==r?"-"+r:"")+" expected)",this.stack=(new Error).stack}Sr.prototype=new Error,Sr.prototype.constructor=Error,Sr.prototype.name="ArgumentsError",Sr.prototype.isArgumentsError=!0;n(4);var Tr=ct("Spa",["addScalar","equalScalar","FibonacciHeap"],(function(e){var t=e.addScalar,n=e.equalScalar,r=e.FibonacciHeap;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,a=this._values,s=[],o=i.extractMinimum();for(o&&s.push(o);o&&o.key<=t;)o.key>=e&&(n(o.value,0)||r(o.key,o.value,this)),(o=i.extractMinimum())&&s.push(o);for(var u=0;u<s.length;u++){var c=s[u];a[(o=i.insert(c.key,c.value)).key]=o}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i}),{isClass:!0});function _r(e){var t;if(Ce(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:jn(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*_r(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,a=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*e))}--e,t=Er[0];for(var s=1;s<Er.length;++s)t+=Er[s]/(e+s);var o=e+Ar+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,e+.5)*Math.exp(-o)*t}_r.signature="number";var Ar=4.7421875,Er=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],kr=ct("bignumber",["typed","BigNumber"],(function(e){var t=e.typed,n=e.BigNumber,r=t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){return new n(e)},BigNumber:function(e){return e},Fraction:function(e){return new n(e.n).div(e.d).times(e.s)},null:function(e){return new n(0)},"Array | Matrix":function(e){return Ot(e,r)}});return r})),Mr=ct("numeric",["number","?bignumber","?fraction"],(function(e){var t=e.number,n=e.bignumber,r=e.fraction,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:function(e){return t(e)},BigNumber:n?function(e){return n(e)}:lr,Fraction:r?function(e){return r(e)}:hr};return function(e,t){var n=be(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in a))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(a).join(", "));return t===n?e:a[t](e)}}));var Nr=ct("subtract",["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.addScalar,a=e.unaryMinus,s=e.DenseMatrix,o=er({typed:t}),u=ir({typed:t}),c=ar({typed:t,equalScalar:r}),l=tr({typed:t,DenseMatrix:s}),h=nr({typed:t}),p=rr({typed:t}),f=t("subtract",{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var n=e.clone();return n.value=f(n.value,t.value),n.fixPrefix=!1,n},"SparseMatrix, SparseMatrix":function(e,t){return Ir(e,t),c(e,t,f)},"SparseMatrix, DenseMatrix":function(e,t){return Ir(e,t),u(t,e,f,!0)},"DenseMatrix, SparseMatrix":function(e,t){return Ir(e,t),o(e,t,f,!1)},"DenseMatrix, DenseMatrix":function(e,t){return Ir(e,t),h(e,t,f)},"Array, Array":function(e,t){return f(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return f(n(e),t)},"Matrix, Array":function(e,t){return f(e,n(t))},"SparseMatrix, any":function(e,t){return l(e,a(t),i)},"DenseMatrix, any":function(e,t){return p(e,t,f)},"any, SparseMatrix":function(e,t){return l(t,e,f,!0)},"any, DenseMatrix":function(e,t){return p(t,e,f,!0)},"Array, any":function(e,t){return p(n(e),t,f,!1).valueOf()},"any, Array":function(e,t){return p(n(t),e,f,!0).valueOf()}});return f}));function Ir(e,t){var n=e.size(),r=t.size();if(n.length!==r.length)throw new $e(n.length,r.length)}var Cr=ct("equal",["typed","matrix","equalScalar","DenseMatrix"],(function(e){var t=e.typed,n=e.matrix,r=e.equalScalar,i=e.DenseMatrix,a=ir({typed:t}),s=ur({typed:t,DenseMatrix:i}),o=or({typed:t,DenseMatrix:i}),u=nr({typed:t}),c=rr({typed:t}),l=t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,r)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,r,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,r,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,r)},"Array, Array":function(e,t){return l(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return l(n(e),t)},"Matrix, Array":function(e,t){return l(e,n(t))},"SparseMatrix, any":function(e,t){return o(e,t,r,!1)},"DenseMatrix, any":function(e,t){return c(e,t,r,!1)},"any, SparseMatrix":function(e,t){return o(t,e,r,!0)},"any, DenseMatrix":function(e,t){return c(t,e,r,!0)},"Array, any":function(e,t){return c(n(e),t,r,!1).valueOf()},"any, Array":function(e,t){return c(n(t),e,r,!0).valueOf()}});return l})),Dr=(ct("equal",["typed","equalScalar"],(function(e){var t=e.typed,n=e.equalScalar;return t("equal",{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})})),ct("divideScalar",["typed","numeric"],(function(e){var t=e.typed,n=e.numeric,r=t("divideScalar",{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var i=e.clone(),a=n(1,be(t));return i.value=r(null===i.value?i._normalize(a):i.value,t),i},"number | Fraction | BigNumber, Unit":function(e,t){var i=t.clone();i=i.pow(-1);var a=n(1,be(e));return i.value=r(e,null===t.value?t._normalize(a):t.value),i},"Unit, Unit":function(e,t){return e.divide(t)}});return r})));var Lr=ct("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(function(e){var t=e.typed,n=e.matrix,r=e.abs,i=e.addScalar,a=e.divideScalar,s=e.multiplyScalar,o=e.subtract,u=e.larger,c=e.equalScalar,l=e.unaryMinus,h=e.DenseMatrix,p=e.SparseMatrix,f=e.Spa;return t("lup",{DenseMatrix:function(e){return m(e)},SparseMatrix:function(e){return d(e)},Array:function(e){var t=m(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function m(e){var t,n,l,p=e._size[0],f=e._size[1],m=Math.min(p,f),d=Se(e._data),g=[],v=[p,m],y=[],x=[m,f],b=[];for(t=0;t<p;t++)b[t]=t;for(n=0;n<f;n++){if(n>0)for(t=0;t<p;t++){var w=Math.min(t,n),S=0;for(l=0;l<w;l++)S=i(S,s(d[t][l],d[l][n]));d[t][n]=o(d[t][n],S)}var T=n,_=0,A=0;for(t=n;t<p;t++){var E=d[t][n],k=r(E);u(k,_)&&(T=t,_=k,A=E)}if(n!==T&&(b[n]=[b[T],b[T]=b[n]][0],h._swapRows(n,T,d)),n<p)for(t=n+1;t<p;t++){var M=d[t][n];c(M,0)||(d[t][n]=a(d[t][n],A))}}for(n=0;n<f;n++)for(t=0;t<p;t++)0===n&&(t<f&&(y[t]=[]),g[t]=[]),t<n?(t<f&&(y[t][n]=d[t][n]),n<p&&(g[t][n]=0)):t!==n?(t<f&&(y[t][n]=0),n<p&&(g[t][n]=d[t][n])):(t<f&&(y[t][n]=d[t][n]),n<p&&(g[t][n]=1));var N=new h({data:g,size:v}),I=new h({data:y,size:x}),C=[];for(t=0,m=b.length;t<m;t++)C[b[t]]=t;return{L:N,U:I,p:C,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function d(e){var t,n,i,o=e._size[0],h=e._size[1],m=Math.min(o,h),d=e._values,g=e._index,v=e._ptr,y=[],x=[],b=[],w=[o,m],S=[],T=[],_=[],A=[m,h],E=[],k=[];for(t=0;t<o;t++)E[t]=t,k[t]=t;var M=function(){var e=new f;n<o&&(b.push(y.length),y.push(1),x.push(n)),_.push(S.length);var h=v[n],m=v[n+1];for(i=h;i<m;i++)t=g[i],e.set(E[t],d[i]);n>0&&e.forEach(0,n-1,(function(t,n){p._forEachRow(t,y,x,b,(function(r,i){r>t&&e.accumulate(r,l(s(i,n)))}))}));var M=n,N=e.get(n),I=r(N);e.forEach(n+1,o-1,(function(e,t){var n=r(t);u(n,I)&&(M=e,I=n,N=t)})),n!==M&&(p._swapRows(n,M,w[1],y,x,b),p._swapRows(n,M,A[1],S,T,_),e.swap(n,M),function(e,t){var n=k[e],r=k[t];E[n]=t,E[r]=e,k[e]=r,k[t]=n}(n,M)),e.forEach(0,o-1,(function(e,t){e<=n?(S.push(t),T.push(e)):(t=a(t,N),c(t,0)||(y.push(t),x.push(e)))}))};for(n=0;n<h;n++)M();return _.push(S.length),b.push(y.length),{L:new p({values:y,index:x,ptr:b,size:w}),U:new p({values:S,index:T,ptr:_,size:A}),p:E,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}));var Rr=ct("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(function(e){var t=e.typed,n=e.matrix,r=e.subtract,i=e.multiply,a=e.unaryMinus,s=e.lup;return t("det",{any:function(e){return Se(e)},"Array | Matrix":function(e){var t;switch((t=K(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return Se(e);case 1:if(1===t[0])return Se(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+Qe(t)+")");case 2:var o=t[0],u=t[1];if(o===u)return function(e,t,n){if(1===t)return Se(e[0][0]);if(2===t)return r(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var o=s(e),u=o.U[0][0],c=1;c<t;c++)u=i(u,o.U[c][c]);for(var l=0,h=0,p=[];;){for(;p[h];)h++;if(h>=t)break;for(var f=h,m=0;!p[o.p[f]];)p[o.p[f]]=!0,f=o.p[f],m++;m%2===0&&l++}return l%2===0?u:a(u)}(e.clone().valueOf(),o);throw new RangeError("Matrix must be square (size: "+Qe(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Qe(t)+")")}}})}));function Or(){return(Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Fr=ct("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],(function(e){var t=e.typed,n=e.matrix,r=e.zeros,i=e.identity,a=e.isZero,s=e.equal,o=e.sign,u=e.sqrt,c=e.conj,l=e.unaryMinus,h=e.addScalar,p=e.divideScalar,f=e.multiplyScalar,m=e.subtract,d=e.complex;return Or(t("qr",{DenseMatrix:function(e){return v(e)},SparseMatrix:function(e){return function(e){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=v(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:g});function g(e){var t,n,d,g=e._size[0],v=e._size[1],y=i([g],"dense"),x=y._data,b=e.clone(),w=b._data,S=r([g],"");for(d=0;d<Math.min(v,g);++d){var T=w[d][d],_=l(s(T,0)?1:o(T)),A=c(_),E=0;for(t=d;t<g;t++)E=h(E,f(w[t][d],c(w[t][d])));var k=f(_,u(E));if(!a(k)){var M=m(T,k);for(S[d]=1,t=d+1;t<g;t++)S[t]=p(w[t][d],M);var N=l(c(p(M,k))),I=void 0;for(n=d;n<v;n++){for(I=0,t=d;t<g;t++)I=h(I,f(c(S[t]),w[t][n]));for(I=f(I,N),t=d;t<g;t++)w[t][n]=f(m(w[t][n],f(S[t],I)),A)}for(t=0;t<g;t++){for(I=0,n=d;n<g;n++)I=h(I,f(x[t][n],S[n]));for(I=f(I,N),n=d;n<g;++n)x[t][n]=p(m(x[t][n],f(I,c(S[n]))),A)}}}return{Q:y,R:b,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function v(e){var t=g(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?d(0):0,i=0;i<n.length;++i)for(var a=0;a<i&&a<(n[0]||[]).length;++a)n[i][a]=r;return t}})),Pr=ct("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(function(e){var t=e.typed,n=e.matrix,r=e.divideScalar,i=e.addScalar,a=e.multiply,s=e.unaryMinus,o=e.det,u=e.identity,c=e.abs;return t("inv",{"Array | Matrix":function(e){var t=K(e)?e.size():tt(e);switch(t.length){case 1:if(1===t[0])return K(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+Qe(t)+")");case 2:var i=t[0],a=t[1];if(i===a)return K(e)?n(l(e.valueOf(),i,a),e.storage()):l(e,i,a);throw new RangeError("Matrix must be square (size: "+Qe(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Qe(t)+")")}},any:function(e){return r(1,e)}});function l(e,t,n){var l,h,p,f,m;if(1===t){if(0===(f=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,f)]]}if(2===t){var d=o(e);if(0===d)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],d),r(s(e[0][1]),d)],[r(s(e[1][0]),d),r(e[0][0],d)]]}var g=e.concat();for(l=0;l<t;l++)g[l]=g[l].concat();for(var v=u(t).valueOf(),y=0;y<n;y++){var x=c(g[y][y]),b=y;for(l=y+1;l<t;)c(g[l][y])>x&&(x=c(g[l][y]),b=l),l++;if(0===x)throw Error("Cannot calculate inverse, determinant is zero");(l=b)!==y&&(m=g[y],g[y]=g[l],g[l]=m,m=v[y],v[y]=v[l],v[l]=m);var w=g[y],S=v[y];for(l=0;l<t;l++){var T=g[l],_=v[l];if(l!==y){if(0!==T[y]){for(p=r(s(T[y]),w[y]),h=y;h<n;h++)T[h]=i(T[h],a(p,w[h]));for(h=0;h<n;h++)_[h]=i(_[h],a(p,S[h]))}}else{for(p=w[y],h=y;h<n;h++)T[h]=r(T[h],p);for(h=0;h<n;h++)_[h]=r(_[h],p)}}}return v}}));var Ur,zr,Vr,qr,Gr,Br,Kr,jr,Hr,Wr,Xr,Zr=mt({}),Yr=wt({config:Ie}),Jr=St({}),Qr=Et({}),$r=kt({Matrix:Jr}),ei=Ct({BigNumber:Yr,Complex:Zr,DenseMatrix:$r,Fraction:Qr}),ti=Gt({config:Ie,typed:ei}),ni=Bt({typed:ei}),ri=Kt({Complex:Zr,typed:ei}),ii=dn({typed:ei}),ai=gn({BigNumber:Yr,Fraction:Qr,complex:ri,typed:ei}),si=Wn({Fraction:Qr,typed:ei}),oi=Xn({typed:ei}),ui=Zn({typed:ei}),ci=Yn({Complex:Zr,config:Ie,typed:ei}),li=Jn({typed:ei}),hi=Qn({Matrix:Jr,equalScalar:ti,typed:ei}),pi=$n({DenseMatrix:$r,Matrix:Jr,SparseMatrix:hi,typed:ei}),fi=cr({BigNumber:Yr,DenseMatrix:$r,SparseMatrix:hi,config:Ie,matrix:pi,typed:ei}),mi=fr({matrix:pi,config:Ie,typed:ei}),di=mr({BigNumber:Yr,config:Ie,matrix:pi,typed:ei}),gi=dr({DenseMatrix:$r,config:Ie,matrix:pi,typed:ei}),vi=gr({DenseMatrix:$r,config:Ie,matrix:pi,typed:ei}),yi=vr({larger:vi,smaller:gi}),xi=yr({addScalar:ui,conj:li,multiplyScalar:ii,size:mi,typed:ei}),bi=xr({typed:ei}),wi=br({typed:ei}),Si=wr({addScalar:ui,dot:xi,equalScalar:ti,matrix:pi,multiplyScalar:ii,typed:ei}),Ti=Tr({FibonacciHeap:yi,addScalar:ui,equalScalar:ti}),_i=kr({BigNumber:Yr,typed:ei}),Ai=Mr({bignumber:_i,fraction:si,number:ni}),Ei=Nr({DenseMatrix:$r,addScalar:ui,equalScalar:ti,matrix:pi,typed:ei,unaryMinus:oi}),ki=Cr({DenseMatrix:$r,equalScalar:ti,matrix:pi,typed:ei}),Mi=Dr({numeric:Ai,typed:ei}),Ni=Lr({DenseMatrix:$r,Spa:Ti,SparseMatrix:hi,abs:wi,addScalar:ui,divideScalar:Mi,equalScalar:ti,larger:vi,matrix:pi,multiplyScalar:ii,subtract:Ei,typed:ei,unaryMinus:oi}),Ii=Rr({lup:Ni,matrix:pi,multiply:Si,subtract:Ei,typed:ei,unaryMinus:oi}),Ci=Fr({addScalar:ui,complex:ri,conj:li,divideScalar:Mi,equal:ki,identity:fi,isZero:bi,matrix:pi,multiplyScalar:ii,sign:ai,sqrt:ci,subtract:Ei,typed:ei,unaryMinus:oi,zeros:di}),Di=Pr({abs:wi,addScalar:ui,det:Ii,divideScalar:Mi,identity:fi,matrix:pi,multiply:Si,typed:ei,unaryMinus:oi}),Li=new R.GPU;Ur=Symbol.for("+"),zr=Symbol.for("-"),Vr=Symbol.for("*"),qr=Symbol.for("**"),Gr=Symbol.for("/"),Br=Symbol.for("^"),Kr=Symbol.for("=="),jr=Symbol.for("===");var Ri=function(){function e(t){if(C(this,e),this.val=void 0,this.rows=void 0,this.cols=void 0,this.mode=void 0,this.digits=void 0,this.mode="",this.digits=-1,this.val=[],this.rows=0,this.cols=0,"number"===typeof t)return this.val=[[t]],this.rows=1,this.cols=1,this;Array.isArray(t)&&(Array.isArray(t[0])?this.init(t):this.initVec(t))}return L(e,[{key:"clear",value:function(){return this.val=[],this.rows=0,this.cols=0,this.digits=-1,this.mode="",this}}]),L(e,[{key:"dimensions",value:function(){return Array.from([this.rows,this.cols])}},{key:"isVector",value:function(){return this.rows<=1}},{key:"init",value:function(e){if(this.clear(),this.rows=e.length,this.rows>0){for(var t=0,n=0;n<this.rows;n++)e[n].length>t&&(t=e[n].length);this.cols=t}else this.cols=0;for(var r=0;r<e.length;r++){var i=p(e[r]);this.cols>e[r].length&&i.push.apply(i,p(Array(this.cols-e[r].length).fill(0))),this.val.push(i)}return this}},{key:"dimCheck",value:function(e,t){if(e>=this.rows||e<0||t>this.cols||t<0||!1===Number.isInteger(e)||!1===Number.isInteger(t))throw new Error("Invalid row or column")}},{key:"min",value:function(){return Math.min.apply(Math,p(this.toArray()))}},{key:"max",value:function(){return Math.max.apply(Math,p(this.toArray()))}},{key:"initVec",value:function(e){return this.clear(),this.rows=1,this.cols=e.length,this.val.push(p(e)),this}},{key:"range",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],i=0,a=0;if(null===t?(i=0,a=e):(i=e,a=t),i<a){for(var s=i;s<a;s+=n)r.push(s);return this.initVec(r)}for(var o=i;o>a;o+=n)r.push(o);return this.initVec(r)}},{key:"clone",value:function(){var t=new e;t.rows=this.rows,t.cols=this.cols,t.digits=this.digits,t.mode=this.mode;for(var n=0;n<this.val.length;n++)t.val.push(p(this.val[n]));return t}},{key:"copy",value:function(e){return this.init(e.val),this.cols=e.cols,this.rows=e.rows,this.digits=e.digits,this.mode=e.mode,this}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;if(this.cols!==e.cols||this.rows!==e.rows)return!1;var n=this.minus(e).squareSum();return n<=t}},{key:"Ns",value:function(e,t,n){this.clear(),this.rows=e,this.cols=t;for(var r=0;r<e;r++)this.val.push(Array(t).fill(n));return this}},{key:"zeros",value:function(e,t){return t?this.Ns(e,t,0):this.Ns(e,e,0)}},{key:"ones",value:function(e,t){return t?this.Ns(e,t,1):this.Ns(e,e,1)}},{key:"diag",value:function(e){this.clear(),this.zeros(e.length,e.length);for(var t=0;t<e.length;t++)this.val[t][t]=e[t];return this}},{key:"eye",value:function(e,t){if(t){this.clear(),this.zeros(e,t);for(var n=0;n<Math.min(e,t);n++)this.val[n][n]=1;return this}var r=Array(e).fill(1);return this.diag(r)}},{key:"random",value:function(e,t){t||(t=e),this.clear(),this.zeros(e,t);for(var n=0;n<this.rows;n++)for(var r=0;r<this.cols;r++)this.val[n][r]=Math.random();return this}},{key:"T",value:function(){for(var t=(new e).zeros(this.cols,this.rows),n=0;n<this.rows;n++)for(var r=0;r<this.cols;r++)t.val[r][n]=this.val[n][r];return t}},{key:"transpose",value:function(){return this.T()}},{key:"each",value:function(e){for(var t=0;t<this.rows;t++)for(var n=0;n<this.cols;n++)this.val[t][n]=e(this.val[t][n]);return this}},{key:"addScalar",value:function(e){var t=this.clone();return t.each((function(t){return t+e})),t}},{key:"multiplyScalar",value:function(e){var t=this.clone();return t.each((function(t){return t*e})),t.clone()}},{key:"minusScalar",value:function(e){return this.addScalar(-1*e)}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"add",value:function(e){return Oi(this,e)}},{key:"minus",value:function(e){return Fi(this,e)}},{key:"multiply",value:function(e){return Pi(this,e)}},{key:"dotMultiply",value:function(e){return Vi(this,e)}},{key:"divide",value:function(e){return qi(this,e)}},{key:Ur,value:function(t){return Array.isArray(t)?Oi(this,new e(t)):"number"===typeof t?this.addScalar(t):Oi(this,t)}},{key:zr,value:function(t){return Array.isArray(t)?Fi(this,new e(t)):"number"===typeof t?this.minusScalar(t):Fi(this,t)}},{key:Vr,value:function(t){return Array.isArray(t)?Pi(this,new e(t)):"number"===typeof t?this.multiplyScalar(t):Pi(this,t)}},{key:qr,value:function(t){if(Array.isArray(t))return Vi(this,new e(t));if("number"===typeof t){for(var n=this.clone(),r=1;r<t;r++)zi(n,this);return n}return Vi(this,t)}},{key:Gr,value:function(t){return"number"===typeof t?this.divideScalar(t):Array.isArray(t)?qi(this,new e(t)):qi(this,t)}},{key:Br,value:function(t){if(this.rows!==this.cols)throw new Error("This matrix does not support ^ operator");if(-1===t)return new e(Di(this.val));if(!Number.isInteger(t)||t<1)throw new Error("This right operand does not support ^ operator");for(var n=this.clone(),r=2;r<=t;r++)Ui(n,this);return n}},{key:Kr,value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;if(Array.isArray(t)){var r=new e(t);return this.equals(r)}if("number"===typeof t){if(1!==this.rows||1!==this.cols)throw new Error("This matrix cannot be compared with a scalar");return(this.val[0][0]-t)*(this.val[0][0]-t)<n}return this.equals(t)}},{key:jr,value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;if(Array.isArray(t)){var r=new e(t);return this.equals(r)}if("number"===typeof t){if(1!==this.rows||1!==this.cols)throw new Error("This matrix cannot be compared with a scalar");return(this.val[0][0]-t)*(this.val[0][0]-t)<n}return this.equals(t)}},{key:"set",value:function(e,t,n){return this.dimCheck(e,t),this.val[e][t]=n,this}},{key:"get",value:function(e,t){return this.dimCheck(e,t),this.val[e][t]}},{key:"at",value:function(e,t){return this.dimCheck(e,t),this.val[e][t]}},{key:"row",value:function(t){return this.dimCheck(t,0),(new e).initVec(this.val[t])}},{key:"col",value:function(t){this.dimCheck(0,t);for(var n=Array(this.rows).fill(0),r=0;r<this.rows;r++)n[r]=this.val[r][t];return(new e).initVec(n)}},{key:"to2DArray",value:function(){return this.clone().val}},{key:"toArray",value:function(){var e;return(e=new Array).concat.apply(e,p(this.val))}},{key:"reshape",value:function(t,n){for(var r=(new e).zeros(t,n),i=this.toArray(),a=0,s=0;s<t;s++){for(var o=0;o<n&&a<i.length;o++)r.val[s][o]=i[a],a++;if(a>=i.length)break}return r}},{key:"subMatrix",value:function(t,n,r,i){if(t<0||n>this.rows||r<0||i>this.cols||t>n||r>i)throw new Error("Please check the dimensions of subMatrix");for(var a=(new e).zeros(n-t,i-r),s=t;s<n;s++)for(var o=s-t,u=r;u<i;u++){var c=u-r;a.val[o][c]=this.val[s][u]}return a}},{key:"resize",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(new e).Ns(t,n,r),a=Math.min(t,this.rows),s=Math.min(n,this.cols),o=0;o<a;o++)for(var u=0;u<s;u++)i.val[o][u]=this.val[o][u];return i}},{key:"Rows",value:function(e,t){return this.subMatrix(e,t,0,this.cols)}},{key:"Cols",value:function(e,t){return this.subMatrix(0,this.rows,e,t)}},{key:"RowVector",value:function(e){return p(this.val[e])}},{key:"ColVector",value:function(e){for(var t=[],n=0;n<this.rows;n++)t.push(this.val[n][e]);return t}},{key:"Row",value:function(t){return new e(this.RowVector(t))}},{key:"Col",value:function(t){return new e(this.ColVector(t))}},{key:"squareSum",value:function(){for(var e=0,t=0;t<this.rows;t++)for(var n=0;n<this.cols;n++){var r=this.val[t][n];e+=r*r}return e}},{key:"setDigits",value:function(e){return this.digits=e,this}},{key:"toString",value:function(){for(var e="",t=0;t<this.rows;t++){for(var n=0;n<this.cols;n++)-1===this.digits?e+=0===n?String(this.val[t][n]):"\t"+String(this.val[t][n]):e+=0===n?this.val[t][n].toFixed(this.digits):"\t"+this.val[t][n].toFixed(this.digits);t!==this.rows-1&&(e+="\n")}return e+"\n"}},{key:"toCsv",value:function(){return Gi(this)}},{key:"toJson",value:function(){return JSON.stringify(this)}},{key:"toTex",value:function(){for(var e="\\begin{bmatrix} ",t=0;t<this.rows;t++){for(var n=0;n<this.cols;n++)-1===this.digits?e+=0===n?String(this.val[t][n]):"  &  "+String(this.val[t][n]):e+=0===n?this.val[t][n].toFixed(this.digits):"  &  "+this.val[t][n].toFixed(this.digits);t!==this.rows-1&&(e+="  \\\\  ")}return e+" \\end{bmatrix}"}},{key:"log",value:function(){return console.log(this),this}},{key:"appendInRow",value:function(e){var t,n=e.clone();if(n.cols!==this.cols)throw new Error("Dimension does not match on  appendInRow()");return(t=this.val).push.apply(t,p(n.val)),this.rows+=n.rows,this}},{key:"appendInColumn",value:function(e){var t=e.clone();if(t.rows!==this.rows)throw new Error("Dimension does not match on  appendInColumn()");for(var n=0;n<this.rows;n++){var r;(r=this.val[n]).push.apply(r,p(t.val[n]))}return this.cols+=t.cols,this}}]),e}();function Oi(e,t){return function(e,t){if(e.rows!==t.rows||e.cols!==t.cols)throw new Error("Dimension does not match for operation:add");for(var n=e.rows,r=e.cols,i=0;i<n;i++)for(var a=0;a<r;a++)e.val[i][a]+=t.val[i][a];return e}(e.clone(),t)}function Fi(e,t){return function(e,t){if(e.rows!==t.rows||e.cols!==t.cols)throw new Error("Dimension does not match for operation:minus");for(var n=e.rows,r=e.cols,i=0;i<n;i++)for(var a=0;a<r;a++)e.val[i][a]-=t.val[i][a];return e}(e.clone(),t)}function Pi(e,t){if(e.cols!==t.rows)throw new Error("Dimension does not match for operation:muitiply");if("gpu"===e.mode||"gpu"===t.mode)return function(e,t){console.log("GPU is used for matrix multiplication acceleration.");var n=e.rows,r=e.cols,i=t.cols,a="function (a, b) {\n    let sum = 0;\n    for (let i = 0; i < "+r.toString()+"; i++) {\n        sum += a[this.thread.y][i] * b[i][this.thread.x];\n    }\n    return sum;\n}",s=Li.createKernel(a).setOutput([n,i])(e.val,t.val),o=new Ri;return o.val=s,o.rows=n,o.cols=i,o}(e,t);for(var n=e.rows,r=e.cols,i=t.cols,a=(new Ri).zeros(n,i),s=0;s<n;s++)for(var o=0;o<i;o++){for(var u=0,c=0;c<r;c++)u+=e.val[s][c]*t.val[c][o];a.val[s][o]=u}return a}function Ui(e,t){var n=Pi(e,t);return e.copy(n),e}function zi(e,t){if(e.rows!==t.rows||e.cols!==t.cols)throw new Error("Dimension does not match for operation:dot muitiply");for(var n=0;n<e.rows;n++)for(var r=0;r<e.cols;r++)e.val[n][r]*=t.val[n][r];return e}function Vi(e,t){return zi(e.clone(),t)}function qi(e,t){return function(e,t){return Ui(e,new Ri(Di(t.val)))}(e.clone(),t)}function Gi(e){for(var t="",n=0;n<e.rows;n++){for(var r=0;r<e.cols;r++)t+=0===r?String(e.val[n][r]):","+String(e.val[n][r]);t+="\n"}return t}function Bi(e){var t=new Ri;try{if(0===Bi.length)return t;var n=e.split("\n").filter((function(e){return e.length>0})),r=n.length,i=n[0].split(",").length;t.zeros(r,i);for(var a=0;a<r;a++){var s=n[a].split(",");if(s.length!==i)throw new Error("Current row "+a.toString()+" does not have same element as first row");for(var o=0;o<i;o++)t.val[a][o]=Number(s[o])}}catch(u){throw new Error("Cannot parse matrix from csv file. Exception: "+u)}return t}function Ki(e){return JSON.stringify(e)}function ji(e){var t=new Ri,n=JSON.parse(e);if(t.init(n.val),t.rows===n.rows&&t.cols===n.cols)return t;throw new Error("Fail to read matrix from json")}Hr=Symbol.for("+"),Wr=Symbol.for("-"),Xr=Symbol.for("*");var Hi=function(){function e(t){C(this,e),this.val=void 0,this.val=t}return L(e,[{key:Hr,value:function(e){return e.addScalar(this.val)}},{key:Wr,value:function(e){return e.multiplyScalar(-1).addScalar(this.val)}},{key:Xr,value:function(e){return e instanceof Ri?e.multiplyScalar(this.val):new Ri(e).multiplyScalar(this.val)}}]),e}();function Wi(e){return e instanceof Ri?e.clone():new Ri(e)}var Xi,Zi,Yi,Ji,Qi,$i={sin:function(e){return Wi(e).each(Math.sin)},cos:function(e){return Wi(e).each(Math.cos)},abs:function(e){return Wi(e).each(Math.abs)},acos:function(e){return Wi(e).each(Math.acos)},acosh:function(e){return Wi(e).each(Math.acosh)},sign:function(e){return Wi(e).each(Math.sign)},sqrt:function(e){return Wi(e).each(Math.sqrt)},trunc:function(e){return Wi(e).each(Math.trunc)},floor:function(e){return Wi(e).each(Math.floor)},ceil:function(e){return Wi(e).each(Math.ceil)},exp:function(e){return Wi(e).each(Math.exp)},log:function(e,t){return t?Wi(e).each((function(e){return Math.log(e)/Math.log(t)})):Wi(e).each(Math.log)},asin:function(e){return Wi(e).each(Math.asin)},asinh:function(e){return Wi(e).each(Math.asinh)},atan:function(e){return Wi(e).each(Math.atan)},atanh:function(e){return Wi(e).each(Math.atanh)},tan:function(e){return Wi(e).each(Math.tan)},tanh:function(e){return Wi(e).each(Math.tanh)},pow:function(e,t){return Wi(e).each((function(e){return Math.pow(e,t)}))},round:function(e){return Wi(e).each(Math.round)}},ea=n(2),ta=n.n(ea);Xi=Symbol.for("+"),Zi=Symbol.for("-"),Yi=Symbol.for("*"),Ji=Symbol.for("/"),Qi=Symbol.for("^");var na=function(){function e(t){C(this,e),this.expression=void 0,this.expression=t?"("+t+")":""}return L(e,[{key:Xi,value:function(t){if(t instanceof e)return new e(this.expression+"+"+t.expression);if("number"===typeof t)return new e(this.expression+"+"+t.toString());throw new Error("This right operand does not support + operator")}},{key:Zi,value:function(t){if(t instanceof e)return new e(this.expression+"-"+t.expression);if("number"===typeof t)return new e(this.expression+"-"+t.toString());throw new Error("This right operand does not support - operator")}},{key:Yi,value:function(t){if(t instanceof e)return new e(this.expression+"*"+t.expression);if("number"===typeof t)return new e(this.expression+"*"+t.toString());throw new Error("This right operand does not support * operator")}},{key:Ji,value:function(t){if(t instanceof e)return new e(this.expression+"/"+t.expression);if("number"===typeof t)return new e(this.expression+"/"+t.toString());throw new Error("This right operand does not support / operator")}},{key:Qi,value:function(t){if(t instanceof e)return new e(this.expression+"^"+t.expression);if("number"===typeof t)return new e(this.expression+"^"+t.toString());throw new Error("This right operand does not support ^ operator")}},{key:"toString",value:function(){return ta()(this.expression).toString()}},{key:"toTex",value:function(){return ta()(this.expression).toTeX()}}]),e}(),ra=function e(t){if(C(this,e),this.L=void 0,t.rows!==t.cols||0===t.rows||0===t.cols)throw new Error("Wrong dimension of matrix A.");for(var n=t.rows,r=(new Ri).zeros(n,n),i=0;i<n;i++)for(var a=0;a<i+1;a++){for(var s=0,o=0;o<a;o++)s+=r.val[i][o]*r.val[a][o];r.val[i][a]=i===a?Math.sqrt(t.val[i][i]-s):1/r.val[a][a]*(t.val[i][a]-s)}this.L=r},ia=function e(t){C(this,e),this.L=void 0,this.U=void 0,this.P=void 0;var n=Ni(t.val);this.L=new Ri(n.L),this.U=new Ri(n.U),this.P=new Ri(n.P)},aa=function e(t){C(this,e),this.Q=void 0,this.R=void 0;var n=Ci(t.val);this.Q=new Ri(n.Q),this.R=new Ri(n.R)},sa=function(){function e(){C(this,e),this.outputType=void 0,this.text=void 0,this.data=void 0,this.layout=void 0}return L(e,[{key:"isPrint",value:function(){return"print"===this.outputType}},{key:"isDraw",value:function(){return"draw"===this.outputType}},{key:"isTex",value:function(){return"tex"===this.outputType}},{key:"isFormulaTex",value:function(){return"formulaTex"===this.outputType}},{key:"isMarkdown",value:function(){return"markdown"===this.outputType}}]),e}();function oa(e){return new Ri(e)}function ua(e){return new na(e)}function ca(e){return new Hi(e)}function la(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new na(t?I.a.diff(e.toString(),t.toString(),n).text():I.a.diff(e.toString(),n).text())}function ha(e,t){return new na(t?I.a.integrate(e.toString(),t.toString()).text():I.a.integrate(e.toString()).text())}function pa(e){return Bi(e)}function fa(e){return Gi(e)}function ma(e){return ji(e)}function da(e){return Ki(e)}function ga(e){return e instanceof na?ua("sin("+e.expression+")"):$i.sin(e)}function va(e){return e instanceof na?ua("cos("+e.expression+")"):$i.cos(e)}function ya(e){return $i.abs(e)}function xa(e){return e instanceof na?ua("acos("+e.expression+")"):$i.acos(e)}function ba(e){return e instanceof na?ua("acosh("+e.expression+")"):$i.acosh(e)}function wa(e){return $i.sign(e)}function Sa(e){return $i.sqrt(e)}function Ta(e){return $i.trunc(e)}function _a(e){return $i.floor(e)}function Aa(e){return $i.ceil(e)}function Ea(e){return e instanceof na?ua("exp("+e.expression+")"):$i.exp(e)}function ka(e,t){return e instanceof na?ua("log("+e.expression+")"):$i.log(e,t)}function Ma(e){return e instanceof na?ua("asin("+e.expression+")"):$i.asin(e)}function Na(e){return e instanceof na?ua("asinh("+e.expression+")"):$i.asinh(e)}function Ia(e){return e instanceof na?ua("atan("+e.expression+")"):$i.atan(e)}function Ca(e){return e instanceof na?ua("atanh("+e.expression+")"):$i.atanh(e)}function Da(e){return e instanceof na?ua("tan("+e.expression+")"):$i.tan(e)}function La(e){return e instanceof na?ua("tanh("+e.expression+")"):$i.tanh(e)}function Ra(e,t){return $i.pow(e,t)}function Oa(e){return $i.round(e)}function Fa(e,t,n){return oa().Ns(e,t,n)}function Pa(e,t){return oa().ones(e,t)}function Ua(e,t){return oa().zeros(e,t)}function za(e){return oa().diag(e)}function Va(e,t){return oa().eye(e,t)}function qa(e,t){return oa().random(e,t)}function Ga(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return oa().range(e,t,n)}function Ba(e){return new ra(e)}function Ka(e){return new aa(e)}function ja(e){return new ia(e)}var Ha=0;function Wa(){Ha=performance.now()}function Xa(){Ya("Elapsed time: ".concat(performance.now()-Ha," milliseconds."))}var Za=[];function Ya(e){var t=new sa;t.outputType="print",t.text=e.toString(),Za.push(t)}function Ja(e,t){var n=new sa;n.outputType="draw",n.data=e,n.layout=t,Za.push(n)}function Qa(e,t){Ja([{x:e,y:t,type:"scatter",mode:"markers",marker:{color:"blue",size:"2"}}])}function $a(e,t){Ja([{x:e,y:t,type:"scatter",mode:"lines+markers",marker:{color:"blue",size:"4"}}])}function es(e,t,n){Ja([{x:e,y:t,z:n,mode:"markers",marker:{color:"blue",size:2},opacity:.5,type:"scatter3d"}],{})}function ts(e,t,n){Ja([{x:e,y:t,z:n,mode:"markers",marker:{color:"blue",size:2},opacity:.5,type:"mesh3d"}],{})}function ns(e){var t=new sa;t.outputType="tex",t.text=e,Za.push(t)}function rs(e){var t=new sa;t.outputType="formulaTex",t.text=e,Za.push(t)}function is(e){var t=new sa;t.outputType="markdown",t.text=e,Za.push(t)}x({output:e=>{try{return function(e){var t="";for(var n in i)t+="const ".concat(n," = prelude.").concat(n,";");var r=new Function("prelude",t+e+"\n return _OUTPUT_ITEMS_LIST_;").call({},i);console.log("Execution results:"),console.log(r);var a=p(r);return Za.length=0,a}(e)}catch(e){throw new Error(e.toString())}}})}]);